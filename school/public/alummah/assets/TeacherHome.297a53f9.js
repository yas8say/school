var we=Object.defineProperty;var ce=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var de=(p,l,i)=>l in p?we(p,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[l]=i,ue=(p,l)=>{for(var i in l||(l={}))$e.call(l,i)&&de(p,i,l[i]);if(ce)for(var i of ce(l))ke.call(l,i)&&de(p,i,l[i]);return p};var z=(p,l,i)=>new Promise((m,r)=>{var g=b=>{try{$(i.next(b))}catch(v){r(v)}},j=b=>{try{$(i.throw(b))}catch(v){r(v)}},$=b=>b.done?m(b.value):Promise.resolve(b.value).then(g,j);$((i=i.apply(p,l)).next())});import{d as o,e as n,f as e,_ as Q,L as oe,r as C,u as _e,w as U,o as W,t as a,g as L,y as c,F as X,G as Y,n as T,M as he,i as w,p as K,h as ee,x as te,H,C as ne,D as me,A as se,N as Ce,b as Se,E as je,O as Ae}from"./vendor.206e735d.js";import{session as ge}from"./session.6d05ea6e.js";import{r as ae,a as re,b as Me,c as pe,d as Ne,e as Ee,f as le,g as De,h as Ie,i as Le,j as Be}from"./XMarkIcon.6d2d8422.js";import"./index.48988228.js";function ie(p,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function Pe(p,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function ve(p,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Te(p,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function Re(p,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function xe(p,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function fe(p,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}function be(p,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ye(p,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const O=p=>(K("data-v-8b1e34ae"),p=p(),ee(),p),Fe={class:"min-h-screen bg-gray-50 p-4"},Ge={class:"mb-6"},Ve=O(()=>e("h1",{class:"text-2xl font-bold text-gray-800"},"Take Attendance",-1)),ze=O(()=>e("p",{class:"text-gray-600"},"Select students who are present today",-1)),Ue={key:0,class:"text-sm text-gray-500 mt-1"},Oe={class:"text-sm text-gray-500"},He={key:0,class:"flex justify-center items-center py-8"},Je=O(()=>e("div",{class:"spinner"},null,-1)),We=O(()=>e("span",{class:"ml-2 text-gray-600"},"Loading students...",-1)),Ze=[Je,We],qe={key:1,class:"space-y-3"},Qe={class:"flex justify-between items-center mb-4"},Xe={class:"text-sm text-gray-600"},Ye=["onClick"],Ke={class:"flex items-center space-x-4"},et={class:"flex-shrink-0"},tt={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm relative overflow-hidden"},st=["src"],ot={key:1,class:"text-white text-sm font-medium"},nt={class:"flex-1 min-w-0"},at={class:"font-medium text-gray-800 truncate"},rt={class:"flex items-center space-x-4 text-sm text-gray-600"},lt=O(()=>e("span",{class:"text-gray-400"},"\u2022",-1)),it={class:"truncate"},ct={class:"flex-shrink-0"},dt={key:2,class:"text-center py-8"},ut=O(()=>e("p",{class:"text-gray-600"},"No students available for this class",-1)),_t={key:3,class:"flex space-x-4 mt-6"},ht=O(()=>e("span",null,"Cancel",-1)),mt=["disabled"],gt=O(()=>e("span",null,"Refresh",-1)),pt={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},vt={class:"bg-white rounded-lg p-6 max-w-sm w-full mx-4"},xt=O(()=>e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Confirm Attendance",-1)),ft={class:"text-gray-600 mb-2"},bt={class:"text-gray-600 mb-6"},yt={class:"flex space-x-3"},wt={props:{selectedGroup:String},emits:["back-to-dashboard"],setup(p){const l=p,i=oe(),m=C([]),r=C([]),g=C(!0),j=C(!1),$=C(!1),b=_e(()=>new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),v=_=>_.base64profile&&_.base64profile!=="null"?_.base64profile.startsWith("data:")?_.base64profile:`data:image/jpeg;base64,${_.base64profile}`:null,B=_=>_?_.split(" ").map(E=>E.charAt(0)).join("").toUpperCase().substring(0,2):"?",M=_=>{_.target.style.display="none"},V=U({url:"school.al_ummah.api2.get_student_attendance_records",onSuccess(_){return console.log("Attendance data loaded:",_),_},onError(_){console.error("Error fetching attendance:",_),alert("Failed to load student data. Please check your connection and try again.")}}),F=U({url:"school.al_ummah.api2.mark_attendance",onSuccess(_){var E;if(console.log("Attendance marked successfully:",_),$.value=!1,_.status==="success"||((E=_.message)==null?void 0:E.includes("successfully")))alert("Success! "+(_.message||"Attendance has been marked successfully.")),i.push({name:"Teacherhome"});else if(_._server_messages){try{const k=JSON.parse(_._server_messages);if(k.length>0){const x=JSON.parse(k[0]);if(x.message&&x.message.includes("successfully")){alert("Success! "+x.message),i.push({name:"Teacherhome"});return}}}catch(k){console.error("Error parsing server messages:",k)}alert("Success! Attendance has been marked successfully."),i.push({name:"Teacherhome"})}else alert("Error: "+(_.message||"There was an issue marking attendance."))},onError(_){console.error("Error marking attendance:",_),$.value=!1,_.exc_type==="PermissionError"?alert("Permission denied: You do not have permission to mark attendance. Please contact your administrator."):alert("Failed to submit attendance. Please check your connection and try again.")}}),f=()=>z(this,null,function*(){g.value=!0;try{const _=l.selectedGroup||localStorage.getItem("selected_student_group");if(!_){alert("Please select a class first."),g.value=!1;return}const E={based_on:"Batch",student_group:_},k=yield V.fetch(E);if(!k||k.length===0){alert("No students found for this class."),m.value=[];return}m.value=k,r.value=k.map(x=>x.student)}catch(_){console.error("Error fetching attendance:",_),alert("Failed to load student data.")}finally{g.value=!1}}),y=()=>{r.value.length===m.value.length?r.value=[]:r.value=m.value.map(_=>_.student)},P=_=>{const E=r.value.indexOf(_);E>-1?r.value.splice(E,1):r.value.push(_)},s=()=>{if(r.value.length===0){alert("Please select at least one student as present.");return}j.value=!0},I=()=>z(this,null,function*(){j.value=!1,$.value=!0;const _=m.value.filter(d=>r.value.includes(d.student)).map(d=>({student:d.student,student_name:d.student_name,group_roll_number:d.group_roll_number,disabled:!1,checked:!0})),E=m.value.filter(d=>!r.value.includes(d.student)).map(d=>({student:d.student,student_name:d.student_name,group_roll_number:d.group_roll_number,disabled:!1,checked:!1})),k=new Date().toISOString().split("T")[0],x=l.selectedGroup||localStorage.getItem("selected_student_group");try{yield F.submit({students_present:JSON.stringify(_),students_absent:JSON.stringify(E),student_group:x,date:k})}catch(d){console.error("Error submitting attendance:",d),$.value=!1}}),A=()=>{i.push({name:"Teacherhome"})};return W(()=>{f()}),(_,E)=>(o(),n("div",Fe,[e("div",Ge,[Ve,ze,p.selectedGroup?(o(),n("p",Ue,"Class: "+a(p.selectedGroup),1)):L("",!0),e("p",Oe,"Date: "+a(c(b)),1)]),g.value?(o(),n("div",He,Ze)):m.value&&m.value.length>0?(o(),n("div",qe,[e("div",Qe,[e("p",Xe," Total: "+a(m.value.length)+" | Present: "+a(r.value.length)+" | Absent: "+a(m.value.length-r.value.length),1),e("button",{onClick:y,class:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300"},a(r.value.length===m.value.length?"Mark All Absent":"Mark All Present"),1)]),(o(!0),n(X,null,Y(m.value,k=>(o(),n("div",{key:k.student,class:T(["bg-white rounded-lg shadow-sm p-4 border-2 transition-colors cursor-pointer",r.value.includes(k.student)?"border-green-500 bg-green-50":"border-gray-200"]),onClick:x=>P(k.student)},[e("div",Ke,[e("div",et,[e("div",tt,[k.base64profile&&k.base64profile!=="null"?(o(),n("img",{key:0,src:v(k),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:M},null,40,st)):(o(),n("span",ot,a(B(k.student_name)),1))])]),e("div",nt,[e("h3",at,a(k.student_name),1),e("div",rt,[e("span",null,"Roll No: "+a(k.group_roll_number),1),lt,e("span",it,a(k.student),1)])]),e("div",ct,[e("div",{class:T(["w-6 h-6 rounded-full border-2 flex items-center justify-center",r.value.includes(k.student)?"bg-green-500 border-green-500":"border-gray-300"])},[r.value.includes(k.student)?(o(),he(c(Te),{key:0,class:"w-4 h-4 text-white"})):L("",!0)],2)])])],10,Ye))),128))])):(o(),n("div",dt,[ut,e("button",{onClick:f,class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Try Again ")])),m.value.length>0?(o(),n("div",_t,[e("button",{onClick:A,class:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center justify-center space-x-2"},[w(c(ae),{class:"w-5 h-5"}),ht]),e("button",{onClick:s,disabled:$.value,class:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[w(c(Pe),{class:"w-5 h-5"}),e("span",null,a($.value?"Submitting...":"Submit"),1)],8,mt),e("button",{onClick:f,class:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center space-x-2"},[w(c(ie),{class:"w-5 h-5"}),gt])])):L("",!0),j.value?(o(),n("div",pt,[e("div",vt,[xt,e("p",ft,"Present: "+a(r.value.length),1),e("p",bt,"Absent: "+a(m.value.length-r.value.length),1),e("div",yt,[e("button",{onClick:E[0]||(E[0]=k=>j.value=!1),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:I,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Confirm ")])])])):L("",!0)]))}};var $t=Q(wt,[["__scopeId","data-v-8b1e34ae"]]);const R=p=>(K("data-v-33d6dd92"),p=p(),ee(),p),kt={class:"min-h-screen bg-gray-50 p-4"},Ct={class:"mb-6"},St=R(()=>e("h1",{class:"text-2xl font-bold text-gray-800"},"Attendance Record",-1)),jt=R(()=>e("p",{class:"text-gray-600"},"View student attendance history",-1)),At={key:0,class:"text-sm text-gray-500 mt-1"},Mt={key:0,class:"flex justify-center items-center py-8"},Nt=R(()=>e("div",{class:"spinner"},null,-1)),Et=R(()=>e("span",{class:"ml-2 text-gray-600"},"Loading attendance records...",-1)),Dt=[Nt,Et],It={key:1,class:"space-y-3"},Lt={class:"flex justify-between items-center mb-4"},Bt={class:"text-sm text-gray-600"},Pt=R(()=>e("span",null,"Refresh",-1)),Tt={class:"flex items-center space-x-4"},Rt=["onClick"],Ft={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm relative overflow-hidden"},Gt=["src"],Vt={key:1,class:"text-white text-sm font-medium"},zt=["onClick"],Ut={class:"font-medium text-gray-800 truncate"},Ot={class:"flex items-center space-x-4 text-sm text-gray-600"},Ht=R(()=>e("span",{class:"text-gray-400"},"\u2022",-1)),Jt={class:"truncate text-xs"},Wt={class:"flex items-center space-x-4 mt-2 text-xs"},Zt={class:"flex items-center space-x-1 text-green-600"},qt={class:"flex items-center space-x-1 text-red-600"},Qt={class:"flex items-center space-x-1 text-yellow-600"},Xt={class:"flex-shrink-0 flex items-center space-x-2"},Yt=["onClick"],Kt=["onClick"],es={key:2,class:"text-center py-8"},ts={class:"bg-white rounded-lg shadow-sm p-8"},ss=R(()=>e("h3",{class:"text-lg font-medium text-gray-800 mb-2"},"No Students Found",-1)),os=R(()=>e("p",{class:"text-gray-600 mb-4"},"No attendance records available for this class.",-1)),ns=R(()=>e("span",null,"Refresh Data",-1)),as={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},rs={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto"},ls={class:"flex items-center justify-between mb-4"},is=R(()=>e("h3",{class:"text-lg font-semibold text-gray-800"},"Student Details",-1)),cs={class:"flex items-center space-x-4 mb-6"},ds={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-lg relative overflow-hidden"},us=["src"],_s={key:1,class:"text-white text-lg font-medium"},hs={class:"font-medium text-gray-800"},ms={class:"text-sm text-gray-600"},gs={class:"text-xs text-gray-500"},ps={class:"grid grid-cols-3 gap-4 mb-6"},vs={class:"text-center p-3 bg-green-50 rounded-lg"},xs={class:"text-2xl font-bold text-green-600"},fs=R(()=>e("p",{class:"text-sm text-green-700"},"Present",-1)),bs={class:"text-center p-3 bg-red-50 rounded-lg"},ys={class:"text-2xl font-bold text-red-600"},ws=R(()=>e("p",{class:"text-sm text-red-700"},"Absent",-1)),$s={class:"text-center p-3 bg-yellow-50 rounded-lg"},ks={class:"text-2xl font-bold text-yellow-600"},Cs=R(()=>e("p",{class:"text-sm text-yellow-700"},"Leave",-1)),Ss={class:"border-t pt-4"},js=R(()=>e("h5",{class:"font-medium text-gray-800 mb-2"},"Contact Information",-1)),As={key:0,class:"text-sm text-gray-600"},Ms={key:1,class:"text-sm text-gray-600"},Ns={key:2,class:"text-sm text-gray-500"},Es={class:"flex space-x-3 mt-6"},Ds=R(()=>e("span",null,"Edit Student",-1)),Is={setup(p){const l=oe(),i=C([]),m=C(!0),r=C(""),g=C(null),j=C(!1),$=s=>s.base64profile&&s.base64profile!=="null"?s.base64profile.startsWith("data:")?s.base64profile:`data:image/jpeg;base64,${s.base64profile}`:null,b=s=>s?s.split(" ").map(I=>I.charAt(0)).join("").toUpperCase().substring(0,2):"?",v=s=>{s.target.style.display="none"},B=s=>{var A,_,E;const I=ue({student_id:s.student,student_name:s.student_name,group_roll_number:s.group_roll_number,student_group:r.value,"First Name":s.first_name||((A=s.student_name)==null?void 0:A.split(" ")[0])||"","Middle Name":s.middle_name||((_=s.student_name)==null?void 0:_.split(" ")[1])||"","Last Name":s.last_name||((E=s.student_name)==null?void 0:E.split(" ")[2])||"","Student Date of Birth":s.date_of_birth||s.student_date_of_birth||"","GR Number":s.gr_number||s.group_roll_number||"","Email Address":s.email||s.email_address||"","Phone Number":s.mobile||s.phone_number||"","Guardian Name":s.guardian_name||s.parent_name||"","Guardian Number":s.guardian_number||s.parent_mobile||"",Relation:s.relation||"","Guardian Date of Birth":s.guardian_date_of_birth||"","Guardian Email":s.guardian_email||"","Guardian Occupation":s.guardian_occupation||"","Guardian Designation":s.guardian_designation||"","Guardian Work Address":s.guardian_work_address||"","Guardian Education":s.guardian_education||"",address:s.address||"",base64profile:s.base64profile||"",present_count:s.present_count||0,absent_count:s.absent_count||0,leave_count:s.leave_count||0,gender:s.gender||"",date_of_birth:s.date_of_birth||"",parent_name:s.parent_name||"",parent_mobile:s.parent_mobile||""},s);l.push({name:"EditStudent",query:{studentId:s.student,studentData:encodeURIComponent(JSON.stringify(I))}})},M=U({url:"school.al_ummah.api2.get_student_attendance_records",onSuccess(s){return s},onError(s){console.error("Error fetching attendance records:",s),f()}}),V=()=>{try{const s=localStorage.getItem("selected_student_group");s&&(r.value=s)}catch(s){console.error("Failed to load selected student group:",s)}},F=()=>z(this,null,function*(){if(!!r.value){m.value=!0;try{const s={based_on:"Student Group",student_group:r.value},I=yield M.fetch(s);I&&Array.isArray(I)&&I.length>0&&(localStorage.setItem("attendance_data",JSON.stringify(I)),i.value=I)}catch(s){console.warn("Failed to fetch data from API:",s)}finally{m.value=!1}}}),f=()=>z(this,null,function*(){try{const s=localStorage.getItem("attendance_data");s&&(i.value=JSON.parse(s))}catch(s){console.error("Failed to load attendance data from storage:",s)}finally{m.value=!1}}),y=s=>{g.value=s,j.value=!0},P=()=>{j.value=!1,g.value=null};return W(()=>{V(),r.value?(f(),F()):m.value=!1}),te(r,s=>{s&&(f(),F())}),(s,I)=>(o(),n("div",kt,[e("div",Ct,[St,jt,r.value?(o(),n("p",At,"Class: "+a(r.value),1)):L("",!0)]),m.value?(o(),n("div",Mt,Dt)):i.value&&i.value.length>0?(o(),n("div",It,[e("div",Lt,[e("p",Bt," Total Students: "+a(i.value.length),1),e("button",{onClick:F,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2"},[w(c(ie),{class:"w-4 h-4"}),Pt])]),(o(!0),n(X,null,Y(i.value,A=>(o(),n("div",{key:A.student,class:"bg-white rounded-lg shadow-sm p-4 border border-gray-200 hover:border-blue-300 transition-colors"},[e("div",Tt,[e("div",{class:"flex-shrink-0 cursor-pointer",onClick:_=>y(A)},[e("div",Ft,[A.base64profile&&A.base64profile!=="null"?(o(),n("img",{key:0,src:$(A),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:v},null,40,Gt)):(o(),n("span",Vt,a(b(A.student_name)),1))])],8,Rt),e("div",{class:"flex-1 min-w-0 cursor-pointer",onClick:_=>y(A)},[e("h3",Ut,a(A.student_name),1),e("div",Ot,[e("span",null,"Roll No: "+a(A.group_roll_number),1),Ht,e("span",Jt,"ID: "+a(A.student),1)]),e("div",Wt,[e("span",Zt,[w(c(ve),{class:"w-4 h-4"}),e("span",null,"Present: "+a(A.present_count||0),1)]),e("span",qt,[w(c(ye),{class:"w-4 h-4"}),e("span",null,"Absent: "+a(A.absent_count||0),1)]),e("span",Qt,[w(c(xe),{class:"w-4 h-4"}),e("span",null,"Leave: "+a(A.leave_count||0),1)])])],8,zt),e("div",Xt,[e("button",{onClick:H(_=>B(A),["stop"]),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Student"},[w(c(fe),{class:"w-5 h-5"})],8,Yt),e("div",{class:"cursor-pointer",onClick:H(_=>y(A),["stop"])},[w(c(Re),{class:"w-5 h-5 text-gray-400"})],8,Kt)])])]))),128))])):(o(),n("div",es,[e("div",ts,[w(c(re),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),ss,os,e("button",{onClick:F,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 mx-auto"},[w(c(ie),{class:"w-4 h-4"}),ns])])])),g.value&&j.value?(o(),n("div",as,[e("div",rs,[e("div",ls,[is,e("button",{onClick:P,class:"text-gray-400 hover:text-gray-600"},[w(c(ae),{class:"w-6 h-6"})])]),e("div",cs,[e("div",ds,[g.value.base64profile&&g.value.base64profile!=="null"?(o(),n("img",{key:0,src:$(g.value),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:v},null,40,us)):(o(),n("span",_s,a(b(g.value.student_name)),1))]),e("div",null,[e("h4",hs,a(g.value.student_name),1),e("p",ms,"Roll No: "+a(g.value.group_roll_number),1),e("p",gs,"ID: "+a(g.value.student),1)])]),e("div",ps,[e("div",vs,[w(c(ve),{class:"w-8 h-8 text-green-600 mx-auto mb-2"}),e("p",xs,a(g.value.present_count||0),1),fs]),e("div",bs,[w(c(ye),{class:"w-8 h-8 text-red-600 mx-auto mb-2"}),e("p",ys,a(g.value.absent_count||0),1),ws]),e("div",$s,[w(c(xe),{class:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),e("p",ks,a(g.value.leave_count||0),1),Cs])]),e("div",Ss,[js,g.value.mobile?(o(),n("p",As," \u{1F4F1} "+a(g.value.mobile),1)):L("",!0),g.value.address?(o(),n("p",Ms," \u{1F4CD} "+a(g.value.address),1)):L("",!0),!g.value.mobile&&!g.value.address?(o(),n("p",Ns," No contact information available ")):L("",!0)]),e("div",Es,[e("button",{onClick:I[0]||(I[0]=A=>B(g.value)),class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2"},[w(c(fe),{class:"w-4 h-4"}),Ds]),e("button",{onClick:P,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"}," Close ")])])])):L("",!0)]))}};var Ls=Q(Is,[["__scopeId","data-v-33d6dd92"]]);const Bs={class:"min-h-screen bg-gray-50 p-4"},Ps={class:"max-w-4xl mx-auto"},Ts=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"Create Notice"),e("p",{class:"text-gray-600"},"Send announcements to students and parents")],-1),Rs={class:"bg-white rounded-lg shadow-sm p-6"},Fs={class:"mb-6"},Gs=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notice Title * ",-1),Vs={class:"mb-6"},zs=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notice Message * ",-1),Us={class:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},Os={class:"text-sm text-blue-700"},Hs=e("span",{class:"font-medium"},"Selected Class:",-1),Js={class:"flex justify-end"},Ws=["disabled"],Zs={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qs=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},null,-1),Qs=[qs],Xs={key:1,class:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ys=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1),Ks=[Ys],eo={setup(p){const l=C(""),i=C(""),m=C(""),r=U({url:"school.al_ummah.api2.submit_notice",auto:!1,onSuccess(v){console.log("Notice submission response:",v),v.message?$(v.message):typeof v=="string"&&v.includes("success")?$(v):$("Notice published successfully!"),l.value="",i.value=""},onError(v){console.error("Error submitting notice:",v),v.message?b(v.message):v.exc_type==="ValidationError"?b("Validation error: Please check your input data."):b("An error occurred while submitting the notice.")}}),g=()=>{try{const v=localStorage.getItem("selected_student_group");v&&(m.value=v)}catch(v){console.error("Failed to load selected student group:",v)}},j=()=>z(this,null,function*(){if(!l.value.trim()||!i.value.trim()){b("Please enter both title and notice message.");return}if(!m.value){b("Student group information is missing.");return}const v={notice_heading:i.value.trim(),notice_message:l.value.trim(),student_group:m.value};console.log("Submitting notice:",v),yield r.fetch(v)}),$=v=>{alert(`\u2705 Success: ${v}`)},b=v=>{alert(`\u274C Error: ${v}`)};return W(()=>{g()}),(v,B)=>(o(),n("div",Bs,[e("div",Ps,[Ts,e("div",Rs,[e("div",Fs,[Gs,ne(e("input",{"onUpdate:modelValue":B[0]||(B[0]=M=>i.value=M),type:"text",placeholder:"Enter notice title",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[me,i.value]])]),e("div",Vs,[zs,ne(e("textarea",{"onUpdate:modelValue":B[1]||(B[1]=M=>l.value=M),rows:"8",placeholder:"Enter your notice message here...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,512),[[me,l.value]])]),e("div",Us,[e("p",Os,[Hs,se(" "+a(m.value||"No class selected"),1)])]),e("div",Js,[e("button",{onClick:j,disabled:c(r).loading,class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors"},[c(r).loading?(o(),n("svg",Xs,Ks)):(o(),n("svg",Zs,Qs)),e("span",null,a(c(r).loading?"Publishing...":"Publish Notice"),1)],8,Ws)])])])]))}};const J=p=>(K("data-v-b50e67de"),p=p(),ee(),p),to={class:"min-h-screen bg-gray-50 p-4"},so={class:"mb-6"},oo=J(()=>e("h1",{class:"text-2xl font-bold text-gray-800"},"Previous Notices",-1)),no=J(()=>e("p",{class:"text-gray-600"},"View all published notices",-1)),ao={key:0,class:"text-sm text-gray-500 mt-1"},ro={key:0,class:"flex justify-center items-center py-8"},lo=J(()=>e("div",{class:"spinner"},null,-1)),io=J(()=>e("span",{class:"ml-2 text-gray-600"},"Loading notices...",-1)),co=[lo,io],uo={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},_o=J(()=>e("p",{class:"text-red-800"},"Failed to load notices.",-1)),ho={key:2,class:"space-y-4"},mo=["onClick"],go={class:"p-6"},po={class:"flex items-start justify-between mb-3"},vo={class:"text-lg font-semibold text-gray-800 flex-1 pr-4"},xo={class:"text-sm text-gray-500 whitespace-nowrap"},fo={class:"text-gray-600 line-clamp-2 mb-4"},bo={class:"flex items-center justify-between text-sm text-gray-500"},yo=["onClick"],wo={key:0,class:"text-center py-12"},$o=Ce('<div class="bg-white rounded-lg shadow-sm p-8" data-v-b50e67de><svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b50e67de><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-b50e67de></path></svg><h3 class="text-lg font-medium text-gray-800 mb-2" data-v-b50e67de>No Notices Found</h3><p class="text-gray-600" data-v-b50e67de>No notices have been published for this class yet.</p></div>',1),ko=[$o],Co={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},So={class:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto"},jo={class:"p-6"},Ao={class:"flex items-center justify-between mb-4"},Mo={class:"text-xl font-bold text-gray-800"},No=J(()=>e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Eo=[No],Do={class:"mb-4 text-sm text-gray-500"},Io={class:"prose max-w-none mb-6"},Lo={class:"text-gray-700 whitespace-pre-wrap"},Bo={class:"flex space-x-3 pt-4 border-t"},Po=J(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),To=J(()=>e("span",null,"Delete Notice",-1)),Ro=[Po,To],Fo={setup(p){const l=C([]),i=C(""),m=C(null),r=C(!1),g=U({url:"school.al_ummah.api2.get_notice_list",auto:!1,onSuccess(f){console.log("Notices loaded:",f),l.value=Array.isArray(f)?f:[]},onError(f){console.error("Error fetching notices:",f),l.value=[]}}),j=U({url:"school.al_ummah.api2.delete_notice",auto:!1,onSuccess(){console.log("Notice deleted successfully"),b(),M()},onError(f){console.error("Error deleting notice:",f),F("Error","Failed to delete notice. Please try again.")}}),$=()=>{try{const f=localStorage.getItem("selected_student_group");f&&(i.value=f)}catch(f){console.error("Failed to load selected student group:",f)}},b=()=>{if(!i.value)return;const f={student_group:i.value};g.fetch(f)},v=f=>{if(!f)return"No date";try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(y){return f}},B=f=>{m.value=f,r.value=!0},M=()=>{r.value=!1,m.value=null},V=f=>{if(!f){F("Error","No notice ID provided");return}confirm("Are you sure you want to delete this notice? This action cannot be undone.")&&j.fetch({name:f})},F=(f,y)=>{f==="Error"?window.alert(`Error: ${y}`):window.alert(y)};return W(()=>{$(),i.value&&b()}),te(i,f=>{f&&b()}),(f,y)=>(o(),n("div",to,[e("div",so,[oo,no,i.value?(o(),n("p",ao,"Class: "+a(i.value),1)):L("",!0)]),c(g).loading?(o(),n("div",ro,co)):c(g).error?(o(),n("div",uo,[_o,e("button",{onClick:b,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])):(o(),n("div",ho,[(o(!0),n(X,null,Y(l.value,(P,s)=>(o(),n("div",{key:s,class:"bg-white rounded-lg shadow-sm border border-gray-200 hover:border-blue-300 transition-colors cursor-pointer",onClick:I=>B(P)},[e("div",go,[e("div",po,[e("h3",vo,a(P.notice_heading||"No Title"),1),e("span",xo,a(v(P.date)),1)]),e("p",fo,a(P.notice_message||"No message content"),1),e("div",bo,[e("span",null,"By: "+a(P.owner||"System"),1),e("button",{onClick:H(I=>V(P.name),["stop"]),class:"text-red-600 hover:text-red-800 font-medium"}," Delete ",8,yo)])])],8,mo))),128)),l.value.length===0?(o(),n("div",wo,ko)):L("",!0)])),m.value&&r.value?(o(),n("div",Co,[e("div",So,[e("div",jo,[e("div",Ao,[e("h2",Mo,a(m.value.notice_heading),1),e("button",{onClick:M,class:"text-gray-400 hover:text-gray-600"},Eo)]),e("div",Do,[e("p",null,"Published on: "+a(v(m.value.date)),1),e("p",null,"By: "+a(m.value.owner||"System"),1)]),e("div",Io,[e("p",Lo,a(m.value.notice_message),1)]),e("div",Bo,[e("button",{onClick:y[0]||(y[0]=P=>V(m.value.name)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center space-x-2"},Ro),e("button",{onClick:M,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"}," Close ")])])])])):L("",!0)]))}};var Go=Q(Fo,[["__scopeId","data-v-b50e67de"]]);const S=p=>(K("data-v-6e006303"),p=p(),ee(),p),Vo={class:"min-h-screen bg-gray-50 p-4"},zo={key:0,class:"flex justify-center items-center py-8"},Uo=S(()=>e("div",{class:"spinner"},null,-1)),Oo=S(()=>e("span",{class:"ml-2 text-gray-600"},"Loading leave applications...",-1)),Ho=[Uo,Oo],Jo={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Wo={class:"flex items-start space-x-3"},Zo=S(()=>e("svg",{class:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),qo=S(()=>e("p",{class:"text-red-800 font-medium"},"Error",-1)),Qo={class:"text-red-700 text-sm mt-1"},Xo={key:2,class:"text-center py-12"},Yo=S(()=>e("svg",{class:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),Ko=S(()=>e("p",{class:"text-gray-500 text-lg"},"No leave applications found",-1)),en=S(()=>e("p",{class:"text-gray-400 text-sm mt-1"},"There are no pending leave applications for this group.",-1)),tn=[Yo,Ko,en],sn={key:3,class:"space-y-4"},on={class:"flex justify-between items-center mb-4"},nn=S(()=>e("h2",{class:"text-xl font-semibold text-gray-800"},"Leave Applications",-1)),an={class:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded"},rn=["onClick"],ln={class:"p-4"},cn={class:"flex items-start space-x-3 mb-3"},dn=S(()=>e("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),un={class:"flex-1 min-w-0"},_n={class:"font-semibold text-gray-800 text-lg"},hn={class:"text-sm text-gray-500"},mn={class:"text-sm text-gray-600 mt-1"},gn={class:"flex items-center space-x-2"},pn=S(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)),vn=[pn],xn={class:"flex justify-between items-center"},fn={class:"flex-1"},bn={class:"text-sm text-gray-700"},yn=se(" Total Leave Days: "),wn={class:"font-medium"},$n={class:"text-sm text-gray-600 mt-1 line-clamp-1"},kn={key:0,class:"mt-3"},Cn=S(()=>e("span",{class:"inline-flex items-center px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs"},[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),se(" Medical Certificate Available ")],-1)),Sn=[Cn],jn={key:0,class:"border-t border-gray-200 p-4 bg-gray-50"},An={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Mn=S(()=>e("h4",{class:"font-semibold text-gray-800 mb-3"},"Leave Details",-1)),Nn={class:"space-y-2 text-sm"},En={class:"flex justify-between"},Dn=S(()=>e("span",{class:"text-gray-600"},"Student Name:",-1)),In={class:"font-medium"},Ln={class:"flex justify-between"},Bn=S(()=>e("span",{class:"text-gray-600"},"Student ID:",-1)),Pn={class:"font-medium"},Tn={class:"flex justify-between"},Rn=S(()=>e("span",{class:"text-gray-600"},"Leave ID:",-1)),Fn={class:"font-medium"},Gn={class:"flex justify-between"},Vn=S(()=>e("span",{class:"text-gray-600"},"Duration:",-1)),zn={class:"font-medium"},Un={class:"flex justify-between"},On=S(()=>e("span",{class:"text-gray-600"},"Status:",-1)),Hn={class:"mt-4"},Jn=S(()=>e("h5",{class:"font-medium text-gray-700 mb-2"},"Reason for Leave",-1)),Wn={class:"text-sm text-gray-600 bg-white p-3 rounded border"},Zn={key:0,class:"mt-4 flex space-x-3 justify-center"},qn=["onClick","disabled"],Qn=S(()=>e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Xn=[Qn],Yn=["onClick","disabled"],Kn=S(()=>e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),ea=[Kn],ta={key:1,class:"mt-4 p-3 bg-gray-100 rounded-lg text-center"},sa={class:"text-sm text-gray-600"},oa=se(" This leave application has been "),na={class:"font-medium"},aa={key:0},ra=S(()=>e("h4",{class:"font-semibold text-gray-800 mb-3"},"Medical Certificate",-1)),la={class:"bg-white p-4 rounded-lg border border-gray-200"},ia={class:"mb-3"},ca=["src","onClick"],da={class:"flex space-x-2"},ua=["onClick"],_a=S(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),ha=S(()=>e("span",null,"View Full Size",-1)),ma=[_a,ha],ga=["onClick"],pa=S(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),va=S(()=>e("span",null,"Download",-1)),xa=[pa,va],fa={key:1,class:"flex items-center justify-center p-8 bg-gray-100 rounded-lg border border-gray-200"},ba=S(()=>e("div",{class:"text-center"},[e("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"text-gray-500 text-sm"},"No medical certificate provided")],-1)),ya=[ba],wa={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$a=S(()=>e("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[e("div",{class:"spinner-small"}),e("span",{class:"text-gray-700"},"Updating leave application...")],-1)),ka=[$a],Ca={key:5,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"},Sa={class:"bg-white rounded-lg max-w-4xl max-h-full w-full"},ja={class:"flex justify-between items-center p-4 border-b"},Aa=S(()=>e("h3",{class:"text-lg font-semibold text-gray-800"},"Medical Certificate",-1)),Ma=S(()=>e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Na=[Ma],Ea={class:"p-4 max-h-[80vh] overflow-auto"},Da=["src"],Ia=S(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),La=S(()=>e("span",null,"Download",-1)),Ba=[Ia,La],Pa={setup(p){const l=C([]),i=C(""),m=C(null),r=C(!1),g=C(""),j=C(""),$=C(""),b=U({url:"school.al_ummah.api2.get_leave_application_list",auto:!1,onSuccess(t){console.log("Raw API response:",t),Array.isArray(t)?l.value=t:t&&typeof t=="object"?t.message&&Array.isArray(t.message)?l.value=t.message:t.appeals&&Array.isArray(t.appeals)?l.value=t.appeals:t.leave_applications&&Array.isArray(t.leave_applications)?l.value=t.leave_applications:Array.isArray(t.data)?l.value=t.data:l.value=Object.keys(t).length>0?[t]:[]:l.value=[],console.log("Processed appeals:",l.value),i.value=""},onError(t){console.error("Error fetching leave applications:",t),i.value=t.message||"Failed to load leave applications.",l.value=[]}}),v=U({url:"school.al_ummah.api2.update_leave_status",method:"POST",auto:!1,onSuccess(t){if(console.log("\u2705 Update API Response:",t),t.success){const h=l.value.findIndex(u=>u.name===t.name);h!==-1&&(l.value[h].status=t.status,console.log("\u{1F504} Updated appeal status:",t.status)),x("Success",t.message||"Leave application updated successfully."),N()}else console.log("\u274C API returned success: false"),x("Error",t.message||"Failed to update leave application.")},onError(t){console.error("\u{1F6A8} Error updating leave status:",t);let h="Failed to update leave application.";if(t._server_messages)try{const u=JSON.parse(t._server_messages||"[]"),G=u[u.length-1];h=JSON.parse(G).message||h}catch(u){console.log("\u274C Error parsing server messages:",u),h=t.message||h}else t.message&&(h=t.message);x("Error",h)}}),B=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(h){return t||"N/A"}},M=(t,h)=>{if(!t||!h)return 0;try{const u=new Date(t),G=new Date(h),Z=Math.abs(G-u);return Math.ceil(Z/(1e3*60*60*24))+1}catch(u){return 0}},V=t=>{if(!t)return!0;const h=String(t).trim().toLowerCase();return!["approved","rejected"].includes(h)},F=t=>{if(!t)return"Pending";const h=String(t).trim();return h.charAt(0).toUpperCase()+h.slice(1).toLowerCase()},f=t=>{if(!t)return"bg-yellow-100 text-yellow-800";switch(String(t).trim().toLowerCase()){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-yellow-100 text-yellow-800"}},y=t=>{if(!t)return"";try{let h=t;return h.includes("base64,")&&(h=h.split("base64,")[1]),h=h.trim(),`data:image/jpeg;base64,${h}`}catch(h){return console.error("Error creating document URL:",h),""}},P=t=>{console.error("Image failed to load"),t.target.style.display="none"},s=t=>{console.error("Modal image failed to load"),x("Error","Failed to load medical certificate image."),r.value=!1},I=t=>{m.value=m.value===t?null:t},A=t=>{const h=y(t);h?(g.value=h,j.value=t,r.value=!0):x("Error","Unable to display medical certificate.")},_=(t,h)=>{const u=y(t);if(u){const G=document.createElement("a");G.href=u,G.download=`medical-certificate-${h||"student"}.jpg`,document.body.appendChild(G),G.click(),document.body.removeChild(G)}},E=()=>{if(g.value){const t=document.createElement("a");t.href=g.value,t.download=`medical-certificate-${$.value||"student"}.jpg`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},k=(t,h)=>z(this,null,function*(){if(!t){x("Error","Cannot update: Missing leave application ID");return}console.log("Updating leave status:",t,"to:",h);const u={name:t,status:h};console.log("Sending update data:",u),yield v.submit(u)}),x=(t,h)=>{alert(`${t}: ${h}`)},d=()=>{try{const t=localStorage.getItem("selected_student_group");if(t)try{const h=JSON.parse(t);return h.student_group||h.name||h}catch(h){return t}return null}catch(t){return console.error("Error getting student group:",t),null}},N=()=>{const t=d();if(!t){i.value="No student group found. Please select a student first.",l.value=[];return}const h={student_group:t};console.log("Fetching leave applications with params:",h),b.fetch(h)};return W(()=>{N()}),(t,h)=>(o(),n("div",Vo,[c(b).loading?(o(),n("div",zo,Ho)):i.value?(o(),n("div",Jo,[e("div",Wo,[Zo,e("div",null,[qo,e("p",Qo,a(i.value),1),e("button",{onClick:N,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])])])):!l.value||l.value.length===0?(o(),n("div",Xo,tn)):(o(),n("div",sn,[e("div",on,[nn,e("span",an,a(l.value.length)+" application"+a(l.value.length!==1?"s":""),1)]),(o(!0),n(X,null,Y(l.value,(u,G)=>{var Z;return o(),n("div",{key:u.name||`appeal-${G}`,class:"bg-white rounded-lg shadow-sm border border-gray-200 hover:border-blue-300 transition-colors cursor-pointer",onClick:q=>I(u.name)},[e("div",ln,[e("div",cn,[dn,e("div",un,[e("h3",_n,a(u.student_name||u.student||"Unknown Student"),1),e("p",hn,a(u.student||"No Student ID"),1),e("p",mn," From: "+a(B(u.from_date))+" - To: "+a(B(u.to_date)),1)]),e("div",gn,[e("span",{class:T(["px-3 py-1 rounded-full text-xs font-medium",f(u.status)])},a(F(u.status)),3),(o(),n("svg",{class:T(["w-5 h-5 text-gray-400 transition-transform duration-200",{"rotate-180":m.value===u.name}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vn,2))])]),e("div",xn,[e("div",fn,[e("p",bn,[yn,e("span",wn,a(u.total_leave_days||M(u.from_date,u.to_date)),1)]),e("p",$n,a(u.reason||"No reason provided"),1)])]),u.document_base64?(o(),n("div",kn,Sn)):L("",!0)]),m.value===u.name?(o(),n("div",jn,[e("div",An,[e("div",null,[Mn,e("div",Nn,[e("div",En,[Dn,e("span",In,a(u.student_name||"N/A"),1)]),e("div",Ln,[Bn,e("span",Pn,a(u.student||"N/A"),1)]),e("div",Tn,[Rn,e("span",Fn,a(u.name||"N/A"),1)]),e("div",Gn,[Vn,e("span",zn,a(u.total_leave_days||M(u.from_date,u.to_date))+" days",1)]),e("div",Un,[On,e("span",{class:T([f(u.status),"px-2 py-1 rounded-full text-xs font-medium"])},a(F(u.status)),3)])]),e("div",Hn,[Jn,e("p",Wn,a(u.reason||"No reason provided"),1)]),V(u.status)?(o(),n("div",Zn,[e("button",{onClick:H(q=>k(u.name,"rejected"),["stop"]),disabled:c(v).loading,class:T(["w-12 h-12 rounded-full bg-red-500 bg-opacity-80 text-white hover:bg-red-600 hover:bg-opacity-90 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center shadow-md hover:shadow-lg transform hover:scale-105",{"opacity-60":c(v).loading}]),title:"Reject Leave Application"},Xn,10,qn),e("button",{onClick:H(q=>k(u.name,"approved"),["stop"]),disabled:c(v).loading,class:T(["w-12 h-12 rounded-full bg-green-500 bg-opacity-80 text-white hover:bg-green-600 hover:bg-opacity-90 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center shadow-md hover:shadow-lg transform hover:scale-105",{"opacity-60":c(v).loading}]),title:"Approve Leave Application"},ea,10,Yn)])):(o(),n("div",ta,[e("p",sa,[oa,e("span",na,a(((Z=u.status)==null?void 0:Z.toLowerCase())||"processed"),1)])]))]),u.document_base64?(o(),n("div",aa,[ra,e("div",la,[e("div",ia,[e("img",{src:y(u.document_base64),alt:"Medical Certificate",onError:P,class:"w-full h-48 object-contain border border-gray-200 rounded cursor-pointer",onClick:H(q=>A(u.document_base64),["stop"])},null,40,ca)]),e("div",da,[e("button",{onClick:H(q=>A(u.document_base64),["stop"]),class:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2"},ma,8,ua),e("button",{onClick:H(q=>_(u.document_base64,u.student_name),["stop"]),class:"flex-1 px-3 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2"},xa,8,ga)])])])):(o(),n("div",fa,ya))])])):L("",!0)],8,rn)}),128))])),c(v).loading?(o(),n("div",wa,ka)):L("",!0),r.value?(o(),n("div",Ca,[e("div",Sa,[e("div",ja,[Aa,e("button",{onClick:h[0]||(h[0]=u=>r.value=!1),class:"text-gray-500 hover:text-gray-700 transition-colors"},Na)]),e("div",Ea,[e("img",{src:g.value,alt:"Medical Certificate Full Size",class:"w-full h-auto object-contain max-h-[70vh] mx-auto",onError:s},null,40,Da)]),e("div",{class:"p-4 border-t flex justify-center"},[e("button",{onClick:E,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center space-x-2"},Ba)])])])):L("",!0)]))}};var Ta=Q(Pa,[["__scopeId","data-v-6e006303"]]);const D=p=>(K("data-v-18c5ea37"),p=p(),ee(),p),Ra={class:"flex min-h-screen bg-gray-50 flex-col md:flex-row"},Fa={key:0,class:"fixed inset-0 bg-red-50 bg-opacity-90 flex items-center justify-center z-50 p-4"},Ga={class:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full"},Va={class:"flex items-center mb-4"},za={class:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3"},Ua=D(()=>e("h3",{class:"text-lg font-semibold text-red-800"},"Something went wrong",-1)),Oa={class:"text-gray-600 mb-4"},Ha={key:1,class:"fixed inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50"},Ja=D(()=>e("div",{class:"text-center"},[e("div",{class:"spinner mb-4 mx-auto"}),e("p",{class:"text-gray-600"},"Loading your dashboard...")],-1)),Wa=[Ja],Za={key:2,class:"flex flex-col md:flex-row w-full min-h-screen"},qa={class:"md:hidden bg-white shadow-sm border-b border-gray-200 p-4 flex items-center justify-between"},Qa={class:"flex items-center space-x-3"},Xa={class:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden flex-shrink-0"},Ya=["src"],Ka={key:1,class:"w-full h-full flex items-center justify-center bg-gray-100"},er={class:"min-w-0 flex-1"},tr={class:"text-sm font-semibold text-gray-800 truncate"},sr=D(()=>e("p",{class:"text-xs text-gray-500"},"Teacher",-1)),or={class:"flex items-center justify-between md:hidden pb-4 border-b border-gray-200"},nr=D(()=>e("h3",{class:"text-lg font-semibold text-gray-800"},"Menu",-1)),ar={class:"flex-1 overflow-y-auto space-y-6 md:space-y-8"},rr={class:"hidden md:flex items-start space-x-4 border-b pb-4"},lr={class:"flex-shrink-0 w-16 h-16 rounded-full bg-gray-200 overflow-hidden"},ir=["src"],cr={key:1,class:"w-full h-full flex items-center justify-center bg-gray-100"},dr={class:"min-w-0 flex-1"},ur={class:"text-xl font-semibold text-gray-800 break-words"},_r=D(()=>e("p",{class:"text-sm text-gray-500 mt-1"},"Teacher",-1)),hr={class:"space-y-2"},mr=D(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Select Class:",-1)),gr=["disabled"],pr=D(()=>e("option",{value:"",disabled:""},"Select a class",-1)),vr=["value"],xr={key:0,class:"text-sm text-yellow-600"},fr={class:"space-y-3"},br=D(()=>e("h3",{class:"text-sm font-medium text-gray-700"},"Navigation",-1)),yr={class:"space-y-2"},wr=["disabled"],$r=D(()=>e("span",{class:"truncate"},"Dashboard",-1)),kr=["disabled"],Cr=D(()=>e("span",{class:"truncate"},"Take Attendance",-1)),Sr=["disabled"],jr=D(()=>e("span",{class:"truncate"},"Student Record",-1)),Ar=["disabled"],Mr=D(()=>e("span",{class:"truncate"},"Create Notice",-1)),Nr=["disabled"],Er=D(()=>e("span",{class:"truncate"},"Previous Notices",-1)),Dr=["disabled"],Ir=D(()=>e("span",{class:"truncate"},"Browse Leave Appeals",-1)),Lr={class:"pt-4 border-t border-gray-200 flex-shrink-0"},Br=["disabled"],Pr=D(()=>e("span",null,"Logout",-1)),Tr={key:0},Rr={class:"bg-white rounded-lg shadow-sm p-4 md:p-6 mb-4 md:mb-6"},Fr={class:"text-xl md:text-2xl font-bold text-gray-800 mb-2"},Gr=D(()=>e("p",{class:"text-gray-600 text-sm md:text-base"},"Manage your classroom activities and student records from here.",-1)),Vr={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-4 md:mb-6"},zr={class:"bg-white rounded-lg shadow-sm p-4 md:p-6 border-l-4 border-blue-500"},Ur={class:"flex items-center justify-between"},Or=D(()=>e("p",{class:"text-xs md:text-sm font-medium text-gray-600"},"Selected Class",-1)),Hr={class:"text-lg md:text-2xl font-bold text-gray-800 truncate"},Jr={class:"bg-white rounded-lg shadow-sm p-4 md:p-6 border-l-4 border-green-500"},Wr={class:"flex items-center justify-between"},Zr=D(()=>e("p",{class:"text-xs md:text-sm font-medium text-gray-600"},"Available Classes",-1)),qr={class:"text-lg md:text-2xl font-bold text-gray-800"},Qr={class:"bg-white rounded-lg shadow-sm p-4 md:p-6 border-l-4 border-purple-500"},Xr={class:"flex items-center justify-between"},Yr=D(()=>e("p",{class:"text-xs md:text-sm font-medium text-gray-600"},"Today's Date",-1)),Kr={class:"text-lg md:text-2xl font-bold text-gray-800"},el={class:"bg-white rounded-lg shadow-sm p-4 md:p-6"},tl=D(()=>e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quick Actions",-1)),sl={class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},ol=["disabled"],nl=D(()=>e("div",{class:"min-w-0 flex-1"},[e("h3",{class:"font-medium text-gray-800 text-sm md:text-base"},"Take Today's Attendance"),e("p",{class:"text-xs md:text-sm text-gray-600 truncate"},"Mark student attendance for today")],-1)),al=["disabled"],rl=D(()=>e("div",{class:"min-w-0 flex-1"},[e("h3",{class:"font-medium text-gray-800 text-sm md:text-base"},"Create New Notice"),e("p",{class:"text-xs md:text-sm text-gray-600 truncate"},"Send announcement to students")],-1)),ll={key:0,class:"text-sm text-yellow-600 mt-3"},il={key:1,class:"h-full"},cl={setup(p){const l=oe(),i=C({}),m=C([]),r=C(""),g=C(!1),j=C("dashboard"),$=C(null),b=C(!1),v={attendance:$t,"attendance-record":Ls,"create-notice":eo,"previous-notices":Go,"leave-appeals":Ta},B=()=>v[j.value]||null,M=x=>{y.loading||(j.value=x,window.innerWidth<768&&(g.value=!1))},V=ge.user,F="teacher",f=()=>{var x;try{const d=localStorage.getItem("user_details"),N=localStorage.getItem("selected_student_group");if(d){const t=JSON.parse(d);i.value={name:t.name,image:t.base64profile},((x=t.student_groups)==null?void 0:x.length)&&(m.value=t.student_groups,r.value=N||t.student_groups[0],b.value=!0)}}catch(d){console.warn("Error loading from localStorage:",d)}},y=U({url:"school.al_ummah.api2.get_user_details",params:{role:F,username:V},auto:!1,onSuccess(x){var d;console.log("User details loaded:",x),$.value=null;try{x&&x.user_details?(i.value={name:x.user_details.name,image:x.user_details.base64profile},((d=x.user_details.student_groups)==null?void 0:d.length)&&(m.value=x.user_details.student_groups,r.value=x.user_details.student_groups[0],localStorage.setItem("selected_student_group",x.user_details.student_groups[0])),localStorage.setItem("user_details",JSON.stringify(x.user_details)),b.value=!0):$.value="No user data received from server"}catch(N){console.error("Error processing user data:",N),$.value="Error processing user data"}},onError(x){console.error("Error loading user details:",x),$.value="Failed to load user data. Please try again.",b.value||s()}}),P=_e(()=>new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),s=()=>{try{f(),(i.value.name||m.value.length)&&(b.value=!0,$.value=null)}catch(x){console.error("Error loading from localStorage:",x),$.value="Unable to load user data. Please refresh the page."}},I=()=>z(this,null,function*(){r.value&&localStorage.setItem("selected_student_group",r.value)}),A=x=>{x.target.style.display="none";const d=x.target.nextElementSibling;d&&(d.style.display="flex")},_=()=>{$.value=null,b.value=!1,y.reload()},E=()=>z(this,null,function*(){try{localStorage.removeItem("user_details"),localStorage.removeItem("user"),localStorage.removeItem("selected_student_group"),yield ge.logout.submit(),l.push({name:"Login"})}catch(x){console.error("Logout error:",x),localStorage.clear(),l.push({name:"Login"})}}),k=()=>{window.innerWidth>=768&&(g.value=!1)};return W(()=>{f(),window.addEventListener("resize",k),setTimeout(()=>{y.reload().catch(x=>{console.error("Failed to reload user details:",x),$.value="Network error. Please check your connection."})},100)}),Se(()=>{window.removeEventListener("resize",k)}),te(()=>y.loading,x=>{!x&&y.data&&console.log("Data loaded successfully")}),te(()=>j.value,()=>{window.innerWidth<768&&(g.value=!1)}),(x,d)=>(o(),n("div",Ra,[$.value?(o(),n("div",Fa,[e("div",Ga,[e("div",Va,[e("div",za,[w(c(Me),{class:"w-6 h-6 text-red-600"})]),Ua]),e("p",Oa,a($.value),1),e("div",{class:"flex space-x-3"},[e("button",{onClick:_,class:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors"}," Try Again "),e("button",{onClick:E,class:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors"}," Logout ")])])])):c(y).loading&&!b.value?(o(),n("div",Ha,Wa)):(o(),n("div",Za,[e("header",qa,[e("div",Qa,[e("div",Xa,[i.value.image?(o(),n("img",{key:0,src:`data:image/jpeg;base64,${i.value.image}`,alt:"Teacher",class:"object-cover w-full h-full",onError:A},null,40,Ya)):(o(),n("div",Ka,[w(c(pe),{class:"w-5 h-5 text-gray-400"})]))]),e("div",er,[e("h2",tr,a(i.value.name||"Teacher"),1),sr])]),e("button",{onClick:d[0]||(d[0]=N=>g.value=!g.value),class:"p-2 rounded-md text-gray-600 hover:bg-gray-100 transition-colors"},[w(c(Ne),{class:"w-6 h-6"})])]),g.value?(o(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:d[1]||(d[1]=N=>g.value=!1)})):L("",!0),e("aside",{class:T(["bg-white shadow-md p-4 md:p-6 space-y-6 md:space-y-8 z-50","fixed md:relative inset-y-0 left-0 transform transition-transform duration-300 ease-in-out","w-72 max-w-full",g.value?"translate-x-0":"-translate-x-full md:translate-x-0","flex flex-col h-screen md:h-auto"])},[e("div",or,[nr,e("button",{onClick:d[2]||(d[2]=N=>g.value=!1),class:"p-2 rounded-md text-gray-600 hover:bg-gray-100 transition-colors"},[w(c(ae),{class:"w-5 h-5"})])]),e("div",ar,[e("div",rr,[e("div",lr,[i.value.image?(o(),n("img",{key:0,src:`data:image/jpeg;base64,${i.value.image}`,alt:"Teacher",class:"object-cover w-full h-full",onError:A},null,40,ir)):(o(),n("div",cr,[w(c(pe),{class:"w-6 h-6 text-gray-400"})]))]),e("div",dr,[e("h2",ur,a(i.value.name||"Loading..."),1),_r])]),e("div",hr,[mr,ne(e("select",{"onUpdate:modelValue":d[3]||(d[3]=N=>r.value=N),onChange:I,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base",disabled:c(y).loading||!m.value.length},[pr,(o(!0),n(X,null,Y(m.value,(N,t)=>(o(),n("option",{key:t,value:N},a(N),9,vr))),128))],40,gr),[[je,r.value]]),m.value.length?L("",!0):(o(),n("p",xr," No classes available "))]),e("div",fr,[br,e("nav",yr,[e("button",{onClick:d[4]||(d[4]=N=>M("dashboard")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="dashboard"?"bg-blue-100 border border-blue-200 text-blue-800":"bg-blue-50 text-blue-800 hover:bg-blue-100"]),disabled:c(y).loading},[w(c(Ee),{class:"w-5 h-5 flex-shrink-0"}),$r],10,wr),e("button",{onClick:d[5]||(d[5]=N=>M("attendance")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="attendance"?"bg-blue-100 border border-blue-200 text-blue-800":"bg-blue-50 text-blue-800 hover:bg-blue-100"]),disabled:!r.value||c(y).loading},[w(c(le),{class:"w-5 h-5 flex-shrink-0"}),Cr],10,kr),e("button",{onClick:d[6]||(d[6]=N=>M("attendance-record")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="attendance-record"?"bg-green-100 border border-green-200 text-green-800":"bg-green-50 text-green-800 hover:bg-green-100"]),disabled:!r.value||c(y).loading},[w(c(re),{class:"w-5 h-5 flex-shrink-0"}),jr],10,Sr),e("button",{onClick:d[7]||(d[7]=N=>M("create-notice")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="create-notice"?"bg-yellow-100 border border-yellow-200 text-yellow-800":"bg-yellow-50 text-yellow-800 hover:bg-yellow-100"]),disabled:!r.value||c(y).loading},[w(c(be),{class:"w-5 h-5 flex-shrink-0"}),Mr],10,Ar),e("button",{onClick:d[8]||(d[8]=N=>M("previous-notices")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="previous-notices"?"bg-purple-100 border border-purple-200 text-purple-800":"bg-purple-50 text-purple-800 hover:bg-purple-100"]),disabled:!r.value||c(y).loading},[w(c(De),{class:"w-5 h-5 flex-shrink-0"}),Er],10,Nr),e("button",{onClick:d[9]||(d[9]=N=>M("leave-appeals")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="leave-appeals"?"bg-indigo-100 border border-indigo-200 text-indigo-800":"bg-indigo-50 text-indigo-800 hover:bg-indigo-100"]),disabled:!r.value||c(y).loading},[w(c(Ie),{class:"w-5 h-5 flex-shrink-0"}),Ir],10,Dr)])])]),e("div",Lr,[e("button",{class:"w-full px-4 py-3 rounded bg-red-100 text-red-600 font-medium hover:bg-red-200 flex items-center justify-center space-x-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base",onClick:E,disabled:c(y).loading},[w(c(Le),{class:"w-5 h-5 flex-shrink-0"}),Pr],8,Br)])],2),e("main",{class:T(["flex-1 min-h-screen md:min-h-0 p-4 md:p-6 lg:p-8 bg-gray-50",{"opacity-50 pointer-events-none":c(y).loading}])},[j.value==="dashboard"?(o(),n("div",Tr,[e("div",Rr,[e("h1",Fr,"Welcome, "+a(i.value.name||"Teacher")+"!",1),Gr]),e("div",Vr,[e("div",zr,[e("div",Ur,[e("div",null,[Or,e("p",Hr,a(r.value||"None"),1)]),w(c(re),{class:"w-6 h-6 md:w-8 md:h-8 text-blue-500 flex-shrink-0"})])]),e("div",Jr,[e("div",Wr,[e("div",null,[Zr,e("p",qr,a(m.value.length),1)]),w(c(le),{class:"w-6 h-6 md:w-8 md:h-8 text-green-500 flex-shrink-0"})])]),e("div",Qr,[e("div",Xr,[e("div",null,[Yr,e("p",Kr,a(c(P)),1)]),w(c(Be),{class:"w-6 h-6 md:w-8 md:h-8 text-purple-500 flex-shrink-0"})])])]),e("div",el,[tl,e("div",sl,[e("button",{onClick:d[10]||(d[10]=N=>M("attendance")),disabled:!r.value,class:"flex items-center p-3 md:p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-left"},[w(c(le),{class:"w-5 h-5 md:w-6 md:h-6 text-blue-600 mr-3 flex-shrink-0"}),nl],8,ol),e("button",{onClick:d[11]||(d[11]=N=>M("create-notice")),disabled:!r.value,class:"flex items-center p-3 md:p-4 border border-gray-200 rounded-lg hover:border-yellow-500 hover:bg-yellow-50 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-left"},[w(c(be),{class:"w-5 h-5 md:w-6 md:h-6 text-yellow-600 mr-3 flex-shrink-0"}),rl],8,al)]),r.value?L("",!0):(o(),n("p",ll," Please select a class to access these features "))])])):(o(),n("div",il,[(o(),he(Ae(B()),{"selected-group":r.value,onBackToDashboard:d[12]||(d[12]=N=>M("dashboard")),key:r.value+j.value},null,8,["selected-group"]))]))],2)]))]))}};var gl=Q(cl,[["__scopeId","data-v-18c5ea37"]]);export{gl as default};
