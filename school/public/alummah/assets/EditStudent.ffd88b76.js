var ae=(i,e,t)=>new Promise((a,r)=>{var s=h=>{try{l(t.next(h))}catch(u){r(u)}},n=h=>{try{l(t.throw(h))}catch(u){r(u)}},l=h=>h.done?a(h.value):Promise.resolve(h.value).then(s,n);l((t=t.apply(i,e)).next())});import{q as Ct,v as ua,_ as Ze,r as N,u as je,o as Ve,w as Dt,d as y,e as _,f as o,t as P,x as V,y as Z,F as Mt,z as Et,n as he,A as Xe,C as v,g as B,p as et,h as tt,D as Fe,E as $e,b as ha,G as pa,i as St,H as at,I as it,J as ma,K as ga}from"./vendor.f2b32264.js";var $t={},fa=Ct(ua);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function Nt(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);e&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,a)}return t}function Ot(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nt(Object(t),!0).forEach(function(a){_a(i,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Nt(Object(t)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(t,a))})}return i}function va(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var a=t.call(i,e||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function It(i){var e=va(i,"string");return typeof e=="symbol"?e:e+""}function ot(i){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(i)}function ba(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Tt(i,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,It(a.key),a)}}function ya(i,e,t){return e&&Tt(i.prototype,e),t&&Tt(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function _a(i,e,t){return e=It(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Rt(i){return xa(i)||wa(i)||ka(i)||Ca()}function xa(i){if(Array.isArray(i))return st(i)}function wa(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ka(i,e){if(!!i){if(typeof i=="string")return st(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return st(i,e)}}function st(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=i[t];return a}function Ca(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ge=typeof window!="undefined"&&typeof window.document!="undefined",ce=Ge?window:{},rt=Ge&&ce.document.documentElement?"ontouchstart"in ce.document.documentElement:!1,nt=Ge?"PointerEvent"in ce:!1,W="cropper",lt="all",Bt="crop",At="move",jt="zoom",we="e",ke="w",Ne="s",ve="n",ze="ne",Pe="nw",Le="se",Ue="sw",dt="".concat(W,"-crop"),zt="".concat(W,"-disabled"),oe="".concat(W,"-hidden"),Pt="".concat(W,"-hide"),Da="".concat(W,"-invisible"),qe="".concat(W,"-modal"),ct="".concat(W,"-move"),He="".concat(W,"Action"),Ke="".concat(W,"Preview"),ut="crop",Lt="move",Ut="none",ht="crop",pt="cropend",mt="cropmove",gt="cropstart",Ht="dblclick",Ma=rt?"touchstart":"mousedown",Ea=rt?"touchmove":"mousemove",Sa=rt?"touchend touchcancel":"mouseup",Wt=nt?"pointerdown":Ma,Yt=nt?"pointermove":Ea,Vt=nt?"pointerup pointercancel":Sa,Xt="ready",Ft="resize",Gt="wheel",ft="zoom",qt="image/jpeg",$a=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Na=/^data:/,Oa=/^data:image\/jpeg;base64,/,Ia=/^img|canvas$/i,Kt=200,Qt=100,Jt={viewMode:0,dragMode:ut,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Kt,minContainerHeight:Qt,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ta='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Ra=Number.isNaN||ce.isNaN;function A(i){return typeof i=="number"&&!Ra(i)}var Zt=function(e){return e>0&&e<1/0};function vt(i){return typeof i=="undefined"}function Ce(i){return ot(i)==="object"&&i!==null}var Ba=Object.prototype.hasOwnProperty;function Oe(i){if(!Ce(i))return!1;try{var e=i.constructor,t=e.prototype;return e&&t&&Ba.call(t,"isPrototypeOf")}catch(a){return!1}}function se(i){return typeof i=="function"}var Aa=Array.prototype.slice;function ea(i){return Array.from?Array.from(i):Aa.call(i)}function J(i,e){return i&&se(e)&&(Array.isArray(i)||A(i.length)?ea(i).forEach(function(t,a){e.call(i,t,a,i)}):Ce(i)&&Object.keys(i).forEach(function(t){e.call(i,i[t],t,i)})),i}var Y=Object.assign||function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return Ce(e)&&a.length>0&&a.forEach(function(s){Ce(s)&&Object.keys(s).forEach(function(n){e[n]=s[n]})}),e},ja=/\.\d*(?:0|9){12}\d*$/;function Ie(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ja.test(i)?Math.round(i*e)/e:i}var za=/^width|height|left|top|marginLeft|marginTop$/;function be(i,e){var t=i.style;J(e,function(a,r){za.test(r)&&A(a)&&(a="".concat(a,"px")),t[r]=a})}function Pa(i,e){return i.classList?i.classList.contains(e):i.className.indexOf(e)>-1}function ee(i,e){if(!!e){if(A(i.length)){J(i,function(a){ee(a,e)});return}if(i.classList){i.classList.add(e);return}var t=i.className.trim();t?t.indexOf(e)<0&&(i.className="".concat(t," ").concat(e)):i.className=e}}function ue(i,e){if(!!e){if(A(i.length)){J(i,function(t){ue(t,e)});return}if(i.classList){i.classList.remove(e);return}i.className.indexOf(e)>=0&&(i.className=i.className.replace(e,""))}}function Te(i,e,t){if(!!e){if(A(i.length)){J(i,function(a){Te(a,e,t)});return}t?ee(i,e):ue(i,e)}}var La=/([a-z\d])([A-Z])/g;function bt(i){return i.replace(La,"$1-$2").toLowerCase()}function yt(i,e){return Ce(i[e])?i[e]:i.dataset?i.dataset[e]:i.getAttribute("data-".concat(bt(e)))}function We(i,e,t){Ce(t)?i[e]=t:i.dataset?i.dataset[e]=t:i.setAttribute("data-".concat(bt(e)),t)}function Ua(i,e){if(Ce(i[e]))try{delete i[e]}catch(t){i[e]=void 0}else if(i.dataset)try{delete i.dataset[e]}catch(t){i.dataset[e]=void 0}else i.removeAttribute("data-".concat(bt(e)))}var ta=/\s\s*/,aa=function(){var i=!1;if(Ge){var e=!1,t=function(){},a=Object.defineProperty({},"once",{get:function(){return i=!0,e},set:function(s){e=s}});ce.addEventListener("test",t,a),ce.removeEventListener("test",t,a)}return i}();function de(i,e,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;e.trim().split(ta).forEach(function(s){if(!aa){var n=i.listeners;n&&n[s]&&n[s][t]&&(r=n[s][t],delete n[s][t],Object.keys(n[s]).length===0&&delete n[s],Object.keys(n).length===0&&delete i.listeners)}i.removeEventListener(s,r,a)})}function re(i,e,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;e.trim().split(ta).forEach(function(s){if(a.once&&!aa){var n=i.listeners,l=n===void 0?{}:n;r=function(){delete l[s][t],i.removeEventListener(s,r,a);for(var u=arguments.length,d=new Array(u),c=0;c<u;c++)d[c]=arguments[c];t.apply(i,d)},l[s]||(l[s]={}),l[s][t]&&i.removeEventListener(s,l[s][t],a),l[s][t]=r,i.listeners=l}i.addEventListener(s,r,a)})}function Re(i,e,t){var a;return se(Event)&&se(CustomEvent)?a=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent"),a.initCustomEvent(e,!0,!0,t)),i.dispatchEvent(a)}function ia(i){var e=i.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var _t=ce.location,Ha=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function oa(i){var e=i.match(Ha);return e!==null&&(e[1]!==_t.protocol||e[2]!==_t.hostname||e[3]!==_t.port)}function sa(i){var e="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+e}function Ye(i){var e=i.rotate,t=i.scaleX,a=i.scaleY,r=i.translateX,s=i.translateY,n=[];A(r)&&r!==0&&n.push("translateX(".concat(r,"px)")),A(s)&&s!==0&&n.push("translateY(".concat(s,"px)")),A(e)&&e!==0&&n.push("rotate(".concat(e,"deg)")),A(t)&&t!==1&&n.push("scaleX(".concat(t,")")),A(a)&&a!==1&&n.push("scaleY(".concat(a,")"));var l=n.length?n.join(" "):"none";return{WebkitTransform:l,msTransform:l,transform:l}}function Wa(i){var e=Ot({},i),t=0;return J(i,function(a,r){delete e[r],J(e,function(s){var n=Math.abs(a.startX-s.startX),l=Math.abs(a.startY-s.startY),h=Math.abs(a.endX-s.endX),u=Math.abs(a.endY-s.endY),d=Math.sqrt(n*n+l*l),c=Math.sqrt(h*h+u*u),p=(c-d)/d;Math.abs(p)>Math.abs(t)&&(t=p)})}),t}function Qe(i,e){var t=i.pageX,a=i.pageY,r={endX:t,endY:a};return e?r:Ot({startX:t,startY:a},r)}function Ya(i){var e=0,t=0,a=0;return J(i,function(r){var s=r.startX,n=r.startY;e+=s,t+=n,a+=1}),e/=a,t/=a,{pageX:e,pageY:t}}function ye(i){var e=i.aspectRatio,t=i.height,a=i.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",s=Zt(a),n=Zt(t);if(s&&n){var l=t*e;r==="contain"&&l>a||r==="cover"&&l<a?t=a/e:a=t*e}else s?t=a/e:n&&(a=t*e);return{width:a,height:t}}function Va(i){var e=i.width,t=i.height,a=i.degree;if(a=Math.abs(a)%180,a===90)return{width:t,height:e};var r=a%90*Math.PI/180,s=Math.sin(r),n=Math.cos(r),l=e*n+t*s,h=e*s+t*n;return a>90?{width:h,height:l}:{width:l,height:h}}function Xa(i,e,t,a){var r=e.aspectRatio,s=e.naturalWidth,n=e.naturalHeight,l=e.rotate,h=l===void 0?0:l,u=e.scaleX,d=u===void 0?1:u,c=e.scaleY,p=c===void 0?1:c,E=t.aspectRatio,$=t.naturalWidth,O=t.naturalHeight,S=a.fillColor,T=S===void 0?"transparent":S,k=a.imageSmoothingEnabled,C=k===void 0?!0:k,I=a.imageSmoothingQuality,D=I===void 0?"low":I,m=a.maxWidth,R=m===void 0?1/0:m,j=a.maxHeight,z=j===void 0?1/0:j,H=a.minWidth,te=H===void 0?0:H,F=a.minHeight,G=F===void 0?0:F,q=document.createElement("canvas"),K=q.getContext("2d"),ne=ye({aspectRatio:E,width:R,height:z}),pe=ye({aspectRatio:E,width:te,height:G},"cover"),me=Math.min(ne.width,Math.max(pe.width,$)),le=Math.min(ne.height,Math.max(pe.height,O)),_e=ye({aspectRatio:r,width:R,height:z}),De=ye({aspectRatio:r,width:te,height:G},"cover"),ge=Math.min(_e.width,Math.max(De.width,s)),Me=Math.min(_e.height,Math.max(De.height,n)),Ee=[-ge/2,-Me/2,ge,Me];return q.width=Ie(me),q.height=Ie(le),K.fillStyle=T,K.fillRect(0,0,me,le),K.save(),K.translate(me/2,le/2),K.rotate(h*Math.PI/180),K.scale(d,p),K.imageSmoothingEnabled=C,K.imageSmoothingQuality=D,K.drawImage.apply(K,[i].concat(Rt(Ee.map(function(Be){return Math.floor(Ie(Be))})))),K.restore(),q}var ra=String.fromCharCode;function Fa(i,e,t){var a="";t+=e;for(var r=e;r<t;r+=1)a+=ra(i.getUint8(r));return a}var Ga=/^data:.*,/;function qa(i){var e=i.replace(Ga,""),t=atob(e),a=new ArrayBuffer(t.length),r=new Uint8Array(a);return J(r,function(s,n){r[n]=t.charCodeAt(n)}),a}function Ka(i,e){for(var t=[],a=8192,r=new Uint8Array(i);r.length>0;)t.push(ra.apply(null,ea(r.subarray(0,a)))),r=r.subarray(a);return"data:".concat(e,";base64,").concat(btoa(t.join("")))}function Qa(i){var e=new DataView(i),t;try{var a,r,s;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var n=e.byteLength,l=2;l+1<n;){if(e.getUint8(l)===255&&e.getUint8(l+1)===225){r=l;break}l+=1}if(r){var h=r+4,u=r+10;if(Fa(e,h,4)==="Exif"){var d=e.getUint16(u);if(a=d===18761,(a||d===19789)&&e.getUint16(u+2,a)===42){var c=e.getUint32(u+4,a);c>=8&&(s=u+c)}}}if(s){var p=e.getUint16(s,a),E,$;for($=0;$<p;$+=1)if(E=s+$*12+2,e.getUint16(E,a)===274){E+=8,t=e.getUint16(E,a),e.setUint16(E,1,a);break}}}catch(O){t=1}return t}function Ja(i){var e=0,t=1,a=1;switch(i){case 2:t=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:a}}var Za={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,a=this.container,r=this.cropper,s=Number(t.minContainerWidth),n=Number(t.minContainerHeight);ee(r,oe),ue(e,oe);var l={width:Math.max(a.offsetWidth,s>=0?s:Kt),height:Math.max(a.offsetHeight,n>=0?n:Qt)};this.containerData=l,be(r,{width:l.width,height:l.height}),ee(e,oe),ue(r,oe)},initCanvas:function(){var e=this.containerData,t=this.imageData,a=this.options.viewMode,r=Math.abs(t.rotate)%180==90,s=r?t.naturalHeight:t.naturalWidth,n=r?t.naturalWidth:t.naturalHeight,l=s/n,h=e.width,u=e.height;e.height*l>e.width?a===3?h=e.height*l:u=e.width/l:a===3?u=e.width/l:h=e.height*l;var d={aspectRatio:l,naturalWidth:s,naturalHeight:n,width:h,height:u};this.canvasData=d,this.limited=a===1||a===2,this.limitCanvas(!0,!0),d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth),d.height=Math.min(Math.max(d.height,d.minHeight),d.maxHeight),d.left=(e.width-d.width)/2,d.top=(e.height-d.height)/2,d.oldLeft=d.left,d.oldTop=d.top,this.initialCanvasData=Y({},d)},limitCanvas:function(e,t){var a=this.options,r=this.containerData,s=this.canvasData,n=this.cropBoxData,l=a.viewMode,h=s.aspectRatio,u=this.cropped&&n;if(e){var d=Number(a.minCanvasWidth)||0,c=Number(a.minCanvasHeight)||0;l>1?(d=Math.max(d,r.width),c=Math.max(c,r.height),l===3&&(c*h>d?d=c*h:c=d/h)):l>0&&(d?d=Math.max(d,u?n.width:0):c?c=Math.max(c,u?n.height:0):u&&(d=n.width,c=n.height,c*h>d?d=c*h:c=d/h));var p=ye({aspectRatio:h,width:d,height:c});d=p.width,c=p.height,s.minWidth=d,s.minHeight=c,s.maxWidth=1/0,s.maxHeight=1/0}if(t)if(l>(u?0:1)){var E=r.width-s.width,$=r.height-s.height;s.minLeft=Math.min(0,E),s.minTop=Math.min(0,$),s.maxLeft=Math.max(0,E),s.maxTop=Math.max(0,$),u&&this.limited&&(s.minLeft=Math.min(n.left,n.left+(n.width-s.width)),s.minTop=Math.min(n.top,n.top+(n.height-s.height)),s.maxLeft=n.left,s.maxTop=n.top,l===2&&(s.width>=r.width&&(s.minLeft=Math.min(0,E),s.maxLeft=Math.max(0,E)),s.height>=r.height&&(s.minTop=Math.min(0,$),s.maxTop=Math.max(0,$))))}else s.minLeft=-s.width,s.minTop=-s.height,s.maxLeft=r.width,s.maxTop=r.height},renderCanvas:function(e,t){var a=this.canvasData,r=this.imageData;if(t){var s=Va({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),n=s.width,l=s.height,h=a.width*(n/a.naturalWidth),u=a.height*(l/a.naturalHeight);a.left-=(h-a.width)/2,a.top-=(u-a.height)/2,a.width=h,a.height=u,a.aspectRatio=n/l,a.naturalWidth=n,a.naturalHeight=l,this.limitCanvas(!0,!1)}(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCanvas(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,be(this.canvas,Y({width:a.width,height:a.height},Ye({translateX:a.left,translateY:a.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,a=this.imageData,r=a.naturalWidth*(t.width/t.naturalWidth),s=a.naturalHeight*(t.height/t.naturalHeight);Y(a,{width:r,height:s,left:(t.width-r)/2,top:(t.height-s)/2}),be(this.image,Y({width:a.width,height:a.height},Ye(Y({translateX:a.left,translateY:a.top},a)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,a=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,s={width:t.width,height:t.height};a&&(t.height*a>t.width?s.height=s.width/a:s.width=s.height*a),this.cropBoxData=s,this.limitCropBox(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.width=Math.max(s.minWidth,s.width*r),s.height=Math.max(s.minHeight,s.height*r),s.left=t.left+(t.width-s.width)/2,s.top=t.top+(t.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCropBoxData=Y({},s)},limitCropBox:function(e,t){var a=this.options,r=this.containerData,s=this.canvasData,n=this.cropBoxData,l=this.limited,h=a.aspectRatio;if(e){var u=Number(a.minCropBoxWidth)||0,d=Number(a.minCropBoxHeight)||0,c=l?Math.min(r.width,s.width,s.width+s.left,r.width-s.left):r.width,p=l?Math.min(r.height,s.height,s.height+s.top,r.height-s.top):r.height;u=Math.min(u,r.width),d=Math.min(d,r.height),h&&(u&&d?d*h>u?d=u/h:u=d*h:u?d=u/h:d&&(u=d*h),p*h>c?p=c/h:c=p*h),n.minWidth=Math.min(u,c),n.minHeight=Math.min(d,p),n.maxWidth=c,n.maxHeight=p}t&&(l?(n.minLeft=Math.max(0,s.left),n.minTop=Math.max(0,s.top),n.maxLeft=Math.min(r.width,s.left+s.width)-n.width,n.maxTop=Math.min(r.height,s.top+s.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=r.width-n.width,n.maxTop=r.height-n.height))},renderCropBox:function(){var e=this.options,t=this.containerData,a=this.cropBoxData;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,e.movable&&e.cropBoxMovable&&We(this.face,He,a.width>=t.width&&a.height>=t.height?At:lt),be(this.cropBox,Y({width:a.width,height:a.height},Ye({translateX:a.left,translateY:a.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Re(this.element,ht,this.getData())}},ei={initPreview:function(){var e=this.element,t=this.crossOrigin,a=this.options.preview,r=t?this.crossOriginUrl:this.url,s=e.alt||"The image to preview",n=document.createElement("img");if(t&&(n.crossOrigin=t),n.src=r,n.alt=s,this.viewBox.appendChild(n),this.viewBoxImage=n,!!a){var l=a;typeof a=="string"?l=e.ownerDocument.querySelectorAll(a):a.querySelector&&(l=[a]),this.previews=l,J(l,function(h){var u=document.createElement("img");We(h,Ke,{width:h.offsetWidth,height:h.offsetHeight,html:h.innerHTML}),t&&(u.crossOrigin=t),u.src=r,u.alt=s,u.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',h.innerHTML="",h.appendChild(u)})}},resetPreview:function(){J(this.previews,function(e){var t=yt(e,Ke);be(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Ua(e,Ke)})},preview:function(){var e=this.imageData,t=this.canvasData,a=this.cropBoxData,r=a.width,s=a.height,n=e.width,l=e.height,h=a.left-t.left-e.left,u=a.top-t.top-e.top;!this.cropped||this.disabled||(be(this.viewBoxImage,Y({width:n,height:l},Ye(Y({translateX:-h,translateY:-u},e)))),J(this.previews,function(d){var c=yt(d,Ke),p=c.width,E=c.height,$=p,O=E,S=1;r&&(S=p/r,O=s*S),s&&O>E&&(S=E/s,$=r*S,O=E),be(d,{width:$,height:O}),be(d.getElementsByTagName("img")[0],Y({width:n*S,height:l*S},Ye(Y({translateX:-h*S,translateY:-u*S},e))))}))}},ti={bind:function(){var e=this.element,t=this.options,a=this.cropper;se(t.cropstart)&&re(e,gt,t.cropstart),se(t.cropmove)&&re(e,mt,t.cropmove),se(t.cropend)&&re(e,pt,t.cropend),se(t.crop)&&re(e,ht,t.crop),se(t.zoom)&&re(e,ft,t.zoom),re(a,Wt,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&re(a,Gt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&re(a,Ht,this.onDblclick=this.dblclick.bind(this)),re(e.ownerDocument,Yt,this.onCropMove=this.cropMove.bind(this)),re(e.ownerDocument,Vt,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&re(window,Ft,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,a=this.cropper;se(t.cropstart)&&de(e,gt,t.cropstart),se(t.cropmove)&&de(e,mt,t.cropmove),se(t.cropend)&&de(e,pt,t.cropend),se(t.crop)&&de(e,ht,t.crop),se(t.zoom)&&de(e,ft,t.zoom),de(a,Wt,this.onCropStart),t.zoomable&&t.zoomOnWheel&&de(a,Gt,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&de(a,Ht,this.onDblclick),de(e.ownerDocument,Yt,this.onCropMove),de(e.ownerDocument,Vt,this.onCropEnd),t.responsive&&de(window,Ft,this.onResize)}},ai={resize:function(){if(!this.disabled){var e=this.options,t=this.container,a=this.containerData,r=t.offsetWidth/a.width,s=t.offsetHeight/a.height,n=Math.abs(r-1)>Math.abs(s-1)?r:s;if(n!==1){var l,h;e.restore&&(l=this.getCanvasData(),h=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(J(l,function(u,d){l[d]=u*n})),this.setCropBoxData(J(h,function(u,d){h[d]=u*n})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ut||this.setDragMode(Pa(this.dragBox,dt)?Lt:ut)},wheel:function(e){var t=this,a=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*a,e)))},cropStart:function(e){var t=e.buttons,a=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(A(t)&&t!==1||A(a)&&a!==0||e.ctrlKey))){var r=this.options,s=this.pointers,n;e.changedTouches?J(e.changedTouches,function(l){s[l.identifier]=Qe(l)}):s[e.pointerId||0]=Qe(e),Object.keys(s).length>1&&r.zoomable&&r.zoomOnTouch?n=jt:n=yt(e.target,He),!!$a.test(n)&&Re(this.element,gt,{originalEvent:e,action:n})!==!1&&(e.preventDefault(),this.action=n,this.cropping=!1,n===Bt&&(this.cropping=!0,ee(this.dragBox,qe)))}},cropMove:function(e){var t=this.action;if(!(this.disabled||!t)){var a=this.pointers;e.preventDefault(),Re(this.element,mt,{originalEvent:e,action:t})!==!1&&(e.changedTouches?J(e.changedTouches,function(r){Y(a[r.identifier]||{},Qe(r,!0))}):Y(a[e.pointerId||0]||{},Qe(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,a=this.pointers;e.changedTouches?J(e.changedTouches,function(r){delete a[r.identifier]}):delete a[e.pointerId||0],!!t&&(e.preventDefault(),Object.keys(a).length||(this.action=""),this.cropping&&(this.cropping=!1,Te(this.dragBox,qe,this.cropped&&this.options.modal)),Re(this.element,pt,{originalEvent:e,action:t}))}}},ii={change:function(e){var t=this.options,a=this.canvasData,r=this.containerData,s=this.cropBoxData,n=this.pointers,l=this.action,h=t.aspectRatio,u=s.left,d=s.top,c=s.width,p=s.height,E=u+c,$=d+p,O=0,S=0,T=r.width,k=r.height,C=!0,I;!h&&e.shiftKey&&(h=c&&p?c/p:1),this.limited&&(O=s.minLeft,S=s.minTop,T=O+Math.min(r.width,a.width,a.left+a.width),k=S+Math.min(r.height,a.height,a.top+a.height));var D=n[Object.keys(n)[0]],m={x:D.endX-D.startX,y:D.endY-D.startY},R=function(z){switch(z){case we:E+m.x>T&&(m.x=T-E);break;case ke:u+m.x<O&&(m.x=O-u);break;case ve:d+m.y<S&&(m.y=S-d);break;case Ne:$+m.y>k&&(m.y=k-$);break}};switch(l){case lt:u+=m.x,d+=m.y;break;case we:if(m.x>=0&&(E>=T||h&&(d<=S||$>=k))){C=!1;break}R(we),c+=m.x,c<0&&(l=ke,c=-c,u-=c),h&&(p=c/h,d+=(s.height-p)/2);break;case ve:if(m.y<=0&&(d<=S||h&&(u<=O||E>=T))){C=!1;break}R(ve),p-=m.y,d+=m.y,p<0&&(l=Ne,p=-p,d-=p),h&&(c=p*h,u+=(s.width-c)/2);break;case ke:if(m.x<=0&&(u<=O||h&&(d<=S||$>=k))){C=!1;break}R(ke),c-=m.x,u+=m.x,c<0&&(l=we,c=-c,u-=c),h&&(p=c/h,d+=(s.height-p)/2);break;case Ne:if(m.y>=0&&($>=k||h&&(u<=O||E>=T))){C=!1;break}R(Ne),p+=m.y,p<0&&(l=ve,p=-p,d-=p),h&&(c=p*h,u+=(s.width-c)/2);break;case ze:if(h){if(m.y<=0&&(d<=S||E>=T)){C=!1;break}R(ve),p-=m.y,d+=m.y,c=p*h}else R(ve),R(we),m.x>=0?E<T?c+=m.x:m.y<=0&&d<=S&&(C=!1):c+=m.x,m.y<=0?d>S&&(p-=m.y,d+=m.y):(p-=m.y,d+=m.y);c<0&&p<0?(l=Ue,p=-p,c=-c,d-=p,u-=c):c<0?(l=Pe,c=-c,u-=c):p<0&&(l=Le,p=-p,d-=p);break;case Pe:if(h){if(m.y<=0&&(d<=S||u<=O)){C=!1;break}R(ve),p-=m.y,d+=m.y,c=p*h,u+=s.width-c}else R(ve),R(ke),m.x<=0?u>O?(c-=m.x,u+=m.x):m.y<=0&&d<=S&&(C=!1):(c-=m.x,u+=m.x),m.y<=0?d>S&&(p-=m.y,d+=m.y):(p-=m.y,d+=m.y);c<0&&p<0?(l=Le,p=-p,c=-c,d-=p,u-=c):c<0?(l=ze,c=-c,u-=c):p<0&&(l=Ue,p=-p,d-=p);break;case Ue:if(h){if(m.x<=0&&(u<=O||$>=k)){C=!1;break}R(ke),c-=m.x,u+=m.x,p=c/h}else R(Ne),R(ke),m.x<=0?u>O?(c-=m.x,u+=m.x):m.y>=0&&$>=k&&(C=!1):(c-=m.x,u+=m.x),m.y>=0?$<k&&(p+=m.y):p+=m.y;c<0&&p<0?(l=ze,p=-p,c=-c,d-=p,u-=c):c<0?(l=Le,c=-c,u-=c):p<0&&(l=Pe,p=-p,d-=p);break;case Le:if(h){if(m.x>=0&&(E>=T||$>=k)){C=!1;break}R(we),c+=m.x,p=c/h}else R(Ne),R(we),m.x>=0?E<T?c+=m.x:m.y>=0&&$>=k&&(C=!1):c+=m.x,m.y>=0?$<k&&(p+=m.y):p+=m.y;c<0&&p<0?(l=Pe,p=-p,c=-c,d-=p,u-=c):c<0?(l=Ue,c=-c,u-=c):p<0&&(l=ze,p=-p,d-=p);break;case At:this.move(m.x,m.y),C=!1;break;case jt:this.zoom(Wa(n),e),C=!1;break;case Bt:if(!m.x||!m.y){C=!1;break}I=ia(this.cropper),u=D.startX-I.left,d=D.startY-I.top,c=s.minWidth,p=s.minHeight,m.x>0?l=m.y>0?Le:ze:m.x<0&&(u-=c,l=m.y>0?Ue:Pe),m.y<0&&(d-=p),this.cropped||(ue(this.cropBox,oe),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}C&&(s.width=c,s.height=p,s.left=u,s.top=d,this.action=l,this.renderCropBox()),J(n,function(j){j.startX=j.endX,j.startY=j.endY})}},oi={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ee(this.dragBox,qe),ue(this.cropBox,oe),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Y({},this.initialImageData),this.canvasData=Y({},this.initialCanvasData),this.cropBoxData=Y({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Y(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ue(this.dragBox,qe),ee(this.cropBox,oe)),this},replace:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,J(this.previews,function(a){a.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ue(this.cropper,zt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ee(this.cropper,zt)),this},destroy:function(){var e=this.element;return e[W]?(e[W]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=this.canvasData,r=a.left,s=a.top;return this.moveTo(vt(e)?e:r+Number(e),vt(t)?t:s+Number(t))},moveTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(A(e)&&(a.left=e,r=!0),A(t)&&(a.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var a=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(a.width*e/a.naturalWidth,null,t)},zoomTo:function(e,t,a){var r=this.options,s=this.canvasData,n=s.width,l=s.height,h=s.naturalWidth,u=s.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var d=h*e,c=u*e;if(Re(this.element,ft,{ratio:e,oldRatio:n/h,originalEvent:a})===!1)return this;if(a){var p=this.pointers,E=ia(this.cropper),$=p&&Object.keys(p).length?Ya(p):{pageX:a.pageX,pageY:a.pageY};s.left-=(d-n)*(($.pageX-E.left-s.left)/n),s.top-=(c-l)*(($.pageY-E.top-s.top)/l)}else Oe(t)&&A(t.x)&&A(t.y)?(s.left-=(d-n)*((t.x-s.left)/n),s.top-=(c-l)*((t.y-s.top)/l)):(s.left-=(d-n)/2,s.top-=(c-l)/2);s.width=d,s.height=c,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),A(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,A(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(A(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(A(e)&&(a.scaleX=e,r=!0),A(t)&&(a.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,a=this.imageData,r=this.canvasData,s=this.cropBoxData,n;if(this.ready&&this.cropped){n={x:s.left-r.left,y:s.top-r.top,width:s.width,height:s.height};var l=a.width/a.naturalWidth;if(J(n,function(d,c){n[c]=d/l}),e){var h=Math.round(n.y+n.height),u=Math.round(n.x+n.width);n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=u-n.x,n.height=h-n.y}}else n={x:0,y:0,width:0,height:0};return t.rotatable&&(n.rotate=a.rotate||0),t.scalable&&(n.scaleX=a.scaleX||1,n.scaleY=a.scaleY||1),n},setData:function(e){var t=this.options,a=this.imageData,r=this.canvasData,s={};if(this.ready&&!this.disabled&&Oe(e)){var n=!1;t.rotatable&&A(e.rotate)&&e.rotate!==a.rotate&&(a.rotate=e.rotate,n=!0),t.scalable&&(A(e.scaleX)&&e.scaleX!==a.scaleX&&(a.scaleX=e.scaleX,n=!0),A(e.scaleY)&&e.scaleY!==a.scaleY&&(a.scaleY=e.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var l=a.width/a.naturalWidth;A(e.x)&&(s.left=e.x*l+r.left),A(e.y)&&(s.top=e.y*l+r.top),A(e.width)&&(s.width=e.width*l),A(e.height)&&(s.height=e.height*l),this.setCropBoxData(s)}return this},getContainerData:function(){return this.ready?Y({},this.containerData):{}},getImageData:function(){return this.sized?Y({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&J(["left","top","width","height","naturalWidth","naturalHeight"],function(a){t[a]=e[a]}),t},setCanvasData:function(e){var t=this.canvasData,a=t.aspectRatio;return this.ready&&!this.disabled&&Oe(e)&&(A(e.left)&&(t.left=e.left),A(e.top)&&(t.top=e.top),A(e.width)?(t.width=e.width,t.height=e.width/a):A(e.height)&&(t.height=e.height,t.width=e.height*a),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this.cropBoxData,a=this.options.aspectRatio,r,s;return this.ready&&this.cropped&&!this.disabled&&Oe(e)&&(A(e.left)&&(t.left=e.left),A(e.top)&&(t.top=e.top),A(e.width)&&e.width!==t.width&&(r=!0,t.width=e.width),A(e.height)&&e.height!==t.height&&(s=!0,t.height=e.height),a&&(r?t.height=t.width/a:s&&(t.width=t.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,a=Xa(this.image,this.imageData,t,e);if(!this.cropped)return a;var r=this.getData(e.rounded),s=r.x,n=r.y,l=r.width,h=r.height,u=a.width/Math.floor(t.naturalWidth);u!==1&&(s*=u,n*=u,l*=u,h*=u);var d=l/h,c=ye({aspectRatio:d,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),p=ye({aspectRatio:d,width:e.minWidth||0,height:e.minHeight||0},"cover"),E=ye({aspectRatio:d,width:e.width||(u!==1?a.width:l),height:e.height||(u!==1?a.height:h)}),$=E.width,O=E.height;$=Math.min(c.width,Math.max(p.width,$)),O=Math.min(c.height,Math.max(p.height,O));var S=document.createElement("canvas"),T=S.getContext("2d");S.width=Ie($),S.height=Ie(O),T.fillStyle=e.fillColor||"transparent",T.fillRect(0,0,$,O);var k=e.imageSmoothingEnabled,C=k===void 0?!0:k,I=e.imageSmoothingQuality;T.imageSmoothingEnabled=C,I&&(T.imageSmoothingQuality=I);var D=a.width,m=a.height,R=s,j=n,z,H,te,F,G,q;R<=-l||R>D?(R=0,z=0,te=0,G=0):R<=0?(te=-R,R=0,z=Math.min(D,l+R),G=z):R<=D&&(te=0,z=Math.min(l,D-R),G=z),z<=0||j<=-h||j>m?(j=0,H=0,F=0,q=0):j<=0?(F=-j,j=0,H=Math.min(m,h+j),q=H):j<=m&&(F=0,H=Math.min(h,m-j),q=H);var K=[R,j,z,H];if(G>0&&q>0){var ne=$/l;K.push(te*ne,F*ne,G*ne,q*ne)}return T.drawImage.apply(T,[a].concat(Rt(K.map(function(pe){return Math.floor(Ie(pe))})))),S},setAspectRatio:function(e){var t=this.options;return!this.disabled&&!vt(e)&&(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,a=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var s=e===ut,n=t.movable&&e===Lt;e=s||n?e:Ut,t.dragMode=e,We(a,He,e),Te(a,dt,s),Te(a,ct,n),t.cropBoxMovable||(We(r,He,e),Te(r,dt,s),Te(r,ct,n))}return this}},si=ce.Cropper,na=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ba(this,i),!e||!Ia.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Y({},Jt,Oe(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return ya(i,[{key:"init",value:function(){var t=this.element,a=t.tagName.toLowerCase(),r;if(!t[W]){if(t[W]=this,a==="img"){if(this.isImg=!0,r=t.getAttribute("src")||"",this.originalUrl=r,!r)return;r=t.src}else a==="canvas"&&window.HTMLCanvasElement&&(r=t.toDataURL());this.load(r)}}},{key:"load",value:function(t){var a=this;if(!!t){this.url=t,this.imageData={};var r=this.element,s=this.options;if(!s.rotatable&&!s.scalable&&(s.checkOrientation=!1),!s.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Na.test(t)){Oa.test(t)?this.read(qa(t)):this.clone();return}var n=new XMLHttpRequest,l=this.clone.bind(this);this.reloading=!0,this.xhr=n,n.onabort=l,n.onerror=l,n.ontimeout=l,n.onprogress=function(){n.getResponseHeader("content-type")!==qt&&n.abort()},n.onload=function(){a.read(n.response)},n.onloadend=function(){a.reloading=!1,a.xhr=null},s.checkCrossOrigin&&oa(t)&&r.crossOrigin&&(t=sa(t)),n.open("GET",t,!0),n.responseType="arraybuffer",n.withCredentials=r.crossOrigin==="use-credentials",n.send()}}},{key:"read",value:function(t){var a=this.options,r=this.imageData,s=Qa(t),n=0,l=1,h=1;if(s>1){this.url=Ka(t,qt);var u=Ja(s);n=u.rotate,l=u.scaleX,h=u.scaleY}a.rotatable&&(r.rotate=n),a.scalable&&(r.scaleX=l,r.scaleY=h),this.clone()}},{key:"clone",value:function(){var t=this.element,a=this.url,r=t.crossOrigin,s=a;this.options.checkCrossOrigin&&oa(a)&&(r||(r="anonymous"),s=sa(a)),this.crossOrigin=r,this.crossOriginUrl=s;var n=document.createElement("img");r&&(n.crossOrigin=r),n.src=s||a,n.alt=t.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),ee(n,Pt),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var t=this,a=this.image;a.onload=null,a.onerror=null,this.sizing=!0;var r=ce.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ce.navigator.userAgent),s=function(u,d){Y(t.imageData,{naturalWidth:u,naturalHeight:d,aspectRatio:u/d}),t.initialImageData=Y({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(a.naturalWidth&&!r){s(a.naturalWidth,a.naturalHeight);return}var n=document.createElement("img"),l=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){s(n.width,n.height),r||l.removeChild(n)},n.src=a.src,r||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",l.appendChild(n))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,a=this.options,r=this.image,s=t.parentNode,n=document.createElement("div");n.innerHTML=Ta;var l=n.querySelector(".".concat(W,"-container")),h=l.querySelector(".".concat(W,"-canvas")),u=l.querySelector(".".concat(W,"-drag-box")),d=l.querySelector(".".concat(W,"-crop-box")),c=d.querySelector(".".concat(W,"-face"));this.container=s,this.cropper=l,this.canvas=h,this.dragBox=u,this.cropBox=d,this.viewBox=l.querySelector(".".concat(W,"-view-box")),this.face=c,h.appendChild(r),ee(t,oe),s.insertBefore(l,t.nextSibling),ue(r,Pt),this.initPreview(),this.bind(),a.initialAspectRatio=Math.max(0,a.initialAspectRatio)||NaN,a.aspectRatio=Math.max(0,a.aspectRatio)||NaN,a.viewMode=Math.max(0,Math.min(3,Math.round(a.viewMode)))||0,ee(d,oe),a.guides||ee(d.getElementsByClassName("".concat(W,"-dashed")),oe),a.center||ee(d.getElementsByClassName("".concat(W,"-center")),oe),a.background&&ee(l,"".concat(W,"-bg")),a.highlight||ee(c,Da),a.cropBoxMovable&&(ee(c,ct),We(c,He,lt)),a.cropBoxResizable||(ee(d.getElementsByClassName("".concat(W,"-line")),oe),ee(d.getElementsByClassName("".concat(W,"-point")),oe)),this.render(),this.ready=!0,this.setDragMode(a.dragMode),a.autoCrop&&this.crop(),this.setData(a.data),se(a.ready)&&re(t,Xt,a.ready,{once:!0}),Re(t,Xt)}}},{key:"unbuild",value:function(){if(!!this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),ue(this.element,oe)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=si,i}},{key:"setDefaults",value:function(t){Y(Jt,Oe(t)&&t)}}])}();Y(na.prototype,Za,ei,ti,ai,ii,oi);var ri=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:na}),ni=Ct(ri);Object.defineProperty($t,"__esModule",{value:!0});var la=fa,li=ni,di=ci(li);function ci(i){return i&&i.__esModule?i:{default:i}}function ui(i,e){var t={};for(var a in i)e.indexOf(a)>=0||!Object.prototype.hasOwnProperty.call(i,a)||(t[a]=i[a]);return t}var hi=typeof window=="undefined"?[String,Array]:[String,Array,Element,NodeList],pi=$t.default={render:function(){var e=this.crossorigin||void 0;return(0,la.h)("div",{style:this.containerStyle},[(0,la.h)("img",{ref:"img",src:this.src,alt:this.alt||"image",style:[{"max-width":"100%"},this.imgStyle],crossorigin:e})])},props:{containerStyle:Object,src:{type:String,default:""},alt:String,imgStyle:Object,viewMode:Number,dragMode:String,initialAspectRatio:Number,aspectRatio:Number,data:Object,preview:hi,responsive:{type:Boolean,default:!0},restore:{type:Boolean,default:!0},checkCrossOrigin:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},crossorigin:{type:String},modal:{type:Boolean,default:!0},guides:{type:Boolean,default:!0},center:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0},background:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!0},autoCropArea:Number,movable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!0},scalable:{type:Boolean,default:!0},zoomable:{type:Boolean,default:!0},zoomOnTouch:{type:Boolean,default:!0},zoomOnWheel:{type:Boolean,default:!0},wheelZoomRatio:Number,cropBoxMovable:{type:Boolean,default:!0},cropBoxResizable:{type:Boolean,default:!0},toggleDragModeOnDblclick:{type:Boolean,default:!0},minCanvasWidth:Number,minCanvasHeight:Number,minCropBoxWidth:Number,minCropBoxHeight:Number,minContainerWidth:Number,minContainerHeight:Number,ready:Function,cropstart:Function,cropmove:Function,cropend:Function,crop:Function,zoom:Function},mounted:function(){var e=this.$options.props;e.containerStyle,e.src,e.alt,e.imgStyle;var t=ui(e,["containerStyle","src","alt","imgStyle"]),a={};for(var r in t)this[r]!==void 0&&(a[r]=this[r]);this.cropper=new di.default(this.$refs.img,a)},methods:{reset:function(){return this.cropper.reset()},clear:function(){return this.cropper.clear()},initCrop:function(){return this.cropper.crop()},replace:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.cropper.replace(e,t)},enable:function(){return this.cropper.enable()},disable:function(){return this.cropper.disable()},destroy:function(){return this.cropper.destroy()},move:function(e,t){return this.cropper.move(e,t)},moveTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return this.cropper.moveTo(e,t)},relativeZoom:function(e,t){return this.cropper.zoom(e,t)},zoomTo:function(e,t){return this.cropper.zoomTo(e,t)},rotate:function(e){return this.cropper.rotate(e)},rotateTo:function(e){return this.cropper.rotateTo(e)},scaleX:function(e){return this.cropper.scaleX(e)},scaleY:function(e){return this.cropper.scaleY(e)},scale:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return this.cropper.scale(e,t)},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.cropper.getData(e)},setData:function(e){return this.cropper.setData(e)},getContainerData:function(){return this.cropper.getContainerData()},getImageData:function(){return this.cropper.getImageData()},getCanvasData:function(){return this.cropper.getCanvasData()},setCanvasData:function(e){return this.cropper.setCanvasData(e)},getCropBoxData:function(){return this.cropper.getCropBoxData()},setCropBoxData:function(e){return this.cropper.setCropBoxData(e)},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.cropper.getCroppedCanvas(e)},setAspectRatio:function(e){return this.cropper.setAspectRatio(e)},setDragMode:function(e){return this.cropper.setDragMode(e)}}};const ie=i=>(et("data-v-70176949"),i=i(),tt(),i),mi={class:"bg-white rounded-lg border border-gray-200 p-4"},gi={class:"flex items-center justify-between mb-4"},fi=ie(()=>o("div",null,[o("h4",{class:"font-medium text-gray-800"},"Image Compression"),o("p",{class:"text-sm text-gray-600"},"Optimize image size for better performance")],-1)),vi={class:"flex items-center space-x-2"},bi={class:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full"},yi=ie(()=>o("span",{class:"text-gray-400"},"\u2192",-1)),_i={class:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full"},xi={class:"space-y-4"},wi={class:"flex justify-between items-center mb-2"},ki=ie(()=>o("label",{class:"text-sm font-medium text-gray-700"},"Compression Quality",-1)),Ci={class:"text-sm text-blue-600 font-medium"},Di=ie(()=>o("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[o("span",null,"Smaller File"),o("span",null,"Better Quality")],-1)),Mi=ie(()=>o("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Quick Presets",-1)),Ei={class:"grid grid-cols-4 gap-2"},Si=["onClick"],$i={class:"grid grid-cols-2 gap-4"},Ni=ie(()=>o("label",{class:"text-sm font-medium text-gray-700 mb-2 block"},"Max Width",-1)),Oi=Fe('<option value="original" data-v-70176949>Original</option><option value="800" data-v-70176949>800px</option><option value="1024" data-v-70176949>1024px</option><option value="1200" data-v-70176949>1200px</option><option value="1600" data-v-70176949>1600px</option>',5),Ii=[Oi],Ti=ie(()=>o("label",{class:"text-sm font-medium text-gray-700 mb-2 block"},"Format",-1)),Ri=ie(()=>o("option",{value:"jpeg"},"JPEG",-1)),Bi=ie(()=>o("option",{value:"webp"},"WebP",-1)),Ai=ie(()=>o("option",{value:"png"},"PNG",-1)),ji=[Ri,Bi,Ai],zi={key:0,class:"bg-gray-50 rounded-lg p-3 border border-gray-200"},Pi={class:"grid grid-cols-2 gap-4 text-sm"},Li=ie(()=>o("p",{class:"text-gray-600"},"Original Size",-1)),Ui={class:"font-medium text-gray-800"},Hi=ie(()=>o("p",{class:"text-gray-600"},"Compressed Size",-1)),Wi={class:"font-medium text-green-600"},Yi=ie(()=>o("p",{class:"text-gray-600"},"Reduction",-1)),Vi={class:"font-medium text-blue-600"},Xi=ie(()=>o("p",{class:"text-gray-600"},"Dimensions",-1)),Fi={class:"font-medium text-gray-800"},Gi={class:"flex space-x-3 pt-2"},qi=["disabled"],Ki={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qi=ie(()=>o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)),Ji=[Qi],Zi={props:{imageBlob:{type:Blob,required:!0},imageUrl:{type:String,default:""},autoCompress:{type:Boolean,default:!0},defaultQuality:{type:Number,default:80},defaultMaxWidth:{type:[String,Number],default:"1024"}},emits:["compressed","cancel","error"],setup(i,{emit:e}){const t=i,a=N(t.defaultQuality),r=N(t.defaultMaxWidth),s=N("jpeg"),n=N(null),l=N(!1),h=N(0),u=N(0),d=N({width:0,height:0}),c=N([{name:"High",quality:90,maxWidth:"original"},{name:"Medium",quality:75,maxWidth:"1024"},{name:"Low",quality:50,maxWidth:"800"},{name:"Minimal",quality:30,maxWidth:"600"}]),p=je(()=>!h.value||!u.value?0:Math.round((h.value-u.value)/h.value*100)),E=C=>C?C<1024?C+" Bytes":C<1048576?(C/1024).toFixed(1)+" KB":(C/1048576).toFixed(1)+" MB":"0 KB",$=C=>new Promise(I=>{const D=new Image;D.onload=()=>{I({width:D.width,height:D.height})},D.onerror=()=>{I({width:0,height:0})},D.src=C}),O=(C,I=.8,D="original",m="jpeg")=>ae(this,null,function*(){return new Promise(R=>{const j=new Image,z=URL.createObjectURL(C);j.onload=()=>ae(this,null,function*(){const H=document.createElement("canvas"),te=H.getContext("2d");let{width:F,height:G}=j;D!=="original"&&F>D&&(G=G*D/F,F=D),H.width=F,H.height=G,te.imageSmoothingEnabled=!0,te.imageSmoothingQuality="high",te.drawImage(j,0,0,F,G);const q=m==="webp"?"image/webp":m==="png"?"image/png":"image/jpeg";H.toBlob(K=>{URL.revokeObjectURL(z),R({blob:K||C,dimensions:{width:F,height:G}})},q,I/100)}),j.onerror=()=>{URL.revokeObjectURL(z),R({blob:C,dimensions:{width:0,height:0}})},j.src=z})}),S=()=>ae(this,null,function*(){if(!!t.imageBlob){l.value=!0;try{const C=yield O(t.imageBlob,a.value,r.value==="original"?"original":parseInt(r.value),s.value);n.value=C.blob,u.value=C.blob.size,d.value=C.dimensions}catch(C){e("error","Failed to compress image: "+C.message)}finally{l.value=!1}}}),T=C=>{a.value=C.quality,r.value=C.maxWidth,S()},k=()=>{n.value&&e("compressed",{blob:n.value,quality:a.value,dimensions:d.value,format:s.value,originalSize:h.value,compressedSize:u.value,reduction:p.value})};return Ve(()=>ae(this,null,function*(){if(t.imageBlob){if(h.value=t.imageBlob.size,t.imageUrl){const C=yield $(t.imageUrl);d.value=C}t.autoCompress&&(yield S())}})),Dt(()=>t.imageBlob,C=>ae(this,null,function*(){C&&(h.value=C.size,t.autoCompress&&(yield S()))})),(C,I)=>(y(),_("div",mi,[o("div",gi,[fi,o("div",vi,[o("span",bi,P(E(h.value)),1),yi,o("span",_i,P(E(u.value)),1)])]),o("div",xi,[o("div",null,[o("div",wi,[ki,o("span",Ci,P(a.value)+"%",1)]),V(o("input",{type:"range","onUpdate:modelValue":I[0]||(I[0]=D=>a.value=D),min:"10",max:"100",step:"5",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",onInput:S},null,544),[[Z,a.value]]),Di]),o("div",null,[Mi,o("div",Ei,[(y(!0),_(Mt,null,Et(c.value,D=>(y(),_("button",{key:D.name,onClick:m=>T(D),class:he(["px-3 py-2 text-xs rounded-md transition-colors border",D.quality===a.value?"bg-blue-100 text-blue-700 border-blue-300":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"])},P(D.name),11,Si))),128))])]),o("div",$i,[o("div",null,[Ni,V(o("select",{"onUpdate:modelValue":I[1]||(I[1]=D=>r.value=D),onChange:S,class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},Ii,544),[[Xe,r.value]])]),o("div",null,[Ti,V(o("select",{"onUpdate:modelValue":I[2]||(I[2]=D=>s.value=D),onChange:S,class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},ji,544),[[Xe,s.value]])])]),n.value?(y(),_("div",zi,[o("div",Pi,[o("div",null,[Li,o("p",Ui,P(E(h.value)),1)]),o("div",null,[Hi,o("p",Wi,P(E(u.value)),1)]),o("div",null,[Yi,o("p",Vi,P(v(p))+"%",1)]),o("div",null,[Xi,o("p",Fi,P(d.value.width)+"\xD7"+P(d.value.height)+"px",1)])])])):B("",!0),o("div",Gi,[o("button",{onClick:k,disabled:!n.value||l.value,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed flex items-center justify-center space-x-2 transition-colors"},[l.value?(y(),_("svg",Ki,Ji)):B("",!0),o("span",null,P(l.value?"Compressing...":"Apply Compression"),1)],8,qi),o("button",{onClick:I[3]||(I[3]=D=>C.$emit("cancel")),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"}," Cancel ")])])]))}};var eo=Ze(Zi,[["__scopeId","data-v-70176949"]]);const X=i=>(et("data-v-1b8cd6c4"),i=i(),tt(),i),to={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm"},ao={class:"flex items-center justify-between mb-6"},io=X(()=>o("div",null,[o("h3",{class:"text-lg font-semibold text-gray-800"},"Profile Image"),o("p",{class:"text-sm text-gray-600 mt-1"},"Update student's profile picture")],-1)),oo=["src","alt"],so={class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200"},ro={class:"flex items-center space-x-4"},no={class:"w-20 h-20 rounded-full border-2 border-white shadow-md overflow-hidden bg-gray-100"},lo=["src","alt"],co={key:0,class:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center"},uo=X(()=>o("div",{class:"spinner-small !w-6 !h-6 !border-2"},null,-1)),ho=[uo],po=X(()=>o("div",{class:"absolute bottom-0 right-0 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs"},[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),mo={class:"flex-1"},go={class:"font-medium text-gray-800"},fo={class:"text-sm text-gray-600"},vo={key:0,class:"text-sm text-blue-600 mt-1"},bo={class:"bg-blue-50 rounded-lg border border-blue-200 p-5"},yo=X(()=>o("h4",{class:"font-medium text-gray-800 mb-4"},"Upload New Image",-1)),_o={class:"space-y-4"},xo={class:"flex flex-col sm:flex-row gap-3"},wo=["disabled"],ko=X(()=>o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),Co=X(()=>o("span",null,"Choose File",-1)),Do=[ko,Co],Mo={class:"relative flex-1"},Eo=["disabled"],So=Fe('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1b8cd6c4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-1b8cd6c4></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-1b8cd6c4></path></svg><span data-v-1b8cd6c4>Take Photo</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1b8cd6c4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-1b8cd6c4></path></svg>',3),$o=[So],No={key:0,class:"absolute top-full left-0 mt-1 w-full bg-white rounded-lg shadow-lg border border-gray-200 z-10"},Oo=Fe('<div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center" data-v-1b8cd6c4><svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1b8cd6c4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-1b8cd6c4></path></svg></div><div class="text-left" data-v-1b8cd6c4><p class="font-medium" data-v-1b8cd6c4>Front Camera</p><p class="text-xs text-gray-500" data-v-1b8cd6c4>Take a selfie</p></div>',2),Io=[Oo],To=Fe('<div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center" data-v-1b8cd6c4><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1b8cd6c4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-1b8cd6c4></path></svg></div><div class="text-left" data-v-1b8cd6c4><p class="font-medium" data-v-1b8cd6c4>Rear Camera</p><p class="text-xs text-gray-500" data-v-1b8cd6c4>Take a photo</p></div>',2),Ro=[To],Bo={key:0,class:"p-4 bg-white rounded-lg border border-gray-200"},Ao={class:"flex items-center justify-between"},jo={class:"flex items-center space-x-3"},zo=X(()=>o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Po=[zo],Lo={class:"font-medium text-gray-800"},Uo={class:"text-sm text-gray-600"},Ho={class:"text-xs text-gray-500 mt-1"},Wo={class:"flex items-center space-x-2"},Yo={key:2,class:"flex space-x-3"},Vo=["disabled"],Xo={key:0,class:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Fo=X(()=>o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)),Go=[Fo],qo={key:0,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4"},Ko={class:"bg-white rounded-lg max-w-4xl max-h-[90vh] w-full h-full flex flex-col"},Qo=X(()=>o("h3",{class:"text-lg font-semibold text-gray-800"},"Image Preview",-1)),Jo=X(()=>o("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Zo=[Jo],es={class:"flex-1 flex items-center justify-center p-8 overflow-auto"},ts=["src"],as=X(()=>o("div",{class:"p-4 border-t border-gray-200 text-center"},[o("p",{class:"text-sm text-gray-600"}," Click anywhere outside to close ")],-1)),is={key:2,class:"fixed inset-0 bg-black bg-opacity-90 flex flex-col items-center justify-center z-50 p-4"},os={class:"bg-white rounded-xl p-6 max-w-lg w-full"},ss={class:"flex justify-between items-center mb-6"},rs=X(()=>o("h3",{class:"text-xl font-semibold text-gray-800"},"Take Photo",-1)),ns={class:"flex items-center space-x-2"},ls=X(()=>o("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)),ds=[ls],cs=X(()=>o("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),us=[cs],hs={class:"relative bg-gray-900 rounded-xl overflow-hidden mb-4"},ps=X(()=>o("div",{class:"w-16 h-16 bg-white border-4 border-gray-800 rounded-full flex items-center justify-center"},[o("div",{class:"w-12 h-12 bg-gray-800 rounded-full"})],-1)),ms=[ps],gs={class:"text-center"},fs={class:"text-sm text-gray-600"},vs=at(" Using: "),bs={class:"font-medium"},ys=X(()=>o("p",{class:"text-xs text-gray-500 mt-1"},"Position the student's face in the frame and click the button to capture",-1)),_s={key:3,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4"},xs={class:"bg-white rounded-xl p-6 w-full max-w-4xl max-h-[95vh] overflow-hidden flex flex-col"},ws={class:"text-xl font-semibold text-gray-800 mb-6 flex-shrink-0"},ks={class:"flex-1 min-h-0 bg-gray-100 rounded-lg p-4 overflow-hidden"},Cs={class:"flex-shrink-0 mt-6"},Ds={class:"flex justify-center items-center space-x-4 mb-6"},Ms=X(()=>o("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),Es=X(()=>o("span",{class:"font-medium"},"Rotate Left",-1)),Ss=[Ms,Es],$s=X(()=>o("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),Ns=X(()=>o("span",{class:"font-medium"},"Rotate Right",-1)),Os=[$s,Ns],Is=X(()=>o("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),Ts=X(()=>o("span",{class:"font-medium"},"Reset",-1)),Rs=[Is,Ts],Bs={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},As={props:{studentId:{type:String,required:!0},currentImage:{type:String,default:""},studentName:{type:String,default:""}},emits:["image-updated","error","success"],setup(i,{emit:e}){const t=i,a=N(!1),r=N(null),s=N(null),n=N(null),l=N(""),h=N(!1),u=N(!1),d=N(!1),c=N(!1),p=N(!1),E=N(""),$=N(""),O=N(""),S=N(null),T=N("user"),k=N([]),C=N(!1),I=N(""),D=N(0),m=N({width:0,height:0}),R=N(null),j=N(null),z=N(null),H=je(()=>I.value?I.value:l.value?l.value:t.currentImage?F(t.currentImage):"/assets/alummah/images/default-student.png"),te=g=>g?g<1024?g+" Bytes":g<1048576?(g/1024).toFixed(1)+" KB":(g/1048576).toFixed(1)+" MB":"0 KB",F=g=>!g||g==="null"||g===""?"/assets/alummah/images/default-student.png":g.startsWith("http")||g.startsWith("//")?g:g.startsWith("/")?window.location.origin+g:`${window.location.origin}/${g.replace(/^\//,"")}`,G=g=>new Promise(w=>{const U=new Image;U.onload=()=>{w({width:U.width,height:U.height})},U.onerror=()=>{w({width:0,height:0})},U.src=g}),q=g=>{!g||g==="/assets/alummah/images/default-student.png"||($.value=g,c.value=!0)},K=()=>{c.value=!1,$.value=""},ne=g=>{O.value==="file"&&r.value?r.value=new File([g.blob],r.value.name,{type:g.blob.type,lastModified:Date.now()}):O.value==="camera"&&(n.value=g.blob,s.value=new File([g.blob],`camera-photo-${Date.now()}.${g.format}`,{type:g.blob.type,lastModified:Date.now()})),D.value=g.compressedSize,m.value=g.dimensions,p.value=!1,e("success",`Image compressed to ${g.reduction}% smaller`)},pe=g=>{e("error",g),p.value=!1},me=()=>ae(this,null,function*(){try{const w=(yield navigator.mediaDevices.enumerateDevices()).filter(U=>U.kind==="videoinput");k.value=w,C.value=w.length>1}catch(g){}}),le=(g="user")=>ae(this,null,function*(){d.value=!1,u.value=!1,h.value=!0,T.value=g;try{S.value&&S.value.getTracks().forEach(U=>U.stop());const w={video:{facingMode:g,width:{ideal:1920},height:{ideal:1080}}};S.value=yield navigator.mediaDevices.getUserMedia(w),j.value&&(j.value.srcObject=S.value)}catch(w){e("error","Camera access denied or not available"),h.value=!1}}),_e=()=>ae(this,null,function*(){const g=T.value==="user"?"environment":"user";yield le(g)}),De=()=>{d.value=!d.value},ge=g=>{g.target.closest(".relative")||(d.value=!1)},Me=$e({url:"school.al_ummah.api2.update_student_profile_image",auto:!1,onSuccess(g){a.value=!1,g.status==="success"?(I.value=l.value,e("image-updated",g.image_url),e("success",g.message||"Profile image updated successfully!"),wt()):e("error",g.message||"Upload failed")},onError(g){a.value=!1,e("error",g.message||"Upload error occurred")}}),Ee=()=>{var g;return(g=R.value)==null?void 0:g.click()},Be=g=>ae(this,null,function*(){const w=g.target.files[0];if(!w)return;if(!w.type.startsWith("image/"))return e("error","Select an image");if(w.size>10*1024*1024)return e("error","Image must be less than 10MB");r.value=w,D.value=w.size;const U=new FileReader;U.onload=Q=>ae(this,null,function*(){E.value=Q.target.result,l.value=Q.target.result,O.value="file";const xe=yield G(Q.target.result);m.value=xe,u.value=!0}),U.readAsDataURL(w)}),Je=()=>{if(!j.value)return;const g=document.createElement("canvas"),w=j.value;g.width=w.videoWidth,g.height=w.videoHeight,g.getContext("2d").drawImage(w,0,0),g.toBlob(U=>ae(this,null,function*(){if(!U)return;n.value=U,D.value=U.size,s.value=new File([U],`camera-photo-${Date.now()}.jpg`,{type:"image/jpeg",lastModified:Date.now()});const Q=new FileReader;Q.onload=xe=>ae(this,null,function*(){E.value=xe.target.result,l.value=xe.target.result,O.value="camera";const ca=yield G(xe.target.result);m.value=ca,u.value=!0}),Q.readAsDataURL(U)}),"image/jpeg",.8),Se()},Se=()=>{S.value&&S.value.getTracks().forEach(g=>g.stop()),S.value=null,h.value=!1,d.value=!1},fe=g=>{var w;return(w=z.value)==null?void 0:w.rotate(g)},Ae=()=>{var g;return(g=z.value)==null?void 0:g.reset()},f=()=>{if(!!z.value)try{const g=z.value.getCroppedCanvas();if(!g)throw new Error("Cannot crop image");g.toBlob(w=>{if(!w){e("error","Failed to process cropped image");return}b(w)},"image/jpeg",.8)}catch(g){e("error","Failed to crop image. Please try again.")}},b=g=>ae(this,null,function*(){const w=new FileReader;w.onload=U=>ae(this,null,function*(){const Q=U.target.result;I.value=Q,l.value=Q,D.value=g.size;const xe=yield G(Q);m.value=xe,O.value==="file"&&r.value?r.value=new File([g],r.value.name,{type:"image/jpeg",lastModified:Date.now()}):O.value==="camera"&&(s.value=new File([g],`camera-photo-${Date.now()}.jpg`,{type:"image/jpeg",lastModified:Date.now()}),n.value=g)}),w.readAsDataURL(g),u.value=!1,e("success",'Image cropped successfully! Click "Update Profile Image" to save.')}),x=()=>{u.value=!1,E.value="",O.value==="file"?(r.value=null,R.value&&(R.value.value="")):(s.value=null,n.value=null,le(T.value))},L=()=>{let g="";if(r.value){const w=new FileReader;w.onload=U=>{g=U.target.result,xt(g)},w.readAsDataURL(r.value)}else if(s.value&&n.value){const w=new FileReader;w.onload=U=>{g=U.target.result,xt(g)},w.readAsDataURL(n.value)}else{e("error","No image selected or image data missing");return}},xt=g=>{a.value=!0;let w=g;if(g.startsWith("data:")){const U=g.indexOf(",");U!==-1&&(w=g.substring(U+1))}Me.fetch({student_id:t.studentId,base64_image:w})},da=()=>wt(),wt=()=>{r.value=null,s.value=null,n.value=null,l.value="",u.value=!1,E.value="",d.value=!1,p.value=!1,D.value=0,m.value={width:0,height:0},R.value&&(R.value.value=""),Se()},kt=g=>{g.target.src="/assets/alummah/images/default-student.png"};return Ve(()=>{me(),document.addEventListener("click",ge),t.currentImage&&(I.value=F(t.currentImage))}),ha(()=>{Se(),document.removeEventListener("click",ge)}),Dt(()=>t.currentImage,g=>{g&&(I.value=F(g))}),(g,w)=>{var U;return y(),_("div",to,[o("div",ao,[io,o("div",{class:"w-16 h-16 rounded-full border-2 border-gray-100 shadow-sm overflow-hidden bg-gray-50 cursor-pointer",onClick:w[0]||(w[0]=Q=>q(v(H)))},[o("img",{src:v(H),alt:i.studentName,class:"w-full h-full object-cover",onError:kt,loading:"lazy"},null,40,oo)])]),o("div",so,[o("div",ro,[o("div",{class:"relative cursor-pointer",onClick:w[1]||(w[1]=Q=>q(v(H)))},[o("div",no,[o("img",{src:v(H),alt:i.studentName,class:"w-full h-full object-cover",onError:kt,loading:"lazy"},null,40,lo),a.value?(y(),_("div",co,ho)):B("",!0)]),po]),o("div",mo,[o("h4",go,P(i.studentName),1),o("p",fo,"Student ID: "+P(i.studentId),1),a.value?(y(),_("p",vo,"Uploading image...")):B("",!0)])])]),o("div",bo,[yo,o("div",_o,[o("div",xo,[o("input",{type:"file",ref_key:"fileInput",ref:R,accept:"image/*",onChange:Be,class:"hidden"},null,544),o("button",{type:"button",onClick:Ee,disabled:a.value,class:"flex-1 px-4 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:bg-gray-100 disabled:text-gray-400 flex items-center justify-center space-x-2 transition-colors"},Do,8,wo),o("div",Mo,[o("button",{type:"button",onClick:De,disabled:a.value,class:"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:bg-gray-100 disabled:text-gray-400 flex items-center justify-center space-x-2 transition-colors"},$o,8,Eo),d.value?(y(),_("div",No,[o("button",{type:"button",onClick:w[2]||(w[2]=Q=>le("user")),class:"w-full px-4 py-3 text-left text-gray-700 hover:bg-gray-50 flex items-center space-x-3 border-b border-gray-100"},Io),o("button",{type:"button",onClick:w[3]||(w[3]=Q=>le("environment")),class:"w-full px-4 py-3 text-left text-gray-700 hover:bg-gray-50 flex items-center space-x-3"},Ro)])):B("",!0)])]),r.value||s.value?(y(),_("div",Bo,[o("div",Ao,[o("div",jo,[o("div",{class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center cursor-pointer",onClick:w[4]||(w[4]=Q=>q(l.value))},Po),o("div",null,[o("p",Lo,P(O.value==="camera"?"Camera Photo":(U=r.value)==null?void 0:U.name),1),o("p",Uo,P(O.value==="camera"?`Captured from ${T.value==="user"?"Front":"Rear"} Camera \u2022 ${te(D.value)}`:`Size: ${r.value?te(r.value.size):"0 KB"}`),1),o("p",Ho," Dimensions: "+P(m.value.width)+" \xD7 "+P(m.value.height)+"px ",1)])]),o("div",Wo,[o("button",{type:"button",onClick:w[5]||(w[5]=Q=>p.value=!0),class:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Compress "),o("button",{type:"button",onClick:w[6]||(w[6]=Q=>O.value==="camera"?le(T.value):Ee()),class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors"}," Change ")])])])):B("",!0),p.value&&(r.value||n.value)?(y(),pa(eo,{key:1,"image-blob":r.value||n.value,"image-url":l.value,"auto-compress":!0,onCompressed:ne,onCancel:w[7]||(w[7]=Q=>p.value=!1),onError:pe},null,8,["image-blob","image-url"])):B("",!0),r.value||s.value?(y(),_("div",Yo,[o("button",{type:"button",onClick:L,disabled:a.value,class:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed flex items-center justify-center space-x-2 transition-colors font-medium"},[a.value?(y(),_("svg",Xo,Go)):B("",!0),o("span",null,P(a.value?"Uploading...":"Update Profile Image"),1)],8,Vo),o("button",{type:"button",onClick:da,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Cancel ")])):B("",!0)])]),c.value?(y(),_("div",qo,[o("div",Ko,[o("div",{class:"flex justify-between items-center p-4 border-b border-gray-200"},[Qo,o("button",{onClick:K,class:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},Zo)]),o("div",es,[o("img",{src:$.value,alt:"Preview",class:"max-w-full max-h-full object-contain"},null,8,ts)]),as])])):B("",!0),h.value?(y(),_("video",{key:1,ref_key:"videoEl",ref:j,autoplay:"",playsinline:"",muted:"",class:"hidden"},null,512)):B("",!0),h.value&&!u.value?(y(),_("div",is,[o("div",os,[o("div",ss,[rs,o("div",ns,[C.value?(y(),_("button",{key:0,type:"button",onClick:_e,class:"p-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Switch Camera"},ds)):B("",!0),o("button",{type:"button",onClick:Se,class:"p-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Close Camera"},us)])]),o("div",hs,[o("video",{ref_key:"videoEl",ref:j,autoplay:"",playsinline:"",muted:"",class:"w-full h-80 object-cover"},null,512),o("div",{class:"absolute bottom-6 left-1/2 transform -translate-x-1/2"},[o("button",{type:"button",onClick:Je,class:"w-20 h-20 bg-white rounded-full shadow-2xl flex items-center justify-center hover:bg-gray-100 transition-colors"},ms)])]),o("div",gs,[o("p",fs,[vs,o("span",bs,P(T.value==="user"?"Front Camera":"Rear Camera"),1)]),ys])])])):B("",!0),u.value?(y(),_("div",_s,[o("div",xs,[o("h3",ws,P(O.value==="camera"?"Crop Your Photo":"Crop Uploaded Image"),1),o("div",ks,[St(v(pi),{ref_key:"cropper",ref:z,src:E.value,"aspect-ratio":1,"view-mode":2,guides:!0,background:!1,"auto-crop-area":.8,"min-container-width":200,"min-container-height":200,class:"cropper-container h-full w-full max-h-[50vh]"},null,8,["src","auto-crop-area"])]),o("div",Cs,[o("div",Ds,[o("button",{type:"button",onClick:w[8]||(w[8]=Q=>fe(-90)),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center space-x-2 transition-colors",title:"Rotate Left"},Ss),o("button",{type:"button",onClick:w[9]||(w[9]=Q=>fe(90)),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center space-x-2 transition-colors",title:"Rotate Right"},Os),o("button",{type:"button",onClick:Ae,class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center space-x-2 transition-colors",title:"Reset Crop"},Rs)]),o("div",Bs,[o("button",{type:"button",onClick:x,class:"px-8 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors"},P(O.value==="camera"?"Retake Photo":"Choose Different File"),1),o("button",{type:"button",onClick:f,class:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors"}," Apply Crop ")])])])])):B("",!0)])}}};var js=Ze(As,[["__scopeId","data-v-1b8cd6c4"]]);const M=i=>(et("data-v-c842267e"),i=i(),tt(),i),zs={class:"min-h-screen bg-gray-50 p-4"},Ps={class:"fixed top-4 right-4 z-50 space-y-2 w-96 max-w-full"},Ls={class:"flex items-start space-x-3"},Us=M(()=>o("div",{class:"flex-shrink-0"},[o("svg",{class:"w-5 h-5 text-green-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),Hs={class:"flex-1"},Ws=M(()=>o("p",{class:"text-green-800 font-medium"},"Success",-1)),Ys={class:"text-green-700 text-sm mt-1"},Vs={class:"flex items-start space-x-3"},Xs=M(()=>o("div",{class:"flex-shrink-0"},[o("svg",{class:"w-5 h-5 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),Fs={class:"flex-1"},Gs=M(()=>o("p",{class:"text-red-800 font-medium"},"Error",-1)),qs={class:"text-red-700 text-sm mt-1"},Ks={class:"mb-6"},Qs={class:"text-2xl font-bold text-gray-800"},Js={class:"text-sm text-gray-500 font-normal ml-2"},Zs={key:0,class:"text-gray-600"},er={key:0,class:"text-green-600 font-medium"},tr={key:1,class:"text-orange-600 font-medium"},ar={key:0,class:"flex justify-center items-center py-8"},ir=M(()=>o("div",{class:"spinner"},null,-1)),or=M(()=>o("span",{class:"ml-2 text-gray-600"},"Loading student details...",-1)),sr=[ir,or],rr={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},nr=M(()=>o("p",{class:"text-red-800"},"Failed to load settings. Using default permissions.",-1)),lr={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},dr=M(()=>o("p",{class:"text-red-800"},"Failed to load student details.",-1)),cr={key:3,class:"bg-white rounded-lg shadow-sm p-6"},ur=["onSubmit"],hr={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},pr={class:"md:col-span-2 lg:col-span-3"},mr=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student ID",-1)),gr=["value"],fr=M(()=>o("p",{class:"text-xs text-gray-500 mt-1"},"Student ID cannot be changed",-1)),vr={class:"md:col-span-2 lg:col-span-3"},br=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student Group",-1)),yr=["value"],_r=M(()=>o("p",{class:"text-xs text-gray-500 mt-1"},"Student group cannot be changed",-1)),xr={key:0,class:"md:col-span-2 lg:col-span-3"},wr=M(()=>o("h3",{class:"text-lg font-medium text-gray-800 mb-4 border-b pb-2"},"Personal Details",-1)),kr=[wr],Cr={class:"md:col-span-2 lg:col-span-3"},Dr={key:1},Mr=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"First Name",-1)),Er={key:2},Sr=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Middle Name",-1)),$r={key:3},Nr=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Last Name",-1)),Or={key:4},Ir=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student Date of Birth",-1)),Tr={key:5},Rr=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"GR Number",-1)),Br={key:6},Ar=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Roll Number ",-1)),jr={key:0,class:"text-red-600 text-xs mt-1"},zr={key:1,class:"text-gray-500 text-xs mt-1"},Pr={key:7,class:"md:col-span-2 lg:col-span-3 mt-4"},Lr=M(()=>o("h3",{class:"text-lg font-medium text-gray-800 mb-4 border-b pb-2"},"Contact Information",-1)),Ur=[Lr],Hr={key:8},Wr=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Address",-1)),Yr={key:9},Vr=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number",-1)),Xr={class:"mt-8 pt-6 border-t flex justify-between items-center"},Fr={class:"flex space-x-3"},Gr=["disabled"],qr={key:0},Kr={key:1},Qr=M(()=>o("div",{class:"md:col-span-2 lg:col-span-3 mt-8"},[o("h3",{class:"text-lg font-medium text-gray-800 mb-4 border-b pb-2"},[at(" Guardian Management "),o("span",{class:"text-sm text-blue-600 font-normal ml-2"},"(Manage multiple guardians)")])],-1)),Jr={class:"md:col-span-2 lg:col-span-3"},Zr=M(()=>o("h4",{class:"text-lg font-semibold text-gray-800 mb-4"},"Add New Guardian",-1)),en={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},tn=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guardian Name",-1)),an=["disabled"],on=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number",-1)),sn=["disabled"],rn=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Relation",-1)),nn=["disabled"],ln=M(()=>o("option",{value:"Mother"},"Mother",-1)),dn=M(()=>o("option",{value:"Father"},"Father",-1)),cn=M(()=>o("option",{value:"Others"},"Others",-1)),un=[ln,dn,cn],hn={class:"mt-4 flex items-center justify-between"},pn={key:0,class:"text-red-600 text-sm font-medium"},mn={key:1,class:"text-gray-600 text-sm"},gn=["disabled"],fn={key:0},vn={key:1},bn={class:"md:col-span-2 lg:col-span-3"},yn={class:"bg-white rounded-lg border border-gray-200 p-6"},_n=M(()=>o("h4",{class:"text-lg font-semibold text-gray-800 mb-4"},"Existing Guardians",-1)),xn={key:0,class:"flex justify-center py-4"},wn=M(()=>o("div",{class:"spinner-small"},null,-1)),kn=M(()=>o("span",{class:"ml-2 text-gray-600"},"Loading guardians...",-1)),Cn=[wn,kn],Dn={key:1,class:"text-center py-8 text-gray-500"},Mn=M(()=>o("svg",{class:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),En=M(()=>o("p",null,"No guardians added yet.",-1)),Sn=[Mn,En],$n={key:2,class:"space-y-4"},Nn={class:"flex items-start justify-between"},On={class:"flex items-start space-x-3 flex-1"},In=M(()=>o("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),Tn={class:"flex-1 min-w-0"},Rn={class:"flex items-center space-x-2 mb-1"},Bn={class:"font-medium text-gray-800 text-lg"},An={class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},jn={key:0,class:"space-y-2 text-sm text-gray-600"},zn={class:"flex items-center space-x-4"},Pn={class:"flex items-center space-x-1"},Ln=M(()=>o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),Un=M(()=>o("span",{class:"text-gray-400"},"\u2022",-1)),Hn={class:"flex items-center space-x-1"},Wn=M(()=>o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})],-1)),Yn={key:0,class:"flex items-center space-x-2 text-xs"},Vn={key:0},Xn={key:1,class:"text-gray-400"},Fn={key:2},Gn={key:1,class:"text-xs text-gray-500"},qn={key:1,class:"space-y-4 mt-4 p-4 bg-gray-50 rounded-lg"},Kn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Qn=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guardian Name",-1)),Jn=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number",-1)),Zn=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Relation",-1)),el=M(()=>o("option",{value:"Mother"},"Mother",-1)),tl=M(()=>o("option",{value:"Father"},"Father",-1)),al=M(()=>o("option",{value:"Others"},"Others",-1)),il=[el,tl,al],ol=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date of Birth",-1)),sl=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),rl=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Occupation",-1)),nl=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Designation",-1)),ll={class:"md:col-span-2"},dl=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Work Address",-1)),cl=M(()=>o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Education",-1)),ul={class:"flex space-x-3 pt-4"},hl=["onClick","disabled"],pl={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ml=M(()=>o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)),gl=[ml],fl=["onClick"],vl=M(()=>o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),bl=[vl],yl={class:"text-sm text-gray-600"},_l={key:0,class:"text-green-600"},xl={key:1,class:"text-orange-600"},wl={setup(i){const e=ga(),t=it({student:"",first_name:"",middle_name:"",last_name:"",student_date_of_birth:"",gr_number:"",email_address:"",phone_number:"",roll_number:""}),a=N(""),r=N(""),s=N(!0),n=N(!1),l=N(!1),h=N(""),u=N(""),d=N(""),c=N(""),p=N(""),E=N([]),$=N(null),O=N(!1),S=N(!1),T=it({guardian_name:"",phone_number:"",relation:"Mother"}),k=it({guardian_name:"",mobile_number:"",relation:"Mother",date_of_birth:"",email:"",occupation:"",designation:"",work_address:"",education:""}),C=N({allow_instructors_modify_student:0,session_expiry:"24:00"}),I=je(()=>C.value.allow_instructors_modify_student===1),D=je(()=>E.value.length>=3),m=N(""),R=je(()=>m.value?(console.log("\u{1F5BC}\uFE0F Using stored image URL:",m.value),j(m.value)):(console.log("\u274C No image URL available"),""));Ve(()=>{if(a.value=e.query.studentId,e.query.studentData)try{const f=JSON.parse(decodeURIComponent(e.query.studentData));r.value=f.student_group||"",m.value=f.img_url||"",console.log("\u{1F3AF} Route data analysis:",{studentGroup:r.value,hasImgUrl:!!f.img_url,imgUrl:f.img_url,allKeys:Object.keys(f)})}catch(f){console.error("Error parsing student data:",f),z("Invalid student data")}Ae(),fe()});const j=f=>f?f.startsWith("http")||f.startsWith("//")?f:f.startsWith("/")?window.location.origin+f:`${window.location.origin}/${f.replace(/^\//,"")}`:null,z=f=>{u.value=f,d.value="",c.value="animate-slide-in-right"},H=f=>{d.value=f,u.value="",c.value="animate-slide-in-right"},te=()=>{c.value="animate-slide-out-right",setTimeout(()=>{u.value="",d.value="",c.value=""},300)},F=f=>{console.log("\u{1F4F8} Image updated in StudentProfileImage:",f),m.value=f},G=$e({url:"school.al_ummah.api3.fetch_admin_settings",auto:!1,onSuccess(f){C.value=f,s.value=!1,n.value=!1},onError(){s.value=!1,n.value=!0,C.value={allow_instructors_modify_student:0,session_expiry:"24:00"}}}),q=$e({url:"school.al_ummah.api2.get_student_details",auto:!1,onSuccess(f){f.student_info&&Object.assign(t,f.student_info),f.guardians&&Array.isArray(f.guardians)&&(E.value=f.guardians),p.value=""},onError(){p.value="Failed to load student details.",E.value=[]}}),K=$e({url:"school.al_ummah.api2.update_student_details",auto:!1,onSuccess(f){l.value=!1,H(f.message||"Student updated successfully!")},onError(f){var x,L;l.value=!1;const b=f._server_messages?(L=JSON.parse(((x=JSON.parse(f._server_messages.at(-1)))==null?void 0:x.message)||"{}"))==null?void 0:L.message:f.message;z(b||"Update failed.")}}),ne=$e({url:"school.al_ummah.api2.add_guardian_to_student",auto:!1,onSuccess(f){S.value=!1,H(f.message||"Guardian added!"),fe(),De()},onError(f){var x,L;S.value=!1;const b=f._server_messages?(L=JSON.parse(((x=JSON.parse(f._server_messages.at(-1)))==null?void 0:x.message)||"{}"))==null?void 0:L.message:f.message;z(b||"Failed to add guardian.")}}),pe=$e({url:"school.al_ummah.api2.update_guardian_details",auto:!1,onSuccess(f){O.value=!1,H(f.message||"Guardian updated!"),$.value=null,ge(),fe()},onError(f){var x,L;O.value=!1;const b=f._server_messages?(L=JSON.parse(((x=JSON.parse(f._server_messages.at(-1)))==null?void 0:x.message)||"{}"))==null?void 0:L.message:f.message;z(b||"Failed to update guardian.")}}),me=f=>/^[0-9]{10}$/.test(f),le=f=>{[".",",","e","E","-"].includes(f.key)&&f.preventDefault()},_e=()=>{const f=t.roll_number;if(!f&&f!==0)return h.value="";const b=Number(f);if(!Number.isInteger(b))return h.value="Must be a whole number";if(b<1)return h.value="Must be at least 1";if(b>999)return h.value="Cannot exceed 999";h.value=""},De=()=>{T.guardian_name="",T.phone_number="",T.relation="Mother"},ge=()=>{Object.keys(k).forEach(f=>{k[f]=""}),k.relation="Mother"},Me=()=>ae(this,null,function*(){if(!T.guardian_name.trim())return z("Guardian name required");if(!me(T.phone_number))return z("Valid 10-digit phone required");S.value=!0,ne.fetch({student_id:a.value,student_name:`${t.first_name} ${t.last_name}`.trim(),guardian_name:T.guardian_name,relation:T.relation,phone_number:T.phone_number})}),Ee=f=>{$.value=f.guardian,Object.assign(k,{guardian_name:f.guardian_name||"",mobile_number:f.mobile_number||"",relation:f.relation||"Mother",date_of_birth:f.date_of_birth||"",email:f.email||"",occupation:f.occupation||"",designation:f.designation||"",work_address:f.work_address||"",education:f.education||""})},Be=()=>{$.value=null,ge()},Je=f=>{if(!k.guardian_name.trim())return z("Guardian name required");if(!me(k.mobile_number))return z("Valid 10-digit phone required");O.value=!0,pe.fetch({guardian_id:f,guardian_name:k.guardian_name,phone_number:k.mobile_number,relation:k.relation,guardian_date_of_birth:k.date_of_birth,guardian_email:k.email,occupation:k.occupation,designation:k.designation,work_address:k.work_address,education:k.education})},Se=f=>ae(this,null,function*(){var x;if(console.log("\u{1F6A8} updateStudent called",{eventType:f==null?void 0:f.type,target:(x=f==null?void 0:f.target)==null?void 0:x.tagName,timestamp:new Date().toISOString(),studentId:a.value}),f&&(f.preventDefault(),f.stopPropagation()),_e(),h.value){z(h.value);return}l.value=!0;const b={student_id:a.value,student_group:r.value};I.value&&Object.assign(b,{first_name:t.first_name||"",middle_name:t.middle_name||"",last_name:t.last_name||"",student_date_of_birth:t.student_date_of_birth||"",gr_number:t.gr_number||"",email_address:t.email_address||"",phone_number:t.phone_number||"",roll_number:t.roll_number||""}),console.log("Sending update data:",b),yield K.fetch(b)}),fe=()=>{!a.value||q.fetch({student:a.value})},Ae=()=>{s.value=!0,G.fetch()};return Ve(()=>{if(a.value=e.query.studentId,e.query.studentData)try{const f=JSON.parse(decodeURIComponent(e.query.studentData));r.value=f.student_group||""}catch(f){console.error("Error parsing student data:",f),z("Invalid student data")}Ae(),fe()}),(f,b)=>(y(),_("div",zs,[o("div",Ps,[d.value?(y(),_("div",{key:0,class:he(["bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg transform transition-all duration-300 ease-in-out",c.value])},[o("div",Ls,[Us,o("div",Hs,[Ws,o("p",Ys,P(d.value),1)])]),o("div",{class:"mt-4 flex justify-end"},[o("button",{type:"button",onClick:te,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium"}," OK ")])],2)):B("",!0),u.value?(y(),_("div",{key:1,class:he(["bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg transform transition-all duration-300 ease-in-out",c.value])},[o("div",Vs,[Xs,o("div",Fs,[Gs,o("p",qs,P(u.value),1)])]),o("div",{class:"mt-4 flex justify-end"},[o("button",{type:"button",onClick:te,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm font-medium"}," OK ")])],2)):B("",!0)]),o("div",Ks,[o("h1",Qs,[at(" Edit Student: "+P(v(t).student_name||a.value)+" ",1),o("span",Js,"(ID: "+P(a.value)+")",1)]),s.value?B("",!0):(y(),_("p",Zs,[v(I)?(y(),_("span",er," \u2713 Full editing access enabled ")):(y(),_("span",tr," \u26A0 Limited editing access (Guardian fields only) "))]))]),v(q).loading||s.value?(y(),_("div",ar,sr)):n.value?(y(),_("div",rr,[nr,o("button",{type:"button",onClick:Ae,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])):p.value?(y(),_("div",lr,[dr,o("button",{type:"button",onClick:fe,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])):(y(),_("div",cr,[o("form",{onSubmit:ma(Se,["prevent"])},[o("div",hr,[o("div",pr,[mr,o("input",{value:a.value,type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500"},null,8,gr),fr]),o("div",vr,[br,o("input",{value:r.value,type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500"},null,8,yr),_r]),v(I)?(y(),_("div",xr,kr)):B("",!0),o("div",Cr,[St(js,{"student-id":a.value,"current-image":v(R),"student-name":v(t).student_name,onImageUpdated:F,onSuccess:b[0]||(b[0]=x=>H(x)),onError:b[1]||(b[1]=x=>z(x))},null,8,["student-id","current-image","student-name"])]),v(I)?(y(),_("div",Dr,[Mr,V(o("input",{"onUpdate:modelValue":b[2]||(b[2]=x=>v(t).first_name=x),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(t).first_name]])])):B("",!0),v(I)?(y(),_("div",Er,[Sr,V(o("input",{"onUpdate:modelValue":b[3]||(b[3]=x=>v(t).middle_name=x),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(t).middle_name]])])):B("",!0),v(I)?(y(),_("div",$r,[Nr,V(o("input",{"onUpdate:modelValue":b[4]||(b[4]=x=>v(t).last_name=x),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(t).last_name]])])):B("",!0),v(I)?(y(),_("div",Or,[Ir,V(o("input",{"onUpdate:modelValue":b[5]||(b[5]=x=>v(t).student_date_of_birth=x),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(t).student_date_of_birth]])])):B("",!0),v(I)?(y(),_("div",Tr,[Rr,V(o("input",{"onUpdate:modelValue":b[6]||(b[6]=x=>v(t).gr_number=x),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(t).gr_number]])])):B("",!0),v(I)?(y(),_("div",Br,[Ar,V(o("input",{"onUpdate:modelValue":b[7]||(b[7]=x=>v(t).roll_number=x),type:"number",min:"1",max:"999",step:"1",placeholder:"Enter roll number",onKeypress:le,onInput:_e,class:he(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",h.value?"border-red-300 bg-red-50":"border-gray-300"])},null,34),[[Z,v(t).roll_number]]),h.value?(y(),_("p",jr,P(h.value),1)):(y(),_("p",zr,"Must be a whole number between 1-999 (optional)"))])):B("",!0),v(I)?(y(),_("div",Pr,Ur)):B("",!0),v(I)?(y(),_("div",Hr,[Wr,V(o("input",{"onUpdate:modelValue":b[8]||(b[8]=x=>v(t).email_address=x),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(t).email_address]])])):B("",!0),v(I)?(y(),_("div",Yr,[Vr,V(o("input",{"onUpdate:modelValue":b[9]||(b[9]=x=>v(t).phone_number=x),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(t).phone_number]])])):B("",!0)]),o("div",Xr,[o("div",Fr,[o("button",{type:"button",class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",onClick:b[10]||(b[10]=x=>f.$router.back())}," Cancel "),o("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:l.value},[l.value?(y(),_("span",qr,"Updating...")):(y(),_("span",Kr,"Update Student"))],8,Gr)])]),Qr,o("div",Jr,[o("div",{class:he(["bg-gray-50 rounded-lg p-6 border-2 border-dashed mb-6 transition-all",v(D)?"border-gray-300 opacity-50":"border-blue-200 hover:border-blue-300"])},[Zr,o("div",en,[o("div",null,[tn,V(o("input",{"onUpdate:modelValue":b[11]||(b[11]=x=>v(T).guardian_name=x),type:"text",placeholder:"Enter guardian name",disabled:v(D),class:he(["w-full px-3 py-2 border rounded-md",v(D)?"border-gray-200 bg-gray-100 text-gray-500":"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"])},null,10,an),[[Z,v(T).guardian_name]])]),o("div",null,[on,V(o("input",{"onUpdate:modelValue":b[12]||(b[12]=x=>v(T).phone_number=x),type:"tel",placeholder:"10-digit number",disabled:v(D),class:he(["w-full px-3 py-2 border rounded-md",v(D)?"border-gray-200 bg-gray-100 text-gray-500":"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"])},null,10,sn),[[Z,v(T).phone_number]])]),o("div",null,[rn,V(o("select",{"onUpdate:modelValue":b[13]||(b[13]=x=>v(T).relation=x),disabled:v(D),class:he(["w-full px-3 py-2 border rounded-md",v(D)?"border-gray-200 bg-gray-100 text-gray-500":"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"])},un,10,nn),[[Xe,v(T).relation]])])]),o("div",hn,[o("div",null,[v(D)?(y(),_("p",pn," \u274C Maximum of 3 guardians reached ")):(y(),_("p",mn," Guardians added: "+P(E.value.length)+"/3 ",1))]),o("button",{type:"button",onClick:Me,disabled:v(D)||S.value,class:he(["px-4 py-2 rounded-md flex items-center space-x-2 transition-colors",v(D)||S.value?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},[S.value?(y(),_("span",fn,"Adding...")):(y(),_("span",vn,"Add Guardian"))],10,gn)])],2)]),o("div",bn,[o("div",yn,[_n,v(q).loading?(y(),_("div",xn,Cn)):E.value.length===0?(y(),_("div",Dn,Sn)):(y(),_("div",$n,[(y(!0),_(Mt,null,Et(E.value,x=>(y(),_("div",{key:x.guardian,class:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors"},[o("div",Nn,[o("div",On,[In,o("div",Tn,[o("div",Rn,[o("h5",Bn,P(x.guardian_name),1),o("span",An,P(x.relation),1)]),$.value!==x.guardian?(y(),_("div",jn,[o("div",zn,[o("span",Pn,[Ln,o("span",null,P(x.mobile_number||"No phone"),1)]),Un,o("span",Hn,[Wn,o("span",null,P(x.email||"No email"),1)])]),x.occupation||x.designation?(y(),_("div",Yn,[x.occupation?(y(),_("span",Vn,"\u{1F4BC} "+P(x.occupation),1)):B("",!0),x.designation?(y(),_("span",Xn,"\u2022")):B("",!0),x.designation?(y(),_("span",Fn,"\u{1F3AF} "+P(x.designation),1)):B("",!0)])):B("",!0),x.education?(y(),_("div",Gn," \u{1F393} "+P(x.education),1)):B("",!0)])):B("",!0),$.value===x.guardian?(y(),_("div",qn,[o("div",Kn,[o("div",null,[Qn,V(o("input",{"onUpdate:modelValue":b[14]||(b[14]=L=>v(k).guardian_name=L),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(k).guardian_name]])]),o("div",null,[Jn,V(o("input",{"onUpdate:modelValue":b[15]||(b[15]=L=>v(k).mobile_number=L),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(k).mobile_number]])]),o("div",null,[Zn,V(o("select",{"onUpdate:modelValue":b[16]||(b[16]=L=>v(k).relation=L),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},il,512),[[Xe,v(k).relation]])]),o("div",null,[ol,V(o("input",{"onUpdate:modelValue":b[17]||(b[17]=L=>v(k).date_of_birth=L),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(k).date_of_birth]])]),o("div",null,[sl,V(o("input",{"onUpdate:modelValue":b[18]||(b[18]=L=>v(k).email=L),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(k).email]])]),o("div",null,[rl,V(o("input",{"onUpdate:modelValue":b[19]||(b[19]=L=>v(k).occupation=L),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(k).occupation]])]),o("div",null,[nl,V(o("input",{"onUpdate:modelValue":b[20]||(b[20]=L=>v(k).designation=L),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(k).designation]])]),o("div",ll,[dl,V(o("textarea",{"onUpdate:modelValue":b[21]||(b[21]=L=>v(k).work_address=L),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(k).work_address]])]),o("div",null,[cl,V(o("input",{"onUpdate:modelValue":b[22]||(b[22]=L=>v(k).education=L),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Z,v(k).education]])])]),o("div",ul,[o("button",{type:"button",onClick:L=>Je(x.guardian),disabled:O.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-green-300 flex items-center space-x-2"},[O.value?(y(),_("svg",pl,gl)):B("",!0),o("span",null,P(O.value?"Updating...":"Update Guardian"),1)],8,hl),o("button",{type:"button",onClick:Be,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"}," Cancel ")])])):B("",!0)])]),$.value!==x.guardian?(y(),_("button",{key:0,type:"button",onClick:L=>Ee(x),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit guardian details"},bl,8,fl)):B("",!0)])]))),128))]))])]),o("div",yl,[v(I)?(y(),_("span",_l," \u2713 You have full editing permissions ")):(y(),_("span",xl," \u26A0 You can only edit guardian information "))])],40,ur)]))]))}};var Dl=Ze(wl,[["__scopeId","data-v-c842267e"]]);export{Dl as default};
