var L=(o,t,r)=>new Promise((n,e)=>{var s=i=>{try{p(r.next(i))}catch(d){e(d)}},c=i=>{try{p(r.throw(i))}catch(d){e(d)}},p=i=>i.done?n(i.value):Promise.resolve(i.value).then(s,c);p((r=r.apply(o,t)).next())});import{c as f,r as P,a as v,b as A,d as R,_ as T,e as O,f as y,g as I,o as b,h as j,s as S,i as V,B as D,j as w}from"./vendor.3821638a.js";const N=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}};N();const k="modulepreload",E={},B="/assets/school/alummah/",a=function(t,r){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=`${B}${n}`,n in E)return;E[n]=!0;const e=n.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const c=document.createElement("link");if(c.rel=e?"stylesheet":k,e||(c.as="script",c.crossOrigin=""),c.href=n,document.head.appendChild(c),e)return new Promise((p,i)=>{c.addEventListener("load",p),c.addEventListener("error",i)})})).then(()=>t())},h=f({url:"frappe.auth.get_logged_user",cache:"User",onError(o){o&&o.exc_type==="AuthenticationError"&&l.push({name:"LoginPage"})}});function g(){let t=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return t==="Guest"&&(t=null),t}let u="";const m=P({login:f({url:"school.al_ummah.api2.login",makeParams({email:o,password:t,role:r}){return{usr:o,pwd:t,role:r||"System User"}},onSuccess(o){if(console.log("Login successful:",o),o&&o.status==="success"){h.reload(),m.user=g(),m.login.reset();const t=u==="parent"?"Parenthome":"Teacherhome";console.log("Redirecting based on selected role:",u,"\u2192",t),l.replace({name:t})}else l.replace(o.default_route||"/")},onError(o){console.error("Login failed:",o),alert("Login failed. Please check your credentials and try again.")}}),logout:f({url:"logout",onSuccess(){h.reset(),m.user=g(),u="",l.replace({name:"Login"})},onError(o){console.error("Logout failed:",o),m.user=null,u="",l.replace({name:"Login"})}}),user:g(),isLoggedIn:v(()=>!!m.user)});function x(o){u=o}const C=[{path:"/",name:"Home",component:()=>a(()=>import("./Home.db6b9990.js"),["assets/Home.db6b9990.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"Login",path:"/account/login",component:()=>a(()=>import("./Login.adc74533.js"),["assets/Login.adc74533.js","assets/Login.897882ce.css","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"Teacherhome",path:"/teacher-home",component:()=>a(()=>import("./TeacherHome.8e915db5.js"),["assets/TeacherHome.8e915db5.js","assets/TeacherHome.c97f5f85.css","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css","assets/UserGroupIcon.0fa9584c.js"])},{name:"Parenthome",path:"/parent-home",component:()=>a(()=>import("./ParentHome.e816b6b1.js"),["assets/ParentHome.e816b6b1.js","assets/ParentHome.f64050f4.css","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css","assets/UserGroupIcon.0fa9584c.js"])},{name:"ForgotPassword",path:"/forgot-password",component:()=>a(()=>import("./ForgotPassword.a078fc3d.js"),["assets/ForgotPassword.a078fc3d.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"OTPLogin",path:"/otp-login",component:()=>a(()=>import("./OTPLogin.26730f7b.js"),["assets/OTPLogin.26730f7b.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"SignInScreen",path:"/google-signin",component:()=>a(()=>import("./SignInScreen.59ca4d60.js"),["assets/SignInScreen.59ca4d60.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"TeacherSignup",path:"/teacher/signup",component:()=>a(()=>import("./TeacherSignup.8d5174b2.js"),["assets/TeacherSignup.8d5174b2.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"ParentSignup",path:"/parent/signup",component:()=>a(()=>import("./ParentSignup.c3206e79.js"),["assets/ParentSignup.c3206e79.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"Attendance",path:"/attendance",component:()=>a(()=>import("./Attendance.a4a95ca2.js"),["assets/Attendance.a4a95ca2.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"AttendanceRecord",path:"/attendance-record",component:()=>a(()=>import("./AttendanceRecord.1cdf1d4f.js"),["assets/AttendanceRecord.1cdf1d4f.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"CreateNotice",path:"/create-notice",component:()=>a(()=>import("./CreateNotice.2c097bb0.js"),["assets/CreateNotice.2c097bb0.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"PreviousNotices",path:"/previous-notices",component:()=>a(()=>import("./PreviousNotices.215eff3c.js"),["assets/PreviousNotices.215eff3c.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"BrowseLeaveAppeals",path:"/browse-leave-appeals",component:()=>a(()=>import("./BrowseLeaveAppeals.fbab69fb.js"),["assets/BrowseLeaveAppeals.fbab69fb.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])},{name:"AppealLeave",path:"/appeal-leave",component:()=>a(()=>import("./AppealLeave.aa83e59e.js"),["assets/AppealLeave.aa83e59e.js","assets/vendor.3821638a.js","assets/vendor.1f7d581e.css"])}],l=A({history:R("/alummah"),routes:C});l.beforeEach((o,t,r)=>L(void 0,null,function*(){let n=m.isLoggedIn;try{yield h.promise}catch(e){n=!1}o.name==="Login"&&n?r({name:u==="parent"?"Parenthome":"Teacherhome"}):o.name!=="Login"&&!n?r({name:"Login"}):o.name==="Home"&&n?r({name:u==="parent"?"Parenthome":"Teacherhome"}):r()}));const H={};function U(o,t){const r=I("router-view");return b(),O("div",null,[y(r)])}var F=T(H,[["render",U]]);let _=j(F);S("resourceFetcher",w);_.use(l);_.use(V);_.component("Button",D);_.mount("#app");export{x as a,m as s};
