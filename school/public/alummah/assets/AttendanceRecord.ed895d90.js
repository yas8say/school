var F=Object.defineProperty;var $=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var N=(a,n,r)=>n in a?F(a,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[n]=r,V=(a,n)=>{for(var r in n||(n={}))P.call(n,r)&&N(a,r,n[r]);if($)for(var r of $(n))J.call(n,r)&&N(a,r,n[r]);return a};var A=(a,n,r)=>new Promise((x,m)=>{var l=p=>{try{v(r.next(p))}catch(g){m(g)}},w=p=>{try{v(r.throw(p))}catch(g){m(g)}},v=p=>p.done?x(p.value):Promise.resolve(p.value).then(l,w);v((r=r.apply(a,n)).next())});import{o,e as s,l as e,_ as O,J as U,k as b,c as W,p as q,K as z,t as i,v as k,f as u,u as _,F as K,A as T,C as D,D as Q,E as X}from"./vendor.378dc7b4.js";function mt(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function I(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function pt(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function xt(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function H(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Y(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function vt(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function E(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function gt(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function ft(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function wt(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"})])}function R(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}function ee(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function Z(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function te(a,n){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const d=a=>(Q("data-v-33d6dd92"),a=a(),X(),a),oe={class:"min-h-screen bg-gray-50 p-4"},se={class:"mb-6"},ae=d(()=>e("h1",{class:"text-2xl font-bold text-gray-800"},"Attendance Record",-1)),ne=d(()=>e("p",{class:"text-gray-600"},"View student attendance history",-1)),re={key:0,class:"text-sm text-gray-500 mt-1"},le={key:0,class:"flex justify-center items-center py-8"},ce=d(()=>e("div",{class:"spinner"},null,-1)),ie=d(()=>e("span",{class:"ml-2 text-gray-600"},"Loading attendance records...",-1)),de=[ce,ie],ue={key:1,class:"space-y-3"},_e={class:"flex justify-between items-center mb-4"},he={class:"text-sm text-gray-600"},me=d(()=>e("span",null,"Refresh",-1)),pe={class:"flex items-center space-x-4"},xe=["onClick"],ve={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm relative overflow-hidden"},ge=["src"],fe={key:1,class:"text-white text-sm font-medium"},we=["onClick"],be={class:"font-medium text-gray-800 truncate"},ke={class:"flex items-center space-x-4 text-sm text-gray-600"},ye=d(()=>e("span",{class:"text-gray-400"},"\u2022",-1)),Ce={class:"truncate text-xs"},Me={class:"flex items-center space-x-4 mt-2 text-xs"},Ae={class:"flex items-center space-x-1 text-green-600"},Se={class:"flex items-center space-x-1 text-red-600"},je={class:"flex items-center space-x-1 text-yellow-600"},Be={class:"flex-shrink-0 flex items-center space-x-2"},$e=["onClick"],Ne=["onClick"],Ve={key:2,class:"text-center py-8"},De={class:"bg-white rounded-lg shadow-sm p-8"},Ie=d(()=>e("h3",{class:"text-lg font-medium text-gray-800 mb-2"},"No Students Found",-1)),He=d(()=>e("p",{class:"text-gray-600 mb-4"},"No attendance records available for this class.",-1)),Ee=d(()=>e("span",null,"Refresh Data",-1)),Re={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ze={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto"},Ge={class:"flex items-center justify-between mb-4"},Le=d(()=>e("h3",{class:"text-lg font-semibold text-gray-800"},"Student Details",-1)),Fe={class:"flex items-center space-x-4 mb-6"},Pe={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-lg relative overflow-hidden"},Je=["src"],Oe={key:1,class:"text-white text-lg font-medium"},Ue={class:"font-medium text-gray-800"},We={class:"text-sm text-gray-600"},qe={class:"text-xs text-gray-500"},ze={class:"grid grid-cols-3 gap-4 mb-6"},Ke={class:"text-center p-3 bg-green-50 rounded-lg"},Te={class:"text-2xl font-bold text-green-600"},Qe=d(()=>e("p",{class:"text-sm text-green-700"},"Present",-1)),Xe={class:"text-center p-3 bg-red-50 rounded-lg"},Ye={class:"text-2xl font-bold text-red-600"},et=d(()=>e("p",{class:"text-sm text-red-700"},"Absent",-1)),tt={class:"text-center p-3 bg-yellow-50 rounded-lg"},ot={class:"text-2xl font-bold text-yellow-600"},st=d(()=>e("p",{class:"text-sm text-yellow-700"},"Leave",-1)),at={class:"border-t pt-4"},nt=d(()=>e("h5",{class:"font-medium text-gray-800 mb-2"},"Contact Information",-1)),rt={key:0,class:"text-sm text-gray-600"},lt={key:1,class:"text-sm text-gray-600"},ct={key:2,class:"text-sm text-gray-500"},it={class:"flex space-x-3 mt-6"},dt=d(()=>e("span",null,"Edit Student",-1)),ut={setup(a){const n=U(),r=b([]),x=b(!0),m=b(""),l=b(null),w=b(!1),v=t=>t.base64profile&&t.base64profile!=="null"?t.base64profile.startsWith("data:")?t.base64profile:`data:image/jpeg;base64,${t.base64profile}`:null,p=t=>t?t.split(" ").map(h=>h.charAt(0)).join("").toUpperCase().substring(0,2):"?",g=t=>{t.target.style.display="none"},S=t=>{var c,f,B;const h=V({student_id:t.student,student_name:t.student_name,group_roll_number:t.group_roll_number,student_group:m.value,"First Name":t.first_name||((c=t.student_name)==null?void 0:c.split(" ")[0])||"","Middle Name":t.middle_name||((f=t.student_name)==null?void 0:f.split(" ")[1])||"","Last Name":t.last_name||((B=t.student_name)==null?void 0:B.split(" ")[2])||"","Student Date of Birth":t.date_of_birth||t.student_date_of_birth||"","GR Number":t.gr_number||t.group_roll_number||"","Email Address":t.email||t.email_address||"","Phone Number":t.mobile||t.phone_number||"","Guardian Name":t.guardian_name||t.parent_name||"","Guardian Number":t.guardian_number||t.parent_mobile||"",Relation:t.relation||"","Guardian Date of Birth":t.guardian_date_of_birth||"","Guardian Email":t.guardian_email||"","Guardian Occupation":t.guardian_occupation||"","Guardian Designation":t.guardian_designation||"","Guardian Work Address":t.guardian_work_address||"","Guardian Education":t.guardian_education||"",address:t.address||"",base64profile:t.base64profile||"",present_count:t.present_count||0,absent_count:t.absent_count||0,leave_count:t.leave_count||0,gender:t.gender||"",date_of_birth:t.date_of_birth||"",parent_name:t.parent_name||"",parent_mobile:t.parent_mobile||""},t);n.push({name:"EditStudent",query:{studentId:t.student,studentData:encodeURIComponent(JSON.stringify(h))}})},G=W({url:"school.al_ummah.api2.get_student_attendance_records",onSuccess(t){return t},onError(t){console.error("Error fetching attendance records:",t),C()}}),L=()=>{try{const t=localStorage.getItem("selected_student_group");t&&(m.value=t)}catch(t){console.error("Failed to load selected student group:",t)}},y=()=>A(this,null,function*(){if(!!m.value){x.value=!0;try{const t={based_on:"Student Group",student_group:m.value},h=yield G.fetch(t);h&&Array.isArray(h)&&h.length>0&&(localStorage.setItem("attendance_data",JSON.stringify(h)),r.value=h)}catch(t){console.warn("Failed to fetch data from API:",t)}finally{x.value=!1}}}),C=()=>A(this,null,function*(){try{const t=localStorage.getItem("attendance_data");t&&(r.value=JSON.parse(t))}catch(t){console.error("Failed to load attendance data from storage:",t)}finally{x.value=!1}}),M=t=>{l.value=t,w.value=!0},j=()=>{w.value=!1,l.value=null};return q(()=>{L(),m.value?(C(),y()):x.value=!1}),z(m,t=>{t&&(C(),y())}),(t,h)=>(o(),s("div",oe,[e("div",se,[ae,ne,m.value?(o(),s("p",re,"Class: "+i(m.value),1)):k("",!0)]),x.value?(o(),s("div",le,de)):r.value&&r.value.length>0?(o(),s("div",ue,[e("div",_e,[e("p",he," Total Students: "+i(r.value.length),1),e("button",{onClick:y,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2"},[u(_(I),{class:"w-4 h-4"}),me])]),(o(!0),s(K,null,T(r.value,c=>(o(),s("div",{key:c.student,class:"bg-white rounded-lg shadow-sm p-4 border border-gray-200 hover:border-blue-300 transition-colors"},[e("div",pe,[e("div",{class:"flex-shrink-0 cursor-pointer",onClick:f=>M(c)},[e("div",ve,[c.base64profile&&c.base64profile!=="null"?(o(),s("img",{key:0,src:v(c),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:g},null,40,ge)):(o(),s("span",fe,i(p(c.student_name)),1))])],8,xe),e("div",{class:"flex-1 min-w-0 cursor-pointer",onClick:f=>M(c)},[e("h3",be,i(c.student_name),1),e("div",ke,[e("span",null,"Roll No: "+i(c.group_roll_number),1),ye,e("span",Ce,"ID: "+i(c.student),1)]),e("div",Me,[e("span",Ae,[u(_(H),{class:"w-4 h-4"}),e("span",null,"Present: "+i(c.present_count||0),1)]),e("span",Se,[u(_(Z),{class:"w-4 h-4"}),e("span",null,"Absent: "+i(c.absent_count||0),1)]),e("span",je,[u(_(E),{class:"w-4 h-4"}),e("span",null,"Leave: "+i(c.leave_count||0),1)])])],8,we),e("div",Be,[e("button",{onClick:D(f=>S(c),["stop"]),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Student"},[u(_(R),{class:"w-5 h-5"})],8,$e),e("div",{class:"cursor-pointer",onClick:D(f=>M(c),["stop"])},[u(_(Y),{class:"w-5 h-5 text-gray-400"})],8,Ne)])])]))),128))])):(o(),s("div",Ve,[e("div",De,[u(_(ee),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),Ie,He,e("button",{onClick:y,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 mx-auto"},[u(_(I),{class:"w-4 h-4"}),Ee])])])),l.value&&w.value?(o(),s("div",Re,[e("div",Ze,[e("div",Ge,[Le,e("button",{onClick:j,class:"text-gray-400 hover:text-gray-600"},[u(_(te),{class:"w-6 h-6"})])]),e("div",Fe,[e("div",Pe,[l.value.base64profile&&l.value.base64profile!=="null"?(o(),s("img",{key:0,src:v(l.value),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:g},null,40,Je)):(o(),s("span",Oe,i(p(l.value.student_name)),1))]),e("div",null,[e("h4",Ue,i(l.value.student_name),1),e("p",We,"Roll No: "+i(l.value.group_roll_number),1),e("p",qe,"ID: "+i(l.value.student),1)])]),e("div",ze,[e("div",Ke,[u(_(H),{class:"w-8 h-8 text-green-600 mx-auto mb-2"}),e("p",Te,i(l.value.present_count||0),1),Qe]),e("div",Xe,[u(_(Z),{class:"w-8 h-8 text-red-600 mx-auto mb-2"}),e("p",Ye,i(l.value.absent_count||0),1),et]),e("div",tt,[u(_(E),{class:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),e("p",ot,i(l.value.leave_count||0),1),st])]),e("div",at,[nt,l.value.mobile?(o(),s("p",rt," \u{1F4F1} "+i(l.value.mobile),1)):k("",!0),l.value.address?(o(),s("p",lt," \u{1F4CD} "+i(l.value.address),1)):k("",!0),!l.value.mobile&&!l.value.address?(o(),s("p",ct," No contact information available ")):k("",!0)]),e("div",it,[e("button",{onClick:h[0]||(h[0]=c=>S(l.value)),class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2"},[u(_(R),{class:"w-4 h-4"}),dt]),e("button",{onClick:j,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"}," Close ")])])])):k("",!0)]))}};var bt=O(ut,[["__scopeId","data-v-33d6dd92"]]);export{bt as A,I as a,mt as b,ft as c,vt as d,ee as e,gt as f,wt as g,pt as h,xt as i,te as r};
