import{J as P,r as u,x as b,o as x,b as I,e as d,f as e,y as g,t as y,C as w,D,K as E,H as T,L as $,d as p}from"./vendor.206e735d.js";import{session as a,setSelectedLoginRole as k}from"./session.6d05ea6e.js";import"./index.48988228.js";var R="/assets/school/alummah/assets/parent.9d31774a.png",M="/assets/school/alummah/assets/teacher.f5eb2e54.png";const U={key:0,class:"container"},V={class:"welcome-section"},j=e("h1",{class:"heading"},"Login as",-1),q={class:"role-selection"},B=["src"],A=e("span",{class:"role-title"},"A parent",-1),G=["src"],N=e("span",{class:"role-title"},"A teacher",-1),O={key:1,class:"container"},H=["onSubmit"],J={class:"form-title"},K={class:"form-group"},W=e("label",{for:"username"},"User ID",-1),z={class:"form-group"},Q=e("label",{for:"password"},"Password",-1),X={class:"password-container"},Y=["type"],Z={key:0},ee={key:1},se=["disabled"],oe={class:"form-actions"},te={class:"alternative-options"},ue=P({setup(ne){const f=$(),m=u(!0),n=u(""),i=u(""),l=u(""),r=u(!1);function h(o){n.value=o,m.value=!1,k(o)}function F(){r.value=!r.value}function C(){if(!i.value||!l.value){c("info","Missing Information","Please fill out all fields");return}k(n.value),a.login.submit({email:i.value,password:l.value,role:L()})}function L(){return n.value==="parent"?"Guardian":"Instructor"}function v(o){f.push({name:o,query:{role:n.value}})}function S(){const o=n.value==="teacher"?"TeacherSignup":"ParentSignup";f.push({name:o,query:{role:n.value}})}function c(o,s,t){window.dispatchEvent(new CustomEvent("show-api-message-popup",{detail:{type:o,title:s,message:t}}))}b(()=>a.login.error,o=>{if(o)if(o.message&&(o.message.includes("CSRF")||o.message.includes("session")))c("csrf","Session Conflict","It seems you're already logged in. Please logout from other sessions to continue.");else{const s=o.message||"Login failed. Please check your credentials and try again.";c("info","Login Failed",s)}}),b(()=>a.login.data,o=>{if(o&&!o.status==="success"){const s=o.message||"Login failed. Please try again.";c("info","Login Information",s)}});const _=()=>{i.value="",l.value="",a.login.reset()};return x(()=>{_()}),I(()=>{_()}),(o,s)=>m.value?(p(),d("div",U,[e("div",V,[j,e("div",q,[e("div",{class:"role-card",onClick:s[0]||(s[0]=t=>h("parent"))},[e("img",{src:g(R),alt:"Parent",class:"role-image"},null,8,B),A]),e("div",{class:"role-card",onClick:s[1]||(s[1]=t=>h("teacher"))},[e("img",{src:g(M),alt:"Teacher",class:"role-image"},null,8,G),N])])])])):(p(),d("div",O,[e("form",{class:"login-form",onSubmit:T(C,["prevent"])},[e("h2",J,"Login as "+y(n.value),1),e("div",K,[W,w(e("input",{id:"username",type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>i.value=t),placeholder:"johndoe@email.com",required:""},null,512),[[D,i.value]])]),e("div",z,[Q,e("div",X,[w(e("input",{id:"password",type:r.value?"text":"password","onUpdate:modelValue":s[3]||(s[3]=t=>l.value=t),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",required:""},null,8,Y),[[E,l.value]]),e("button",{type:"button",class:"password-toggle",onClick:F},[r.value?(p(),d("span",Z,"\u{1F441}\uFE0F")):(p(),d("span",ee,"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F"))])])]),e("button",{type:"submit",class:"login-btn",disabled:g(a).login.loading},y(g(a).login.loading?"Logging in...":`Sign in as ${n.value}`),9,se),e("div",oe,[e("button",{type:"button",class:"secondary-btn",onClick:s[4]||(s[4]=t=>m.value=!0)}," Back "),e("button",{type:"button",class:"text-btn",onClick:s[5]||(s[5]=t=>v("ForgotPassword"))}," Forgot password? ")]),e("div",te,[e("button",{type:"button",class:"outline-btn",onClick:s[6]||(s[6]=t=>v("OTPLogin"))}," Login with OTP "),e("button",{type:"button",class:"outline-btn",onClick:s[7]||(s[7]=t=>v("SignInScreen"))}," Login with Google ")]),e("div",{class:"signup-section"},[e("button",{type:"button",class:"success-btn",onClick:S}," Don't have an account? Sign up here ")])],40,H)]))}});export{ue as default};
