var $=(c,p,n)=>new Promise((m,r)=>{var x=v=>{try{b(n.next(v))}catch(S){r(S)}},h=v=>{try{b(n.throw(v))}catch(S){r(S)}},b=v=>v.done?m(v.value):Promise.resolve(v.value).then(x,h);b((n=n.apply(c,p)).next())});import{a as N,o as u,e as _,l as e,f as d,u as o,t as i,C as k,_ as P,k as y,c as V,A as T,H as E,q as F,I as J,F as M,D as U,n as w,E as z,G as H,z as W}from"./vendor.c889c268.js";import{s as C}from"./index.468749e8.js";import{b as A,c as q,d as D,f as G,g as I,h as Q,e as L,i as K,A as X}from"./AttendanceRecord.7904d7b9.js";const Y={class:"bg-white rounded-lg shadow-sm p-6"},Z={class:"flex items-center mb-4"},ee=e("span",null,"Back to Dashboard",-1),te={class:"text-2xl font-bold text-gray-800"},se={key:0,class:"text-gray-600 mb-4"},oe={class:"mt-4 p-4 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded"},le={props:{selectedStudent:Object},emits:["back-to-dashboard"],setup(c){const p=N(()=>({BrowseNotices:"Browse Notices",AppealLeave:"Appeal Leave"}).BrowseNotices||"BrowseNotices");return(n,m)=>(u(),_("div",Y,[e("div",Z,[e("button",{onClick:m[0]||(m[0]=r=>n.$emit("back-to-dashboard")),class:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 mr-4"},[d(o(A),{class:"w-5 h-5"}),ee]),e("h1",te,i(o(p)),1)]),c.selectedStudent?(u(),_("p",se," For child: "+i(c.selectedStudent.student_name)+" ("+i(c.selectedStudent.student_group||"No class")+") ",1)):k("",!0),e("div",oe,i(o(p))+" functionality is under development. ",1)]))}},ae={class:"bg-white rounded-lg shadow-sm p-6"},ne={class:"flex items-center mb-4"},re=e("span",null,"Back to Dashboard",-1),de={class:"text-2xl font-bold text-gray-800"},ie={key:0,class:"text-gray-600 mb-4"},ce={class:"mt-4 p-4 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded"},ue={props:{selectedStudent:Object},emits:["back-to-dashboard"],setup(c){const p=N(()=>({BrowseNotices:"Browse Notices",AppealLeave:"Appeal Leave"}).AppealLeave||"AppealLeave");return(n,m)=>(u(),_("div",ae,[e("div",ne,[e("button",{onClick:m[0]||(m[0]=r=>n.$emit("back-to-dashboard")),class:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 mr-4"},[d(o(A),{class:"w-5 h-5"}),re]),e("h1",de,i(o(p)),1)]),c.selectedStudent?(u(),_("p",ie," For child: "+i(c.selectedStudent.student_name)+" ("+i(c.selectedStudent.student_group||"No class")+") ",1)):k("",!0),e("div",ce,i(o(p))+" functionality is under development. ",1)]))}};const a=c=>(z("data-v-84ae2046"),c=c(),H(),c),_e={class:"flex min-h-screen bg-gray-50 flex-col md:flex-row"},be={key:0,class:"fixed inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50"},me=a(()=>e("div",{class:"spinner"},null,-1)),ge=[me],he={class:"md:hidden p-4 bg-white shadow"},pe={class:"flex items-start space-x-4 border-b pb-4"},ve={class:"flex-shrink-0 w-16 h-16 rounded-full bg-gray-200 overflow-hidden"},xe=["src"],fe={key:1,class:"w-full h-full flex items-center justify-center"},ye=a(()=>e("span",{class:"text-sm text-gray-500"},"No Image",-1)),we=[ye],Se={class:"min-w-0 flex-1"},ke={class:"text-xl font-semibold text-gray-800 break-words"},$e=a(()=>e("p",{class:"text-sm text-gray-500 mt-1"},"Parent",-1)),Ne={class:"space-y-2"},Ce=a(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Select Child:",-1)),Ae=["disabled"],De=a(()=>e("option",{value:"",disabled:""},"Select a child",-1)),Ie=["value"],Le={class:"space-y-3"},Be=a(()=>e("h3",{class:"text-sm font-medium text-gray-700"},"Navigation",-1)),je={class:"space-y-2"},Re=a(()=>e("span",null,"Dashboard",-1)),Oe=a(()=>e("span",null,"Attendance Record",-1)),Pe=a(()=>e("span",null,"Browse Notices",-1)),Ve=a(()=>e("span",null,"Appeal Leave",-1)),Te={class:"pt-4 border-t"},Ee=["disabled"],Fe=a(()=>e("span",null,"Logout",-1)),Je={class:"flex-1 p-4 md:p-8 bg-gray-50"},Me={key:0},Ue={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},ze={class:"text-2xl font-bold text-gray-800 mb-2"},He=a(()=>e("p",{class:"text-gray-600"},"Monitor your child's activities and school records from here.",-1)),We={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6"},qe={class:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500"},Ge={class:"flex items-center justify-between"},Qe=a(()=>e("p",{class:"text-sm font-medium text-gray-600"},"Selected Child",-1)),Ke={class:"text-2xl font-bold text-gray-800"},Xe={class:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-green-500"},Ye={class:"flex items-center justify-between"},Ze=a(()=>e("p",{class:"text-sm font-medium text-gray-600"},"Available Children",-1)),et={class:"text-2xl font-bold text-gray-800"},tt={class:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-purple-500"},st={class:"flex items-center justify-between"},ot=a(()=>e("p",{class:"text-sm font-medium text-gray-600"},"Today's Date",-1)),lt={class:"text-2xl font-bold text-gray-800"},at={class:"bg-white rounded-lg shadow-sm p-6"},nt=a(()=>e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quick Actions",-1)),rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dt=a(()=>e("div",null,[e("h3",{class:"font-medium text-gray-800"},"View Attendance Record"),e("p",{class:"text-sm text-gray-600"},"Check your child's attendance history")],-1)),it=a(()=>e("div",null,[e("h3",{class:"font-medium text-gray-800"},"Appeal for Leave"),e("p",{class:"text-sm text-gray-600"},"Submit leave appeal for your child")],-1)),ct={key:1},ut={key:2},_t={key:3},bt={setup(c){const p=W(),n=y({}),m=y([]),r=y(null),x=y(!1),h=y("dashboard"),b=s=>{h.value=s,window.innerWidth<768&&(x.value=!1)},v=C.user,f=V({url:"school.al_ummah.api2.get_user_details",params:{role:"parent",username:v},auto:!0,onSuccess(s){var t,g;console.log("Parent user details loaded:",s),s&&s.user_details&&(n.value={name:s.user_details.name,image:s.user_details.base64profile,address:s.user_details.address},((t=s.user_details.student_list)==null?void 0:t.length)&&(m.value=s.user_details.student_list,r.value=s.user_details.student_list[0],localStorage.setItem("selected_student",JSON.stringify(s.user_details.student_list[0])),localStorage.setItem("selected_student_group",((g=s.user_details.student_list[0])==null?void 0:g.student_group)||"")),localStorage.setItem("user_details",JSON.stringify(s.user_details)))},onError(s){console.error("Error loading parent user details:",s),j()}}),B=N(()=>new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),j=()=>{var s;try{const t=localStorage.getItem("user_details");if(t){const g=JSON.parse(t);if(n.value={name:g.name,image:g.base64profile,address:g.address},(s=g.student_list)==null?void 0:s.length){m.value=g.student_list;const l=localStorage.getItem("selected_student");l?r.value=JSON.parse(l):r.value=g.student_list[0]}}}catch(t){console.error("Error loading from localStorage:",t)}},R=()=>$(this,null,function*(){r.value&&(localStorage.setItem("selected_student",JSON.stringify(r.value)),localStorage.setItem("selected_student_group",r.value.student_group||""))}),O=()=>$(this,null,function*(){try{localStorage.removeItem("user_details"),localStorage.removeItem("user"),localStorage.removeItem("selected_student"),localStorage.removeItem("selected_student_group"),yield C.logout.submit(),p.push({name:"Login"})}catch(s){console.error("Logout error:",s),localStorage.clear(),p.push({name:"Login"})}});return T(()=>{f.data||f.reload()}),E(()=>f.loading,s=>{!s&&f.data&&console.log("Parent data loaded successfully")}),(s,t)=>{var g;return u(),_("div",_e,[o(f).loading?(u(),_("div",be,ge)):k("",!0),e("div",he,[e("button",{onClick:t[0]||(t[0]=l=>x.value=!x.value),class:"px-4 py-2 bg-blue-600 text-white rounded"},i(x.value?"Close Menu":"Open Menu"),1)]),e("aside",{class:w(["bg-white shadow-md p-6 space-y-8 md:block",x.value?"block":"hidden","md:w-72"])},[e("div",pe,[e("div",ve,[n.value.image?(u(),_("img",{key:0,src:`data:image/jpeg;base64,${n.value.image}`,alt:"Parent",class:"object-cover w-full h-full"},null,8,xe)):(u(),_("div",fe,we))]),e("div",Se,[e("h2",ke,i(n.value.name||"No Name Available"),1),$e])]),e("div",Ne,[Ce,F(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>r.value=l),onChange:R,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o(f).loading},[De,(u(!0),_(M,null,U(m.value,l=>(u(),_("option",{key:l.student,value:l},i(l.student_name||"Unnamed Student"),9,Ie))),128))],40,Ae),[[J,r.value]])]),e("div",Le,[Be,e("nav",je,[e("button",{onClick:t[2]||(t[2]=l=>b("dashboard")),class:w(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors",h.value==="dashboard"?"bg-blue-100 border border-blue-200 text-blue-800":"bg-blue-50 text-blue-800 hover:bg-blue-100"])},[d(o(q),{class:"w-5 h-5"}),Re],2),e("button",{onClick:t[3]||(t[3]=l=>b("attendance-record")),class:w(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors",h.value==="attendance-record"?"bg-blue-100 border border-blue-200 text-blue-800":"bg-blue-50 text-blue-800 hover:bg-blue-100"])},[d(o(D),{class:"w-5 h-5"}),Oe],2),e("button",{onClick:t[4]||(t[4]=l=>b("browse-notices")),class:w(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors",h.value==="browse-notices"?"bg-green-100 border border-green-200 text-green-800":"bg-green-50 text-green-800 hover:bg-green-100"])},[d(o(G),{class:"w-5 h-5"}),Pe],2),e("button",{onClick:t[5]||(t[5]=l=>b("appeal-leave")),class:w(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors",h.value==="appeal-leave"?"bg-yellow-100 border border-yellow-200 text-yellow-800":"bg-yellow-50 text-yellow-800 hover:bg-yellow-100"])},[d(o(I),{class:"w-5 h-5"}),Ve],2)])]),e("div",Te,[e("button",{class:"w-full px-4 py-3 rounded bg-red-100 text-red-600 font-medium hover:bg-red-200 flex items-center justify-center space-x-2 transition-colors",onClick:O,disabled:o(f).loading},[d(o(Q),{class:"w-5 h-5"}),Fe],8,Ee)])],2),e("main",Je,[h.value==="dashboard"?(u(),_("div",Me,[e("div",Ue,[e("h1",ze,"Welcome, "+i(n.value.name||"Parent")+"!",1),He]),e("div",We,[e("div",qe,[e("div",Ge,[e("div",null,[Qe,e("p",Ke,i(((g=r.value)==null?void 0:g.student_name)||"None"),1)]),d(o(L),{class:"w-8 h-8 text-blue-500"})])]),e("div",Xe,[e("div",Ye,[e("div",null,[Ze,e("p",et,i(m.value.length),1)]),d(o(L),{class:"w-8 h-8 text-green-500"})])]),e("div",tt,[e("div",st,[e("div",null,[ot,e("p",lt,i(o(B)),1)]),d(o(K),{class:"w-8 h-8 text-purple-500"})])])]),e("div",at,[nt,e("div",rt,[e("button",{onClick:t[6]||(t[6]=l=>b("attendance-record")),class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors cursor-pointer"},[d(o(D),{class:"w-6 h-6 text-blue-600 mr-3"}),dt]),e("button",{onClick:t[7]||(t[7]=l=>b("appeal-leave")),class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-yellow-500 hover:bg-yellow-50 transition-colors cursor-pointer"},[d(o(I),{class:"w-6 h-6 text-yellow-600 mr-3"}),it])])])])):h.value==="attendance-record"?(u(),_("div",ct,[d(X,{"selected-student":r.value,onBackToDashboard:t[8]||(t[8]=l=>b("dashboard"))},null,8,["selected-student"])])):h.value==="browse-notices"?(u(),_("div",ut,[d(le,{"selected-student":r.value,onBackToDashboard:t[9]||(t[9]=l=>b("dashboard"))},null,8,["selected-student"])])):h.value==="appeal-leave"?(u(),_("div",_t,[d(ue,{"selected-student":r.value,onBackToDashboard:t[10]||(t[10]=l=>b("dashboard"))},null,8,["selected-student"])])):k("",!0)])])}}};var vt=P(bt,[["__scopeId","data-v-84ae2046"]]);export{vt as default};
