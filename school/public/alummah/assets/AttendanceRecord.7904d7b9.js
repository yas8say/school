var M=(a,n,h)=>new Promise((x,r)=>{var m=_=>{try{p(h.next(_))}catch(g){r(g)}},b=_=>{try{p(h.throw(_))}catch(g){r(g)}},p=_=>_.done?x(_.value):Promise.resolve(_.value).then(m,b);p((h=h.apply(a,n)).next())});import{o as s,e as o,l as e,_ as H,k as w,c as I,A as Z,H as N,t as l,C as f,f as d,u,F as D,D as R,E,G as F}from"./vendor.c889c268.js";function Ye(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function C(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function et(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function tt(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function j(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function L(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function st(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function S(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ot(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function nt(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function rt(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"})])}function G(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function B(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function P(a,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const c=a=>(E("data-v-3f8f3ae8"),a=a(),F(),a),J={class:"min-h-screen bg-gray-50 p-4"},O={class:"mb-6"},z=c(()=>e("h1",{class:"text-2xl font-bold text-gray-800"},"Attendance Record",-1)),T=c(()=>e("p",{class:"text-gray-600"},"View student attendance history",-1)),U={key:0,class:"text-sm text-gray-500 mt-1"},W={key:0,class:"flex justify-center items-center py-8"},q=c(()=>e("div",{class:"spinner"},null,-1)),K=c(()=>e("span",{class:"ml-2 text-gray-600"},"Loading attendance records...",-1)),Q=[q,K],X={key:1,class:"space-y-3"},Y={class:"flex justify-between items-center mb-4"},ee={class:"text-sm text-gray-600"},te=c(()=>e("span",null,"Refresh",-1)),se=["onClick"],oe={class:"flex items-center space-x-4"},ne={class:"flex-shrink-0"},re={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm relative overflow-hidden"},ae=["src"],le={key:1,class:"text-white text-sm font-medium"},ce={class:"flex-1 min-w-0"},ie={class:"font-medium text-gray-800 truncate"},de={class:"flex items-center space-x-4 text-sm text-gray-600"},ue=c(()=>e("span",{class:"text-gray-400"},"\u2022",-1)),he={class:"truncate text-xs"},_e={class:"flex items-center space-x-4 mt-2 text-xs"},xe={class:"flex items-center space-x-1 text-green-600"},ve={class:"flex items-center space-x-1 text-red-600"},pe={class:"flex items-center space-x-1 text-yellow-600"},me={class:"flex-shrink-0"},ge={key:2,class:"text-center py-8"},we={class:"bg-white rounded-lg shadow-sm p-8"},fe=c(()=>e("h3",{class:"text-lg font-medium text-gray-800 mb-2"},"No Students Found",-1)),be=c(()=>e("p",{class:"text-gray-600 mb-4"},"No attendance records available for this class.",-1)),ke=c(()=>e("span",null,"Refresh Data",-1)),ye={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Me={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto"},Ae={class:"flex items-center justify-between mb-4"},Ce=c(()=>e("h3",{class:"text-lg font-semibold text-gray-800"},"Student Details",-1)),je={class:"flex items-center space-x-4 mb-6"},Se={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-lg relative overflow-hidden"},Be=["src"],Ve={key:1,class:"text-white text-lg font-medium"},$e={class:"font-medium text-gray-800"},He={class:"text-sm text-gray-600"},Ie={class:"text-xs text-gray-500"},Ze={class:"grid grid-cols-3 gap-4 mb-6"},Ne={class:"text-center p-3 bg-green-50 rounded-lg"},De={class:"text-2xl font-bold text-green-600"},Re=c(()=>e("p",{class:"text-sm text-green-700"},"Present",-1)),Ee={class:"text-center p-3 bg-red-50 rounded-lg"},Fe={class:"text-2xl font-bold text-red-600"},Le=c(()=>e("p",{class:"text-sm text-red-700"},"Absent",-1)),Ge={class:"text-center p-3 bg-yellow-50 rounded-lg"},Pe={class:"text-2xl font-bold text-yellow-600"},Je=c(()=>e("p",{class:"text-sm text-yellow-700"},"Leave",-1)),Oe={class:"border-t pt-4"},ze=c(()=>e("h5",{class:"font-medium text-gray-800 mb-2"},"Contact Information",-1)),Te={key:0,class:"text-sm text-gray-600"},Ue={key:1,class:"text-sm text-gray-600"},We={key:2,class:"text-sm text-gray-500"},qe={setup(a){const n=w([]),h=w(!0),x=w(""),r=w(null),m=w(!1),b=t=>t.base64profile&&t.base64profile!=="null"?t.base64profile.startsWith("data:")?t.base64profile:`data:image/jpeg;base64,${t.base64profile}`:null,p=t=>t?t.split(" ").map(v=>v.charAt(0)).join("").toUpperCase().substring(0,2):"?",_=t=>{t.target.style.display="none"},g=I({url:"school.al_ummah.api2.get_student_attendance_records",onSuccess(t){return console.log("Attendance records loaded:",t),t},onError(t){console.error("Error fetching attendance records:",t),y()}}),V=()=>{try{const t=localStorage.getItem("selected_student_group");t&&(x.value=t)}catch(t){console.error("Failed to load selected student group:",t)}},k=()=>M(this,null,function*(){if(!!x.value){h.value=!0;try{const t={based_on:"Student Group",student_group:x.value},v=yield g.fetch(t);v&&Array.isArray(v)&&v.length>0&&(localStorage.setItem("attendance_data",JSON.stringify(v)),n.value=v)}catch(t){console.warn("Failed to fetch data from API:",t)}finally{h.value=!1}}}),y=()=>M(this,null,function*(){try{const t=localStorage.getItem("attendance_data");t&&(n.value=JSON.parse(t))}catch(t){console.error("Failed to load attendance data from storage:",t)}finally{h.value=!1}}),$=t=>{r.value=t,m.value=!0},A=()=>{m.value=!1,r.value=null};return Z(()=>{V(),x.value?(y(),k()):h.value=!1}),N(x,t=>{t&&(y(),k())}),(t,v)=>(s(),o("div",J,[e("div",O,[z,T,x.value?(s(),o("p",U,"Class: "+l(x.value),1)):f("",!0)]),h.value?(s(),o("div",W,Q)):n.value&&n.value.length>0?(s(),o("div",X,[e("div",Y,[e("p",ee," Total Students: "+l(n.value.length),1),e("button",{onClick:k,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2"},[d(u(C),{class:"w-4 h-4"}),te])]),(s(!0),o(D,null,R(n.value,i=>(s(),o("div",{key:i.student,class:"bg-white rounded-lg shadow-sm p-4 border border-gray-200 hover:border-blue-300 transition-colors cursor-pointer",onClick:Ke=>$(i)},[e("div",oe,[e("div",ne,[e("div",re,[i.base64profile&&i.base64profile!=="null"?(s(),o("img",{key:0,src:b(i),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:_},null,40,ae)):(s(),o("span",le,l(p(i.student_name)),1))])]),e("div",ce,[e("h3",ie,l(i.student_name),1),e("div",de,[e("span",null,"Roll No: "+l(i.group_roll_number),1),ue,e("span",he,l(i.student),1)]),e("div",_e,[e("span",xe,[d(u(j),{class:"w-4 h-4"}),e("span",null,"Present: "+l(i.present_count||0),1)]),e("span",ve,[d(u(B),{class:"w-4 h-4"}),e("span",null,"Absent: "+l(i.absent_count||0),1)]),e("span",pe,[d(u(S),{class:"w-4 h-4"}),e("span",null,"Leave: "+l(i.leave_count||0),1)])])]),e("div",me,[d(u(L),{class:"w-5 h-5 text-gray-400"})])])],8,se))),128))])):(s(),o("div",ge,[e("div",we,[d(u(G),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),fe,be,e("button",{onClick:k,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 mx-auto"},[d(u(C),{class:"w-4 h-4"}),ke])])])),r.value&&m.value?(s(),o("div",ye,[e("div",Me,[e("div",Ae,[Ce,e("button",{onClick:A,class:"text-gray-400 hover:text-gray-600"},[d(u(P),{class:"w-6 h-6"})])]),e("div",je,[e("div",Se,[r.value.base64profile&&r.value.base64profile!=="null"?(s(),o("img",{key:0,src:b(r.value),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:_},null,40,Be)):(s(),o("span",Ve,l(p(r.value.student_name)),1))]),e("div",null,[e("h4",$e,l(r.value.student_name),1),e("p",He,"Roll No: "+l(r.value.group_roll_number),1),e("p",Ie,l(r.value.student),1)])]),e("div",Ze,[e("div",Ne,[d(u(j),{class:"w-8 h-8 text-green-600 mx-auto mb-2"}),e("p",De,l(r.value.present_count||0),1),Re]),e("div",Ee,[d(u(B),{class:"w-8 h-8 text-red-600 mx-auto mb-2"}),e("p",Fe,l(r.value.absent_count||0),1),Le]),e("div",Ge,[d(u(S),{class:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),e("p",Pe,l(r.value.leave_count||0),1),Je])]),e("div",Oe,[ze,r.value.mobile?(s(),o("p",Te," \u{1F4F1} "+l(r.value.mobile),1)):f("",!0),r.value.address?(s(),o("p",Ue," \u{1F4CD} "+l(r.value.address),1)):f("",!0),!r.value.mobile&&!r.value.address?(s(),o("p",We," No contact information available ")):f("",!0)]),e("div",{class:"flex space-x-3 mt-6"},[e("button",{onClick:A,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"}," Close ")])])])):f("",!0)]))}};var at=H(qe,[["__scopeId","data-v-3f8f3ae8"]]);export{at as A,C as a,Ye as b,nt as c,st as d,G as e,ot as f,rt as g,et as h,tt as i,P as r};
