var m=(n,o,s)=>new Promise((r,t)=>{var v=a=>{try{e(s.next(a))}catch(c){t(c)}},p=a=>{try{e(s.throw(a))}catch(c){t(c)}},e=a=>a.done?r(a.value):Promise.resolve(a.value).then(v,p);e((s=s.apply(n,o)).next())});import{_ as b,r as i,C as x,e as u,f as l,v as y,x as h,n as w,t as _,g,p as P,h as S,d}from"./vendor.5ef9971d.js";const f=n=>(P("data-v-3905894b"),n=n(),S(),n),k={class:"min-h-screen bg-white flex items-center justify-center p-4"},R={class:"w-full max-w-md text-center"},E=f(()=>l("div",{class:"text-center mb-8"},[l("h1",{class:"text-3xl font-bold text-blue-600 mb-2"},"Reset your password")],-1)),F={class:"mb-6 text-left"},I=["disabled"],C=["disabled"],j={key:0,class:"mt-4 p-3 bg-green-100 text-green-700 rounded-lg"},B={key:1,class:"mt-4 p-3 bg-red-100 text-red-700 rounded-lg"},D={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},M=f(()=>l("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[l("div",{class:"spinner"}),l("span",{class:"text-gray-700"},"Sending reset instructions...")],-1)),N=[M],V={setup(n){const o=i(""),s=i(!1),r=i(""),t=i(""),v=x({url:"frappe.core.doctype.user.user.reset_password",onSuccess(e){console.log("Reset password API response:",e),s.value=!1,e&&e.message?(r.value=e.message,t.value=""):(r.value="Password reset instructions have been sent to your email.",t.value="")},onError(e){if(console.error("Error sending reset password email:",e),s.value=!1,e&&e.exc)try{const a=JSON.parse(e.exc);t.value=a._error_message||"Failed to send reset email. Please try again."}catch(a){t.value=e.message||"Failed to send reset email. Please try again."}else e&&e.message?t.value=e.message:t.value="Failed to send reset email. Please try again.";r.value=""}}),p=()=>m(this,null,function*(){if(!o.value){t.value="Please enter your email.";return}r.value="",t.value="",s.value=!0;try{yield v.submit({user:o.value})}catch(e){console.error("Error in reset password:",e),s.value=!1,t.value="An unexpected error occurred. Please try again."}});return(e,a)=>(d(),u("div",k,[l("div",R,[E,l("div",F,[y(l("input",{type:"email","onUpdate:modelValue":a[0]||(a[0]=c=>o.value=c),placeholder:"Enter your email",class:"w-full px-6 py-4 bg-gray-100 text-gray-800 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",disabled:s.value},null,8,I),[[h,o.value]])]),l("button",{onClick:p,disabled:!o.value||s.value,class:w(["w-full py-4 px-6 rounded-full font-medium transition-colors",!o.value||s.value?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white"])},_(s.value?"Sending...":"Reset Password"),11,C),r.value?(d(),u("div",j,_(r.value),1)):g("",!0),t.value?(d(),u("div",B,_(t.value),1)):g("",!0),s.value?(d(),u("div",D,N)):g("",!0)])]))}};var J=b(V,[["__scopeId","data-v-3905894b"]]);export{J as default};
