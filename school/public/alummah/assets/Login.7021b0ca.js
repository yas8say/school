import{q as P,r as u,w as b,o as x,b as I,e as d,f as e,u as g,t as y,v as w,x as E,y as T,z as $,A as D,d as p}from"./vendor.5ef9971d.js";import{session as a,setSelectedLoginRole as k}from"./session.23a3cd1c.js";import"./index.50e1174f.js";var R="/assets/school/alummah/assets/parent.9d31774a.png",q="/assets/school/alummah/assets/teacher.f5eb2e54.png";const M={key:0,class:"container"},U={class:"welcome-section"},V=e("h1",{class:"heading"},"Login as",-1),j={class:"role-selection"},B=["src"],A=e("span",{class:"role-title"},"A parent",-1),G=["src"],N=e("span",{class:"role-title"},"A teacher",-1),O={key:1,class:"container"},z=["onSubmit"],W={class:"form-title"},H={class:"form-group"},J=e("label",{for:"username"},"User ID",-1),K={class:"form-group"},Q=e("label",{for:"password"},"Password",-1),X={class:"password-container"},Y=["type"],Z={key:0},ee={key:1},se=["disabled"],oe={class:"form-actions"},te={class:"alternative-options"},ue=P({setup(ne){const f=D(),v=u(!0),n=u(""),i=u(""),l=u(""),r=u(!1);function h(o){n.value=o,v.value=!1,k(o)}function F(){r.value=!r.value}function S(){if(!i.value||!l.value){c("info","Missing Information","Please fill out all fields");return}k(n.value),a.login.submit({email:i.value,password:l.value,role:C()})}function C(){return n.value==="parent"?"Guardian":"Instructor"}function m(o){f.push({name:o,query:{role:n.value}})}function L(){const o=n.value==="teacher"?"TeacherSignup":"ParentSignup";f.push({name:o,query:{role:n.value}})}function c(o,s,t){window.dispatchEvent(new CustomEvent("show-api-message-popup",{detail:{type:o,title:s,message:t}}))}b(()=>a.login.error,o=>{if(o)if(o.message&&(o.message.includes("CSRF")||o.message.includes("session")))c("csrf","Session Conflict","It seems you're already logged in. Please logout from other sessions to continue.");else{const s=o.message||"Login failed. Please check your credentials and try again.";c("info","Login Failed",s)}}),b(()=>a.login.data,o=>{if(o&&!o.status==="success"){const s=o.message||"Login failed. Please try again.";c("info","Login Information",s)}});const _=()=>{i.value="",l.value="",a.login.reset()};return x(()=>{_()}),I(()=>{_()}),(o,s)=>v.value?(p(),d("div",M,[e("div",U,[V,e("div",j,[e("div",{class:"role-card",onClick:s[0]||(s[0]=t=>h("parent"))},[e("img",{src:g(R),alt:"Parent",class:"role-image"},null,8,B),A]),e("div",{class:"role-card",onClick:s[1]||(s[1]=t=>h("teacher"))},[e("img",{src:g(q),alt:"Teacher",class:"role-image"},null,8,G),N])])])])):(p(),d("div",O,[e("form",{class:"login-form",onSubmit:$(S,["prevent"])},[e("h2",W,"Login as "+y(n.value),1),e("div",H,[J,w(e("input",{id:"username",type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>i.value=t),placeholder:"johndoe@email.com",required:""},null,512),[[E,i.value]])]),e("div",K,[Q,e("div",X,[w(e("input",{id:"password",type:r.value?"text":"password","onUpdate:modelValue":s[3]||(s[3]=t=>l.value=t),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",required:""},null,8,Y),[[T,l.value]]),e("button",{type:"button",class:"password-toggle",onClick:F},[r.value?(p(),d("span",Z,"\u{1F441}\uFE0F")):(p(),d("span",ee,"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F"))])])]),e("button",{type:"submit",class:"login-btn",disabled:g(a).login.loading},y(g(a).login.loading?"Logging in...":`Sign in as ${n.value}`),9,se),e("div",oe,[e("button",{type:"button",class:"secondary-btn",onClick:s[4]||(s[4]=t=>v.value=!0)}," Back "),e("button",{type:"button",class:"text-btn",onClick:s[5]||(s[5]=t=>m("ForgotPassword"))}," Forgot password? ")]),e("div",te,[e("button",{type:"button",class:"outline-btn",onClick:s[6]||(s[6]=t=>m("OTPLogin"))}," Login with OTP "),e("button",{type:"button",class:"outline-btn",onClick:s[7]||(s[7]=t=>m("SignInScreen"))}," Login with Google ")]),e("div",{class:"signup-section"},[e("button",{type:"button",class:"success-btn",onClick:L}," Don't have an account? Sign up here ")])],40,z)]))}});export{ue as default};
