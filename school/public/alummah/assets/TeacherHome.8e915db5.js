var k=(_,v,d)=>new Promise((f,u)=>{var c=a=>{try{b(d.next(a))}catch(x){u(x)}},w=a=>{try{b(d.throw(a))}catch(x){u(x)}},b=a=>a.done?f(a.value):Promise.resolve(a.value).then(c,w);b((d=d.apply(_,v)).next())});import{o as m,e as g,l as e,_ as L,k as y,c as T,a as M,A as R,C as B,u as r,D as U,t as p,q as E,E as G,F as H,G as V,f as o,w as h,n as z,H as F,I as O,z as J,g as P}from"./vendor.3821638a.js";import{s as C}from"./index.f2b75c83.js";import{r as q,a as N,b as S,c as Q,d as W,e as Z}from"./UserGroupIcon.0fa9584c.js";function I(_,v){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const l=_=>(F("data-v-700b32ef"),_=_(),O(),_),K={class:"flex min-h-screen bg-gray-50 flex-col md:flex-row"},X={key:0,class:"fixed inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50"},Y=l(()=>e("div",{class:"spinner"},null,-1)),ee=[Y],se={class:"md:hidden p-4 bg-white shadow"},te={class:"flex items-center space-x-4 border-b pb-4"},oe={class:"w-16 h-16 rounded-full bg-gray-200 overflow-hidden flex items-center justify-center"},le=["src"],ae={key:1,class:"text-sm text-gray-500"},re={class:"text-xl font-semibold text-gray-800"},ne=l(()=>e("p",{class:"text-sm text-gray-500"},"Teacher",-1)),de={class:"space-y-2"},ce=l(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Select Class:",-1)),ie=["disabled"],ue=l(()=>e("option",{value:"",disabled:""},"Select a class",-1)),_e=["value"],me={class:"space-y-3"},ge=l(()=>e("h3",{class:"text-sm font-medium text-gray-700"},"Navigation",-1)),pe={class:"space-y-2"},he={class:"w-full text-left px-4 py-3 rounded hover:bg-blue-100 bg-blue-50 text-blue-800 font-medium flex items-center space-x-3 transition-colors"},fe=l(()=>e("span",null,"Take Attendance",-1)),ve={class:"w-full text-left px-4 py-3 rounded hover:bg-green-100 bg-green-50 text-green-800 font-medium flex items-center space-x-3 transition-colors"},xe=l(()=>e("span",null,"Student Record",-1)),be={class:"w-full text-left px-4 py-3 rounded hover:bg-yellow-100 bg-yellow-50 text-yellow-800 font-medium flex items-center space-x-3 transition-colors"},ye=l(()=>e("span",null,"Create Notice",-1)),we={class:"w-full text-left px-4 py-3 rounded hover:bg-purple-100 bg-purple-50 text-purple-800 font-medium flex items-center space-x-3 transition-colors"},ke=l(()=>e("span",null,"Previous Notices",-1)),Se={class:"w-full text-left px-4 py-3 rounded hover:bg-indigo-100 bg-indigo-50 text-indigo-800 font-medium flex items-center space-x-3 transition-colors"},Ce=l(()=>e("span",null,"Browse Leave Appeals",-1)),Ne={class:"pt-4 border-t"},Ie=["disabled"],De=l(()=>e("span",null,"Logout",-1)),$e={class:"flex-1 p-4 md:p-8 bg-gray-50"},je={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},Ae={class:"text-2xl font-bold text-gray-800 mb-2"},Le=l(()=>e("p",{class:"text-gray-600"},"Manage your classroom activities and student records from here.",-1)),Te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6"},Me={class:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500"},Re={class:"flex items-center justify-between"},Be=l(()=>e("p",{class:"text-sm font-medium text-gray-600"},"Selected Class",-1)),Ue={class:"text-2xl font-bold text-gray-800"},Ee={class:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-green-500"},Ge={class:"flex items-center justify-between"},He=l(()=>e("p",{class:"text-sm font-medium text-gray-600"},"Available Classes",-1)),Ve={class:"text-2xl font-bold text-gray-800"},ze={class:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-purple-500"},Fe={class:"flex items-center justify-between"},Oe=l(()=>e("p",{class:"text-sm font-medium text-gray-600"},"Today's Date",-1)),Je={class:"text-2xl font-bold text-gray-800"},Pe={class:"bg-white rounded-lg shadow-sm p-6"},qe=l(()=>e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quick Actions",-1)),Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},We=l(()=>e("div",null,[e("h3",{class:"font-medium text-gray-800"},"Take Today's Attendance"),e("p",{class:"text-sm text-gray-600"},"Mark student attendance for today")],-1)),Ze=l(()=>e("div",null,[e("h3",{class:"font-medium text-gray-800"},"Create New Notice"),e("p",{class:"text-sm text-gray-600"},"Send announcement to students")],-1)),Ke={setup(_){const v=J(),d=y({}),f=y([]),u=y(""),c=y(!1),w=C.user,a=T({url:"school.al_ummah.api2.get_user_details",params:{role:"teacher",username:w},auto:!0,onSuccess(t){var s;console.log("User details loaded:",t),t&&t.user_details&&(d.value={name:t.user_details.name,image:t.user_details.base64profile},((s=t.user_details.student_groups)==null?void 0:s.length)&&(f.value=t.user_details.student_groups,u.value=t.user_details.student_groups[0],localStorage.setItem("selected_student_group",t.user_details.student_groups[0])),localStorage.setItem("user_details",JSON.stringify(t.user_details)))},onError(t){console.error("Error loading user details:",t),D()}}),x=M(()=>new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),D=()=>{var t;try{const s=localStorage.getItem("user_details");if(s){const n=JSON.parse(s);d.value={name:n.name,image:n.base64profile},((t=n.student_groups)==null?void 0:t.length)&&(f.value=n.student_groups,u.value=n.student_groups[0])}}catch(s){console.error("Error loading from localStorage:",s)}},$=()=>k(this,null,function*(){localStorage.setItem("selected_student_group",u.value)}),j=()=>k(this,null,function*(){try{localStorage.removeItem("user_details"),localStorage.removeItem("user"),localStorage.removeItem("selected_student_group"),yield C.logout.submit(),v.push({name:"Login"})}catch(t){console.error("Logout error:",t),localStorage.clear(),v.push({name:"Login"})}});return R(()=>{a.data||a.reload()}),B(()=>a.loading,t=>{!t&&a.data&&console.log("Data loaded successfully")}),(t,s)=>{const n=P("router-link");return m(),g("div",K,[r(a).loading?(m(),g("div",X,ee)):U("",!0),e("div",se,[e("button",{onClick:s[0]||(s[0]=i=>c.value=!c.value),class:"px-4 py-2 bg-blue-600 text-white rounded"},p(c.value?"Close Menu":"Open Menu"),1)]),e("aside",{class:z(["bg-white shadow-md p-6 space-y-8 md:block",c.value?"block":"hidden","md:w-72"])},[e("div",te,[e("div",oe,[d.value.image?(m(),g("img",{key:0,src:`data:image/jpeg;base64,${d.value.image}`,alt:"Teacher",class:"object-cover w-full h-full"},null,8,le)):(m(),g("span",ae,"No Image"))]),e("div",null,[e("h2",re,p(d.value.name||"No Name Available"),1),ne])]),e("div",de,[ce,E(e("select",{"onUpdate:modelValue":s[1]||(s[1]=i=>u.value=i),onChange:$,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:r(a).loading},[ue,(m(!0),g(H,null,V(f.value,(i,A)=>(m(),g("option",{key:A,value:i},p(i),9,_e))),128))],40,ie),[[G,u.value]])]),e("div",me,[ge,e("nav",pe,[o(n,{to:{name:"Attendance"},class:"block",onClick:s[2]||(s[2]=i=>c.value=!1)},{default:h(()=>[e("div",he,[o(r(S),{class:"w-5 h-5"}),fe])]),_:1}),o(n,{to:{name:"AttendanceRecord"},class:"block",onClick:s[3]||(s[3]=i=>c.value=!1)},{default:h(()=>[e("div",ve,[o(r(N),{class:"w-5 h-5"}),xe])]),_:1}),o(n,{to:{name:"CreateNotice"},class:"block",onClick:s[4]||(s[4]=i=>c.value=!1)},{default:h(()=>[e("div",be,[o(r(I),{class:"w-5 h-5"}),ye])]),_:1}),o(n,{to:{name:"PreviousNotices"},class:"block",onClick:s[5]||(s[5]=i=>c.value=!1)},{default:h(()=>[e("div",we,[o(r(W),{class:"w-5 h-5"}),ke])]),_:1}),o(n,{to:{name:"BrowseLeaveAppeals"},class:"block",onClick:s[6]||(s[6]=i=>c.value=!1)},{default:h(()=>[e("div",Se,[o(r(Z),{class:"w-5 h-5"}),Ce])]),_:1})])]),e("div",Ne,[e("button",{class:"w-full px-4 py-3 rounded bg-red-100 text-red-600 font-medium hover:bg-red-200 flex items-center justify-center space-x-2 transition-colors",onClick:j,disabled:r(a).loading},[o(r(q),{class:"w-5 h-5"}),De],8,Ie)])],2),e("main",$e,[e("div",je,[e("h1",Ae,"Welcome, "+p(d.value.name||"Teacher")+"!",1),Le]),e("div",Te,[e("div",Me,[e("div",Re,[e("div",null,[Be,e("p",Ue,p(u.value||"None"),1)]),o(r(N),{class:"w-8 h-8 text-blue-500"})])]),e("div",Ee,[e("div",Ge,[e("div",null,[He,e("p",Ve,p(f.value.length),1)]),o(r(S),{class:"w-8 h-8 text-green-500"})])]),e("div",ze,[e("div",Fe,[e("div",null,[Oe,e("p",Je,p(r(x)),1)]),o(r(Q),{class:"w-8 h-8 text-purple-500"})])])]),e("div",Pe,[qe,e("div",Qe,[o(n,{to:{name:"Attendance"},class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors"},{default:h(()=>[o(r(S),{class:"w-6 h-6 text-blue-600 mr-3"}),We]),_:1}),o(n,{to:{name:"CreateNotice"},class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-yellow-500 hover:bg-yellow-50 transition-colors"},{default:h(()=>[o(r(I),{class:"w-6 h-6 text-yellow-600 mr-3"}),Ze]),_:1})])])])])}}};var ts=L(Ke,[["__scopeId","data-v-700b32ef"]]);export{ts as default};
