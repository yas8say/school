var z=(M,w,d)=>new Promise(($,C)=>{var L=h=>{try{b(d.next(h))}catch(k){C(k)}},U=h=>{try{b(d.throw(h))}catch(k){C(k)}},b=h=>h.done?$(h.value):Promise.resolve(h.value).then(L,U);b((d=d.apply(M,w)).next())});import{_ as xe,r as c,i as oe,o as pe,w as Se,d as n,e as l,f as e,t as _,z as S,A as F,F as Me,C as Ue,n as X,D as ge,u as o,g as v,p as ye,h as we,E as _e,G as Le,H as le,b as Ae,I as De,J as Ee,K as ke,L as $e,j as Ge,M as Oe,l as He}from"./vendor.9597569f.js";import{_ as qe}from"./index.ae7cf64f.js";const H=M=>(ye("data-v-70176949"),M=M(),we(),M),We={class:"bg-white rounded-lg border border-gray-200 p-4"},Te={class:"flex items-center justify-between mb-4"},Je=H(()=>e("div",null,[e("h4",{class:"font-medium text-gray-800"},"Image Compression"),e("p",{class:"text-sm text-gray-600"},"Optimize image size for better performance")],-1)),Ke={class:"flex items-center space-x-2"},Qe={class:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full"},Ye=H(()=>e("span",{class:"text-gray-400"},"\u2192",-1)),Xe={class:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full"},Ze={class:"space-y-4"},et={class:"flex justify-between items-center mb-2"},tt=H(()=>e("label",{class:"text-sm font-medium text-gray-700"},"Compression Quality",-1)),st={class:"text-sm text-blue-600 font-medium"},ot=H(()=>e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"Smaller File"),e("span",null,"Better Quality")],-1)),at=H(()=>e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Quick Presets",-1)),nt={class:"grid grid-cols-4 gap-2"},lt=["onClick"],rt={class:"grid grid-cols-2 gap-4"},it=H(()=>e("label",{class:"text-sm font-medium text-gray-700 mb-2 block"},"Max Width",-1)),dt=_e('<option value="original" data-v-70176949>Original</option><option value="800" data-v-70176949>800px</option><option value="1024" data-v-70176949>1024px</option><option value="1200" data-v-70176949>1200px</option><option value="1600" data-v-70176949>1600px</option>',5),ut=[dt],ct=H(()=>e("label",{class:"text-sm font-medium text-gray-700 mb-2 block"},"Format",-1)),mt=H(()=>e("option",{value:"jpeg"},"JPEG",-1)),pt=H(()=>e("option",{value:"webp"},"WebP",-1)),gt=H(()=>e("option",{value:"png"},"PNG",-1)),_t=[mt,pt,gt],vt={key:0,class:"bg-gray-50 rounded-lg p-3 border border-gray-200"},ht={class:"grid grid-cols-2 gap-4 text-sm"},ft=H(()=>e("p",{class:"text-gray-600"},"Original Size",-1)),bt={class:"font-medium text-gray-800"},xt=H(()=>e("p",{class:"text-gray-600"},"Compressed Size",-1)),yt={class:"font-medium text-green-600"},wt=H(()=>e("p",{class:"text-gray-600"},"Reduction",-1)),kt={class:"font-medium text-blue-600"},$t=H(()=>e("p",{class:"text-gray-600"},"Dimensions",-1)),Ct={class:"font-medium text-gray-800"},jt={class:"flex space-x-3 pt-2"},It=["disabled"],St={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Mt=H(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)),Ut=[Mt],Dt={props:{imageBlob:{type:Blob,required:!0},imageUrl:{type:String,default:""},autoCompress:{type:Boolean,default:!0},defaultQuality:{type:Number,default:80},defaultMaxWidth:{type:[String,Number],default:"1024"}},emits:["compressed","cancel","error"],setup(M,{emit:w}){const d=M,$=c(d.defaultQuality),C=c(d.defaultMaxWidth),L=c("jpeg"),U=c(null),b=c(!1),h=c(0),k=c(0),j=c({width:0,height:0}),q=c([{name:"High",quality:90,maxWidth:"original"},{name:"Medium",quality:75,maxWidth:"1024"},{name:"Low",quality:50,maxWidth:"800"},{name:"Minimal",quality:30,maxWidth:"600"}]),A=oe(()=>!h.value||!k.value?0:Math.round((h.value-k.value)/h.value*100)),B=g=>g?g<1024?g+" Bytes":g<1048576?(g/1024).toFixed(1)+" KB":(g/1048576).toFixed(1)+" MB":"0 KB",J=g=>new Promise(x=>{const f=new Image;f.onload=()=>{x({width:f.width,height:f.height})},f.onerror=()=>{x({width:0,height:0})},f.src=g}),G=(g,x=.8,f="original",K="jpeg")=>z(this,null,function*(){return new Promise(Q=>{const W=new Image,I=URL.createObjectURL(g);W.onload=()=>z(this,null,function*(){const P=document.createElement("canvas"),T=P.getContext("2d");let{width:V,height:O}=W;f!=="original"&&V>f&&(O=O*f/V,V=f),P.width=V,P.height=O,T.imageSmoothingEnabled=!0,T.imageSmoothingQuality="high",T.drawImage(W,0,0,V,O);const Y=K==="webp"?"image/webp":K==="png"?"image/png":"image/jpeg";P.toBlob(Z=>{URL.revokeObjectURL(I),Q({blob:Z||g,dimensions:{width:V,height:O}})},Y,x/100)}),W.onerror=()=>{URL.revokeObjectURL(I),Q({blob:g,dimensions:{width:0,height:0}})},W.src=I})}),N=()=>z(this,null,function*(){if(!!d.imageBlob){b.value=!0;try{const g=yield G(d.imageBlob,$.value,C.value==="original"?"original":parseInt(C.value),L.value);U.value=g.blob,k.value=g.blob.size,j.value=g.dimensions}catch(g){w("error","Failed to compress image: "+g.message)}finally{b.value=!1}}}),E=g=>{$.value=g.quality,C.value=g.maxWidth,N()},m=()=>{U.value&&w("compressed",{blob:U.value,quality:$.value,dimensions:j.value,format:L.value,originalSize:h.value,compressedSize:k.value,reduction:A.value})};return pe(()=>z(this,null,function*(){if(d.imageBlob){if(h.value=d.imageBlob.size,d.imageUrl){const g=yield J(d.imageUrl);j.value=g}d.autoCompress&&(yield N())}})),Se(()=>d.imageBlob,g=>z(this,null,function*(){g&&(h.value=g.size,d.autoCompress&&(yield N()))})),(g,x)=>(n(),l("div",We,[e("div",Te,[Je,e("div",Ke,[e("span",Qe,_(B(h.value)),1),Ye,e("span",Xe,_(B(k.value)),1)])]),e("div",Ze,[e("div",null,[e("div",et,[tt,e("span",st,_($.value)+"%",1)]),S(e("input",{type:"range","onUpdate:modelValue":x[0]||(x[0]=f=>$.value=f),min:"10",max:"100",step:"5",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",onInput:N},null,544),[[F,$.value]]),ot]),e("div",null,[at,e("div",nt,[(n(!0),l(Me,null,Ue(q.value,f=>(n(),l("button",{key:f.name,onClick:K=>E(f),class:X(["px-3 py-2 text-xs rounded-md transition-colors border",f.quality===$.value?"bg-blue-100 text-blue-700 border-blue-300":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"])},_(f.name),11,lt))),128))])]),e("div",rt,[e("div",null,[it,S(e("select",{"onUpdate:modelValue":x[1]||(x[1]=f=>C.value=f),onChange:N,class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},ut,544),[[ge,C.value]])]),e("div",null,[ct,S(e("select",{"onUpdate:modelValue":x[2]||(x[2]=f=>L.value=f),onChange:N,class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},_t,544),[[ge,L.value]])])]),U.value?(n(),l("div",vt,[e("div",ht,[e("div",null,[ft,e("p",bt,_(B(h.value)),1)]),e("div",null,[xt,e("p",yt,_(B(k.value)),1)]),e("div",null,[wt,e("p",kt,_(o(A))+"%",1)]),e("div",null,[$t,e("p",Ct,_(j.value.width)+"\xD7"+_(j.value.height)+"px",1)])])])):v("",!0),e("div",jt,[e("button",{onClick:m,disabled:!U.value||b.value,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed flex items-center justify-center space-x-2 transition-colors"},[b.value?(n(),l("svg",St,Ut)):v("",!0),e("span",null,_(b.value?"Compressing...":"Apply Compression"),1)],8,It),e("button",{onClick:x[3]||(x[3]=f=>g.$emit("cancel")),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"}," Cancel ")])])]))}};var Et=xe(Dt,[["__scopeId","data-v-70176949"]]);const D=M=>(ye("data-v-5632452e"),M=M(),we(),M),Rt={class:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm"},Bt={class:"flex items-center justify-between mb-6"},Nt=D(()=>e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800"},"Profile Image"),e("p",{class:"text-sm text-gray-600 mt-1"},"Update student's profile picture")],-1)),Ft=["src","alt"],zt={class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200"},Pt={class:"flex items-center space-x-4"},Vt={class:"w-20 h-20 rounded-full border-2 border-white shadow-md overflow-hidden bg-gray-100"},Lt=["src","alt"],At={key:2,class:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center"},Gt=D(()=>e("div",{class:"spinner-small !w-6 !h-6 !border-2"},null,-1)),Ot=[Gt],Ht={key:0,class:"absolute bottom-0 right-0 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs"},qt=D(()=>e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),Wt=[qt],Tt={class:"flex-1"},Jt={class:"font-medium text-gray-800"},Kt={class:"text-sm text-gray-600"},Qt={key:0,class:"text-sm text-blue-600 mt-1"},Yt={class:"bg-blue-50 rounded-lg border border-blue-200 p-5"},Xt=D(()=>e("h4",{class:"font-medium text-gray-800 mb-4"},"Upload New Image",-1)),Zt={class:"space-y-4"},es={class:"flex flex-col sm:flex-row gap-3"},ts=["disabled"],ss=D(()=>e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),os=D(()=>e("span",null,"Choose File",-1)),as=[ss,os],ns={class:"relative flex-1"},ls=["disabled"],rs=_e('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-5632452e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-5632452e></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" data-v-5632452e></path></svg><span data-v-5632452e>Take Photo</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-5632452e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-5632452e></path></svg>',3),is=[rs],ds={key:0,class:"absolute top-full left-0 mt-1 w-full bg-white rounded-lg shadow-lg border border-gray-200 z-10"},us=_e('<div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center" data-v-5632452e><svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-5632452e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-5632452e></path></svg></div><div class="text-left" data-v-5632452e><p class="font-medium" data-v-5632452e>Front Camera</p><p class="text-xs text-gray-500" data-v-5632452e>Take a selfie</p></div>',2),cs=[us],ms=_e('<div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center" data-v-5632452e><svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-5632452e><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" data-v-5632452e></path></svg></div><div class="text-left" data-v-5632452e><p class="font-medium" data-v-5632452e>Rear Camera</p><p class="text-xs text-gray-500" data-v-5632452e>Take a photo</p></div>',2),ps=[ms],gs={key:0,class:"p-4 bg-white rounded-lg border border-gray-200"},_s={class:"flex items-center justify-between"},vs={class:"flex items-center space-x-3"},hs=["src"],fs={key:1,class:"w-full h-full flex items-center justify-center text-blue-600 font-semibold text-sm rounded-lg bg-blue-50"},bs={class:"font-medium text-gray-800"},xs={class:"text-sm text-gray-600"},ys={class:"text-xs text-gray-500 mt-1"},ws={class:"flex items-center space-x-2"},ks={key:2,class:"flex space-x-3"},$s=["disabled"],Cs={key:0,class:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},js=D(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)),Is=[js],Ss={key:0,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4"},Ms={class:"bg-white rounded-lg max-w-4xl max-h-[90vh] w-full h-full flex flex-col"},Us=D(()=>e("h3",{class:"text-lg font-semibold text-gray-800"},"Image Preview",-1)),Ds=D(()=>e("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Es=[Ds],Rs={class:"flex-1 flex items-center justify-center p-8 overflow-auto"},Bs=["src"],Ns=D(()=>e("div",{class:"p-4 border-t border-gray-200 text-center"},[e("p",{class:"text-sm text-gray-600"}," Click anywhere outside to close ")],-1)),Fs={key:2,class:"fixed inset-0 bg-black bg-opacity-90 flex flex-col items-center justify-center z-50 p-4"},zs={class:"bg-white rounded-xl p-6 max-w-lg w-full"},Ps={class:"flex justify-between items-center mb-6"},Vs=D(()=>e("h3",{class:"text-xl font-semibold text-gray-800"},"Take Photo",-1)),Ls={class:"flex items-center space-x-2"},As=D(()=>e("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)),Gs=[As],Os=D(()=>e("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Hs=[Os],qs={class:"relative bg-gray-900 rounded-xl overflow-hidden mb-4"},Ws=D(()=>e("div",{class:"w-16 h-16 bg-white border-4 border-gray-800 rounded-full flex items-center justify-center"},[e("div",{class:"w-12 h-12 bg-gray-800 rounded-full"})],-1)),Ts=[Ws],Js={class:"text-center"},Ks={class:"text-sm text-gray-600"},Qs=ke(" Using: "),Ys={class:"font-medium"},Xs=D(()=>e("p",{class:"text-xs text-gray-500 mt-1"},"Position the student's face in the frame and click the button to capture",-1)),Zs={key:3,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4"},eo={class:"bg-white rounded-xl p-6 w-full max-w-4xl max-h-[95vh] overflow-hidden flex flex-col"},to={class:"text-xl font-semibold text-gray-800 mb-6 flex-shrink-0"},so={class:"flex-1 min-h-0 bg-gray-100 rounded-lg p-4 overflow-hidden"},oo={key:1,class:"h-full w-full flex items-center justify-center"},ao=D(()=>e("div",{class:"text-center"},[e("div",{class:"spinner mx-auto mb-4"}),e("p",{class:"text-gray-600"},"Loading image editor...")],-1)),no=[ao],lo={class:"flex-shrink-0 mt-6"},ro={class:"flex justify-center items-center space-x-4 mb-6"},io=["disabled"],uo=D(()=>e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),co=D(()=>e("span",{class:"font-medium"},"Rotate Left",-1)),mo=[uo,co],po=["disabled"],go=D(()=>e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),_o=D(()=>e("span",{class:"font-medium"},"Rotate Right",-1)),vo=[go,_o],ho=["disabled"],fo=D(()=>e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),bo=D(()=>e("span",{class:"font-medium"},"Reset",-1)),xo=[fo,bo],yo={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},wo=["disabled"],ko={props:{studentId:{type:String,required:!0},currentImage:{type:String,default:""},studentName:{type:String,default:""}},emits:["image-updated","error","success"],setup(M,{emit:w}){const d=M,$=Le(null),C=c(!1),L=()=>z(this,null,function*(){if(!$.value)try{const t=yield qe(()=>import("./VueCropper.300df6c3.js").then(function(p){return p.V}),["assets/VueCropper.300df6c3.js","assets/vendor.9597569f.js","assets/vendor.1f7d581e.css"]);$.value=t.default;const a=document.createElement("link");a.rel="stylesheet",a.href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css",document.head.appendChild(a),C.value=!0}catch(t){console.error("Failed to load CropperJS:",t),w("error","Failed to load image editor")}}),U=c(!1),b=c(null),h=c(null),k=c(null),j=c(""),q=c(!1),A=c(!1),B=c(!1),J=c(!1),G=c(!1),N=c(""),E=c(""),m=c(""),g=c(null),x=c("user"),f=c([]),K=c(!1),Q=c(""),W=c(0),I=c({width:0,height:0}),P=c(null),T=c(null),V=c(null),O=oe(()=>Q.value?Q.value:j.value?j.value:d.currentImage&&d.currentImage!=="null"&&d.currentImage!==""?re(d.currentImage):null),Y=oe(()=>{if(!d.studentName)return"?";const t=d.studentName.trim().split(" ");if(t.length===0)return"?";const a=t[0].charAt(0).toUpperCase();if(t.length===1)return a;const p=t[t.length-1].charAt(0).toUpperCase();return a+p}),Z=oe(()=>{if(!d.studentName)return"#6b7280";const t=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899","#14b8a6"];let a=0;for(let p=0;p<d.studentName.length;p++)a=d.studentName.charCodeAt(p)+((a<<5)-a);return t[Math.abs(a)%t.length]}),de=t=>t?t<1024?t+" Bytes":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB":"0 KB",re=t=>!t||t==="null"||t===""?null:t.startsWith("http")||t.startsWith("//")?t:t.startsWith("/")?window.location.origin+t:`${window.location.origin}/${t.replace(/^\//,"")}`,ae=t=>new Promise(a=>{const p=new Image;p.onload=()=>{a({width:p.width,height:p.height})},p.onerror=()=>{a({width:0,height:0})},p.src=t}),ie=t=>{!t||(E.value=t,J.value=!0)},ue=()=>{J.value=!1,E.value=""},ve=t=>{m.value==="file"&&b.value?b.value=new File([t.blob],b.value.name,{type:t.blob.type,lastModified:Date.now()}):m.value==="camera"&&(k.value=t.blob,h.value=new File([t.blob],`camera-photo-${Date.now()}.${t.format}`,{type:t.blob.type,lastModified:Date.now()})),W.value=t.compressedSize,I.value=t.dimensions,G.value=!1,w("success",`Image compressed to ${t.reduction}% smaller`)},ce=t=>{w("error",t),G.value=!1},he=()=>z(this,null,function*(){try{const a=(yield navigator.mediaDevices.enumerateDevices()).filter(p=>p.kind==="videoinput");f.value=a,K.value=a.length>1}catch(t){}}),ee=(t="user")=>z(this,null,function*(){B.value=!1,A.value=!1,q.value=!0,x.value=t;try{g.value&&g.value.getTracks().forEach(p=>p.stop());const a={video:{facingMode:t,width:{ideal:1920},height:{ideal:1080}}};g.value=yield navigator.mediaDevices.getUserMedia(a),T.value&&(T.value.srcObject=g.value)}catch(a){w("error","Camera access denied or not available"),q.value=!1}}),fe=()=>z(this,null,function*(){const t=x.value==="user"?"environment":"user";yield ee(t)}),be=()=>{B.value=!B.value},me=t=>{t.target.closest(".relative")||(B.value=!1)},te=le({url:"school.al_ummah.api2.update_student_profile_image",auto:!1,onSuccess(t){U.value=!1,t.status==="success"?(Q.value=j.value,w("image-updated",t.image_url),w("success",t.message||"Profile image updated successfully!"),je()):w("error",t.message||"Upload failed")},onError(t){U.value=!1,w("error",t.message||"Upload error occurred")}}),ne=()=>{var t;return(t=P.value)==null?void 0:t.click()},s=t=>z(this,null,function*(){const a=t.target.files[0];if(!a)return;if(!a.type.startsWith("image/"))return w("error","Select an image");if(a.size>10*1024*1024)return w("error","Image must be less than 10MB");b.value=a,W.value=a.size;const p=new FileReader;p.onload=R=>z(this,null,function*(){N.value=R.target.result,j.value=R.target.result,m.value="file",yield L();const se=yield ae(R.target.result);I.value=se,A.value=!0}),p.readAsDataURL(a)}),i=()=>{if(!T.value)return;const t=document.createElement("canvas"),a=T.value;t.width=a.videoWidth,t.height=a.videoHeight,t.getContext("2d").drawImage(a,0,0),t.toBlob(p=>z(this,null,function*(){if(!p)return;k.value=p,W.value=p.size,h.value=new File([p],`camera-photo-${Date.now()}.jpg`,{type:"image/jpeg",lastModified:Date.now()});const R=new FileReader;R.onload=se=>z(this,null,function*(){N.value=se.target.result,j.value=se.target.result,m.value="camera",yield L();const Ve=yield ae(se.target.result);I.value=Ve,A.value=!0}),R.readAsDataURL(p)}),"image/jpeg",.8),r()},r=()=>{g.value&&g.value.getTracks().forEach(t=>t.stop()),g.value=null,q.value=!1,B.value=!1},y=t=>{V.value&&C.value&&V.value.rotate(t)},Re=()=>{V.value&&C.value&&V.value.reset()},Be=()=>{if(!(!V.value||!C.value))try{const t=V.value.getCroppedCanvas();if(!t)throw new Error("Cannot crop image");t.toBlob(a=>{if(!a){w("error","Failed to process cropped image");return}Ne(a)},"image/jpeg",.8)}catch(t){w("error","Failed to crop image. Please try again.")}},Ne=t=>z(this,null,function*(){const a=new FileReader;a.onload=p=>z(this,null,function*(){const R=p.target.result;Q.value=R,j.value=R,W.value=t.size;const se=yield ae(R);I.value=se,m.value==="file"&&b.value?b.value=new File([t],b.value.name,{type:"image/jpeg",lastModified:Date.now()}):m.value==="camera"&&(h.value=new File([t],`camera-photo-${Date.now()}.jpg`,{type:"image/jpeg",lastModified:Date.now()}),k.value=t)}),a.readAsDataURL(t),A.value=!1,w("success",'Image cropped successfully! Click "Update Profile Image" to save.')}),Fe=()=>{A.value=!1,N.value="",m.value==="file"?(b.value=null,P.value&&(P.value.value="")):(h.value=null,k.value=null,ee(x.value))},ze=()=>{let t="";if(b.value){const a=new FileReader;a.onload=p=>{t=p.target.result,Ce(t)},a.readAsDataURL(b.value)}else if(h.value&&k.value){const a=new FileReader;a.onload=p=>{t=p.target.result,Ce(t)},a.readAsDataURL(k.value)}else{w("error","No image selected or image data missing");return}},Ce=t=>{U.value=!0;let a=t;if(t.startsWith("data:")){const p=t.indexOf(",");p!==-1&&(a=t.substring(p+1))}te.fetch({student_id:d.studentId,base64_image:a})},Pe=()=>je(),je=()=>{b.value=null,h.value=null,k.value=null,j.value="",A.value=!1,N.value="",B.value=!1,G.value=!1,W.value=0,I.value={width:0,height:0},P.value&&(P.value.value=""),r()},Ie=t=>{t.target.style.display="none";const a=t.target.parentElement;if(a){const p=document.createElement("div");p.className="w-full h-full flex items-center justify-center text-white font-semibold text-2xl",p.style.backgroundColor=Z.value,p.textContent=Y.value,a.innerHTML="",a.appendChild(p)}};return pe(()=>{he(),document.addEventListener("click",me),d.currentImage&&(Q.value=re(d.currentImage))}),Ae(()=>{r(),document.removeEventListener("click",me)}),Se(()=>d.currentImage,t=>{t&&(Q.value=re(t))}),(t,a)=>{var p;return n(),l("div",Rt,[e("div",Bt,[Nt,e("div",{class:"w-16 h-16 rounded-full border-2 border-gray-100 shadow-sm overflow-hidden bg-gray-50 cursor-pointer",onClick:a[0]||(a[0]=R=>ie(o(O)))},[o(O)?(n(),l("img",{key:0,src:o(O),alt:M.studentName,class:"w-full h-full object-cover",onError:Ie,loading:"lazy"},null,40,Ft)):(n(),l("div",{key:1,class:"w-full h-full flex items-center justify-center text-white font-semibold text-xl",style:De({backgroundColor:o(Z)})},_(o(Y)),5))])]),e("div",zt,[e("div",Pt,[e("div",{class:"relative cursor-pointer",onClick:a[1]||(a[1]=R=>ie(o(O)))},[e("div",Vt,[o(O)?(n(),l("img",{key:0,src:o(O),alt:M.studentName,class:"w-full h-full object-cover",onError:Ie,loading:"lazy"},null,40,Lt)):(n(),l("div",{key:1,class:"w-full h-full flex items-center justify-center text-white font-semibold text-2xl",style:De({backgroundColor:o(Z)})},_(o(Y)),5)),U.value?(n(),l("div",At,Ot)):v("",!0)]),o(O)?(n(),l("div",Ht,Wt)):v("",!0)]),e("div",Tt,[e("h4",Jt,_(M.studentName),1),e("p",Kt,"Student ID: "+_(M.studentId),1),U.value?(n(),l("p",Qt,"Uploading image...")):v("",!0)])])]),e("div",Yt,[Xt,e("div",Zt,[e("div",es,[e("input",{type:"file",ref_key:"fileInput",ref:P,accept:"image/*",onChange:s,class:"hidden"},null,544),e("button",{type:"button",onClick:ne,disabled:U.value,class:"flex-1 px-4 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:bg-gray-100 disabled:text-gray-400 flex items-center justify-center space-x-2 transition-colors"},as,8,ts),e("div",ns,[e("button",{type:"button",onClick:be,disabled:U.value,class:"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:bg-gray-100 disabled:text-gray-400 flex items-center justify-center space-x-2 transition-colors"},is,8,ls),B.value?(n(),l("div",ds,[e("button",{type:"button",onClick:a[2]||(a[2]=R=>ee("user")),class:"w-full px-4 py-3 text-left text-gray-700 hover:bg-gray-50 flex items-center space-x-3 border-b border-gray-100"},cs),e("button",{type:"button",onClick:a[3]||(a[3]=R=>ee("environment")),class:"w-full px-4 py-3 text-left text-gray-700 hover:bg-gray-50 flex items-center space-x-3"},ps)])):v("",!0)])]),b.value||h.value?(n(),l("div",gs,[e("div",_s,[e("div",vs,[e("div",{class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center cursor-pointer",onClick:a[4]||(a[4]=R=>ie(j.value))},[j.value?(n(),l("img",{key:0,src:j.value,alt:"Preview",class:"w-full h-full object-cover rounded-lg"},null,8,hs)):(n(),l("div",fs,_(o(Y)),1))]),e("div",null,[e("p",bs,_(m.value==="camera"?"Camera Photo":(p=b.value)==null?void 0:p.name),1),e("p",xs,_(m.value==="camera"?`Captured from ${x.value==="user"?"Front":"Rear"} Camera \u2022 ${de(W.value)}`:`Size: ${b.value?de(b.value.size):"0 KB"}`),1),e("p",ys," Dimensions: "+_(I.value.width)+" \xD7 "+_(I.value.height)+"px ",1)])]),e("div",ws,[e("button",{type:"button",onClick:a[5]||(a[5]=R=>G.value=!0),class:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Compress "),e("button",{type:"button",onClick:a[6]||(a[6]=R=>m.value==="camera"?ee(x.value):ne()),class:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors"}," Change ")])])])):v("",!0),G.value&&(b.value||k.value)?(n(),Ee(Et,{key:1,"image-blob":b.value||k.value,"image-url":j.value,"auto-compress":!0,onCompressed:ve,onCancel:a[7]||(a[7]=R=>G.value=!1),onError:ce},null,8,["image-blob","image-url"])):v("",!0),b.value||h.value?(n(),l("div",ks,[e("button",{type:"button",onClick:ze,disabled:U.value,class:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed flex items-center justify-center space-x-2 transition-colors font-medium"},[U.value?(n(),l("svg",Cs,Is)):v("",!0),e("span",null,_(U.value?"Uploading...":"Update Profile Image"),1)],8,$s),e("button",{type:"button",onClick:Pe,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Cancel ")])):v("",!0)])]),J.value?(n(),l("div",Ss,[e("div",Ms,[e("div",{class:"flex justify-between items-center p-4 border-b border-gray-200"},[Us,e("button",{onClick:ue,class:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},Es)]),e("div",Rs,[e("img",{src:E.value,alt:"Preview",class:"max-w-full max-h-full object-contain"},null,8,Bs)]),Ns])])):v("",!0),q.value?(n(),l("video",{key:1,ref_key:"videoEl",ref:T,autoplay:"",playsinline:"",muted:"",class:"hidden"},null,512)):v("",!0),q.value&&!A.value?(n(),l("div",Fs,[e("div",zs,[e("div",Ps,[Vs,e("div",Ls,[K.value?(n(),l("button",{key:0,type:"button",onClick:fe,class:"p-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Switch Camera"},Gs)):v("",!0),e("button",{type:"button",onClick:r,class:"p-3 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",title:"Close Camera"},Hs)])]),e("div",qs,[e("video",{ref_key:"videoEl",ref:T,autoplay:"",playsinline:"",muted:"",class:"w-full h-80 object-cover"},null,512),e("div",{class:"absolute bottom-6 left-1/2 transform -translate-x-1/2"},[e("button",{type:"button",onClick:i,class:"w-20 h-20 bg-white rounded-full shadow-2xl flex items-center justify-center hover:bg-gray-100 transition-colors"},Ts)])]),e("div",Js,[e("p",Ks,[Qs,e("span",Ys,_(x.value==="user"?"Front Camera":"Rear Camera"),1)]),Xs])])])):v("",!0),A.value?(n(),l("div",Zs,[e("div",eo,[e("h3",to,_(m.value==="camera"?"Crop Your Photo":"Crop Uploaded Image"),1),e("div",so,[C.value?(n(),Ee(o($),{key:0,ref_key:"cropper",ref:V,src:N.value,"aspect-ratio":1,"view-mode":2,guides:!0,background:!1,"auto-crop-area":.8,"min-container-width":200,"min-container-height":200,class:"cropper-container h-full w-full max-h-[50vh]"},null,8,["src","auto-crop-area"])):(n(),l("div",oo,no))]),e("div",lo,[e("div",ro,[e("button",{type:"button",onClick:a[8]||(a[8]=R=>y(-90)),disabled:!C.value,class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:bg-gray-100 disabled:text-gray-400 flex items-center space-x-2 transition-colors",title:"Rotate Left"},mo,8,io),e("button",{type:"button",onClick:a[9]||(a[9]=R=>y(90)),disabled:!C.value,class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:bg-gray-100 disabled:text-gray-400 flex items-center space-x-2 transition-colors",title:"Rotate Right"},vo,8,po),e("button",{type:"button",onClick:Re,disabled:!C.value,class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:bg-gray-100 disabled:text-gray-400 flex items-center space-x-2 transition-colors",title:"Reset Crop"},xo,8,ho)]),e("div",yo,[e("button",{type:"button",onClick:Fe,class:"px-8 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors"},_(m.value==="camera"?"Retake Photo":"Choose Different File"),1),e("button",{type:"button",onClick:Be,disabled:!C.value,class:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-green-300 font-medium transition-colors"}," Apply Crop ",8,wo)])])])])):v("",!0)])}}};var $o=xe(ko,[["__scopeId","data-v-5632452e"]]);const u=M=>(ye("data-v-47a454ee"),M=M(),we(),M),Co={class:"min-h-screen bg-gray-50 p-4"},jo={class:"fixed top-4 right-4 z-50 space-y-2 w-full max-w-sm px-4 sm:px-0 sm:w-96"},Io={class:"flex items-start space-x-3"},So=u(()=>e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-green-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),Mo={class:"flex-1"},Uo=u(()=>e("p",{class:"text-green-800 font-medium"},"Success",-1)),Do={class:"text-green-700 text-sm mt-1"},Eo={class:"flex items-start space-x-3"},Ro=u(()=>e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),Bo={class:"flex-1"},No=u(()=>e("p",{class:"text-red-800 font-medium"},"Error",-1)),Fo={class:"text-red-700 text-sm mt-1"},zo={class:"mb-6"},Po={class:"text-xl sm:text-2xl font-bold text-gray-800"},Vo={class:"text-xs sm:text-sm text-gray-500 font-normal ml-2"},Lo={key:0,class:"text-gray-600 text-sm sm:text-base"},Ao={key:0,class:"text-green-600 font-medium"},Go={key:1,class:"text-orange-600 font-medium"},Oo={key:0,class:"flex justify-center items-center py-8"},Ho=u(()=>e("div",{class:"spinner"},null,-1)),qo=u(()=>e("span",{class:"ml-2 text-gray-600"},"Loading student details...",-1)),Wo=[Ho,qo],To={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Jo=u(()=>e("p",{class:"text-red-800"},"Failed to load settings. Using default permissions.",-1)),Ko={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Qo=u(()=>e("p",{class:"text-red-800"},"Failed to load student details.",-1)),Yo={key:3,class:"bg-white rounded-lg shadow-sm p-4 sm:p-6"},Xo=["onSubmit"],Zo={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ea={class:"md:col-span-2 lg:col-span-3"},ta=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student ID",-1)),sa=["value"],oa=u(()=>e("p",{class:"text-xs text-gray-500 mt-1"},"Student ID cannot be changed",-1)),aa={class:"md:col-span-2 lg:col-span-3"},na=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student Group",-1)),la=["value"],ra=u(()=>e("p",{class:"text-xs text-gray-500 mt-1"},"Student group cannot be changed",-1)),ia={key:0,class:"md:col-span-2 lg:col-span-3"},da=u(()=>e("h3",{class:"text-lg font-medium text-gray-800 mb-4 border-b pb-2"},"Personal Details",-1)),ua=[da],ca={class:"md:col-span-2 lg:col-span-3"},ma={key:1},pa=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"First Name",-1)),ga={key:2},_a=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Middle Name",-1)),va={key:3},ha=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Last Name",-1)),fa={key:4},ba=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student Date of Birth",-1)),xa={key:5},ya=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"GR Number",-1)),wa={key:6},ka=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Roll Number ",-1)),$a={key:0,class:"text-red-600 text-xs mt-1"},Ca={key:1,class:"text-gray-500 text-xs mt-1"},ja={key:7,class:"md:col-span-2 lg:col-span-3 mt-4"},Ia=u(()=>e("h3",{class:"text-lg font-medium text-gray-800 mb-4 border-b pb-2"},"Contact Information",-1)),Sa=[Ia],Ma={key:8},Ua=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Address",-1)),Da={key:9},Ea=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number",-1)),Ra={class:"mt-8 pt-6 border-t flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0"},Ba={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto"},Na=["disabled"],Fa={key:0},za={key:1},Pa=u(()=>e("div",{class:"md:col-span-2 lg:col-span-3 mt-8"},[e("h3",{class:"text-lg font-medium text-gray-800 mb-4 border-b pb-2"},[ke(" Guardian Management "),e("span",{class:"text-sm text-blue-600 font-normal ml-2"},"(Manage multiple guardians)")])],-1)),Va={class:"md:col-span-2 lg:col-span-3"},La=u(()=>e("h4",{class:"text-lg font-semibold text-gray-800 mb-4"},"Add New Guardian",-1)),Aa={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ga=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guardian Name",-1)),Oa=["disabled"],Ha=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number",-1)),qa=["disabled"],Wa=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Relation",-1)),Ta=["disabled"],Ja=u(()=>e("option",{value:"Mother"},"Mother",-1)),Ka=u(()=>e("option",{value:"Father"},"Father",-1)),Qa=u(()=>e("option",{value:"Others"},"Others",-1)),Ya=[Ja,Ka,Qa],Xa={class:"mt-4 flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-3 sm:space-y-0"},Za={key:0,class:"text-red-600 text-sm font-medium"},en={key:1,class:"text-gray-600 text-sm"},tn=["disabled"],sn={key:0},on={key:1},an={class:"md:col-span-2 lg:col-span-3"},nn={class:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6"},ln=u(()=>e("h4",{class:"text-lg font-semibold text-gray-800 mb-4"},"Existing Guardians",-1)),rn={key:0,class:"flex justify-center py-4"},dn=u(()=>e("div",{class:"spinner-small"},null,-1)),un=u(()=>e("span",{class:"ml-2 text-gray-600"},"Loading guardians...",-1)),cn=[dn,un],mn={key:1,class:"text-center py-8 text-gray-500"},pn=u(()=>e("svg",{class:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),gn=u(()=>e("p",null,"No guardians added yet.",-1)),_n=[pn,gn],vn={key:2,class:"space-y-4"},hn={class:"flex items-start justify-between"},fn={class:"flex items-start space-x-3 flex-1"},bn=u(()=>e("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),xn={class:"flex-1 min-w-0"},yn={class:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2 mb-1"},wn={class:"font-medium text-gray-800 text-lg truncate"},kn={class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full self-start sm:self-auto"},$n={key:0,class:"space-y-2 text-sm text-gray-600"},Cn={class:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-4"},jn={class:"flex items-center space-x-1"},In=u(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),Sn={class:"truncate"},Mn=u(()=>e("span",{class:"hidden sm:inline text-gray-400"},"\u2022",-1)),Un={class:"flex items-center space-x-1"},Dn=u(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})],-1)),En={class:"truncate"},Rn={key:0,class:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2 text-xs"},Bn={key:0,class:"flex items-center space-x-1"},Nn=u(()=>e("span",null,"\u{1F4BC}",-1)),Fn={class:"truncate"},zn={key:1,class:"hidden sm:inline text-gray-400"},Pn={key:2,class:"flex items-center space-x-1"},Vn=u(()=>e("span",null,"\u{1F3AF}",-1)),Ln={class:"truncate"},An={key:1,class:"text-xs text-gray-500 flex items-center space-x-1"},Gn=u(()=>e("span",null,"\u{1F393}",-1)),On={class:"truncate"},Hn={key:1,class:"space-y-4 mt-4 p-4 bg-gray-50 rounded-lg"},qn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Wn=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guardian Name",-1)),Tn=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number",-1)),Jn=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Relation",-1)),Kn=u(()=>e("option",{value:"Mother"},"Mother",-1)),Qn=u(()=>e("option",{value:"Father"},"Father",-1)),Yn=u(()=>e("option",{value:"Others"},"Others",-1)),Xn=[Kn,Qn,Yn],Zn=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date of Birth",-1)),el=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),tl=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Occupation",-1)),sl=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Designation",-1)),ol={class:"md:col-span-2"},al=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Work Address",-1)),nl=u(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Education",-1)),ll={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 pt-4"},rl=["onClick","disabled"],il={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},dl=u(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)),ul=[dl],cl=["onClick"],ml=u(()=>e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),pl=[ml],gl={class:"text-sm text-gray-600 mt-4"},_l={key:0,class:"text-green-600"},vl={key:1,class:"text-orange-600"},hl={setup(M){const w=He(),d=$e({student:"",first_name:"",middle_name:"",last_name:"",student_date_of_birth:"",name:"",email_address:"",phone_number:"",roll_number:""}),$=c(""),C=c(""),L=c(!0),U=c(!1),b=c(!1),h=c(""),k=c(""),j=c(""),q=c(""),A=c(""),B=c([]),J=c(null),G=c(!1),N=c(!1),E=$e({guardian_name:"",phone_number:"",relation:"Mother"}),m=$e({guardian_name:"",mobile_number:"",relation:"Mother",date_of_birth:"",email:"",occupation:"",designation:"",work_address:"",education:""}),g=c({allow_instructors_modify_student:0,session_expiry:"24:00"}),x=oe(()=>g.value.allow_instructors_modify_student===1),f=oe(()=>B.value.length>=3),K=c(""),Q=oe(()=>K.value?(console.log("\u{1F5BC}\uFE0F Using stored image URL:",K.value),W(K.value)):(console.log("\u274C No image URL available"),""));pe(()=>{if($.value=w.query.studentId,w.query.studentData)try{const s=JSON.parse(decodeURIComponent(w.query.studentData));C.value=s.student_group||"",K.value=s.img_url||"",console.log("\u{1F3AF} Route data analysis:",{studentGroup:C.value,hasImgUrl:!!s.img_url,imgUrl:s.img_url,allKeys:Object.keys(s)})}catch(s){console.error("Error parsing student data:",s),I("Invalid student data")}ne(),te()});const W=s=>s?s.startsWith("http")||s.startsWith("//")?s:s.startsWith("/")?window.location.origin+s:`${window.location.origin}/${s.replace(/^\//,"")}`:null,I=s=>{k.value=s,j.value="",q.value="animate-slide-in-right"},P=s=>{j.value=s,k.value="",q.value="animate-slide-in-right"},T=()=>{q.value="animate-slide-out-right",setTimeout(()=>{k.value="",j.value="",q.value=""},300)},V=s=>{console.log("\u{1F4F8} Image updated in StudentProfileImage:",s),K.value=s},O=le({url:"school.al_ummah.api3.fetch_admin_settings",auto:!1,onSuccess(s){g.value=s,L.value=!1,U.value=!1},onError(){L.value=!1,U.value=!0,g.value={allow_instructors_modify_student:0,session_expiry:"24:00"}}}),Y=le({url:"school.al_ummah.api2.get_student_details",auto:!1,onSuccess(s){s.student_info&&Object.assign(d,s.student_info),s.guardians&&Array.isArray(s.guardians)&&(B.value=s.guardians),A.value=""},onError(){A.value="Failed to load student details.",B.value=[]}}),Z=le({url:"school.al_ummah.api2.update_student_details",auto:!1,onSuccess(s){b.value=!1,P(s.message||"Student updated successfully!")},onError(s){var r,y;b.value=!1;const i=s._server_messages?(y=JSON.parse(((r=JSON.parse(s._server_messages.at(-1)))==null?void 0:r.message)||"{}"))==null?void 0:y.message:s.message;I(i||"Update failed.")}}),de=le({url:"school.al_ummah.api2.add_guardian_to_student",auto:!1,onSuccess(s){N.value=!1,P(s.message||"Guardian added!"),te(),ve()},onError(s){var r,y;N.value=!1;const i=s._server_messages?(y=JSON.parse(((r=JSON.parse(s._server_messages.at(-1)))==null?void 0:r.message)||"{}"))==null?void 0:y.message:s.message;I(i||"Failed to add guardian.")}}),re=le({url:"school.al_ummah.api2.update_guardian_details",auto:!1,onSuccess(s){G.value=!1,P(s.message||"Guardian updated!"),J.value=null,ce(),te()},onError(s){var r,y;G.value=!1;const i=s._server_messages?(y=JSON.parse(((r=JSON.parse(s._server_messages.at(-1)))==null?void 0:r.message)||"{}"))==null?void 0:y.message:s.message;I(i||"Failed to update guardian.")}}),ae=s=>/^[0-9]{10}$/.test(s),ie=s=>{[".",",","e","E","-"].includes(s.key)&&s.preventDefault()},ue=()=>{const s=d.roll_number;if(!s&&s!==0)return h.value="";const i=Number(s);if(!Number.isInteger(i))return h.value="Must be a whole number";if(i<1)return h.value="Must be at least 1";if(i>999)return h.value="Cannot exceed 999";h.value=""},ve=()=>{E.guardian_name="",E.phone_number="",E.relation="Mother"},ce=()=>{Object.keys(m).forEach(s=>{m[s]=""}),m.relation="Mother"},he=()=>z(this,null,function*(){if(!E.guardian_name.trim())return I("Guardian name required");if(!ae(E.phone_number))return I("Valid 10-digit phone required");N.value=!0,de.fetch({student_id:$.value,student_name:`${d.first_name} ${d.last_name}`.trim(),guardian_name:E.guardian_name,relation:E.relation,phone_number:E.phone_number})}),ee=s=>{J.value=s.guardian,Object.assign(m,{guardian_name:s.guardian_name||"",mobile_number:s.mobile_number||"",relation:s.relation||"Mother",date_of_birth:s.date_of_birth||"",email:s.email||"",occupation:s.occupation||"",designation:s.designation||"",work_address:s.work_address||"",education:s.education||""})},fe=()=>{J.value=null,ce()},be=s=>{if(!m.guardian_name.trim())return I("Guardian name required");if(!ae(m.mobile_number))return I("Valid 10-digit phone required");G.value=!0,re.fetch({guardian_id:s,guardian_name:m.guardian_name,phone_number:m.mobile_number,relation:m.relation,guardian_date_of_birth:m.date_of_birth,guardian_email:m.email,occupation:m.occupation,designation:m.designation,work_address:m.work_address,education:m.education})},me=s=>z(this,null,function*(){var r;if(console.log("\u{1F6A8} updateStudent called",{eventType:s==null?void 0:s.type,target:(r=s==null?void 0:s.target)==null?void 0:r.tagName,timestamp:new Date().toISOString(),studentId:$.value}),s&&(s.preventDefault(),s.stopPropagation()),ue(),h.value){I(h.value);return}b.value=!0;const i={student_id:$.value,student_group:C.value};x.value&&Object.assign(i,{first_name:d.first_name||"",middle_name:d.middle_name||"",last_name:d.last_name||"",student_date_of_birth:d.student_date_of_birth||"",name:d.name||"",email_address:d.email_address||"",phone_number:d.phone_number||"",roll_number:d.roll_number||""}),console.log("Sending update data:",i),yield Z.fetch(i)}),te=()=>{!$.value||Y.fetch({student:$.value})},ne=()=>{L.value=!0,O.fetch()};return pe(()=>{if($.value=w.query.studentId,w.query.studentData)try{const s=JSON.parse(decodeURIComponent(w.query.studentData));C.value=s.student_group||""}catch(s){console.error("Error parsing student data:",s),I("Invalid student data")}ne(),te()}),(s,i)=>(n(),l("div",Co,[e("div",jo,[j.value?(n(),l("div",{key:0,class:X(["bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg transform transition-all duration-300 ease-in-out",q.value])},[e("div",Io,[So,e("div",Mo,[Uo,e("p",Do,_(j.value),1)])]),e("div",{class:"mt-4 flex justify-end"},[e("button",{type:"button",onClick:T,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium"}," OK ")])],2)):v("",!0),k.value?(n(),l("div",{key:1,class:X(["bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg transform transition-all duration-300 ease-in-out",q.value])},[e("div",Eo,[Ro,e("div",Bo,[No,e("p",Fo,_(k.value),1)])]),e("div",{class:"mt-4 flex justify-end"},[e("button",{type:"button",onClick:T,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm font-medium"}," OK ")])],2)):v("",!0)]),e("div",zo,[e("h1",Po,[ke(" Edit Student: "+_(o(d).student_name||$.value)+" ",1),e("span",Vo,"(ID: "+_($.value)+")",1)]),L.value?v("",!0):(n(),l("p",Lo,[o(x)?(n(),l("span",Ao," \u2713 Full editing access enabled ")):(n(),l("span",Go," \u26A0 Limited editing access (Guardian fields only) "))]))]),o(Y).loading||L.value?(n(),l("div",Oo,Wo)):U.value?(n(),l("div",To,[Jo,e("button",{type:"button",onClick:ne,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])):A.value?(n(),l("div",Ko,[Qo,e("button",{type:"button",onClick:te,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])):(n(),l("div",Yo,[e("form",{onSubmit:Oe(me,["prevent"])},[e("div",Zo,[e("div",ea,[ta,e("input",{value:$.value,type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500"},null,8,sa),oa]),e("div",aa,[na,e("input",{value:C.value,type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500"},null,8,la),ra]),o(x)?(n(),l("div",ia,ua)):v("",!0),e("div",ca,[Ge($o,{"student-id":$.value,"current-image":o(Q),"student-name":o(d).student_name,onImageUpdated:V,onSuccess:i[0]||(i[0]=r=>P(r)),onError:i[1]||(i[1]=r=>I(r))},null,8,["student-id","current-image","student-name"])]),o(x)?(n(),l("div",ma,[pa,S(e("input",{"onUpdate:modelValue":i[2]||(i[2]=r=>o(d).first_name=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(d).first_name]])])):v("",!0),o(x)?(n(),l("div",ga,[_a,S(e("input",{"onUpdate:modelValue":i[3]||(i[3]=r=>o(d).middle_name=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(d).middle_name]])])):v("",!0),o(x)?(n(),l("div",va,[ha,S(e("input",{"onUpdate:modelValue":i[4]||(i[4]=r=>o(d).last_name=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(d).last_name]])])):v("",!0),o(x)?(n(),l("div",fa,[ba,S(e("input",{"onUpdate:modelValue":i[5]||(i[5]=r=>o(d).student_date_of_birth=r),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(d).student_date_of_birth]])])):v("",!0),o(x)?(n(),l("div",xa,[ya,S(e("input",{"onUpdate:modelValue":i[6]||(i[6]=r=>o(d).name=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(d).name]])])):v("",!0),o(x)?(n(),l("div",wa,[ka,S(e("input",{"onUpdate:modelValue":i[7]||(i[7]=r=>o(d).roll_number=r),type:"number",min:"1",max:"999",step:"1",placeholder:"Enter roll number",onKeypress:ie,onInput:ue,class:X(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",h.value?"border-red-300 bg-red-50":"border-gray-300"])},null,34),[[F,o(d).roll_number]]),h.value?(n(),l("p",$a,_(h.value),1)):(n(),l("p",Ca,"Must be a whole number between 1-999 (optional)"))])):v("",!0),o(x)?(n(),l("div",ja,Sa)):v("",!0),o(x)?(n(),l("div",Ma,[Ua,S(e("input",{"onUpdate:modelValue":i[8]||(i[8]=r=>o(d).email_address=r),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(d).email_address]])])):v("",!0),o(x)?(n(),l("div",Da,[Ea,S(e("input",{"onUpdate:modelValue":i[9]||(i[9]=r=>o(d).phone_number=r),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(d).phone_number]])])):v("",!0)]),e("div",Ra,[e("div",Ba,[e("button",{type:"button",class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",onClick:i[10]||(i[10]=r=>s.$router.back())}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:b.value},[b.value?(n(),l("span",Fa,"Updating...")):(n(),l("span",za,"Update Student"))],8,Na)])]),Pa,e("div",Va,[e("div",{class:X(["bg-gray-50 rounded-lg p-4 sm:p-6 border-2 border-dashed mb-6 transition-all",o(f)?"border-gray-300 opacity-50":"border-blue-200 hover:border-blue-300"])},[La,e("div",Aa,[e("div",null,[Ga,S(e("input",{"onUpdate:modelValue":i[11]||(i[11]=r=>o(E).guardian_name=r),type:"text",placeholder:"Enter guardian name",disabled:o(f),class:X(["w-full px-3 py-2 border rounded-md",o(f)?"border-gray-200 bg-gray-100 text-gray-500":"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"])},null,10,Oa),[[F,o(E).guardian_name]])]),e("div",null,[Ha,S(e("input",{"onUpdate:modelValue":i[12]||(i[12]=r=>o(E).phone_number=r),type:"tel",placeholder:"10-digit number",disabled:o(f),class:X(["w-full px-3 py-2 border rounded-md",o(f)?"border-gray-200 bg-gray-100 text-gray-500":"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"])},null,10,qa),[[F,o(E).phone_number]])]),e("div",null,[Wa,S(e("select",{"onUpdate:modelValue":i[13]||(i[13]=r=>o(E).relation=r),disabled:o(f),class:X(["w-full px-3 py-2 border rounded-md",o(f)?"border-gray-200 bg-gray-100 text-gray-500":"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"])},Ya,10,Ta),[[ge,o(E).relation]])])]),e("div",Xa,[e("div",null,[o(f)?(n(),l("p",Za," \u274C Maximum of 3 guardians reached ")):(n(),l("p",en," Guardians added: "+_(B.value.length)+"/3 ",1))]),e("button",{type:"button",onClick:he,disabled:o(f)||N.value,class:X(["px-4 py-2 rounded-md flex items-center space-x-2 transition-colors w-full sm:w-auto justify-center",o(f)||N.value?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},[N.value?(n(),l("span",sn,"Adding...")):(n(),l("span",on,"Add Guardian"))],10,tn)])],2)]),e("div",an,[e("div",nn,[ln,o(Y).loading?(n(),l("div",rn,cn)):B.value.length===0?(n(),l("div",mn,_n)):(n(),l("div",vn,[(n(!0),l(Me,null,Ue(B.value,r=>(n(),l("div",{key:r.guardian,class:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors"},[e("div",hn,[e("div",fn,[bn,e("div",xn,[e("div",yn,[e("h5",wn,_(r.guardian_name),1),e("span",kn,_(r.relation),1)]),J.value!==r.guardian?(n(),l("div",$n,[e("div",Cn,[e("span",jn,[In,e("span",Sn,_(r.mobile_number||"No phone"),1)]),Mn,e("span",Un,[Dn,e("span",En,_(r.email||"No email"),1)])]),r.occupation||r.designation?(n(),l("div",Rn,[r.occupation?(n(),l("span",Bn,[Nn,e("span",Fn,_(r.occupation),1)])):v("",!0),r.occupation&&r.designation?(n(),l("span",zn,"\u2022")):v("",!0),r.designation?(n(),l("span",Pn,[Vn,e("span",Ln,_(r.designation),1)])):v("",!0)])):v("",!0),r.education?(n(),l("div",An,[Gn,e("span",On,_(r.education),1)])):v("",!0)])):v("",!0),J.value===r.guardian?(n(),l("div",Hn,[e("div",qn,[e("div",null,[Wn,S(e("input",{"onUpdate:modelValue":i[14]||(i[14]=y=>o(m).guardian_name=y),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(m).guardian_name]])]),e("div",null,[Tn,S(e("input",{"onUpdate:modelValue":i[15]||(i[15]=y=>o(m).mobile_number=y),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(m).mobile_number]])]),e("div",null,[Jn,S(e("select",{"onUpdate:modelValue":i[16]||(i[16]=y=>o(m).relation=y),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},Xn,512),[[ge,o(m).relation]])]),e("div",null,[Zn,S(e("input",{"onUpdate:modelValue":i[17]||(i[17]=y=>o(m).date_of_birth=y),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(m).date_of_birth]])]),e("div",null,[el,S(e("input",{"onUpdate:modelValue":i[18]||(i[18]=y=>o(m).email=y),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(m).email]])]),e("div",null,[tl,S(e("input",{"onUpdate:modelValue":i[19]||(i[19]=y=>o(m).occupation=y),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(m).occupation]])]),e("div",null,[sl,S(e("input",{"onUpdate:modelValue":i[20]||(i[20]=y=>o(m).designation=y),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(m).designation]])]),e("div",ol,[al,S(e("textarea",{"onUpdate:modelValue":i[21]||(i[21]=y=>o(m).work_address=y),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(m).work_address]])]),e("div",null,[nl,S(e("input",{"onUpdate:modelValue":i[22]||(i[22]=y=>o(m).education=y),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o(m).education]])])]),e("div",ll,[e("button",{type:"button",onClick:y=>be(r.guardian),disabled:G.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-green-300 flex items-center space-x-2 justify-center"},[G.value?(n(),l("svg",il,ul)):v("",!0),e("span",null,_(G.value?"Updating...":"Update Guardian"),1)],8,rl),e("button",{type:"button",onClick:fe,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"}," Cancel ")])])):v("",!0)])]),J.value!==r.guardian?(n(),l("button",{key:0,type:"button",onClick:y=>ee(r),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors flex-shrink-0",title:"Edit guardian details"},pl,8,cl)):v("",!0)])]))),128))]))])]),e("div",gl,[o(x)?(n(),l("span",_l," \u2713 You have full editing permissions ")):(n(),l("span",vl," \u26A0 You can only edit guardian information "))])],40,Xo)]))]))}};var yl=xe(hl,[["__scopeId","data-v-47a454ee"]]);export{yl as default};
