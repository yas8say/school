var L=(E,R,i)=>new Promise((x,N)=>{var S=g=>{try{v(i.next(g))}catch(k){N(k)}},V=g=>{try{v(i.throw(g))}catch(k){N(k)}},v=g=>g.done?x(g.value):Promise.resolve(g.value).then(S,V);v((i=i.apply(E,R)).next())});import{_ as ie,r as J,k as b,a as Y,c as I,p as ue,e as l,l as e,n as M,t as f,q as c,v as W,u as s,x as m,y as p,z as Q,F as ce,A as me,C as _e,D as ge,E as pe,G as be,o as r}from"./vendor.0121fc29.js";const n=E=>(ge("data-v-ec7fde0e"),E=E(),pe(),E),he={class:"min-h-screen bg-gray-50 p-4"},fe={class:"fixed top-4 right-4 z-50 space-y-2 w-96 max-w-full"},ye={class:"flex items-start space-x-3"},xe=n(()=>e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-green-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),ve={class:"flex-1"},ke=n(()=>e("p",{class:"text-green-800 font-medium"},"Success",-1)),we={class:"text-green-700 text-sm mt-1"},Me={class:"flex items-start space-x-3"},Se=n(()=>e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),Ee={class:"flex-1"},Ne=n(()=>e("p",{class:"text-red-800 font-medium"},"Error",-1)),Ve={class:"text-red-700 text-sm mt-1"},Ce={class:"mb-6"},Ge={class:"text-2xl font-bold text-gray-800"},Ue={class:"text-sm text-gray-500 font-normal ml-2"},Fe={key:0,class:"text-gray-600"},De={key:0,class:"text-green-600 font-medium"},je={key:1,class:"text-orange-600 font-medium"},Re={key:0,class:"flex justify-center items-center py-8"},Ie=n(()=>e("div",{class:"spinner"},null,-1)),Oe=n(()=>e("span",{class:"ml-2 text-gray-600"},"Loading student details...",-1)),Pe=[Ie,Oe],Ae={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Be=n(()=>e("p",{class:"text-red-800"},"Failed to load settings. Using default permissions.",-1)),ze={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Le=n(()=>e("p",{class:"text-red-800"},"Failed to load student details.",-1)),Je={key:3,class:"bg-white rounded-lg shadow-sm p-6"},$e=["onSubmit"],He={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},qe={class:"md:col-span-2 lg:col-span-3"},Ke=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student ID",-1)),Te=["value"],Ye=n(()=>e("p",{class:"text-xs text-gray-500 mt-1"},"Student ID cannot be changed",-1)),We={class:"md:col-span-2 lg:col-span-3"},Qe=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student Group",-1)),Xe=["value"],Ze=n(()=>e("p",{class:"text-xs text-gray-500 mt-1"},"Student group cannot be changed",-1)),et={key:0,class:"md:col-span-2 lg:col-span-3"},tt=n(()=>e("h3",{class:"text-lg font-medium text-gray-800 mb-4 border-b pb-2"},"Personal Details",-1)),st=[tt],ot={key:1},nt=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"First Name",-1)),at={key:2},lt=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Middle Name",-1)),rt={key:3},dt=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Last Name",-1)),it={key:4},ut=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student Date of Birth",-1)),ct={key:5},mt=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"GR Number",-1)),_t={key:6},gt=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Roll Number ",-1)),pt={key:0,class:"text-red-600 text-xs mt-1"},bt={key:1,class:"text-gray-500 text-xs mt-1"},ht={key:7,class:"md:col-span-2 lg:col-span-3 mt-4"},ft=n(()=>e("h3",{class:"text-lg font-medium text-gray-800 mb-4 border-b pb-2"},"Contact Information",-1)),yt=[ft],xt={key:8},vt=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Address",-1)),kt={key:9},wt=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number",-1)),Mt={class:"mt-8 pt-6 border-t flex justify-between items-center"},St={class:"flex space-x-3"},Et=["disabled"],Nt={key:0},Vt={key:1},Ct=n(()=>e("div",{class:"md:col-span-2 lg:col-span-3 mt-8"},[e("h3",{class:"text-lg font-medium text-gray-800 mb-4 border-b pb-2"},[W(" Guardian Management "),e("span",{class:"text-sm text-blue-600 font-normal ml-2"},"(Manage multiple guardians)")])],-1)),Gt={class:"md:col-span-2 lg:col-span-3"},Ut=n(()=>e("h4",{class:"text-lg font-semibold text-gray-800 mb-4"},"Add New Guardian",-1)),Ft={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Dt=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guardian Name",-1)),jt=["disabled"],Rt=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number",-1)),It=["disabled"],Ot=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Relation",-1)),Pt=["disabled"],At=n(()=>e("option",{value:"Mother"},"Mother",-1)),Bt=n(()=>e("option",{value:"Father"},"Father",-1)),zt=n(()=>e("option",{value:"Others"},"Others",-1)),Lt=[At,Bt,zt],Jt={class:"mt-4 flex items-center justify-between"},$t={key:0,class:"text-red-600 text-sm font-medium"},Ht={key:1,class:"text-gray-600 text-sm"},qt=["disabled"],Kt={key:0},Tt={key:1},Yt={class:"md:col-span-2 lg:col-span-3"},Wt={class:"bg-white rounded-lg border border-gray-200 p-6"},Qt=n(()=>e("h4",{class:"text-lg font-semibold text-gray-800 mb-4"},"Existing Guardians",-1)),Xt={key:0,class:"flex justify-center py-4"},Zt=n(()=>e("div",{class:"spinner-small"},null,-1)),es=n(()=>e("span",{class:"ml-2 text-gray-600"},"Loading guardians...",-1)),ts=[Zt,es],ss={key:1,class:"text-center py-8 text-gray-500"},os=n(()=>e("svg",{class:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),ns=n(()=>e("p",null,"No guardians added yet.",-1)),as=[os,ns],ls={key:2,class:"space-y-4"},rs={class:"flex items-start justify-between"},ds={class:"flex items-start space-x-3 flex-1"},is=n(()=>e("div",{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),us={class:"flex-1 min-w-0"},cs={class:"flex items-center space-x-2 mb-1"},ms={class:"font-medium text-gray-800 text-lg"},_s={class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},gs={key:0,class:"space-y-2 text-sm text-gray-600"},ps={class:"flex items-center space-x-4"},bs={class:"flex items-center space-x-1"},hs=n(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),fs=n(()=>e("span",{class:"text-gray-400"},"\u2022",-1)),ys={class:"flex items-center space-x-1"},xs=n(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})],-1)),vs={key:0,class:"flex items-center space-x-2 text-xs"},ks={key:0},ws={key:1,class:"text-gray-400"},Ms={key:2},Ss={key:1,class:"text-xs text-gray-500"},Es={key:1,class:"space-y-4 mt-4 p-4 bg-gray-50 rounded-lg"},Ns={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Vs=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guardian Name",-1)),Cs=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Phone Number",-1)),Gs=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Relation",-1)),Us=n(()=>e("option",{value:"Mother"},"Mother",-1)),Fs=n(()=>e("option",{value:"Father"},"Father",-1)),Ds=n(()=>e("option",{value:"Others"},"Others",-1)),js=[Us,Fs,Ds],Rs=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date of Birth",-1)),Is=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),Os=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Occupation",-1)),Ps=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Designation",-1)),As={class:"md:col-span-2"},Bs=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Work Address",-1)),zs=n(()=>e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Education",-1)),Ls={class:"flex space-x-3 pt-4"},Js=["onClick","disabled"],$s={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Hs=n(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)),qs=[Hs],Ks=["onClick"],Ts=n(()=>e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),Ys=[Ts],Ws={class:"text-sm text-gray-600"},Qs={key:0,class:"text-green-600"},Xs={key:1,class:"text-orange-600"},Zs={setup(E){const R=be(),i=J({student:"",first_name:"",middle_name:"",last_name:"",student_date_of_birth:"",gr_number:"",email_address:"",phone_number:"",roll_number:""}),x=b(""),N=b(""),S=b(!0),V=b(!1),v=b(!1),g=b(""),k=b(""),C=b(""),G=b(""),P=b(""),U=b([]),F=b(null),D=b(!1),j=b(!1),h=J({guardian_name:"",phone_number:"",relation:"Mother"}),d=J({guardian_name:"",mobile_number:"",relation:"Mother",date_of_birth:"",email:"",occupation:"",designation:"",work_address:"",education:""}),A=b({allow_instructors_modify_student:0,session_expiry:"24:00"}),y=Y(()=>A.value.allow_instructors_modify_student===1),w=Y(()=>U.value.length>=3),_=t=>{k.value=t,C.value="",G.value="animate-slide-in-right"},B=t=>{C.value=t,k.value="",G.value="animate-slide-in-right"},$=()=>{G.value="animate-slide-out-right",setTimeout(()=>{k.value="",C.value="",G.value=""},300)},X=I({url:"school.al_ummah.api3.fetch_admin_settings",auto:!1,onSuccess(t){A.value=t,S.value=!1,V.value=!1},onError(t){console.error("Error fetching admin settings:",t),S.value=!1,V.value=!0,A.value={allow_instructors_modify_student:0,session_expiry:"24:00"}}}),z=I({url:"school.al_ummah.api2.get_student_details",auto:!1,onSuccess(t){console.log("Student details loaded:",t),t.student_info&&Object.assign(i,t.student_info),t.guardians&&Array.isArray(t.guardians)&&(U.value=t.guardians),P.value=""},onError(t){console.error("Error fetching student details:",t),P.value="Failed to load student details.",U.value=[]}}),Z=I({url:"school.al_ummah.api2.update_student_details",auto:!1,onSuccess(t){v.value=!1,console.log("Student updated successfully:",t),t.success?B(t.message||"Student information updated successfully!"):_(t.message||"Failed to update student information.")},onError(t){if(console.error("Error updating student:",t),v.value=!1,t._server_messages)try{const o=JSON.parse(t._server_messages||"[]"),a=o[o.length-1],u=JSON.parse(a);_(u.message||"Validation error occurred.")}catch(o){_(t.message||"An unexpected error occurred.")}else _(t.message||"Failed to update student information. Please try again.")}}),ee=I({url:"school.al_ummah.api2.add_guardian_to_student",auto:!1,onSuccess(t){j.value=!1,t.success?(B(t.message||"Guardian added successfully!"),O(),oe()):_(t.message||"Failed to add guardian.")},onError(t){if(console.error("Error adding guardian:",t),j.value=!1,t._server_messages)try{const o=JSON.parse(t._server_messages||"[]"),a=o[o.length-1],u=JSON.parse(a);_(u.message||"Failed to add guardian.")}catch(o){_(t.message||"Failed to add guardian. Please try again.")}else _(t.message||"Failed to add guardian. Please try again.")}}),te=I({url:"school.al_ummah.api2.update_guardian_details",auto:!1,onSuccess(t){D.value=!1,t.success?(B(t.message||"Guardian details updated successfully!"),F.value=null,K(),O()):_(t.message||"Failed to update guardian details.")},onError(t){if(console.error("Error updating guardian details:",t),D.value=!1,t._server_messages)try{const o=JSON.parse(t._server_messages||"[]"),a=o[o.length-1],u=JSON.parse(a);_(u.message||"Failed to update guardian details.")}catch(o){_(t.message||"Failed to update guardian details. Please try again.")}else _(t.message||"Failed to update guardian details. Please try again.")}}),H=t=>/^[0-9]{10}$/.test(t),se=t=>{(t.key==="."||t.key===","||t.key==="e"||t.key==="E"||t.key==="-")&&t.preventDefault()},q=()=>{const t=i.roll_number;if(!t&&t!==0){g.value="";return}const o=Number(t);if(!Number.isInteger(o)){g.value="Roll number must be a whole number";return}if(o<1){g.value="Roll number must be at least 1";return}if(o>999){g.value="Roll number cannot exceed 999";return}g.value=""},oe=()=>{h.guardian_name="",h.phone_number="",h.relation="Mother"},K=()=>{Object.keys(d).forEach(t=>{d[t]=""}),d.relation="Mother"},O=()=>{!x.value||z.fetch({student:x.value})},ne=()=>L(this,null,function*(){if(!H(h.phone_number)){_("Please enter a valid 10-digit phone number.");return}if(!h.guardian_name.trim()){_("Please enter guardian name.");return}j.value=!0;const t={student_id:x.value,student_name:`${i.first_name} ${i.last_name}`.trim(),guardian_name:h.guardian_name,relation:h.relation,phone_number:h.phone_number};ee.fetch(t)}),ae=t=>{F.value=t.guardian,d.guardian_name=t.guardian_name||"",d.mobile_number=t.mobile_number||"",d.relation=t.relation||"Mother",d.date_of_birth=t.date_of_birth||"",d.email=t.email||"",d.occupation=t.occupation||"",d.designation=t.designation||"",d.work_address=t.work_address||"",d.education=t.education||""},le=()=>{F.value=null,K()},re=t=>{if(!H(d.mobile_number)){_("Please enter a valid 10-digit phone number.");return}if(!d.guardian_name.trim()){_("Please enter guardian name.");return}D.value=!0;const o={guardian_id:t,guardian_name:d.guardian_name,phone_number:d.mobile_number,relation:d.relation,guardian_date_of_birth:d.date_of_birth,guardian_email:d.email,occupation:d.occupation,designation:d.designation,work_address:d.work_address,education:d.education};te.fetch(o)},T=()=>{S.value=!0,V.value=!1,X.fetch()},de=()=>L(this,null,function*(){if(k.value="",C.value="",q(),g.value){_(g.value);return}v.value=!0;try{const t={student_id:x.value,student_group:N.value};y.value&&(t.first_name=i.first_name||"",t.middle_name=i.middle_name||"",t.last_name=i.last_name||"",t.student_date_of_birth=i.student_date_of_birth||"",t.gr_number=i.gr_number||"",t.email_address=i.email_address||"",t.phone_number=i.phone_number||"",t.roll_number=i.roll_number||""),console.log("Sending update data:",t),yield Z.fetch(t)}catch(t){console.error("Error in update student:",t),v.value=!1,_("An unexpected error occurred. Please try again.")}});return ue(()=>{if(x.value=R.query.studentId,R.query.studentData)try{const t=JSON.parse(decodeURIComponent(R.query.studentData));console.log("Student ID:",x.value),console.log("Complete student data:",t),N.value=t.student_group||""}catch(t){console.error("Error parsing student data:",t),_("Failed to load student data.")}T(),O()}),(t,o)=>(r(),l("div",he,[e("div",fe,[C.value?(r(),l("div",{key:0,class:M(["bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg transform transition-all duration-300 ease-in-out",G.value])},[e("div",ye,[xe,e("div",ve,[ke,e("p",we,f(C.value),1)])]),e("div",{class:"mt-4 flex justify-end"},[e("button",{onClick:$,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium"}," OK ")])],2)):c("",!0),k.value?(r(),l("div",{key:1,class:M(["bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg transform transition-all duration-300 ease-in-out",G.value])},[e("div",Me,[Se,e("div",Ee,[Ne,e("p",Ve,f(k.value),1)])]),e("div",{class:"mt-4 flex justify-end"},[e("button",{onClick:$,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm font-medium"}," OK ")])],2)):c("",!0)]),e("div",Ce,[e("h1",Ge,[W(" Edit Student: "+f(s(i).student_name||x.value)+" ",1),e("span",Ue,"(ID: "+f(x.value)+")",1)]),S.value?c("",!0):(r(),l("p",Fe,[s(y)?(r(),l("span",De," \u2713 Full editing access enabled ")):(r(),l("span",je," \u26A0 Limited editing access (Guardian fields only) "))]))]),s(z).loading||S.value?(r(),l("div",Re,Pe)):V.value?(r(),l("div",Ae,[Be,e("button",{onClick:T,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])):P.value?(r(),l("div",ze,[Le,e("button",{onClick:O,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])):(r(),l("div",Je,[e("form",{onSubmit:_e(de,["prevent"])},[e("div",He,[e("div",qe,[Ke,e("input",{value:x.value,type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500"},null,8,Te),Ye]),e("div",We,[Qe,e("input",{value:N.value,type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500"},null,8,Xe),Ze]),s(y)?(r(),l("div",et,st)):c("",!0),s(y)?(r(),l("div",ot,[nt,m(e("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>s(i).first_name=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(i).first_name]])])):c("",!0),s(y)?(r(),l("div",at,[lt,m(e("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>s(i).middle_name=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(i).middle_name]])])):c("",!0),s(y)?(r(),l("div",rt,[dt,m(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>s(i).last_name=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(i).last_name]])])):c("",!0),s(y)?(r(),l("div",it,[ut,m(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>s(i).student_date_of_birth=a),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(i).student_date_of_birth]])])):c("",!0),s(y)?(r(),l("div",ct,[mt,m(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>s(i).gr_number=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(i).gr_number]])])):c("",!0),s(y)?(r(),l("div",_t,[gt,m(e("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>s(i).roll_number=a),type:"number",min:"1",max:"999",step:"1",placeholder:"Enter roll number",onKeypress:se,onInput:q,class:M(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",g.value?"border-red-300 bg-red-50":"border-gray-300"])},null,34),[[p,s(i).roll_number]]),g.value?(r(),l("p",pt,f(g.value),1)):(r(),l("p",bt,"Must be a whole number between 1-999 (optional)"))])):c("",!0),s(y)?(r(),l("div",ht,yt)):c("",!0),s(y)?(r(),l("div",xt,[vt,m(e("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>s(i).email_address=a),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(i).email_address]])])):c("",!0),s(y)?(r(),l("div",kt,[wt,m(e("input",{"onUpdate:modelValue":o[7]||(o[7]=a=>s(i).phone_number=a),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(i).phone_number]])])):c("",!0)]),e("div",Mt,[e("div",St,[e("button",{type:"button",class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",onClick:o[8]||(o[8]=a=>t.$router.back())}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:v.value},[v.value?(r(),l("span",Nt,"Updating...")):(r(),l("span",Vt,"Update Student"))],8,Et)])]),Ct,e("div",Gt,[e("div",{class:M(["bg-gray-50 rounded-lg p-6 border-2 border-dashed mb-6 transition-all",s(w)?"border-gray-300 opacity-50":"border-blue-200 hover:border-blue-300"])},[Ut,e("div",Ft,[e("div",null,[Dt,m(e("input",{"onUpdate:modelValue":o[9]||(o[9]=a=>s(h).guardian_name=a),type:"text",placeholder:"Enter guardian name",disabled:s(w),class:M(["w-full px-3 py-2 border rounded-md",s(w)?"border-gray-200 bg-gray-100 text-gray-500":"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"])},null,10,jt),[[p,s(h).guardian_name]])]),e("div",null,[Rt,m(e("input",{"onUpdate:modelValue":o[10]||(o[10]=a=>s(h).phone_number=a),type:"tel",placeholder:"10-digit number",disabled:s(w),class:M(["w-full px-3 py-2 border rounded-md",s(w)?"border-gray-200 bg-gray-100 text-gray-500":"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"])},null,10,It),[[p,s(h).phone_number]])]),e("div",null,[Ot,m(e("select",{"onUpdate:modelValue":o[11]||(o[11]=a=>s(h).relation=a),disabled:s(w),class:M(["w-full px-3 py-2 border rounded-md",s(w)?"border-gray-200 bg-gray-100 text-gray-500":"border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"])},Lt,10,Pt),[[Q,s(h).relation]])])]),e("div",Jt,[e("div",null,[s(w)?(r(),l("p",$t," \u274C Maximum of 3 guardians reached ")):(r(),l("p",Ht," Guardians added: "+f(U.value.length)+"/3 ",1))]),e("button",{type:"button",onClick:ne,disabled:s(w)||j.value,class:M(["px-4 py-2 rounded-md flex items-center space-x-2 transition-colors",s(w)||j.value?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},[j.value?(r(),l("span",Kt,"Adding...")):(r(),l("span",Tt,"Add Guardian"))],10,qt)])],2)]),e("div",Yt,[e("div",Wt,[Qt,s(z).loading?(r(),l("div",Xt,ts)):U.value.length===0?(r(),l("div",ss,as)):(r(),l("div",ls,[(r(!0),l(ce,null,me(U.value,a=>(r(),l("div",{key:a.guardian,class:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors"},[e("div",rs,[e("div",ds,[is,e("div",us,[e("div",cs,[e("h5",ms,f(a.guardian_name),1),e("span",_s,f(a.relation),1)]),F.value!==a.guardian?(r(),l("div",gs,[e("div",ps,[e("span",bs,[hs,e("span",null,f(a.mobile_number||"No phone"),1)]),fs,e("span",ys,[xs,e("span",null,f(a.email||"No email"),1)])]),a.occupation||a.designation?(r(),l("div",vs,[a.occupation?(r(),l("span",ks,"\u{1F4BC} "+f(a.occupation),1)):c("",!0),a.designation?(r(),l("span",ws,"\u2022")):c("",!0),a.designation?(r(),l("span",Ms,"\u{1F3AF} "+f(a.designation),1)):c("",!0)])):c("",!0),a.education?(r(),l("div",Ss," \u{1F393} "+f(a.education),1)):c("",!0)])):c("",!0),F.value===a.guardian?(r(),l("div",Es,[e("div",Ns,[e("div",null,[Vs,m(e("input",{"onUpdate:modelValue":o[12]||(o[12]=u=>s(d).guardian_name=u),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(d).guardian_name]])]),e("div",null,[Cs,m(e("input",{"onUpdate:modelValue":o[13]||(o[13]=u=>s(d).mobile_number=u),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(d).mobile_number]])]),e("div",null,[Gs,m(e("select",{"onUpdate:modelValue":o[14]||(o[14]=u=>s(d).relation=u),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},js,512),[[Q,s(d).relation]])]),e("div",null,[Rs,m(e("input",{"onUpdate:modelValue":o[15]||(o[15]=u=>s(d).date_of_birth=u),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(d).date_of_birth]])]),e("div",null,[Is,m(e("input",{"onUpdate:modelValue":o[16]||(o[16]=u=>s(d).email=u),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(d).email]])]),e("div",null,[Os,m(e("input",{"onUpdate:modelValue":o[17]||(o[17]=u=>s(d).occupation=u),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(d).occupation]])]),e("div",null,[Ps,m(e("input",{"onUpdate:modelValue":o[18]||(o[18]=u=>s(d).designation=u),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(d).designation]])]),e("div",As,[Bs,m(e("textarea",{"onUpdate:modelValue":o[19]||(o[19]=u=>s(d).work_address=u),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(d).work_address]])]),e("div",null,[zs,m(e("input",{"onUpdate:modelValue":o[20]||(o[20]=u=>s(d).education=u),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,s(d).education]])])]),e("div",Ls,[e("button",{onClick:u=>re(a.guardian),disabled:D.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-green-300 flex items-center space-x-2"},[D.value?(r(),l("svg",$s,qs)):c("",!0),e("span",null,f(D.value?"Updating...":"Update Guardian"),1)],8,Js),e("button",{onClick:le,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"}," Cancel ")])])):c("",!0)])]),F.value!==a.guardian?(r(),l("button",{key:0,onClick:u=>ae(a),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit guardian details"},Ys,8,Ks)):c("",!0)])]))),128))]))])]),e("div",Ws,[s(y)?(r(),l("span",Qs," \u2713 You have full editing permissions ")):(r(),l("span",Xs," \u26A0 You can only edit guardian information "))])],40,$e)]))]))}};var so=ie(Zs,[["__scopeId","data-v-ec7fde0e"]]);export{so as default};
