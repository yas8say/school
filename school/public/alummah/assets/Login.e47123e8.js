var P=(C,_,g)=>new Promise((r,n)=>{var l=a=>{try{t(g.next(a))}catch(p){n(p)}},v=a=>{try{t(g.throw(a))}catch(p){n(p)}},t=a=>a.done?r(a.value):Promise.resolve(a.value).then(l,v);t((g=g.apply(C,_)).next())});import{N as H,r as f,w as N,o as F,b as R,e as i,f as e,j as L,O as b,t as x,H as D,k as $,q,d,u as m,M as A,C as B,D as E,n as k,P as U,g as V,K as y}from"./vendor.1f5cccb6.js";import{session as h,setSelectedLoginRole as z}from"./session.2746675e.js";import"./index.05f6a9b3.js";var O="/assets/school/alummah/assets/parent.9d31774a.png",G="/assets/school/alummah/assets/teacher.f5eb2e54.png";const W={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4"},K={class:"w-full max-w-md"},J={key:0},Q=D('<div class="text-center mb-8"><div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14v6l9-5-9-5-9 5 9 5z"></path></svg></div><h1 class="text-2xl font-bold text-gray-900 mb-2">School Portal</h1><p class="text-gray-600">Select your role to continue</p></div>',1),X=e("div",{class:"text-center"},[e("h2",{class:"text-xl font-semibold text-gray-800"},"Login as"),e("p",{class:"text-sm text-gray-600 mt-1"},"Choose your role to sign in")],-1),Y={class:"space-y-4"},Z={class:"flex items-center space-x-4"},ee={class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},te=["src"],se=e("div",null,[e("h3",{class:"font-semibold text-gray-800"},"Parent"),e("p",{class:"text-sm text-gray-600"},"Access student progress and information")],-1),oe={class:"flex items-center space-x-4"},ne={class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},re=["src"],le=e("div",null,[e("h3",{class:"font-semibold text-gray-800"},"Teacher"),e("p",{class:"text-sm text-gray-600"},"Manage classes and student records")],-1),ae=e("div",{class:"text-center text-sm text-gray-500 pt-4 border-t"},[e("p",null,"Need help? Contact school administration")],-1),ie={key:1},de={class:"text-center mb-8"},ce=e("div",{class:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1),ue={class:"text-2xl font-bold text-gray-900 mb-2"},he=e("p",{class:"text-gray-600"},"Sign in to access your account",-1),ge={class:"text-center"},me=e("h2",{class:"text-xl font-semibold text-gray-800"},"Welcome Back",-1),ve={class:"text-sm text-gray-600 mt-1"},pe=["onSubmit"],fe={class:"space-y-2"},be=e("label",{class:"block text-sm font-medium text-gray-700"},[y(" User ID "),e("span",{class:"text-red-500 ml-1"},"*")],-1),xe={class:"relative"},_e=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1),ye={class:"space-y-2"},we={class:"flex items-center justify-between"},ke=e("label",{class:"block text-sm font-medium text-gray-700"},[y(" Password "),e("span",{class:"text-red-500 ml-1"},"*")],-1),Ce={class:"relative"},je=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1),Se=["type"],Me={class:"absolute inset-y-0 right-0 pr-3 flex items-center"},Pe={class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},Be={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},Ve={key:0,class:"bg-red-50 border border-red-200 rounded-md p-4 transition-all duration-300"},ze={class:"flex items-start"},Ie=e("svg",{class:"w-5 h-5 text-red-400 mr-3 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Te={class:"flex-1"},He=e("h3",{class:"text-red-800 font-medium text-sm mb-1"},"Login Failed",-1),Ne={class:"text-red-700 text-sm"},Fe=["disabled"],Re={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},De=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"},null,-1),$e=[De],qe={key:1},Ae={key:2},Ee={class:"flex items-center justify-between pt-2"},Ue={class:"border-t pt-4 space-y-3"},Oe=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Ge=y(" Login with OTP "),We=[Oe,Ge],Ke=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})],-1),Je=y(" Login with Google "),Qe=[Ke,Je],Xe=e("div",{class:"text-center text-sm text-gray-500"},[e("p",null,"Having trouble signing in? Contact school administration")],-1),Ye=e("div",{class:"text-center mt-6"},[e("p",{class:"text-xs text-gray-500"},"School Management System v1.0")],-1),ot=H({setup(C){const _=$(),g=f(!0),r=f(""),n=f(""),l=f(""),v=f(!1),t=f("");function a(s){r.value=s,g.value=!1,z(s)}function p(){v.value=!v.value}function j(){t.value=""}function I(){return P(this,null,function*(){var s,o;if(console.log("Login attempt values:",{username:n.value,password:l.value,usernameLength:(s=n.value)==null?void 0:s.length,passwordLength:(o=l.value)==null?void 0:o.length}),!n.value||!l.value){t.value="Please fill out all fields",console.log("Validation failed - empty fields");return}t.value="",console.log("Proceeding with login..."),z(r.value);try{console.log("Submitting login with:",{email:n.value,password:"***",role:S()}),yield h.login.submit({email:n.value,password:l.value,role:S()}),console.log("Login successful!")}catch(c){console.error("Login error details:",c),c.message&&c.message.includes("AuthenticationError")?t.value="Invalid username or password. Please check your credentials and try again.":c.message&&c.message.includes("CSRF")||c.message.includes("session")?t.value="Session error. Please try refreshing the page.":t.value="Login failed. Please check your credentials and try again."}})}function S(){return r.value==="parent"?"Guardian":"Instructor"}function w(s){_.push({name:s,query:{role:r.value}})}function T(){const s=r.value==="teacher"?"TeacherSignup":"ParentSignup";_.push({name:s,query:{role:r.value}})}N(()=>h.login.error,s=>{s&&!t.value&&(console.error("Session login error:",s),s.message&&s.message.includes("AuthenticationError")?t.value="Invalid username or password. Please check your credentials and try again.":s.message&&(s.message.includes("CSRF")||s.message.includes("session"))?t.value="Session error. Please try refreshing the page.":t.value=s.message||"Login failed. Please check your credentials and try again.")});const M=()=>{n.value="",l.value="",t.value="",h.login.reset()};return F(()=>{M()}),R(()=>{M()}),(s,o)=>{const c=q("Card");return d(),i("div",W,[e("div",K,[g.value?(d(),i("div",J,[Q,L(c,{class:"w-full shadow-lg border-0"},{title:b(()=>[X]),footer:b(()=>[ae]),default:b(()=>[e("div",Y,[e("div",{class:"border-2 border-gray-200 rounded-lg p-4 cursor-pointer transition-all duration-200 hover:border-blue-500 hover:bg-blue-50",onClick:o[0]||(o[0]=u=>a("parent"))},[e("div",Z,[e("div",ee,[e("img",{src:m(O),alt:"Parent",class:"w-8 h-8 object-contain"},null,8,te)]),se])]),e("div",{class:"border-2 border-gray-200 rounded-lg p-4 cursor-pointer transition-all duration-200 hover:border-green-500 hover:bg-green-50",onClick:o[1]||(o[1]=u=>a("teacher"))},[e("div",oe,[e("div",ne,[e("img",{src:m(G),alt:"Teacher",class:"w-8 h-8 object-contain"},null,8,re)]),le])])])]),_:1})])):(d(),i("div",ie,[e("div",de,[ce,e("h1",ue,x(r.value==="teacher"?"Teacher":"Parent")+" Portal",1),he]),L(c,{class:"w-full shadow-lg border-0"},{title:b(()=>[e("div",ge,[me,e("p",ve,"Sign in as "+x(r.value),1)])]),footer:b(()=>[Xe]),default:b(()=>[e("form",{class:"space-y-4",onSubmit:A(I,["prevent"])},[e("div",fe,[be,e("div",xe,[_e,B(e("input",{required:"",id:"username",type:"text",placeholder:"johndoe@email.com",class:k(["w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition-colors",{"border-red-300 focus:border-red-500 focus:ring-red-200":t.value,"border-gray-300 focus:border-blue-500 focus:ring-blue-200":!t.value}]),autocomplete:"username","onUpdate:modelValue":o[2]||(o[2]=u=>n.value=u),onInput:j},null,34),[[E,n.value]])])]),e("div",ye,[e("div",we,[ke,e("button",{type:"button",onClick:p,class:"text-sm text-blue-600 hover:text-blue-500 font-medium"},x(v.value?"Hide":"Show"),1)]),e("div",Ce,[je,B(e("input",{required:"",id:"password",type:v.value?"text":"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",class:k(["w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition-colors",{"border-red-300 focus:border-red-500 focus:ring-red-200":t.value,"border-gray-300 focus:border-blue-500 focus:ring-blue-200":!t.value}]),autocomplete:"current-password","onUpdate:modelValue":o[3]||(o[3]=u=>l.value=u),onInput:j},null,42,Se),[[U,l.value]]),e("div",Me,[e("button",{type:"button",onClick:p,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},[(d(),i("svg",Pe,[v.value?(d(),i("path",Le)):(d(),i("path",Be))]))])])])]),t.value?(d(),i("div",Ve,[e("div",ze,[Ie,e("div",Te,[He,e("p",Ne,x(t.value),1)])])])):V("",!0),e("button",{type:"submit",disabled:m(h).login.loading,class:k(["w-full bg-blue-600 hover:bg-blue-700 text-white py-2.5 px-4 rounded-md transition-colors flex items-center justify-center gap-2 font-medium",{"opacity-50 cursor-not-allowed":(!n.value||!l.value)&&!m(h).login.loading,"bg-blue-600 hover:bg-blue-700":n.value&&l.value&&!m(h).login.loading,"bg-blue-400 cursor-wait":m(h).login.loading}])},[m(h).login.loading?V("",!0):(d(),i("svg",Re,$e)),m(h).login.loading?(d(),i("span",qe,"Signing In...")):(d(),i("span",Ae,"Sign in as "+x(r.value),1))],10,Fe),e("div",Ee,[e("button",{type:"button",onClick:o[4]||(o[4]=u=>g.value=!0),class:"text-blue-600 hover:text-blue-500 font-medium text-sm"}," \u2190 Back to role selection "),e("button",{type:"button",onClick:o[5]||(o[5]=u=>w("ForgotPassword")),class:"text-blue-600 hover:text-blue-500 font-medium text-sm"}," Forgot password? ")]),e("div",Ue,[e("button",{type:"button",onClick:o[6]||(o[6]=u=>w("OTPLogin")),class:"w-full border border-gray-300 text-gray-700 hover:bg-gray-50 py-2.5 px-4 rounded-md transition-colors flex items-center justify-center gap-2 font-medium"},We),e("button",{type:"button",onClick:o[7]||(o[7]=u=>w("SignInScreen")),class:"w-full border border-gray-300 text-gray-700 hover:bg-gray-50 py-2.5 px-4 rounded-md transition-colors flex items-center justify-center gap-2 font-medium"},Qe)]),e("div",{class:"text-center pt-4 border-t"},[e("button",{type:"button",onClick:T,class:"text-green-600 hover:text-green-500 font-medium text-sm"}," Don't have an account? Sign up here ")])],40,pe)]),_:1})])),Ye])])}}});export{ot as default};
