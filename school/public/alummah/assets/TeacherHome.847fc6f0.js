var we=Object.defineProperty;var ce=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var de=(_,r,i)=>r in _?we(_,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):_[r]=i,ue=(_,r)=>{for(var i in r||(r={}))ke.call(r,i)&&de(_,i,r[i]);if(ce)for(var i of ce(r))$e.call(r,i)&&de(_,i,r[i]);return _};var U=(_,r,i)=>new Promise((g,l)=>{var p=b=>{try{k(i.next(b))}catch(v){l(v)}},j=b=>{try{k(i.throw(b))}catch(v){l(v)}},k=b=>b.done?g(b.value):Promise.resolve(b.value).then(p,j);k((i=i.apply(_,r)).next())});import{d as s,e as o,f as e,_ as Q,L as oe,r as C,u as _e,w as z,o as Z,t as a,g as I,y as c,F as Y,G as K,n as T,M as he,i as w,p as X,h as ee,x as te,H,C as ne,D as me,A as se,N as Ce,b as Se,E as je,O as Me}from"./vendor.206e735d.js";import{session as ge}from"./session.f44a4ef8.js";import{r as ae,a as Ae,b as re,c as Ne,d as Ee,e as De,f as Le}from"./UserGroupIcon.0cf4b7ef.js";import"./index.6f74e26c.js";function le(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function Ie(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function Be(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function pe(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Pe(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function Te(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function ve(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Re(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function xe(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}function fe(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function be(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function ye(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ie(_,r){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const O=_=>(X("data-v-8b1e34ae"),_=_(),ee(),_),Ge={class:"min-h-screen bg-gray-50 p-4"},Fe={class:"mb-6"},Ve=O(()=>e("h1",{class:"text-2xl font-bold text-gray-800"},"Take Attendance",-1)),Ue=O(()=>e("p",{class:"text-gray-600"},"Select students who are present today",-1)),ze={key:0,class:"text-sm text-gray-500 mt-1"},Oe={class:"text-sm text-gray-500"},He={key:0,class:"flex justify-center items-center py-8"},Je=O(()=>e("div",{class:"spinner"},null,-1)),Ze=O(()=>e("span",{class:"ml-2 text-gray-600"},"Loading students...",-1)),We=[Je,Ze],qe={key:1,class:"space-y-3"},Qe={class:"flex justify-between items-center mb-4"},Ye={class:"text-sm text-gray-600"},Ke=["onClick"],Xe={class:"flex items-center space-x-4"},et={class:"flex-shrink-0"},tt={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm relative overflow-hidden"},st=["src"],ot={key:1,class:"text-white text-sm font-medium"},nt={class:"flex-1 min-w-0"},at={class:"font-medium text-gray-800 truncate"},rt={class:"flex items-center space-x-4 text-sm text-gray-600"},lt=O(()=>e("span",{class:"text-gray-400"},"\u2022",-1)),it={class:"truncate"},ct={class:"flex-shrink-0"},dt={key:2,class:"text-center py-8"},ut=O(()=>e("p",{class:"text-gray-600"},"No students available for this class",-1)),_t={key:3,class:"flex space-x-4 mt-6"},ht=O(()=>e("span",null,"Cancel",-1)),mt=["disabled"],gt=O(()=>e("span",null,"Refresh",-1)),pt={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},vt={class:"bg-white rounded-lg p-6 max-w-sm w-full mx-4"},xt=O(()=>e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Confirm Attendance",-1)),ft={class:"text-gray-600 mb-2"},bt={class:"text-gray-600 mb-6"},yt={class:"flex space-x-3"},wt={props:{selectedGroup:String},emits:["back-to-dashboard"],setup(_){const r=_,i=oe(),g=C([]),l=C([]),p=C(!0),j=C(!1),k=C(!1),b=_e(()=>new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),v=h=>h.base64profile&&h.base64profile!=="null"?h.base64profile.startsWith("data:")?h.base64profile:`data:image/jpeg;base64,${h.base64profile}`:null,B=h=>h?h.split(" ").map(E=>E.charAt(0)).join("").toUpperCase().substring(0,2):"?",A=h=>{h.target.style.display="none"},V=z({url:"school.al_ummah.api2.get_student_attendance_records",onSuccess(h){return console.log("Attendance data loaded:",h),h},onError(h){console.error("Error fetching attendance:",h),alert("Failed to load student data. Please check your connection and try again.")}}),G=z({url:"school.al_ummah.api2.mark_attendance",onSuccess(h){var E;if(console.log("Attendance marked successfully:",h),k.value=!1,h.status==="success"||((E=h.message)==null?void 0:E.includes("successfully")))alert("Success! "+(h.message||"Attendance has been marked successfully.")),i.push({name:"Teacherhome"});else if(h._server_messages){try{const $=JSON.parse(h._server_messages);if($.length>0){const x=JSON.parse($[0]);if(x.message&&x.message.includes("successfully")){alert("Success! "+x.message),i.push({name:"Teacherhome"});return}}}catch($){console.error("Error parsing server messages:",$)}alert("Success! Attendance has been marked successfully."),i.push({name:"Teacherhome"})}else alert("Error: "+(h.message||"There was an issue marking attendance."))},onError(h){console.error("Error marking attendance:",h),k.value=!1,h.exc_type==="PermissionError"?alert("Permission denied: You do not have permission to mark attendance. Please contact your administrator."):alert("Failed to submit attendance. Please check your connection and try again.")}}),f=()=>U(this,null,function*(){p.value=!0;try{const h=r.selectedGroup||localStorage.getItem("selected_student_group");if(!h){alert("Please select a class first."),p.value=!1;return}const E={based_on:"Batch",student_group:h},$=yield V.fetch(E);if(!$||$.length===0){alert("No students found for this class."),g.value=[];return}g.value=$,l.value=$.map(x=>x.student)}catch(h){console.error("Error fetching attendance:",h),alert("Failed to load student data.")}finally{p.value=!1}}),y=()=>{l.value.length===g.value.length?l.value=[]:l.value=g.value.map(h=>h.student)},P=h=>{const E=l.value.indexOf(h);E>-1?l.value.splice(E,1):l.value.push(h)},n=()=>{if(l.value.length===0){alert("Please select at least one student as present.");return}j.value=!0},L=()=>U(this,null,function*(){j.value=!1,k.value=!0;const h=g.value.filter(d=>l.value.includes(d.student)).map(d=>({student:d.student,student_name:d.student_name,group_roll_number:d.group_roll_number,disabled:!1,checked:!0})),E=g.value.filter(d=>!l.value.includes(d.student)).map(d=>({student:d.student,student_name:d.student_name,group_roll_number:d.group_roll_number,disabled:!1,checked:!1})),$=new Date().toISOString().split("T")[0],x=r.selectedGroup||localStorage.getItem("selected_student_group");try{yield G.submit({students_present:JSON.stringify(h),students_absent:JSON.stringify(E),student_group:x,date:$})}catch(d){console.error("Error submitting attendance:",d),k.value=!1}}),M=()=>{i.push({name:"Teacherhome"})};return Z(()=>{f()}),(h,E)=>(s(),o("div",Ge,[e("div",Fe,[Ve,Ue,_.selectedGroup?(s(),o("p",ze,"Class: "+a(_.selectedGroup),1)):I("",!0),e("p",Oe,"Date: "+a(c(b)),1)]),p.value?(s(),o("div",He,We)):g.value&&g.value.length>0?(s(),o("div",qe,[e("div",Qe,[e("p",Ye," Total: "+a(g.value.length)+" | Present: "+a(l.value.length)+" | Absent: "+a(g.value.length-l.value.length),1),e("button",{onClick:y,class:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300"},a(l.value.length===g.value.length?"Mark All Absent":"Mark All Present"),1)]),(s(!0),o(Y,null,K(g.value,$=>(s(),o("div",{key:$.student,class:T(["bg-white rounded-lg shadow-sm p-4 border-2 transition-colors cursor-pointer",l.value.includes($.student)?"border-green-500 bg-green-50":"border-gray-200"]),onClick:x=>P($.student)},[e("div",Xe,[e("div",et,[e("div",tt,[$.base64profile&&$.base64profile!=="null"?(s(),o("img",{key:0,src:v($),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:A},null,40,st)):(s(),o("span",ot,a(B($.student_name)),1))])]),e("div",nt,[e("h3",at,a($.student_name),1),e("div",rt,[e("span",null,"Roll No: "+a($.group_roll_number),1),lt,e("span",it,a($.student),1)])]),e("div",ct,[e("div",{class:T(["w-6 h-6 rounded-full border-2 flex items-center justify-center",l.value.includes($.student)?"bg-green-500 border-green-500":"border-gray-300"])},[l.value.includes($.student)?(s(),he(c(Pe),{key:0,class:"w-4 h-4 text-white"})):I("",!0)],2)])])],10,Ke))),128))])):(s(),o("div",dt,[ut,e("button",{onClick:f,class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Try Again ")])),g.value.length>0?(s(),o("div",_t,[e("button",{onClick:M,class:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center justify-center space-x-2"},[w(c(ie),{class:"w-5 h-5"}),ht]),e("button",{onClick:n,disabled:k.value,class:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[w(c(Ie),{class:"w-5 h-5"}),e("span",null,a(k.value?"Submitting...":"Submit"),1)],8,mt),e("button",{onClick:f,class:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center space-x-2"},[w(c(le),{class:"w-5 h-5"}),gt])])):I("",!0),j.value?(s(),o("div",pt,[e("div",vt,[xt,e("p",ft,"Present: "+a(l.value.length),1),e("p",bt,"Absent: "+a(g.value.length-l.value.length),1),e("div",yt,[e("button",{onClick:E[0]||(E[0]=$=>j.value=!1),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:L,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Confirm ")])])])):I("",!0)]))}};var kt=Q(wt,[["__scopeId","data-v-8b1e34ae"]]);const R=_=>(X("data-v-33d6dd92"),_=_(),ee(),_),$t={class:"min-h-screen bg-gray-50 p-4"},Ct={class:"mb-6"},St=R(()=>e("h1",{class:"text-2xl font-bold text-gray-800"},"Attendance Record",-1)),jt=R(()=>e("p",{class:"text-gray-600"},"View student attendance history",-1)),Mt={key:0,class:"text-sm text-gray-500 mt-1"},At={key:0,class:"flex justify-center items-center py-8"},Nt=R(()=>e("div",{class:"spinner"},null,-1)),Et=R(()=>e("span",{class:"ml-2 text-gray-600"},"Loading attendance records...",-1)),Dt=[Nt,Et],Lt={key:1,class:"space-y-3"},It={class:"flex justify-between items-center mb-4"},Bt={class:"text-sm text-gray-600"},Pt=R(()=>e("span",null,"Refresh",-1)),Tt={class:"flex items-center space-x-4"},Rt=["onClick"],Gt={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm relative overflow-hidden"},Ft=["src"],Vt={key:1,class:"text-white text-sm font-medium"},Ut=["onClick"],zt={class:"font-medium text-gray-800 truncate"},Ot={class:"flex items-center space-x-4 text-sm text-gray-600"},Ht=R(()=>e("span",{class:"text-gray-400"},"\u2022",-1)),Jt={class:"truncate text-xs"},Zt={class:"flex items-center space-x-4 mt-2 text-xs"},Wt={class:"flex items-center space-x-1 text-green-600"},qt={class:"flex items-center space-x-1 text-red-600"},Qt={class:"flex items-center space-x-1 text-yellow-600"},Yt={class:"flex-shrink-0 flex items-center space-x-2"},Kt=["onClick"],Xt=["onClick"],es={key:2,class:"text-center py-8"},ts={class:"bg-white rounded-lg shadow-sm p-8"},ss=R(()=>e("h3",{class:"text-lg font-medium text-gray-800 mb-2"},"No Students Found",-1)),os=R(()=>e("p",{class:"text-gray-600 mb-4"},"No attendance records available for this class.",-1)),ns=R(()=>e("span",null,"Refresh Data",-1)),as={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},rs={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto"},ls={class:"flex items-center justify-between mb-4"},is=R(()=>e("h3",{class:"text-lg font-semibold text-gray-800"},"Student Details",-1)),cs={class:"flex items-center space-x-4 mb-6"},ds={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-lg relative overflow-hidden"},us=["src"],_s={key:1,class:"text-white text-lg font-medium"},hs={class:"font-medium text-gray-800"},ms={class:"text-sm text-gray-600"},gs={class:"text-xs text-gray-500"},ps={class:"grid grid-cols-3 gap-4 mb-6"},vs={class:"text-center p-3 bg-green-50 rounded-lg"},xs={class:"text-2xl font-bold text-green-600"},fs=R(()=>e("p",{class:"text-sm text-green-700"},"Present",-1)),bs={class:"text-center p-3 bg-red-50 rounded-lg"},ys={class:"text-2xl font-bold text-red-600"},ws=R(()=>e("p",{class:"text-sm text-red-700"},"Absent",-1)),ks={class:"text-center p-3 bg-yellow-50 rounded-lg"},$s={class:"text-2xl font-bold text-yellow-600"},Cs=R(()=>e("p",{class:"text-sm text-yellow-700"},"Leave",-1)),Ss={class:"border-t pt-4"},js=R(()=>e("h5",{class:"font-medium text-gray-800 mb-2"},"Contact Information",-1)),Ms={key:0,class:"text-sm text-gray-600"},As={key:1,class:"text-sm text-gray-600"},Ns={key:2,class:"text-sm text-gray-500"},Es={class:"flex space-x-3 mt-6"},Ds=R(()=>e("span",null,"Edit Student",-1)),Ls={setup(_){const r=oe(),i=C([]),g=C(!0),l=C(""),p=C(null),j=C(!1),k=n=>n.base64profile&&n.base64profile!=="null"?n.base64profile.startsWith("data:")?n.base64profile:`data:image/jpeg;base64,${n.base64profile}`:null,b=n=>n?n.split(" ").map(L=>L.charAt(0)).join("").toUpperCase().substring(0,2):"?",v=n=>{n.target.style.display="none"},B=n=>{var M,h,E;const L=ue({student_id:n.student,student_name:n.student_name,group_roll_number:n.group_roll_number,student_group:l.value,"First Name":n.first_name||((M=n.student_name)==null?void 0:M.split(" ")[0])||"","Middle Name":n.middle_name||((h=n.student_name)==null?void 0:h.split(" ")[1])||"","Last Name":n.last_name||((E=n.student_name)==null?void 0:E.split(" ")[2])||"","Student Date of Birth":n.date_of_birth||n.student_date_of_birth||"","GR Number":n.gr_number||n.group_roll_number||"","Email Address":n.email||n.email_address||"","Phone Number":n.mobile||n.phone_number||"","Guardian Name":n.guardian_name||n.parent_name||"","Guardian Number":n.guardian_number||n.parent_mobile||"",Relation:n.relation||"","Guardian Date of Birth":n.guardian_date_of_birth||"","Guardian Email":n.guardian_email||"","Guardian Occupation":n.guardian_occupation||"","Guardian Designation":n.guardian_designation||"","Guardian Work Address":n.guardian_work_address||"","Guardian Education":n.guardian_education||"",address:n.address||"",base64profile:n.base64profile||"",present_count:n.present_count||0,absent_count:n.absent_count||0,leave_count:n.leave_count||0,gender:n.gender||"",date_of_birth:n.date_of_birth||"",parent_name:n.parent_name||"",parent_mobile:n.parent_mobile||""},n);r.push({name:"EditStudent",query:{studentId:n.student,studentData:encodeURIComponent(JSON.stringify(L))}})},A=z({url:"school.al_ummah.api2.get_student_attendance_records",onSuccess(n){return n},onError(n){console.error("Error fetching attendance records:",n),f()}}),V=()=>{try{const n=localStorage.getItem("selected_student_group");n&&(l.value=n)}catch(n){console.error("Failed to load selected student group:",n)}},G=()=>U(this,null,function*(){if(!!l.value){g.value=!0;try{const n={based_on:"Student Group",student_group:l.value},L=yield A.fetch(n);L&&Array.isArray(L)&&L.length>0&&(localStorage.setItem("attendance_data",JSON.stringify(L)),i.value=L)}catch(n){console.warn("Failed to fetch data from API:",n)}finally{g.value=!1}}}),f=()=>U(this,null,function*(){try{const n=localStorage.getItem("attendance_data");n&&(i.value=JSON.parse(n))}catch(n){console.error("Failed to load attendance data from storage:",n)}finally{g.value=!1}}),y=n=>{p.value=n,j.value=!0},P=()=>{j.value=!1,p.value=null};return Z(()=>{V(),l.value?(f(),G()):g.value=!1}),te(l,n=>{n&&(f(),G())}),(n,L)=>(s(),o("div",$t,[e("div",Ct,[St,jt,l.value?(s(),o("p",Mt,"Class: "+a(l.value),1)):I("",!0)]),g.value?(s(),o("div",At,Dt)):i.value&&i.value.length>0?(s(),o("div",Lt,[e("div",It,[e("p",Bt," Total Students: "+a(i.value.length),1),e("button",{onClick:G,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2"},[w(c(le),{class:"w-4 h-4"}),Pt])]),(s(!0),o(Y,null,K(i.value,M=>(s(),o("div",{key:M.student,class:"bg-white rounded-lg shadow-sm p-4 border border-gray-200 hover:border-blue-300 transition-colors"},[e("div",Tt,[e("div",{class:"flex-shrink-0 cursor-pointer",onClick:h=>y(M)},[e("div",Gt,[M.base64profile&&M.base64profile!=="null"?(s(),o("img",{key:0,src:k(M),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:v},null,40,Ft)):(s(),o("span",Vt,a(b(M.student_name)),1))])],8,Rt),e("div",{class:"flex-1 min-w-0 cursor-pointer",onClick:h=>y(M)},[e("h3",zt,a(M.student_name),1),e("div",Ot,[e("span",null,"Roll No: "+a(M.group_roll_number),1),Ht,e("span",Jt,"ID: "+a(M.student),1)]),e("div",Zt,[e("span",Wt,[w(c(pe),{class:"w-4 h-4"}),e("span",null,"Present: "+a(M.present_count||0),1)]),e("span",qt,[w(c(ye),{class:"w-4 h-4"}),e("span",null,"Absent: "+a(M.absent_count||0),1)]),e("span",Qt,[w(c(ve),{class:"w-4 h-4"}),e("span",null,"Leave: "+a(M.leave_count||0),1)])])],8,Ut),e("div",Yt,[e("button",{onClick:H(h=>B(M),["stop"]),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Student"},[w(c(xe),{class:"w-5 h-5"})],8,Kt),e("div",{class:"cursor-pointer",onClick:H(h=>y(M),["stop"])},[w(c(Te),{class:"w-5 h-5 text-gray-400"})],8,Xt)])])]))),128))])):(s(),o("div",es,[e("div",ts,[w(c(ae),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),ss,os,e("button",{onClick:G,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 mx-auto"},[w(c(le),{class:"w-4 h-4"}),ns])])])),p.value&&j.value?(s(),o("div",as,[e("div",rs,[e("div",ls,[is,e("button",{onClick:P,class:"text-gray-400 hover:text-gray-600"},[w(c(ie),{class:"w-6 h-6"})])]),e("div",cs,[e("div",ds,[p.value.base64profile&&p.value.base64profile!=="null"?(s(),o("img",{key:0,src:k(p.value),alt:"Student",class:"absolute inset-0 w-full h-full object-cover",onError:v},null,40,us)):(s(),o("span",_s,a(b(p.value.student_name)),1))]),e("div",null,[e("h4",hs,a(p.value.student_name),1),e("p",ms,"Roll No: "+a(p.value.group_roll_number),1),e("p",gs,"ID: "+a(p.value.student),1)])]),e("div",ps,[e("div",vs,[w(c(pe),{class:"w-8 h-8 text-green-600 mx-auto mb-2"}),e("p",xs,a(p.value.present_count||0),1),fs]),e("div",bs,[w(c(ye),{class:"w-8 h-8 text-red-600 mx-auto mb-2"}),e("p",ys,a(p.value.absent_count||0),1),ws]),e("div",ks,[w(c(ve),{class:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),e("p",$s,a(p.value.leave_count||0),1),Cs])]),e("div",Ss,[js,p.value.mobile?(s(),o("p",Ms," \u{1F4F1} "+a(p.value.mobile),1)):I("",!0),p.value.address?(s(),o("p",As," \u{1F4CD} "+a(p.value.address),1)):I("",!0),!p.value.mobile&&!p.value.address?(s(),o("p",Ns," No contact information available ")):I("",!0)]),e("div",Es,[e("button",{onClick:L[0]||(L[0]=M=>B(p.value)),class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2"},[w(c(xe),{class:"w-4 h-4"}),Ds]),e("button",{onClick:P,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"}," Close ")])])])):I("",!0)]))}};var Is=Q(Ls,[["__scopeId","data-v-33d6dd92"]]);const Bs={class:"min-h-screen bg-gray-50 p-4"},Ps={class:"max-w-4xl mx-auto"},Ts=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"Create Notice"),e("p",{class:"text-gray-600"},"Send announcements to students and parents")],-1),Rs={class:"bg-white rounded-lg shadow-sm p-6"},Gs={class:"mb-6"},Fs=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notice Title * ",-1),Vs={class:"mb-6"},Us=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notice Message * ",-1),zs={class:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},Os={class:"text-sm text-blue-700"},Hs=e("span",{class:"font-medium"},"Selected Class:",-1),Js={class:"flex justify-end"},Zs=["disabled"],Ws={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qs=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},null,-1),Qs=[qs],Ys={key:1,class:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ks=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1),Xs=[Ks],eo={setup(_){const r=C(""),i=C(""),g=C(""),l=z({url:"school.al_ummah.api2.submit_notice",auto:!1,onSuccess(v){console.log("Notice submission response:",v),v.message?k(v.message):typeof v=="string"&&v.includes("success")?k(v):k("Notice published successfully!"),r.value="",i.value=""},onError(v){console.error("Error submitting notice:",v),v.message?b(v.message):v.exc_type==="ValidationError"?b("Validation error: Please check your input data."):b("An error occurred while submitting the notice.")}}),p=()=>{try{const v=localStorage.getItem("selected_student_group");v&&(g.value=v)}catch(v){console.error("Failed to load selected student group:",v)}},j=()=>U(this,null,function*(){if(!r.value.trim()||!i.value.trim()){b("Please enter both title and notice message.");return}if(!g.value){b("Student group information is missing.");return}const v={notice_heading:i.value.trim(),notice_message:r.value.trim(),student_group:g.value};console.log("Submitting notice:",v),yield l.fetch(v)}),k=v=>{alert(`\u2705 Success: ${v}`)},b=v=>{alert(`\u274C Error: ${v}`)};return Z(()=>{p()}),(v,B)=>(s(),o("div",Bs,[e("div",Ps,[Ts,e("div",Rs,[e("div",Gs,[Fs,ne(e("input",{"onUpdate:modelValue":B[0]||(B[0]=A=>i.value=A),type:"text",placeholder:"Enter notice title",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[me,i.value]])]),e("div",Vs,[Us,ne(e("textarea",{"onUpdate:modelValue":B[1]||(B[1]=A=>r.value=A),rows:"8",placeholder:"Enter your notice message here...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"},null,512),[[me,r.value]])]),e("div",zs,[e("p",Os,[Hs,se(" "+a(g.value||"No class selected"),1)])]),e("div",Js,[e("button",{onClick:j,disabled:c(l).loading,class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors"},[c(l).loading?(s(),o("svg",Ys,Xs)):(s(),o("svg",Ws,Qs)),e("span",null,a(c(l).loading?"Publishing...":"Publish Notice"),1)],8,Zs)])])])]))}};const J=_=>(X("data-v-b50e67de"),_=_(),ee(),_),to={class:"min-h-screen bg-gray-50 p-4"},so={class:"mb-6"},oo=J(()=>e("h1",{class:"text-2xl font-bold text-gray-800"},"Previous Notices",-1)),no=J(()=>e("p",{class:"text-gray-600"},"View all published notices",-1)),ao={key:0,class:"text-sm text-gray-500 mt-1"},ro={key:0,class:"flex justify-center items-center py-8"},lo=J(()=>e("div",{class:"spinner"},null,-1)),io=J(()=>e("span",{class:"ml-2 text-gray-600"},"Loading notices...",-1)),co=[lo,io],uo={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},_o=J(()=>e("p",{class:"text-red-800"},"Failed to load notices.",-1)),ho={key:2,class:"space-y-4"},mo=["onClick"],go={class:"p-6"},po={class:"flex items-start justify-between mb-3"},vo={class:"text-lg font-semibold text-gray-800 flex-1 pr-4"},xo={class:"text-sm text-gray-500 whitespace-nowrap"},fo={class:"text-gray-600 line-clamp-2 mb-4"},bo={class:"flex items-center justify-between text-sm text-gray-500"},yo=["onClick"],wo={key:0,class:"text-center py-12"},ko=Ce('<div class="bg-white rounded-lg shadow-sm p-8" data-v-b50e67de><svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b50e67de><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-b50e67de></path></svg><h3 class="text-lg font-medium text-gray-800 mb-2" data-v-b50e67de>No Notices Found</h3><p class="text-gray-600" data-v-b50e67de>No notices have been published for this class yet.</p></div>',1),$o=[ko],Co={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},So={class:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto"},jo={class:"p-6"},Mo={class:"flex items-center justify-between mb-4"},Ao={class:"text-xl font-bold text-gray-800"},No=J(()=>e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Eo=[No],Do={class:"mb-4 text-sm text-gray-500"},Lo={class:"prose max-w-none mb-6"},Io={class:"text-gray-700 whitespace-pre-wrap"},Bo={class:"flex space-x-3 pt-4 border-t"},Po=J(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),To=J(()=>e("span",null,"Delete Notice",-1)),Ro=[Po,To],Go={setup(_){const r=C([]),i=C(""),g=C(null),l=C(!1),p=z({url:"school.al_ummah.api2.get_notice_list",auto:!1,onSuccess(f){console.log("Notices loaded:",f),r.value=Array.isArray(f)?f:[]},onError(f){console.error("Error fetching notices:",f),r.value=[]}}),j=z({url:"school.al_ummah.api2.delete_notice",auto:!1,onSuccess(){console.log("Notice deleted successfully"),b(),A()},onError(f){console.error("Error deleting notice:",f),G("Error","Failed to delete notice. Please try again.")}}),k=()=>{try{const f=localStorage.getItem("selected_student_group");f&&(i.value=f)}catch(f){console.error("Failed to load selected student group:",f)}},b=()=>{if(!i.value)return;const f={student_group:i.value};p.fetch(f)},v=f=>{if(!f)return"No date";try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(y){return f}},B=f=>{g.value=f,l.value=!0},A=()=>{l.value=!1,g.value=null},V=f=>{if(!f){G("Error","No notice ID provided");return}confirm("Are you sure you want to delete this notice? This action cannot be undone.")&&j.fetch({name:f})},G=(f,y)=>{f==="Error"?window.alert(`Error: ${y}`):window.alert(y)};return Z(()=>{k(),i.value&&b()}),te(i,f=>{f&&b()}),(f,y)=>(s(),o("div",to,[e("div",so,[oo,no,i.value?(s(),o("p",ao,"Class: "+a(i.value),1)):I("",!0)]),c(p).loading?(s(),o("div",ro,co)):c(p).error?(s(),o("div",uo,[_o,e("button",{onClick:b,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])):(s(),o("div",ho,[(s(!0),o(Y,null,K(r.value,(P,n)=>(s(),o("div",{key:n,class:"bg-white rounded-lg shadow-sm border border-gray-200 hover:border-blue-300 transition-colors cursor-pointer",onClick:L=>B(P)},[e("div",go,[e("div",po,[e("h3",vo,a(P.notice_heading||"No Title"),1),e("span",xo,a(v(P.date)),1)]),e("p",fo,a(P.notice_message||"No message content"),1),e("div",bo,[e("span",null,"By: "+a(P.owner||"System"),1),e("button",{onClick:H(L=>V(P.name),["stop"]),class:"text-red-600 hover:text-red-800 font-medium"}," Delete ",8,yo)])])],8,mo))),128)),r.value.length===0?(s(),o("div",wo,$o)):I("",!0)])),g.value&&l.value?(s(),o("div",Co,[e("div",So,[e("div",jo,[e("div",Mo,[e("h2",Ao,a(g.value.notice_heading),1),e("button",{onClick:A,class:"text-gray-400 hover:text-gray-600"},Eo)]),e("div",Do,[e("p",null,"Published on: "+a(v(g.value.date)),1),e("p",null,"By: "+a(g.value.owner||"System"),1)]),e("div",Lo,[e("p",Io,a(g.value.notice_message),1)]),e("div",Bo,[e("button",{onClick:y[0]||(y[0]=P=>V(g.value.name)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center space-x-2"},Ro),e("button",{onClick:A,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"}," Close ")])])])])):I("",!0)]))}};var Fo=Q(Go,[["__scopeId","data-v-b50e67de"]]);const S=_=>(X("data-v-6e006303"),_=_(),ee(),_),Vo={class:"min-h-screen bg-gray-50 p-4"},Uo={key:0,class:"flex justify-center items-center py-8"},zo=S(()=>e("div",{class:"spinner"},null,-1)),Oo=S(()=>e("span",{class:"ml-2 text-gray-600"},"Loading leave applications...",-1)),Ho=[zo,Oo],Jo={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Zo={class:"flex items-start space-x-3"},Wo=S(()=>e("svg",{class:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),qo=S(()=>e("p",{class:"text-red-800 font-medium"},"Error",-1)),Qo={class:"text-red-700 text-sm mt-1"},Yo={key:2,class:"text-center py-12"},Ko=S(()=>e("svg",{class:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),Xo=S(()=>e("p",{class:"text-gray-500 text-lg"},"No leave applications found",-1)),en=S(()=>e("p",{class:"text-gray-400 text-sm mt-1"},"There are no pending leave applications for this group.",-1)),tn=[Ko,Xo,en],sn={key:3,class:"space-y-4"},on={class:"flex justify-between items-center mb-4"},nn=S(()=>e("h2",{class:"text-xl font-semibold text-gray-800"},"Leave Applications",-1)),an={class:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded"},rn=["onClick"],ln={class:"p-4"},cn={class:"flex items-start space-x-3 mb-3"},dn=S(()=>e("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),un={class:"flex-1 min-w-0"},_n={class:"font-semibold text-gray-800 text-lg"},hn={class:"text-sm text-gray-500"},mn={class:"text-sm text-gray-600 mt-1"},gn={class:"flex items-center space-x-2"},pn=S(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)),vn=[pn],xn={class:"flex justify-between items-center"},fn={class:"flex-1"},bn={class:"text-sm text-gray-700"},yn=se(" Total Leave Days: "),wn={class:"font-medium"},kn={class:"text-sm text-gray-600 mt-1 line-clamp-1"},$n={key:0,class:"mt-3"},Cn=S(()=>e("span",{class:"inline-flex items-center px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs"},[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),se(" Medical Certificate Available ")],-1)),Sn=[Cn],jn={key:0,class:"border-t border-gray-200 p-4 bg-gray-50"},Mn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},An=S(()=>e("h4",{class:"font-semibold text-gray-800 mb-3"},"Leave Details",-1)),Nn={class:"space-y-2 text-sm"},En={class:"flex justify-between"},Dn=S(()=>e("span",{class:"text-gray-600"},"Student Name:",-1)),Ln={class:"font-medium"},In={class:"flex justify-between"},Bn=S(()=>e("span",{class:"text-gray-600"},"Student ID:",-1)),Pn={class:"font-medium"},Tn={class:"flex justify-between"},Rn=S(()=>e("span",{class:"text-gray-600"},"Leave ID:",-1)),Gn={class:"font-medium"},Fn={class:"flex justify-between"},Vn=S(()=>e("span",{class:"text-gray-600"},"Duration:",-1)),Un={class:"font-medium"},zn={class:"flex justify-between"},On=S(()=>e("span",{class:"text-gray-600"},"Status:",-1)),Hn={class:"mt-4"},Jn=S(()=>e("h5",{class:"font-medium text-gray-700 mb-2"},"Reason for Leave",-1)),Zn={class:"text-sm text-gray-600 bg-white p-3 rounded border"},Wn={key:0,class:"mt-4 flex space-x-3 justify-center"},qn=["onClick","disabled"],Qn=S(()=>e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Yn=[Qn],Kn=["onClick","disabled"],Xn=S(()=>e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),ea=[Xn],ta={key:1,class:"mt-4 p-3 bg-gray-100 rounded-lg text-center"},sa={class:"text-sm text-gray-600"},oa=se(" This leave application has been "),na={class:"font-medium"},aa={key:0},ra=S(()=>e("h4",{class:"font-semibold text-gray-800 mb-3"},"Medical Certificate",-1)),la={class:"bg-white p-4 rounded-lg border border-gray-200"},ia={class:"mb-3"},ca=["src","onClick"],da={class:"flex space-x-2"},ua=["onClick"],_a=S(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),ha=S(()=>e("span",null,"View Full Size",-1)),ma=[_a,ha],ga=["onClick"],pa=S(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),va=S(()=>e("span",null,"Download",-1)),xa=[pa,va],fa={key:1,class:"flex items-center justify-center p-8 bg-gray-100 rounded-lg border border-gray-200"},ba=S(()=>e("div",{class:"text-center"},[e("svg",{class:"w-12 h-12 mx-auto text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"text-gray-500 text-sm"},"No medical certificate provided")],-1)),ya=[ba],wa={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ka=S(()=>e("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[e("div",{class:"spinner-small"}),e("span",{class:"text-gray-700"},"Updating leave application...")],-1)),$a=[ka],Ca={key:5,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"},Sa={class:"bg-white rounded-lg max-w-4xl max-h-full w-full"},ja={class:"flex justify-between items-center p-4 border-b"},Ma=S(()=>e("h3",{class:"text-lg font-semibold text-gray-800"},"Medical Certificate",-1)),Aa=S(()=>e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),Na=[Aa],Ea={class:"p-4 max-h-[80vh] overflow-auto"},Da=["src"],La=S(()=>e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),Ia=S(()=>e("span",null,"Download",-1)),Ba=[La,Ia],Pa={setup(_){const r=C([]),i=C(""),g=C(null),l=C(!1),p=C(""),j=C(""),k=C(""),b=z({url:"school.al_ummah.api2.get_leave_application_list",auto:!1,onSuccess(t){console.log("Raw API response:",t),Array.isArray(t)?r.value=t:t&&typeof t=="object"?t.message&&Array.isArray(t.message)?r.value=t.message:t.appeals&&Array.isArray(t.appeals)?r.value=t.appeals:t.leave_applications&&Array.isArray(t.leave_applications)?r.value=t.leave_applications:Array.isArray(t.data)?r.value=t.data:r.value=Object.keys(t).length>0?[t]:[]:r.value=[],console.log("Processed appeals:",r.value),i.value=""},onError(t){console.error("Error fetching leave applications:",t),i.value=t.message||"Failed to load leave applications.",r.value=[]}}),v=z({url:"school.al_ummah.api2.update_leave_status",method:"POST",auto:!1,onSuccess(t){if(console.log("\u2705 Update API Response:",t),t.success){const m=r.value.findIndex(u=>u.name===t.name);m!==-1&&(r.value[m].status=t.status,console.log("\u{1F504} Updated appeal status:",t.status)),x("Success",t.message||"Leave application updated successfully."),N()}else console.log("\u274C API returned success: false"),x("Error",t.message||"Failed to update leave application.")},onError(t){console.error("\u{1F6A8} Error updating leave status:",t);let m="Failed to update leave application.";if(t._server_messages)try{const u=JSON.parse(t._server_messages||"[]"),F=u[u.length-1];m=JSON.parse(F).message||m}catch(u){console.log("\u274C Error parsing server messages:",u),m=t.message||m}else t.message&&(m=t.message);x("Error",m)}}),B=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(m){return t||"N/A"}},A=(t,m)=>{if(!t||!m)return 0;try{const u=new Date(t),F=new Date(m),W=Math.abs(F-u);return Math.ceil(W/(1e3*60*60*24))+1}catch(u){return 0}},V=t=>{if(!t)return!0;const m=String(t).trim().toLowerCase();return!["approved","rejected"].includes(m)},G=t=>{if(!t)return"Pending";const m=String(t).trim();return m.charAt(0).toUpperCase()+m.slice(1).toLowerCase()},f=t=>{if(!t)return"bg-yellow-100 text-yellow-800";switch(String(t).trim().toLowerCase()){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-yellow-100 text-yellow-800"}},y=t=>{if(!t)return"";try{let m=t;return m.includes("base64,")&&(m=m.split("base64,")[1]),m=m.trim(),`data:image/jpeg;base64,${m}`}catch(m){return console.error("Error creating document URL:",m),""}},P=t=>{console.error("Image failed to load"),t.target.style.display="none"},n=t=>{console.error("Modal image failed to load"),x("Error","Failed to load medical certificate image."),l.value=!1},L=t=>{g.value=g.value===t?null:t},M=t=>{const m=y(t);m?(p.value=m,j.value=t,l.value=!0):x("Error","Unable to display medical certificate.")},h=(t,m)=>{const u=y(t);if(u){const F=document.createElement("a");F.href=u,F.download=`medical-certificate-${m||"student"}.jpg`,document.body.appendChild(F),F.click(),document.body.removeChild(F)}},E=()=>{if(p.value){const t=document.createElement("a");t.href=p.value,t.download=`medical-certificate-${k.value||"student"}.jpg`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},$=(t,m)=>U(this,null,function*(){if(!t){x("Error","Cannot update: Missing leave application ID");return}console.log("Updating leave status:",t,"to:",m);const u={name:t,status:m};console.log("Sending update data:",u),yield v.submit(u)}),x=(t,m)=>{alert(`${t}: ${m}`)},d=()=>{try{const t=localStorage.getItem("selected_student_group");if(t)try{const m=JSON.parse(t);return m.student_group||m.name||m}catch(m){return t}return null}catch(t){return console.error("Error getting student group:",t),null}},N=()=>{const t=d();if(!t){i.value="No student group found. Please select a student first.",r.value=[];return}const m={student_group:t};console.log("Fetching leave applications with params:",m),b.fetch(m)};return Z(()=>{N()}),(t,m)=>(s(),o("div",Vo,[c(b).loading?(s(),o("div",Uo,Ho)):i.value?(s(),o("div",Jo,[e("div",Zo,[Wo,e("div",null,[qo,e("p",Qo,a(i.value),1),e("button",{onClick:N,class:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm"}," Retry ")])])])):!r.value||r.value.length===0?(s(),o("div",Yo,tn)):(s(),o("div",sn,[e("div",on,[nn,e("span",an,a(r.value.length)+" application"+a(r.value.length!==1?"s":""),1)]),(s(!0),o(Y,null,K(r.value,(u,F)=>{var W;return s(),o("div",{key:u.name||`appeal-${F}`,class:"bg-white rounded-lg shadow-sm border border-gray-200 hover:border-blue-300 transition-colors cursor-pointer",onClick:q=>L(u.name)},[e("div",ln,[e("div",cn,[dn,e("div",un,[e("h3",_n,a(u.student_name||u.student||"Unknown Student"),1),e("p",hn,a(u.student||"No Student ID"),1),e("p",mn," From: "+a(B(u.from_date))+" - To: "+a(B(u.to_date)),1)]),e("div",gn,[e("span",{class:T(["px-3 py-1 rounded-full text-xs font-medium",f(u.status)])},a(G(u.status)),3),(s(),o("svg",{class:T(["w-5 h-5 text-gray-400 transition-transform duration-200",{"rotate-180":g.value===u.name}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vn,2))])]),e("div",xn,[e("div",fn,[e("p",bn,[yn,e("span",wn,a(u.total_leave_days||A(u.from_date,u.to_date)),1)]),e("p",kn,a(u.reason||"No reason provided"),1)])]),u.document_base64?(s(),o("div",$n,Sn)):I("",!0)]),g.value===u.name?(s(),o("div",jn,[e("div",Mn,[e("div",null,[An,e("div",Nn,[e("div",En,[Dn,e("span",Ln,a(u.student_name||"N/A"),1)]),e("div",In,[Bn,e("span",Pn,a(u.student||"N/A"),1)]),e("div",Tn,[Rn,e("span",Gn,a(u.name||"N/A"),1)]),e("div",Fn,[Vn,e("span",Un,a(u.total_leave_days||A(u.from_date,u.to_date))+" days",1)]),e("div",zn,[On,e("span",{class:T([f(u.status),"px-2 py-1 rounded-full text-xs font-medium"])},a(G(u.status)),3)])]),e("div",Hn,[Jn,e("p",Zn,a(u.reason||"No reason provided"),1)]),V(u.status)?(s(),o("div",Wn,[e("button",{onClick:H(q=>$(u.name,"rejected"),["stop"]),disabled:c(v).loading,class:T(["w-12 h-12 rounded-full bg-red-500 bg-opacity-80 text-white hover:bg-red-600 hover:bg-opacity-90 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center shadow-md hover:shadow-lg transform hover:scale-105",{"opacity-60":c(v).loading}]),title:"Reject Leave Application"},Yn,10,qn),e("button",{onClick:H(q=>$(u.name,"approved"),["stop"]),disabled:c(v).loading,class:T(["w-12 h-12 rounded-full bg-green-500 bg-opacity-80 text-white hover:bg-green-600 hover:bg-opacity-90 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center shadow-md hover:shadow-lg transform hover:scale-105",{"opacity-60":c(v).loading}]),title:"Approve Leave Application"},ea,10,Kn)])):(s(),o("div",ta,[e("p",sa,[oa,e("span",na,a(((W=u.status)==null?void 0:W.toLowerCase())||"processed"),1)])]))]),u.document_base64?(s(),o("div",aa,[ra,e("div",la,[e("div",ia,[e("img",{src:y(u.document_base64),alt:"Medical Certificate",onError:P,class:"w-full h-48 object-contain border border-gray-200 rounded cursor-pointer",onClick:H(q=>M(u.document_base64),["stop"])},null,40,ca)]),e("div",da,[e("button",{onClick:H(q=>M(u.document_base64),["stop"]),class:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2"},ma,8,ua),e("button",{onClick:H(q=>h(u.document_base64,u.student_name),["stop"]),class:"flex-1 px-3 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2"},xa,8,ga)])])])):(s(),o("div",fa,ya))])])):I("",!0)],8,rn)}),128))])),c(v).loading?(s(),o("div",wa,$a)):I("",!0),l.value?(s(),o("div",Ca,[e("div",Sa,[e("div",ja,[Ma,e("button",{onClick:m[0]||(m[0]=u=>l.value=!1),class:"text-gray-500 hover:text-gray-700 transition-colors"},Na)]),e("div",Ea,[e("img",{src:p.value,alt:"Medical Certificate Full Size",class:"w-full h-auto object-contain max-h-[70vh] mx-auto",onError:n},null,40,Da)]),e("div",{class:"p-4 border-t flex justify-center"},[e("button",{onClick:E,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center space-x-2"},Ba)])])])):I("",!0)]))}};var Ta=Q(Pa,[["__scopeId","data-v-6e006303"]]);const D=_=>(X("data-v-18c5ea37"),_=_(),ee(),_),Ra={class:"flex min-h-screen bg-gray-50 flex-col md:flex-row"},Ga={key:0,class:"fixed inset-0 bg-red-50 bg-opacity-90 flex items-center justify-center z-50 p-4"},Fa={class:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full"},Va={class:"flex items-center mb-4"},Ua={class:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3"},za=D(()=>e("h3",{class:"text-lg font-semibold text-red-800"},"Something went wrong",-1)),Oa={class:"text-gray-600 mb-4"},Ha={key:1,class:"fixed inset-0 bg-white bg-opacity-80 flex items-center justify-center z-50"},Ja=D(()=>e("div",{class:"text-center"},[e("div",{class:"spinner mb-4 mx-auto"}),e("p",{class:"text-gray-600"},"Loading your dashboard...")],-1)),Za=[Ja],Wa={key:2,class:"flex flex-col md:flex-row w-full min-h-screen"},qa={class:"md:hidden bg-white shadow-sm border-b border-gray-200 p-4 flex items-center justify-between"},Qa={class:"flex items-center space-x-3"},Ya={class:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden flex-shrink-0"},Ka=["src"],Xa={key:1,class:"w-full h-full flex items-center justify-center bg-gray-100"},er={class:"min-w-0 flex-1"},tr={class:"text-sm font-semibold text-gray-800 truncate"},sr=D(()=>e("p",{class:"text-xs text-gray-500"},"Teacher",-1)),or={class:"flex items-center justify-between md:hidden pb-4 border-b border-gray-200"},nr=D(()=>e("h3",{class:"text-lg font-semibold text-gray-800"},"Menu",-1)),ar={class:"flex-1 overflow-y-auto space-y-6 md:space-y-8"},rr={class:"hidden md:flex items-start space-x-4 border-b pb-4"},lr={class:"flex-shrink-0 w-16 h-16 rounded-full bg-gray-200 overflow-hidden"},ir=["src"],cr={key:1,class:"w-full h-full flex items-center justify-center bg-gray-100"},dr={class:"min-w-0 flex-1"},ur={class:"text-xl font-semibold text-gray-800 break-words"},_r=D(()=>e("p",{class:"text-sm text-gray-500 mt-1"},"Teacher",-1)),hr={class:"space-y-2"},mr=D(()=>e("label",{class:"block text-sm font-medium text-gray-700"},"Select Class:",-1)),gr=["disabled"],pr=D(()=>e("option",{value:"",disabled:""},"Select a class",-1)),vr=["value"],xr={key:0,class:"text-sm text-yellow-600"},fr={class:"space-y-3"},br=D(()=>e("h3",{class:"text-sm font-medium text-gray-700"},"Navigation",-1)),yr={class:"space-y-2"},wr=["disabled"],kr=D(()=>e("span",{class:"truncate"},"Dashboard",-1)),$r=["disabled"],Cr=D(()=>e("span",{class:"truncate"},"Take Attendance",-1)),Sr=["disabled"],jr=D(()=>e("span",{class:"truncate"},"Student Record",-1)),Mr=["disabled"],Ar=D(()=>e("span",{class:"truncate"},"Create Notice",-1)),Nr=["disabled"],Er=D(()=>e("span",{class:"truncate"},"Previous Notices",-1)),Dr=["disabled"],Lr=D(()=>e("span",{class:"truncate"},"Browse Leave Appeals",-1)),Ir={class:"pt-4 border-t border-gray-200 flex-shrink-0"},Br=["disabled"],Pr=D(()=>e("span",null,"Logout",-1)),Tr={key:0},Rr={class:"bg-white rounded-lg shadow-sm p-4 md:p-6 mb-4 md:mb-6"},Gr={class:"text-xl md:text-2xl font-bold text-gray-800 mb-2"},Fr=D(()=>e("p",{class:"text-gray-600 text-sm md:text-base"},"Manage your classroom activities and student records from here.",-1)),Vr={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-4 md:mb-6"},Ur={class:"bg-white rounded-lg shadow-sm p-4 md:p-6 border-l-4 border-blue-500"},zr={class:"flex items-center justify-between"},Or=D(()=>e("p",{class:"text-xs md:text-sm font-medium text-gray-600"},"Selected Class",-1)),Hr={class:"text-lg md:text-2xl font-bold text-gray-800 truncate"},Jr={class:"bg-white rounded-lg shadow-sm p-4 md:p-6 border-l-4 border-green-500"},Zr={class:"flex items-center justify-between"},Wr=D(()=>e("p",{class:"text-xs md:text-sm font-medium text-gray-600"},"Available Classes",-1)),qr={class:"text-lg md:text-2xl font-bold text-gray-800"},Qr={class:"bg-white rounded-lg shadow-sm p-4 md:p-6 border-l-4 border-purple-500"},Yr={class:"flex items-center justify-between"},Kr=D(()=>e("p",{class:"text-xs md:text-sm font-medium text-gray-600"},"Today's Date",-1)),Xr={class:"text-lg md:text-2xl font-bold text-gray-800"},el={class:"bg-white rounded-lg shadow-sm p-4 md:p-6"},tl=D(()=>e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Quick Actions",-1)),sl={class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},ol=["disabled"],nl=D(()=>e("div",{class:"min-w-0 flex-1"},[e("h3",{class:"font-medium text-gray-800 text-sm md:text-base"},"Take Today's Attendance"),e("p",{class:"text-xs md:text-sm text-gray-600 truncate"},"Mark student attendance for today")],-1)),al=["disabled"],rl=D(()=>e("div",{class:"min-w-0 flex-1"},[e("h3",{class:"font-medium text-gray-800 text-sm md:text-base"},"Create New Notice"),e("p",{class:"text-xs md:text-sm text-gray-600 truncate"},"Send announcement to students")],-1)),ll={key:0,class:"text-sm text-yellow-600 mt-3"},il={key:1,class:"h-full"},cl={setup(_){const r=oe(),i=C({}),g=C([]),l=C(""),p=C(!1),j=C("dashboard"),k=C(null),b=C(!1),v={attendance:kt,"attendance-record":Is,"create-notice":eo,"previous-notices":Fo,"leave-appeals":Ta},B=()=>v[j.value]||null,A=x=>{y.loading||(j.value=x,window.innerWidth<768&&(p.value=!1))},V=ge.user,G="teacher",f=()=>{var x;try{const d=localStorage.getItem("user_details"),N=localStorage.getItem("selected_student_group");if(d){const t=JSON.parse(d);i.value={name:t.name,image:t.base64profile},((x=t.student_groups)==null?void 0:x.length)&&(g.value=t.student_groups,l.value=N||t.student_groups[0],b.value=!0)}}catch(d){console.warn("Error loading from localStorage:",d)}},y=z({url:"school.al_ummah.api2.get_user_details",params:{role:G,username:V},auto:!1,onSuccess(x){var d;console.log("User details loaded:",x),k.value=null;try{x&&x.user_details?(i.value={name:x.user_details.name,image:x.user_details.base64profile},((d=x.user_details.student_groups)==null?void 0:d.length)&&(g.value=x.user_details.student_groups,l.value=x.user_details.student_groups[0],localStorage.setItem("selected_student_group",x.user_details.student_groups[0])),localStorage.setItem("user_details",JSON.stringify(x.user_details)),b.value=!0):k.value="No user data received from server"}catch(N){console.error("Error processing user data:",N),k.value="Error processing user data"}},onError(x){console.error("Error loading user details:",x),k.value="Failed to load user data. Please try again.",b.value||n()}}),P=_e(()=>new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),n=()=>{try{f(),(i.value.name||g.value.length)&&(b.value=!0,k.value=null)}catch(x){console.error("Error loading from localStorage:",x),k.value="Unable to load user data. Please refresh the page."}},L=()=>U(this,null,function*(){l.value&&localStorage.setItem("selected_student_group",l.value)}),M=x=>{x.target.style.display="none";const d=x.target.nextElementSibling;d&&(d.style.display="flex")},h=()=>{k.value=null,b.value=!1,y.reload()},E=()=>U(this,null,function*(){try{localStorage.removeItem("user_details"),localStorage.removeItem("user"),localStorage.removeItem("selected_student_group"),yield ge.logout.submit(),r.push({name:"Login"})}catch(x){console.error("Logout error:",x),localStorage.clear(),r.push({name:"Login"})}}),$=()=>{window.innerWidth>=768&&(p.value=!1)};return Z(()=>{f(),window.addEventListener("resize",$),setTimeout(()=>{y.reload().catch(x=>{console.error("Failed to reload user details:",x),k.value="Network error. Please check your connection."})},100)}),Se(()=>{window.removeEventListener("resize",$)}),te(()=>y.loading,x=>{!x&&y.data&&console.log("Data loaded successfully")}),te(()=>j.value,()=>{window.innerWidth<768&&(p.value=!1)}),(x,d)=>(s(),o("div",Ra,[k.value?(s(),o("div",Ga,[e("div",Fa,[e("div",Va,[e("div",Ua,[w(c(Re),{class:"w-6 h-6 text-red-600"})]),za]),e("p",Oa,a(k.value),1),e("div",{class:"flex space-x-3"},[e("button",{onClick:h,class:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors"}," Try Again "),e("button",{onClick:E,class:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors"}," Logout ")])])])):c(y).loading&&!b.value?(s(),o("div",Ha,Za)):(s(),o("div",Wa,[e("header",qa,[e("div",Qa,[e("div",Ya,[i.value.image?(s(),o("img",{key:0,src:`data:image/jpeg;base64,${i.value.image}`,alt:"Teacher",class:"object-cover w-full h-full",onError:M},null,40,Ka)):(s(),o("div",Xa,[w(c(be),{class:"w-5 h-5 text-gray-400"})]))]),e("div",er,[e("h2",tr,a(i.value.name||"Teacher"),1),sr])]),e("button",{onClick:d[0]||(d[0]=N=>p.value=!p.value),class:"p-2 rounded-md text-gray-600 hover:bg-gray-100 transition-colors"},[w(c(Be),{class:"w-6 h-6"})])]),p.value?(s(),o("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:d[1]||(d[1]=N=>p.value=!1)})):I("",!0),e("aside",{class:T(["bg-white shadow-md p-4 md:p-6 space-y-6 md:space-y-8 z-50","fixed md:relative inset-y-0 left-0 transform transition-transform duration-300 ease-in-out","w-72 max-w-full",p.value?"translate-x-0":"-translate-x-full md:translate-x-0","flex flex-col h-screen md:h-auto"])},[e("div",or,[nr,e("button",{onClick:d[2]||(d[2]=N=>p.value=!1),class:"p-2 rounded-md text-gray-600 hover:bg-gray-100 transition-colors"},[w(c(ie),{class:"w-5 h-5"})])]),e("div",ar,[e("div",rr,[e("div",lr,[i.value.image?(s(),o("img",{key:0,src:`data:image/jpeg;base64,${i.value.image}`,alt:"Teacher",class:"object-cover w-full h-full",onError:M},null,40,ir)):(s(),o("div",cr,[w(c(be),{class:"w-6 h-6 text-gray-400"})]))]),e("div",dr,[e("h2",ur,a(i.value.name||"Loading..."),1),_r])]),e("div",hr,[mr,ne(e("select",{"onUpdate:modelValue":d[3]||(d[3]=N=>l.value=N),onChange:L,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base",disabled:c(y).loading||!g.value.length},[pr,(s(!0),o(Y,null,K(g.value,(N,t)=>(s(),o("option",{key:t,value:N},a(N),9,vr))),128))],40,gr),[[je,l.value]]),g.value.length?I("",!0):(s(),o("p",xr," No classes available "))]),e("div",fr,[br,e("nav",yr,[e("button",{onClick:d[4]||(d[4]=N=>A("dashboard")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="dashboard"?"bg-blue-100 border border-blue-200 text-blue-800":"bg-blue-50 text-blue-800 hover:bg-blue-100"]),disabled:c(y).loading},[w(c(Ae),{class:"w-5 h-5 flex-shrink-0"}),kr],10,wr),e("button",{onClick:d[5]||(d[5]=N=>A("attendance")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="attendance"?"bg-blue-100 border border-blue-200 text-blue-800":"bg-blue-50 text-blue-800 hover:bg-blue-100"]),disabled:!l.value||c(y).loading},[w(c(re),{class:"w-5 h-5 flex-shrink-0"}),Cr],10,$r),e("button",{onClick:d[6]||(d[6]=N=>A("attendance-record")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="attendance-record"?"bg-green-100 border border-green-200 text-green-800":"bg-green-50 text-green-800 hover:bg-green-100"]),disabled:!l.value||c(y).loading},[w(c(ae),{class:"w-5 h-5 flex-shrink-0"}),jr],10,Sr),e("button",{onClick:d[7]||(d[7]=N=>A("create-notice")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="create-notice"?"bg-yellow-100 border border-yellow-200 text-yellow-800":"bg-yellow-50 text-yellow-800 hover:bg-yellow-100"]),disabled:!l.value||c(y).loading},[w(c(fe),{class:"w-5 h-5 flex-shrink-0"}),Ar],10,Mr),e("button",{onClick:d[8]||(d[8]=N=>A("previous-notices")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="previous-notices"?"bg-purple-100 border border-purple-200 text-purple-800":"bg-purple-50 text-purple-800 hover:bg-purple-100"]),disabled:!l.value||c(y).loading},[w(c(Ne),{class:"w-5 h-5 flex-shrink-0"}),Er],10,Nr),e("button",{onClick:d[9]||(d[9]=N=>A("leave-appeals")),class:T(["w-full text-left px-4 py-3 rounded font-medium flex items-center space-x-3 transition-colors text-sm md:text-base",j.value==="leave-appeals"?"bg-indigo-100 border border-indigo-200 text-indigo-800":"bg-indigo-50 text-indigo-800 hover:bg-indigo-100"]),disabled:!l.value||c(y).loading},[w(c(Ee),{class:"w-5 h-5 flex-shrink-0"}),Lr],10,Dr)])])]),e("div",Ir,[e("button",{class:"w-full px-4 py-3 rounded bg-red-100 text-red-600 font-medium hover:bg-red-200 flex items-center justify-center space-x-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base",onClick:E,disabled:c(y).loading},[w(c(De),{class:"w-5 h-5 flex-shrink-0"}),Pr],8,Br)])],2),e("main",{class:T(["flex-1 min-h-screen md:min-h-0 p-4 md:p-6 lg:p-8 bg-gray-50",{"opacity-50 pointer-events-none":c(y).loading}])},[j.value==="dashboard"?(s(),o("div",Tr,[e("div",Rr,[e("h1",Gr,"Welcome, "+a(i.value.name||"Teacher")+"!",1),Fr]),e("div",Vr,[e("div",Ur,[e("div",zr,[e("div",null,[Or,e("p",Hr,a(l.value||"None"),1)]),w(c(ae),{class:"w-6 h-6 md:w-8 md:h-8 text-blue-500 flex-shrink-0"})])]),e("div",Jr,[e("div",Zr,[e("div",null,[Wr,e("p",qr,a(g.value.length),1)]),w(c(re),{class:"w-6 h-6 md:w-8 md:h-8 text-green-500 flex-shrink-0"})])]),e("div",Qr,[e("div",Yr,[e("div",null,[Kr,e("p",Xr,a(c(P)),1)]),w(c(Le),{class:"w-6 h-6 md:w-8 md:h-8 text-purple-500 flex-shrink-0"})])])]),e("div",el,[tl,e("div",sl,[e("button",{onClick:d[10]||(d[10]=N=>A("attendance")),disabled:!l.value,class:"flex items-center p-3 md:p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-left"},[w(c(re),{class:"w-5 h-5 md:w-6 md:h-6 text-blue-600 mr-3 flex-shrink-0"}),nl],8,ol),e("button",{onClick:d[11]||(d[11]=N=>A("create-notice")),disabled:!l.value,class:"flex items-center p-3 md:p-4 border border-gray-200 rounded-lg hover:border-yellow-500 hover:bg-yellow-50 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-left"},[w(c(fe),{class:"w-5 h-5 md:w-6 md:h-6 text-yellow-600 mr-3 flex-shrink-0"}),rl],8,al)]),l.value?I("",!0):(s(),o("p",ll," Please select a class to access these features "))])])):(s(),o("div",il,[(s(),he(Me(B()),{"selected-group":l.value,onBackToDashboard:d[12]||(d[12]=N=>A("dashboard")),key:l.value+j.value},null,8,["selected-group"]))]))],2)]))]))}};var gl=Q(cl,[["__scopeId","data-v-18c5ea37"]]);export{gl as default};
