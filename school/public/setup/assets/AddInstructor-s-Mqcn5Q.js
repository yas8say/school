var p=(a,e,c)=>new Promise((v,t)=>{var u=h=>{try{g(c.next(h))}catch(f){t(f)}},r=h=>{try{g(c.throw(h))}catch(f){t(f)}},g=h=>h.done?v(h.value):Promise.resolve(h.value).then(u,r);g((c=c.apply(a,e)).next())});import{a as k,d as y,h as E}from"./apiUtils-CCQy72K0.js";/* empty css             */import{_ as V,c as o,b as s,f as i,v as n,t as d,j as m,g as D,F as b,h as N,i as C,n as M,o as l}from"./index-BsE_pyWB.js";const F={data(){return{teacherData:{firstName:"",middleName:"",lastName:"",gender:"",mobile:"",email:"",dob:"",doj:"",panNumber:"",bankName:"",accountNumber:"",ifscCode:"",designation:"",address:"",className:null,divisionName:null,attendanceDeviceId:""},classes:[],divisions:[],isLoading:!1,message:null,errors:{}}},created(){return p(this,null,function*(){yield this.fetchClasses()})},methods:{fetchClasses(){return p(this,null,function*(){try{const a=yield k({values:{}});this.classes=a.message?a.message.map(e=>e.name).filter(e=>e):[],console.log("Processed classes:",this.classes)}catch(a){console.error("Error fetching classes:",a),this.showMessage("Error fetching classes","error")}})},onClassChange(){return p(this,null,function*(){if(this.teacherData.divisionName=null,this.errors.divisionName="",this.teacherData.className)try{const a=yield y({values:{classId:this.teacherData.className}});this.divisions=a.message?a.message.map(e=>e.name).filter(e=>e):[],console.log(`Divisions for ${this.teacherData.className}:`,this.divisions)}catch(a){console.error("Error fetching divisions:",a),this.showMessage(`Error fetching divisions for ${this.teacherData.className}`,"error")}else this.divisions=[]})},validateForm(){this.errors={};let a=!0;return this.teacherData.firstName.trim()||(this.errors.firstName="First name is required",a=!1),this.teacherData.lastName.trim()||(this.errors.lastName="Last name is required",a=!1),this.teacherData.gender||(this.errors.gender="Gender is required",a=!1),this.teacherData.dob||(this.errors.dob="Date of birth is required",a=!1),this.teacherData.email.trim()?this.validEmail(this.teacherData.email)||(this.errors.email="Please enter a valid email",a=!1):(this.errors.email="Email is required",a=!1),this.teacherData.mobile.trim()?this.validMobile(this.teacherData.mobile)||(this.errors.mobile="Please enter a valid mobile number",a=!1):(this.errors.mobile="Mobile number is required",a=!1),a},validEmail(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)},validMobile(a){return/^[0-9]{10,15}$/.test(a)},validateAndSubmit(){return p(this,null,function*(){this.validateForm()&&(yield this.handleEnrollTeacher())})},handleEnrollTeacher(){return p(this,null,function*(){this.isLoading=!0,this.showMessage(null);try{const a={"First Name":this.teacherData.firstName,"Middle Name":this.teacherData.middleName,"Last Name":this.teacherData.lastName,Gender:this.teacherData.gender,Mobile:this.teacherData.mobile,Email:this.teacherData.email,"Date of Birth":this.teacherData.dob,"Date of Joining":this.teacherData.doj,"PAN Number":this.teacherData.panNumber,"Bank Name":this.teacherData.bankName,"Bank A/C No.":this.teacherData.accountNumber,"IFSC Code":this.teacherData.ifscCode,Designation:this.teacherData.designation,"Current Address":this.teacherData.address,Class:this.teacherData.className||"",Division:this.teacherData.divisionName||"","Attendance Device ID (Biometric/RF tag ID)":this.teacherData.attendanceDeviceId},e=yield E({teacher:a});if(console.log("API Response:",e),e.success)this.showMessage("âœ… Teacher enrolled successfully!","success");else{let c=e.error||"Failed to enroll teacher";this.showMessage(c,"error"),console.error("Enrollment error details:",{error:e.error,message:e.message})}}catch(a){console.error("Unexpected error in handleEnrollTeacher:",a),this.showMessage(a.message||"An unexpected error occurred. Please try again.","error")}finally{this.isLoading=!1}})},resetForm(){this.teacherData={firstName:"",middleName:"",lastName:"",gender:"",mobile:"",email:"",dob:"",doj:"",panNumber:"",bankName:"",accountNumber:"",ifscCode:"",designation:"",address:"",className:null,divisionName:null,attendanceDeviceId:""},this.divisions=[],this.errors={},this.showMessage(null)},showMessage(a,e="info"){this.message=a?{text:a,type:e}:null,a&&e!=="error"&&setTimeout(()=>this.showMessage(null),5e3)}}},I={class:"enrollment-container"},q={class:"form-card"},U={class:"form-section"},w={class:"form-grid"},A={class:"form-group required"},S={key:0,class:"error-message"},B={class:"form-group"},P={class:"form-group required"},T={key:0,class:"error-message"},L={class:"form-group required"},x={key:0,class:"error-message"},j={class:"form-group required"},G={key:0,class:"error-message"},H={class:"form-section"},R={class:"form-grid"},O={class:"form-group required"},J={key:0,class:"error-message"},z={class:"form-group required"},Z={key:0,class:"error-message"},K={class:"form-group"},Q={class:"form-section"},W={class:"form-grid"},X={class:"form-group"},Y=["value"],_={key:0,class:"error-message"},$={class:"form-group"},ee=["disabled"],se=["value"],te={key:0,class:"error-message"},re={class:"form-group"},ae={class:"form-group"},ie={class:"form-group"},oe={class:"form-section"},le={class:"form-grid"},ne={class:"form-group"},de={class:"form-group"},me={class:"form-group"},ue={class:"form-group"},ce={class:"form-actions"},he=["disabled"],pe={key:0,class:"button-content"},ge={key:1,class:"button-content"},fe=["disabled"];function De(a,e,c,v,t,u){return l(),o("div",I,[e[47]||(e[47]=s("div",{class:"header"},[s("h1",{class:"title"},"Teacher Enrollment"),s("p",{class:"subtitle"},"Add new teacher to the system")],-1)),s("div",q,[e[46]||(e[46]=s("h2",{class:"form-title"},"Teacher Information",-1)),s("div",U,[e[26]||(e[26]=s("h3",{class:"section-title"},"Personal Details",-1)),s("div",w,[s("div",A,[e[20]||(e[20]=s("label",null,"First Name",-1)),i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>t.teacherData.firstName=r),class:"input",placeholder:"Enter first name",required:""},null,512),[[n,t.teacherData.firstName]]),t.errors.firstName?(l(),o("span",S,d(t.errors.firstName),1)):m("",!0)]),s("div",B,[e[21]||(e[21]=s("label",null,"Middle Name",-1)),i(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.teacherData.middleName=r),class:"input",placeholder:"Enter middle name"},null,512),[[n,t.teacherData.middleName]])]),s("div",P,[e[22]||(e[22]=s("label",null,"Last Name",-1)),i(s("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>t.teacherData.lastName=r),class:"input",placeholder:"Enter last name",required:""},null,512),[[n,t.teacherData.lastName]]),t.errors.lastName?(l(),o("span",T,d(t.errors.lastName),1)):m("",!0)]),s("div",L,[e[24]||(e[24]=s("label",null,"Gender",-1)),i(s("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>t.teacherData.gender=r),class:"picker",required:""},e[23]||(e[23]=[s("option",{value:""},"Select Gender",-1),s("option",{value:"Male"},"Male",-1),s("option",{value:"Female"},"Female",-1),s("option",{value:"Other"},"Other",-1)]),512),[[D,t.teacherData.gender]]),t.errors.gender?(l(),o("span",x,d(t.errors.gender),1)):m("",!0)]),s("div",j,[e[25]||(e[25]=s("label",null,"Date of Birth",-1)),i(s("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>t.teacherData.dob=r),type:"date",class:"input",required:""},null,512),[[n,t.teacherData.dob]]),t.errors.dob?(l(),o("span",G,d(t.errors.dob),1)):m("",!0)])])]),s("div",H,[e[30]||(e[30]=s("h3",{class:"section-title"},"Contact Information",-1)),s("div",R,[s("div",O,[e[27]||(e[27]=s("label",null,"Email",-1)),i(s("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>t.teacherData.email=r),type:"email",class:"input",placeholder:"Enter email",required:""},null,512),[[n,t.teacherData.email]]),t.errors.email?(l(),o("span",J,d(t.errors.email),1)):m("",!0)]),s("div",z,[e[28]||(e[28]=s("label",null,"Mobile",-1)),i(s("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>t.teacherData.mobile=r),class:"input",placeholder:"Enter mobile number",required:""},null,512),[[n,t.teacherData.mobile]]),t.errors.mobile?(l(),o("span",Z,d(t.errors.mobile),1)):m("",!0)]),s("div",K,[e[29]||(e[29]=s("label",null,"Address",-1)),i(s("textarea",{"onUpdate:modelValue":e[7]||(e[7]=r=>t.teacherData.address=r),class:"input textarea",placeholder:"Enter address"},null,512),[[n,t.teacherData.address]])])])]),s("div",Q,[e[38]||(e[38]=s("h3",{class:"section-title"},"School Information",-1)),s("div",W,[s("div",X,[e[32]||(e[32]=s("label",null,"Class / Program",-1)),i(s("select",{"onUpdate:modelValue":e[8]||(e[8]=r=>t.teacherData.className=r),class:"picker",onChange:e[9]||(e[9]=(...r)=>u.onClassChange&&u.onClassChange(...r))},[e[31]||(e[31]=s("option",{value:null},"Select Class / Program",-1)),(l(!0),o(b,null,N(t.classes,r=>(l(),o("option",{key:r,value:r},d(r),9,Y))),128))],544),[[D,t.teacherData.className]]),t.errors.className?(l(),o("span",_,d(t.errors.className),1)):m("",!0)]),s("div",$,[e[34]||(e[34]=s("label",null,"Division / Student Group",-1)),i(s("select",{"onUpdate:modelValue":e[10]||(e[10]=r=>t.teacherData.divisionName=r),class:"picker",disabled:!t.teacherData.className},[e[33]||(e[33]=s("option",{value:null},"Select Division / Student Group",-1)),(l(!0),o(b,null,N(t.divisions,r=>(l(),o("option",{key:r,value:r},d(r),9,se))),128))],8,ee),[[D,t.teacherData.divisionName]]),t.errors.divisionName?(l(),o("span",te,d(t.errors.divisionName),1)):m("",!0)]),s("div",re,[e[35]||(e[35]=s("label",null,"Designation",-1)),i(s("input",{"onUpdate:modelValue":e[11]||(e[11]=r=>t.teacherData.designation=r),class:"input",placeholder:"Enter designation"},null,512),[[n,t.teacherData.designation]])]),s("div",ae,[e[36]||(e[36]=s("label",null,"Date of Joining",-1)),i(s("input",{"onUpdate:modelValue":e[12]||(e[12]=r=>t.teacherData.doj=r),type:"date",class:"input"},null,512),[[n,t.teacherData.doj]])]),s("div",ie,[e[37]||(e[37]=s("label",null,"Attendance Device ID (Biometric/RF tag ID)",-1)),i(s("input",{"onUpdate:modelValue":e[13]||(e[13]=r=>t.teacherData.attendanceDeviceId=r),class:"input",placeholder:"Enter attendance device ID"},null,512),[[n,t.teacherData.attendanceDeviceId]])])])]),s("div",oe,[e[43]||(e[43]=s("h3",{class:"section-title"},"Bank Details (Optional)",-1)),s("div",le,[s("div",ne,[e[39]||(e[39]=s("label",null,"Bank Name",-1)),i(s("input",{"onUpdate:modelValue":e[14]||(e[14]=r=>t.teacherData.bankName=r),class:"input",placeholder:"Enter bank name"},null,512),[[n,t.teacherData.bankName]])]),s("div",de,[e[40]||(e[40]=s("label",null,"Account Number",-1)),i(s("input",{"onUpdate:modelValue":e[15]||(e[15]=r=>t.teacherData.accountNumber=r),class:"input",placeholder:"Enter account number"},null,512),[[n,t.teacherData.accountNumber]])]),s("div",me,[e[41]||(e[41]=s("label",null,"IFSC Code",-1)),i(s("input",{"onUpdate:modelValue":e[16]||(e[16]=r=>t.teacherData.ifscCode=r),class:"input",placeholder:"Enter IFSC code"},null,512),[[n,t.teacherData.ifscCode]])]),s("div",ue,[e[42]||(e[42]=s("label",null,"PAN Number",-1)),i(s("input",{"onUpdate:modelValue":e[17]||(e[17]=r=>t.teacherData.panNumber=r),class:"input",placeholder:"Enter PAN number"},null,512),[[n,t.teacherData.panNumber]])])])]),s("div",ce,[s("button",{class:"enroll-button",onClick:e[18]||(e[18]=(...r)=>u.validateAndSubmit&&u.validateAndSubmit(...r)),disabled:t.isLoading},[t.isLoading?(l(),o("span",pe,e[44]||(e[44]=[s("span",{class:"spinner"},null,-1),C(" Processing... ")]))):(l(),o("span",ge,e[45]||(e[45]=[s("svg",{class:"icon",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})],-1),C(" Enroll Teacher ")])))],8,he),s("button",{class:"reset-button",onClick:e[19]||(e[19]=(...r)=>u.resetForm&&u.resetForm(...r)),disabled:t.isLoading}," Reset Form ",8,fe)]),t.message?(l(),o("div",{key:0,class:M(["message",t.message.type])},d(t.message.text),3)):m("",!0)])])}const ke=V(F,[["render",De]]);export{ke as default};
