var V=(M,u,a)=>new Promise((d,t)=>{var h=r=>{try{l(a.next(r))}catch(c){t(c)}},p=r=>{try{l(a.throw(r))}catch(c){t(c)}},l=r=>r.done?d(r.value):Promise.resolve(r.value).then(h,p);l((a=a.apply(M,u)).next())});import{_ as S,r as f,c as j,a as n,b as e,d as z,e as x,w as m,f as _,o as i,g as L,h as b,n as C,t as B,i as P,u as y,s as v}from"./index-wTIAmW9H.js";const E={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4"},I={class:"w-full max-w-md"},A={class:"space-y-2"},N={class:"relative"},D={class:"space-y-2"},H={class:"flex items-center justify-between"},q={class:"relative"},F={class:"absolute inset-y-0 right-0 pr-3 flex items-center"},U={class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},O={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},T={key:0,class:"bg-red-50 border border-red-200 rounded-md p-4 transition-all duration-300"},W={class:"flex items-start"},Y={class:"flex-1"},G={class:"text-red-700 text-sm"},K={key:0,class:"mt-2 text-xs text-red-600"},Q={key:0},R={key:1},X={__name:"Login",setup(M){const u=f(""),a=f(""),d=f(!1),t=f(""),h=j(()=>t.value.toLowerCase().includes("permission")||t.value.toLowerCase().includes("administrator")||t.value.toLowerCase().includes("access denied")||t.value.toLowerCase().includes("role")),p=()=>{d.value=!d.value},l=()=>{t.value&&(t.value="")},r=c=>V(this,null,function*(){var s;if(t.value="",!u.value||!a.value){t.value="Please fill in all fields";return}try{const o=new FormData(c.target);yield v.login.submit({email:o.get("username"),password:o.get("password")})}catch(o){if(o.message&&o.message.includes("PermissionError"))t.value="Administrator privileges required. Your account does not have access to the admin portal.";else if(o.message&&o.message.includes("AuthenticationError"))t.value="Invalid username or password. Please check your credentials.";else if(o.message)try{const g=JSON.parse(o.message),w=JSON.parse(((s=g._server_messages)==null?void 0:s[0])||"{}");t.value=w.message||"Login failed. Please try again."}catch(g){t.value=o.message||"Login failed. Please try again."}else t.value="Login failed. Please check your credentials and try again.";a.value=""}});return(c,s)=>{const o=_("Input"),g=_("Button"),w=_("Card");return i(),n("div",E,[e("div",I,[s[12]||(s[12]=z('<div class="text-center mb-8" data-v-d6723fc9><div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4" data-v-d6723fc9><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d6723fc9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" data-v-d6723fc9></path></svg></div><h1 class="text-2xl font-bold text-gray-900 mb-2" data-v-d6723fc9>Admin Portal</h1><p class="text-gray-600" data-v-d6723fc9>Sign in to manage your school system</p></div>',1)),x(w,{class:"w-full shadow-lg border-0"},{title:m(()=>s[2]||(s[2]=[e("div",{class:"text-center"},[e("h2",{class:"text-xl font-semibold text-gray-800"},"Welcome Back"),e("p",{class:"text-sm text-gray-600 mt-1"},"Enter your credentials to continue")],-1)])),footer:m(()=>s[11]||(s[11]=[e("div",{class:"text-center text-sm text-gray-500 pt-4 border-t"},[e("p",null,"Having trouble signing in? Contact system administrator")],-1)])),default:m(()=>[e("form",{class:"space-y-4",onSubmit:L(r,["prevent"])},[e("div",A,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700"},[b(" Username "),e("span",{class:"text-red-500 ml-1"},"*")],-1)),e("div",N,[s[3]||(s[3]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),x(o,{required:"",name:"username",type:"text",placeholder:"Enter your username",class:C(["pl-10 w-full pr-10",{"border-red-300 focus:border-red-500 focus:ring-red-200":t.value,"border-gray-300 focus:border-blue-500 focus:ring-blue-200":!t.value}]),autocomplete:"username",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=k=>u.value=k),onInput:l,onFocus:l},null,8,["class","modelValue"])])]),e("div",D,[e("div",H,[s[5]||(s[5]=e("label",{class:"block text-sm font-medium text-gray-700"},[b(" Password "),e("span",{class:"text-red-500 ml-1"},"*")],-1)),e("button",{type:"button",onClick:p,class:"text-sm text-blue-600 hover:text-blue-500 font-medium"},B(d.value?"Hide":"Show"),1)]),e("div",q,[s[6]||(s[6]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),x(o,{required:"",name:"password",type:d.value?"text":"password",placeholder:"Enter your password",class:C(["pl-10 w-full pr-10",{"border-red-300 focus:border-red-500 focus:ring-red-200":t.value,"border-gray-300 focus:border-blue-500 focus:ring-blue-200":!t.value}]),autocomplete:"current-password",modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=k=>a.value=k),onInput:l,onFocus:l},null,8,["type","class","modelValue"]),e("div",F,[e("button",{type:"button",onClick:p,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},[(i(),n("svg",U,[d.value?(i(),n("path",J)):(i(),n("path",O))]))])])])]),t.value?(i(),n("div",T,[e("div",W,[s[9]||(s[9]=e("svg",{class:"w-5 h-5 text-red-400 mr-3 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",Y,[s[8]||(s[8]=e("h3",{class:"text-red-800 font-medium text-sm mb-1"},"Access Denied",-1)),e("p",G,B(t.value),1),h.value?(i(),n("div",K,s[7]||(s[7]=[e("p",null,[b("This portal requires "),e("strong",null,"Administrator"),b(" privileges.")],-1),e("p",{class:"mt-1"},"Please contact your system administrator if you need access.",-1)]))):P("",!0)])])])):P("",!0),x(g,{loading:y(v).login.loading,variant:"solid",class:C(["w-full bg-blue-600 hover:bg-blue-700 text-white py-2.5 transition-colors",{"bg-red-600 hover:bg-red-700":t.value&&!y(v).login.loading,"bg-blue-600 hover:bg-blue-700":!t.value}]),disabled:!u.value||!a.value||y(v).login.loading},{prefix:m(()=>s[10]||(s[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})],-1)])),default:m(()=>[y(v).login.loading?(i(),n("span",Q,"Signing In...")):(i(),n("span",R,"Sign In"))]),_:1},8,["loading","disabled","class"])],32)]),_:1}),s[13]||(s[13]=e("div",{class:"text-center mt-6"},[e("p",{class:"text-xs text-gray-500"},"School Management System v1.0")],-1))])])}}},ee=S(X,[["__scopeId","data-v-d6723fc9"]]);export{ee as default};
