import{_ as H,I as V,r as v,y as C,j as G,a as t,b as a,i as u,t as m,z as d,C as c,A,F as I,l as F,h as w,n as O,o as n}from"./index-DaBUP9Lm.js";/* empty css             */const J={setup(){const l=V({firstName:"",middleName:"",lastName:"",gender:"",mobile:"",email:"",dob:"",doj:"",panNumber:"",bankName:"",accountNumber:"",ifscCode:"",address:"",className:null,divisionName:null,attendanceDeviceId:""}),e=v([]),f=v([]),s=v(!1),h=v(null),i=V({}),o=v(!1),b=v(!1),N=v(""),p=v(""),M=C({url:"school.al_ummah.api3.get_classes",params:{values:{}},onSuccess:r=>{e.value=Array.isArray(r)?r:[],console.log("Classes loaded:",e.value)},onError:r=>{console.error("Error fetching classes:",r),e.value=[]}}),k=C({url:"school.al_ummah.api3.get_divisions1",params:{values:{classId:l.className}},onSuccess:r=>{f.value=Array.isArray(r)?r:[],console.log("Divisions loaded:",f.value)},onError:r=>{console.error("Error fetching divisions:",r),f.value=[]}}),y=C({url:"school.al_ummah.api3.enroll_single_instructor",params:{teacher:{"First Name":l.firstName,"Middle Name":l.middleName,"Last Name":l.lastName,Gender:l.gender,Mobile:l.mobile,Email:l.email,"Date of Birth":l.dob,"Date of Joining":l.doj,"PAN Number":l.panNumber,"Bank Name":l.bankName,"Bank A/C No.":l.accountNumber,"IFSC Code":l.ifscCode,"Current Address":l.address,Class:l.className||"",Division:l.divisionName||"","Attendance Device ID (Biometric/RF tag ID)":l.attendanceDeviceId}},onSuccess:r=>{s.value=!1,b.value=!0,r&&r.message?p.value=r.message:p.value=`Teacher ${l.firstName} ${l.lastName} has been successfully enrolled.`,o.value=!0},onError:r=>{s.value=!1,b.value=!1,r.messages&&r.messages.length>0?N.value=r.messages[0]:r.message?N.value=r.message:N.value="An unexpected error occurred while enrolling the teacher. Please try again.",o.value=!0}});G(()=>{M.reload()});function q(){l.divisionName=null,i.divisionName="",l.className?(k.update({params:{values:{classId:l.className}}}),k.reload()):f.value=[]}function R(){Object.assign(i,{});let r=!0;return l.firstName.trim()||(i.firstName="First name is required",r=!1),l.lastName.trim()||(i.lastName="Last name is required",r=!1),l.gender||(i.gender="Gender is required",r=!1),l.dob?S(l.dob)||(i.dob="Date of birth cannot be in the future",r=!1):(i.dob="Date of birth is required",r=!1),l.doj?S(l.doj)||(i.doj="Date of joining cannot be in the future",r=!1):(i.doj="Date of joining is required",r=!1),l.email.trim()?j(l.email)||(i.email="Please enter a valid email",r=!1):(i.email="Email is required",r=!1),l.mobile.trim()?B(l.mobile)||(i.mobile="Please enter a valid mobile number",r=!1):(i.mobile="Mobile number is required",r=!1),r}function j(r){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)}function B(r){return/^[0-9]{10,15}$/.test(r)}function S(r){const g=new Date(r),D=new Date;return D.setHours(0,0,0,0),g.setHours(0,0,0,0),g<=D}function _(){const r=new Date,g=r.getFullYear(),D=String(r.getMonth()+1).padStart(2,"0"),P=String(r.getDate()).padStart(2,"0");return`${g}-${D}-${P}`}function T(){R()&&U()}function U(){s.value=!0,y.update({params:{teacher:{"First Name":l.firstName,"Middle Name":l.middleName,"Last Name":l.lastName,Gender:l.gender,Mobile:l.mobile,Email:l.email,"Date of Birth":l.dob,"Date of Joining":l.doj,"PAN Number":l.panNumber,"Bank Name":l.bankName,"Bank A/C No.":l.accountNumber,"IFSC Code":l.ifscCode,"Current Address":l.address,Class:l.className||"",Division:l.divisionName||"","Attendance Device ID (Biometric/RF tag ID)":l.attendanceDeviceId}}}),y.submit()}function E(){Object.assign(l,{firstName:"",middleName:"",lastName:"",gender:"",mobile:"",email:"",dob:"",doj:"",panNumber:"",bankName:"",accountNumber:"",ifscCode:"",address:"",className:null,divisionName:null,attendanceDeviceId:""}),f.value=[],Object.assign(i,{}),L()}function x(){E(),o.value=!1,b.value=!1}function L(r,g="info"){h.value=null}return{teacherData:l,classes:e,divisions:f,isLoading:s,message:h,errors:i,classesResource:M,divisionsResource:k,enrollTeacherResource:y,showResultMessage:o,submitSuccess:b,errorMessage:N,successMessage:p,onClassChange:q,validateAndSubmit:T,resetForm:E,resetAndClose:x,getTodayDate:_}}},z={class:"enrollment-container"},Y={key:0,class:"loading-overlay"},Z={key:1,class:"modal-overlay"},K={class:"result-modal"},Q={key:0,class:"success-icon"},W={key:1,class:"error-icon"},X={class:"result-title"},$={class:"result-description"},ee={class:"modal-actions"},se={class:"form-card"},ae={class:"form-section"},oe={class:"form-grid"},le={class:"form-group required"},re={key:0,class:"error-message"},te={class:"form-group"},ne={class:"form-group required"},ie={key:0,class:"error-message"},de={class:"form-group required"},me={key:0,class:"error-message"},ue={class:"form-group required"},ce=["max"],ve={key:0,class:"error-message"},fe={class:"form-section"},ge={class:"form-grid"},be={class:"form-group required"},Ne={key:0,class:"error-message"},De={class:"form-group required"},he={key:0,class:"error-message"},pe={class:"form-group"},ke={class:"form-section"},ye={class:"form-grid"},Ce={class:"form-group"},Ae=["disabled"],Me=["value"],Se={key:0,class:"error-message"},Ee={class:"form-group"},Ve=["disabled"],Ie=["value"],Fe={key:0,class:"error-message"},we={class:"form-group required"},qe={key:0,class:"error-message"},Re={class:"form-group"},je={class:"form-section"},Be={class:"form-grid"},_e={class:"form-group"},Te={class:"form-group"},Ue={class:"form-group"},xe={class:"form-group"},Le={class:"form-actions"},Pe=["disabled"],He={key:0,class:"button-content"},Ge={key:1,class:"button-content"},Oe=["disabled"];function Je(l,e,f,s,h,i){return n(),t("div",z,[s.isLoading||s.enrollTeacherResource.loading?(n(),t("div",Y,e[22]||(e[22]=[a("div",{class:"loading-modal"},[a("div",{class:"loading-spinner"}),a("h3",{class:"loading-title"},"Enrolling Teacher..."),a("p",{class:"loading-description"},"Please wait while we process the teacher information.")],-1)]))):u("",!0),s.showResultMessage?(n(),t("div",Z,[a("div",K,[s.submitSuccess?(n(),t("div",Q,e[23]||(e[23]=[a("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)]))):(n(),t("div",W,e[24]||(e[24]=[a("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"})],-1)]))),a("h3",X,m(s.submitSuccess?"Teacher Enrolled Successfully!":"Enrollment Failed"),1),a("p",$,m(s.submitSuccess?s.successMessage:s.errorMessage),1),a("div",ee,[s.submitSuccess?(n(),t("button",{key:0,onClick:e[0]||(e[0]=(...o)=>s.resetAndClose&&s.resetAndClose(...o)),class:"success-button"}," Add Another Teacher ")):(n(),t("button",{key:1,onClick:e[1]||(e[1]=o=>s.showResultMessage=!1),class:"primary-button"}," Try Again ")),s.submitSuccess?(n(),t("button",{key:2,onClick:e[2]||(e[2]=o=>s.showResultMessage=!1),class:"secondary-button"}," Close ")):u("",!0)])])])):u("",!0),e[51]||(e[51]=a("div",{class:"header"},[a("h1",{class:"title"},"Teacher Enrollment"),a("p",{class:"subtitle"},"Add new teacher to the system")],-1)),a("div",se,[e[50]||(e[50]=a("h2",{class:"form-title"},"Teacher Information",-1)),a("div",ae,[e[31]||(e[31]=a("h3",{class:"section-title"},"Personal Details",-1)),a("div",oe,[a("div",le,[e[25]||(e[25]=a("label",null,"First Name",-1)),d(a("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.teacherData.firstName=o),class:"input",placeholder:"Enter first name",required:""},null,512),[[c,s.teacherData.firstName]]),s.errors.firstName?(n(),t("span",re,m(s.errors.firstName),1)):u("",!0)]),a("div",te,[e[26]||(e[26]=a("label",null,"Middle Name",-1)),d(a("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.teacherData.middleName=o),class:"input",placeholder:"Enter middle name"},null,512),[[c,s.teacherData.middleName]])]),a("div",ne,[e[27]||(e[27]=a("label",null,"Last Name",-1)),d(a("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.teacherData.lastName=o),class:"input",placeholder:"Enter last name",required:""},null,512),[[c,s.teacherData.lastName]]),s.errors.lastName?(n(),t("span",ie,m(s.errors.lastName),1)):u("",!0)]),a("div",de,[e[29]||(e[29]=a("label",null,"Gender",-1)),d(a("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.teacherData.gender=o),class:"picker",required:""},e[28]||(e[28]=[a("option",{value:""},"Select Gender",-1),a("option",{value:"Male"},"Male",-1),a("option",{value:"Female"},"Female",-1),a("option",{value:"Other"},"Other",-1)]),512),[[A,s.teacherData.gender]]),s.errors.gender?(n(),t("span",me,m(s.errors.gender),1)):u("",!0)]),a("div",ue,[e[30]||(e[30]=a("label",null,"Date of Birth",-1)),d(a("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.teacherData.dob=o),type:"date",class:"input",max:s.getTodayDate(),required:""},null,8,ce),[[c,s.teacherData.dob]]),s.errors.dob?(n(),t("span",ve,m(s.errors.dob),1)):u("",!0)])])]),a("div",fe,[e[35]||(e[35]=a("h3",{class:"section-title"},"Contact Information",-1)),a("div",ge,[a("div",be,[e[32]||(e[32]=a("label",null,"Email",-1)),d(a("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.teacherData.email=o),type:"email",class:"input",placeholder:"Enter email",required:""},null,512),[[c,s.teacherData.email]]),s.errors.email?(n(),t("span",Ne,m(s.errors.email),1)):u("",!0)]),a("div",De,[e[33]||(e[33]=a("label",null,"Mobile",-1)),d(a("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>s.teacherData.mobile=o),class:"input",placeholder:"Enter mobile number",required:""},null,512),[[c,s.teacherData.mobile]]),s.errors.mobile?(n(),t("span",he,m(s.errors.mobile),1)):u("",!0)]),a("div",pe,[e[34]||(e[34]=a("label",null,"Address",-1)),d(a("textarea",{"onUpdate:modelValue":e[10]||(e[10]=o=>s.teacherData.address=o),class:"input textarea",placeholder:"Enter address"},null,512),[[c,s.teacherData.address]])])])]),a("div",ke,[e[42]||(e[42]=a("h3",{class:"section-title"},"School Information",-1)),a("div",ye,[a("div",Ce,[e[37]||(e[37]=a("label",null,"Class / Program",-1)),d(a("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>s.teacherData.className=o),class:"picker",onChange:e[12]||(e[12]=(...o)=>s.onClassChange&&s.onClassChange(...o)),disabled:s.classesResource.loading},[e[36]||(e[36]=a("option",{value:null},"Select Class / Program",-1)),(n(!0),t(I,null,F(s.classes,o=>(n(),t("option",{key:o.name,value:o.name},m(o.name),9,Me))),128))],40,Ae),[[A,s.teacherData.className]]),s.errors.className?(n(),t("span",Se,m(s.errors.className),1)):u("",!0)]),a("div",Ee,[e[39]||(e[39]=a("label",null,"Division / Student Group",-1)),d(a("select",{"onUpdate:modelValue":e[13]||(e[13]=o=>s.teacherData.divisionName=o),class:"picker",disabled:!s.teacherData.className||s.divisionsResource.loading},[e[38]||(e[38]=a("option",{value:null},"Select Division / Student Group",-1)),(n(!0),t(I,null,F(s.divisions,o=>(n(),t("option",{key:o.name,value:o.name},m(o.name),9,Ie))),128))],8,Ve),[[A,s.teacherData.divisionName]]),s.errors.divisionName?(n(),t("span",Fe,m(s.errors.divisionName),1)):u("",!0)]),a("div",we,[e[40]||(e[40]=a("label",null,"Date of Joining",-1)),d(a("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>s.teacherData.doj=o),type:"date",class:"input",required:""},null,512),[[c,s.teacherData.doj]]),s.errors.doj?(n(),t("span",qe,m(s.errors.doj),1)):u("",!0)]),a("div",Re,[e[41]||(e[41]=a("label",null,"Attendance Device ID (Biometric/RF tag ID)",-1)),d(a("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>s.teacherData.attendanceDeviceId=o),class:"input",placeholder:"Enter attendance device ID"},null,512),[[c,s.teacherData.attendanceDeviceId]])])])]),a("div",je,[e[47]||(e[47]=a("h3",{class:"section-title"},"Bank Details (Optional)",-1)),a("div",Be,[a("div",_e,[e[43]||(e[43]=a("label",null,"Bank Name",-1)),d(a("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>s.teacherData.bankName=o),class:"input",placeholder:"Enter bank name"},null,512),[[c,s.teacherData.bankName]])]),a("div",Te,[e[44]||(e[44]=a("label",null,"Account Number",-1)),d(a("input",{"onUpdate:modelValue":e[17]||(e[17]=o=>s.teacherData.accountNumber=o),class:"input",placeholder:"Enter account number"},null,512),[[c,s.teacherData.accountNumber]])]),a("div",Ue,[e[45]||(e[45]=a("label",null,"IFSC Code",-1)),d(a("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>s.teacherData.ifscCode=o),class:"input",placeholder:"Enter IFSC code"},null,512),[[c,s.teacherData.ifscCode]])]),a("div",xe,[e[46]||(e[46]=a("label",null,"PAN Number",-1)),d(a("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>s.teacherData.panNumber=o),class:"input",placeholder:"Enter PAN number"},null,512),[[c,s.teacherData.panNumber]])])])]),a("div",Le,[a("button",{class:"enroll-button",onClick:e[20]||(e[20]=(...o)=>s.validateAndSubmit&&s.validateAndSubmit(...o)),disabled:s.isLoading||s.enrollTeacherResource.loading||s.showResultMessage},[s.isLoading||s.enrollTeacherResource.loading?(n(),t("span",He,e[48]||(e[48]=[a("span",{class:"spinner"},null,-1),w(" Processing... ")]))):(n(),t("span",Ge,e[49]||(e[49]=[a("svg",{class:"icon",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})],-1),w(" Enroll Teacher ")])))],8,Pe),a("button",{class:"reset-button",onClick:e[21]||(e[21]=(...o)=>s.resetForm&&s.resetForm(...o)),disabled:s.isLoading||s.enrollTeacherResource.loading||s.showResultMessage}," Reset Form ",8,Oe)]),s.message&&!s.showResultMessage?(n(),t("div",{key:0,class:O(["message",s.message.type])},m(s.message.text),3)):u("",!0)])])}const Ze=H(J,[["render",Je]]);export{Ze as default};
