var Me=Object.defineProperty,Te=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var re=(_,t,y)=>t in _?Me(_,t,{enumerable:!0,configurable:!0,writable:!0,value:y}):_[t]=y,$=(_,t)=>{for(var y in t||(t={}))Ve.call(t,y)&&re(_,y,t[y]);if(ae)for(var y of ae(t))Ue.call(t,y)&&re(_,y,t[y]);return _},ee=(_,t)=>Te(_,Ae(t));var J=(_,t,y)=>new Promise((l,m)=>{var A=i=>{try{h(y.next(i))}catch(D){m(D)}},r=i=>{try{h(y.throw(i))}catch(D){m(D)}},h=i=>i.done?l(i.value):Promise.resolve(i.value).then(A,r);h((y=y.apply(_,t)).next())});import{_ as Ie,r as w,y as se,j as te,k as Pe,c as d,b as s,t as v,l as F,i as G,n as ie,F as M,h as T,o as u,f as q,g as le,v as Je}from"./index-CN8Igeqz.js";import{v as Le,g as je,u as U,a as L,p as Ge,f as xe,r as Oe}from"./dateUtils-CshPDU0n.js";/* empty css             */const qe={setup(){const _=w([]),t=w(null),y=w(["First Name","Middle Name","Last Name","Full Name","Gender","Mobile","Email","Date of Birth","Date of Joining","PAN Number","Bank Name","Bank A/C No.","IFSC Code","Current Address","Permanent Address","Blood Group","Attendance Device ID (Biometric/RF tag ID)","Qualification (Education)","School/University (Education)"]),l=w(null),m=w([]),A=w([]),r=w([]),h=w([]),i=w([]),D=w([]),C=w([]),j=w({total_processed:0,successful:0,failed:0}),S=w(!1),H=w(!1),Q=w("success"),z=w(""),K=w(""),ce=se(()=>m.value.filter(e=>I(e)).length),de=se(()=>m.value.filter(e=>e.className&&e.divisionName).length),ue=se(()=>m.value.filter(e=>!I(e)).length),oe=te({url:"school.al_ummah.api4.get_classes",params:{values:{}},onSuccess:e=>{r.value=Array.isArray(e)?e:[],console.log("Classes loaded:",r.value),r.value.length||b("No classes available","error")},onError:e=>{var o;console.error("Error fetching classes:",e),r.value=[],b(`Error fetching classes: ${((o=e.messages)==null?void 0:o[0])||"Unknown error"}`,"error")}}),W=te({url:"school.al_ummah.api4.get_divisions1",params:{values:{classId:""}},onSuccess:e=>Array.isArray(e)?e:[],onError:e=>{var o;return console.error("Error fetching divisions:",e),b(`Error fetching divisions: ${((o=e.messages)==null?void 0:o[0])||"Unknown error"}`,"error"),[]}}),X=te({url:"school.al_ummah.api4.bulk_enroll_instructors",method:"POST",onSuccess:e=>{console.log("Bulk enrollment successful:",e),S.value=!1,e&&e.success?(D.value=e.enrolled_instructors||[],C.value=e.failed_enrollments||[],j.value=e.summary||{total_processed:e.enrolled_instructors.length+e.failed_enrollments.length,successful:e.enrolled_instructors.length,failed:e.failed_enrollments.length},be(e.enrolled_instructors,e.failed_enrollments),C.value.length===0?(b(`✅ Successfully enrolled all ${D.value.length} teachers!`,"success"),x("success","Enrollment Complete",`Successfully enrolled all ${D.value.length} teachers!`)):(b(`Completed: ${D.value.length} successful, ${C.value.length} failed.`,"warning"),x("warning","Enrollment Completed with Errors",`Completed with ${D.value.length} successful enrollments and ${C.value.length} failures.`))):b("Bulk enrollment completed with issues","warning")},onError:e=>{var o,n;console.error("Error in bulk enrollment:",e),S.value=!1,b(`Bulk enrollment failed: ${((o=e.messages)==null?void 0:o[0])||e.message||"Unknown error"}`,"error"),x("error","Bulk Enrollment Failed",((n=e.messages)==null?void 0:n[0])||e.message||"Unknown error occurred during bulk enrollment.")}});Pe(()=>{oe.reload()});function me(e){return J(this,null,function*(){const o=m.value[e];if(o.className){o.divisionName=null;try{W.update({params:{values:{classId:o.className}}});const n=yield W.reload();o.divisions=Array.isArray(n)?n:[]}catch(n){console.error("Error fetching divisions:",n),b(`Error fetching divisions for ${o.className}`,"error")}}else o.divisionName=null,o.divisions=[]})}function fe(e){let o="";for(;e>=0;)o=String.fromCharCode(65+e%26)+o,e=Math.floor(e/26)-1;return o}function ve(){return J(this,null,function*(){const e=document.createElement("input");e.type="file",e.accept=".xlsx,.xls",e.onchange=o=>J(this,null,function*(){const n=o.target.files[0];if(n){t.value=n,b(null),D.value=[],C.value=[],j.value={total_processed:0,successful:0,failed:0};try{const{data:c,headers:k}=yield Ee(n);m.value=c.slice(0,100).map(a=>ee($({},a),{className:null,divisionName:null,divisions:[],_status:null,_error:null,_touched:!1})),A.value=k,_.value=k.map((a,f)=>({type:null,column:U.encode_col(f)})),he(k,c.slice(0,5))}catch(c){console.error("Error loading preview:",c),b("Error loading file preview","error")}}}),e.click()})}function he(e,o){const n={"First Name":["first","fname","given","firstname"],"Middle Name":["middle","mname","midname"],"Last Name":["last","lname","surname","family","lastname"],"Full Name":["full name","name","teacher name"],Email:["email","e-mail","mail"],Mobile:["mobile","phone","cell","contact"],"Date of Birth":["dob","birth","birthdate","date of birth"],Gender:["gender","sex"],"Date of Joining":["doj","joining","start date"],"PAN Number":["pan","pan no","pan number"],"Bank Name":["bank","bank name"],"Bank A/C No.":["account","ac no","bank account","account no"],"IFSC Code":["ifsc","code"],"Current Address":["current address","address","present address"],"Permanent Address":["permanent address","home address"],"Blood Group":["blood","blood group"],"Attendance Device ID (Biometric/RF tag ID)":["attendance id","biometric","rfid","device id"],"Qualification (Education)":["qualification","education","degree"],"School/University (Education)":["school","university","institution"]};e.forEach((c,k)=>{if(!c)return;const a=c.toString().toLowerCase();for(const[f,g]of Object.entries(n))if(g.some(p=>a.includes(p))){_.value[k].type=f;break}})}function ge(){t.value=null,m.value=[],A.value=[],_.value=[],h.value=[],i.value=[],D.value=[],C.value=[],j.value={total_processed:0,successful:0,failed:0},b(null)}function I(e){const o=["Mobile","Email","Gender","First Name","Last Name","Attendance Device ID (Biometric/RF tag ID)","Date of Birth","Date of Joining"],n=_.value.map(a=>a.type).filter(a=>a);if(o.filter(a=>!n.includes(a)).length>0)return!1;const k=V(e);for(const a of o){const f=k[a];if(!f||f.toString().trim()==="")return!1;switch(a){case"Mobile":if(f.toString().replace(/\D/g,"").length<10)return!1;break;case"Email":if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.toString().trim()))return!1;break;case"Gender":const E=f.toString().trim().toLowerCase();if(!["male","female","other","m","f","o"].includes(E))return!1;break;case"Date of Birth":if(!L(f,"Date of Birth").isValid)return!1;break;case"Date of Joining":if(!L(f,"Date of Joining").isValid)return!1;break}}return!(e.className&&!e.divisionName)}function pe(e){m.value[e]&&(m.value[e]._touched=!0)}function _e(e){return e._status==="success"?"row-success":e._status==="error"?"row-error":I(e)?"":"row-invalid"}function V(e){const o={"First Name":"","Middle Name":"","Last Name":"","Full Name":"",Gender:"",Mobile:"",Email:"","Date of Birth":"","Date of Joining":"","PAN Number":"","Bank Name":"","Bank A/C No.":"","IFSC Code":"","Current Address":"","Permanent Address":"","Blood Group":"","Attendance Device ID (Biometric/RF tag ID)":"","Qualification (Education)":"","School/University (Education)":"",Class:e.className||"",Division:e.divisionName||""};return _.value.forEach(({type:n,column:c},k)=>{var a;if(n&&o.hasOwnProperty(n))try{const f=U.decode_col(c),g=A.value[f];let p=((a=e[g])==null?void 0:a.toString().trim())||"";if(n==="Date of Birth"||n==="Date of Joining"){const E=Ge(p);p=E?xe(E):""}o[n]=p}catch(f){console.error(`Error mapping column ${c} for type ${n}:`,f)}}),o}function be(e,o){console.log("Updating row statuses from bulk response..."),console.log("Enrolled teachers:",e),console.log("Failed enrollments:",o),m.value.forEach(n=>{n._status=null,n._error=null}),e.forEach(n=>{console.log("Looking for successful teacher:",n);const c=ke(n);c!==-1?(console.log(`✅ Marking row ${c} as success for teacher: ${n}`),m.value[c]._status="success",m.value[c]._error=null):console.log(`❌ Could not find row for successful teacher: ${n}`)}),o.forEach(n=>{const c=ye(n.instructor_data);c!==-1&&(console.log(`❌ Marking row ${c} as error for teacher:`,n.instructor_data["First Name"]),m.value[c]._status="error",m.value[c]._error=n.error||"Unknown error")})}function ke(e){return m.value.findIndex(o=>{const n=V(o);return`${n["First Name"]} ${n["Middle Name"]} ${n["Last Name"]}`.trim()===e})}function ye(e){return m.value.findIndex(o=>{const n=V(o);return n.Email===e.Email&&n["First Name"]===e["First Name"]&&n["Last Name"]===e["Last Name"]})}function x(e,o,n){Q.value=e,z.value=o,K.value=n,H.value=!0}function De(){H.value=!1,Q.value="success",z.value="",K.value=""}function we(){return J(this,null,function*(){console.log("Enroll button clicked"),D.value=[],C.value=[],j.value={total_processed:0,successful:0,failed:0},S.value=!0,m.value.forEach(a=>{a._status=null,a._error=null});const e=["Mobile","Email","Gender","First Name","Last Name","Attendance Device ID (Biometric/RF tag ID)","Date of Birth","Date of Joining"],o=_.value.map(a=>a.type).filter(a=>a),n=e.filter(a=>!o.includes(a));if(n.length>0){const a=`Please map the following required fields: ${n.join(", ")}`;console.error(a),b(a,"error"),S.value=!1;return}if(!t.value){const a="Please select a file first";console.error(a),b(a,"error"),S.value=!1;return}if(m.value.length===0){b("No data available to enroll","error"),S.value=!1;return}const c=m.value.filter(a=>{const f=V(a),g=f["Date of Birth"]&&f["Date of Birth"].toString().trim()!==""?L(f["Date of Birth"],"Date of Birth"):{isValid:!1,error:"Date of Birth is required"},p=f["Date of Joining"]&&f["Date of Joining"].toString().trim()!==""?L(f["Date of Joining"],"Date of Joining"):{isValid:!1,error:"Date of Joining is required"};return!g.isValid||!p.isValid});if(c.length>0){b(`${c.length} rows have invalid dates. Please correct the dates before enrolling.`,"warning"),c.forEach(a=>{const f=m.value.indexOf(a);if(f!==-1){const g=V(a);let p="";if(!g["Date of Birth"]||g["Date of Birth"].toString().trim()==="")p+="Date of Birth is required. ";else{const E=L(g["Date of Birth"],"Date of Birth");E.isValid||(p+=E.error+" ")}if(!g["Date of Joining"]||g["Date of Joining"].toString().trim()==="")p+="Date of Joining is required. ";else{const E=L(g["Date of Joining"],"Date of Joining");E.isValid||(p+=E.error)}m.value[f]._status="error",m.value[f]._error=p.trim()}}),S.value=!1;return}const k=m.value.filter(a=>!I(a));if(k.length>0){b(`${k.length} rows have class selected but no division. Please either select a division or remove the class assignment.`,"warning"),k.forEach(a=>a._touched=!0),S.value=!1;return}try{b("Starting bulk enrollment process...","info");const a=m.value.filter(g=>I(g));if(a.length===0){b("No valid rows to enroll. Please check your data and mappings.","warning"),S.value=!1;return}console.log(`Starting bulk enrollment for ${a.length} teachers...`);const f=a.map(g=>V(g));yield X.submit({teachers:f,mappings:Object.fromEntries(_.value.filter(g=>g.type).map(g=>[g.type,g.column]))})}catch(a){console.error("Bulk enrollment process error:",a),b(`Bulk enrollment process failed: ${a.message||"Unknown error"}`,"error"),x("error","Bulk Enrollment Process Failed",a.message||"Unknown error occurred during enrollment."),S.value=!1}})}function Ee(e){return new Promise((o,n)=>{const c=new FileReader;c.onload=k=>{try{const a=new Uint8Array(k.target.result),f=Oe(a,{type:"array",sheetStubs:!0}),g=f.Sheets[f.SheetNames[0]],p=U.decode_range(g["!ref"]);let E=0;for(let N=p.s.r;N<=p.e.r;++N){let B=!1;for(let P=p.s.c;P<=p.e.c;++P){const R=g[U.encode_cell({c:P,r:N})];if(R&&R.v!==void 0&&R.v!==null&&R.v!==""){B=!0;break}}if(B){E=N;break}}const O=[];for(let N=p.s.c;N<=p.e.c;++N){const B=g[U.encode_cell({c:N,r:E})];O.push(B?String(B.v).trim():`Column ${N+1}`)}const Y=[];for(let N=E+1;N<=p.e.r;++N){const B={};let P=!1;for(let R=p.s.c;R<=p.e.c;++R){const Z=g[U.encode_cell({c:R,r:N})],ne=O[R-p.s.c];B[ne]=Z?Z.v===void 0?"":Z.v:"",B[ne]!==""&&(P=!0)}P&&Y.push(B)}o({data:Y,headers:O})}catch(a){n(a)}},c.onerror=k=>n(k),c.readAsArrayBuffer(e)})}function Ne(e,o,n){_.value[e]=ee($({},_.value[e]),{[o]:n,column:U.encode_col(e)})}function Ce(e){m.value.splice(e,1),h.value=h.value.filter(o=>o.rowIndex!==e),i.value=i.value.filter(o=>o.rowIndex!==e),b("Row deleted","success")}function b(e,o="info"){l.value=e?{text:e,type:o}:null,e&&o!=="error"&&o!=="success"&&setTimeout(()=>b(null),5e3)}function Se(e,o,n){const k=m.value[e][o]||"";if(k!==n){const a={rowIndex:e,column:o,oldValue:k,newValue:n,timestamp:new Date().toISOString()};h.value.push(a),i.value.push(a),console.log("Cell edit recorded:",a),Be()}}function Fe(e,o){let n;return function(...c){clearTimeout(n),n=setTimeout(()=>e.apply(this,c),o)}}const Be=Fe(Re,500);function Re(){return J(this,null,function*(){if(i.value.length!==0)try{const e=i.value[i.value.length-1],o=m.value[e.rowIndex],n=V(o);yield X.submit({teachers:[n],mappings:Object.fromEntries(_.value.filter(c=>c.type).map(c=>[c.type,c.column]))}),i.value=[]}catch(e){console.error("Error sending cell update:",e),b(`Failed to save cell update: ${e.message||"Unknown error"}`,"error")}})}return{mappings:_,fileSelected:t,options:y,message:l,previewData:m,previewHeaders:A,classes:r,editHistory:h,pendingEdits:i,enrolledTeachers:D,failedEnrollments:C,enrollmentSummary:j,processing:S,showResultModal:H,resultModalType:Q,resultModalTitle:z,resultModalDescription:K,validRowsCount:ce,classTeachersCount:de,invalidRowsCount:ue,classesResource:oe,divisionsResource:W,enrollTeachersResource:X,onClassChange:me,getExcelColumnLetter:fe,handleFileSelection:ve,removeFile:ge,handleEnrollTeachers:we,updateMapping:Ne,deleteRow:Ce,showMessage:b,handleCellEdit:Se,closeResultModal:De,isRowValid:I,markRowAsTouched:pe,getRowStatusClass:_e,validDate:Le,getTodayDate:je}}},He={class:"enrollment-container"},Qe={class:"scroll-view-content"},ze={class:"form-card"},Ke={class:"form-section"},We={key:0,class:"file-selected"},Xe={class:"button-content"},Ye={class:"enroll-button-section"},Ze=["disabled"],$e={class:"button-content"},es={key:0,class:"spinner"},ss={key:2,class:"summary-section"},ts={class:"summary-stats"},ls={class:"stat-item"},os={class:"stat-value"},ns={class:"stat-item"},as={class:"stat-value valid"},rs={class:"stat-item"},is={class:"stat-value warning"},cs={key:3,class:"success-details"},ds={class:"section-title"},us={class:"results-list"},ms={key:4,class:"error-details"},fs={class:"section-title"},vs={class:"results-list"},hs={class:"error-student"},gs={class:"student-details"},ps={class:"error-text"},_s={key:0,class:"form-card preview-card"},bs={class:"summary-stats"},ks={class:"stat-item"},ys={class:"stat-value"},Ds={class:"stat-item"},ws={class:"stat-value valid"},Es={class:"stat-item"},Ns={class:"stat-value info"},Cs={class:"stat-item"},Ss={class:"stat-value warning"},Fs={class:"table-container-wrapper"},Bs={class:"table-scroll-container"},Rs={class:"table-container"},Ms={class:"preview-table"},Ts=["onUpdate:modelValue","onChange"],As=["value"],Vs={class:"header-label"},Us={class:"actions"},Is=["onClick"],Ps={class:"status-cell"},Js={key:0,class:"status-badge success"},Ls={key:1,class:"status-badge error"},js={key:2,class:"status-badge warning"},Gs={key:3,class:"status-badge pending"},xs={key:4,class:"error-tooltip"},Os=["onUpdate:modelValue","onChange","disabled"],qs=["value"],Hs=["onUpdate:modelValue","disabled"],Qs=["value"],zs={key:0,class:"field-hint"},Ks=["onUpdate:modelValue","onInput","onBlur","placeholder"],Ws={key:1,class:"loading-overlay"},Xs={key:2,class:"modal-overlay"},Ys={class:"result-modal"},Zs={key:0,class:"success-icon"},$s={key:1,class:"error-icon"},et={class:"result-title"},st={class:"result-description"},tt={class:"modal-actions"};function lt(_,t,y,l,m,A){return u(),d("div",He,[s("div",Qe,[t[31]||(t[31]=s("div",{class:"header"},[s("h1",{class:"title"},"Teacher Enrollment")],-1)),s("div",ze,[t[9]||(t[9]=s("h2",{class:"form-title"},"Upload Teacher Data",-1)),s("div",Ke,[l.fileSelected?(u(),d("div",We,[s("span",null,"Selected file: "+v(l.fileSelected.name),1),s("button",{onClick:t[0]||(t[0]=(...r)=>l.removeFile&&l.removeFile(...r)),class:"remove-file-btn"},"×")])):F("",!0),s("button",{class:"secondary-button",onClick:t[1]||(t[1]=(...r)=>l.handleFileSelection&&l.handleFileSelection(...r))},[s("span",Xe,v(l.fileSelected?"Change File":"Upload File 📤"),1)]),s("div",Ye,[s("button",{class:"enroll-button",onClick:t[2]||(t[2]=(...r)=>l.handleEnrollTeachers&&l.handleEnrollTeachers(...r)),disabled:l.processing||!l.fileSelected},[s("span",$e,[l.processing?(u(),d("span",es)):F("",!0),G(" "+v(l.processing?"Processing...":"Enroll Teachers ✅"),1)])],8,Ze)]),l.message?(u(),d("div",{key:1,class:ie(["message",l.message.type])},v(l.message.text),3)):F("",!0),l.enrollmentSummary.total_processed>0?(u(),d("div",ss,[t[8]||(t[8]=s("h4",{class:"section-title"},"Enrollment Summary",-1)),s("div",ts,[s("div",ls,[t[5]||(t[5]=s("span",{class:"stat-label"},"Total Processed",-1)),s("span",os,v(l.enrollmentSummary.total_processed),1)]),s("div",ns,[t[6]||(t[6]=s("span",{class:"stat-label"},"Successful",-1)),s("span",as,v(l.enrollmentSummary.successful),1)]),s("div",rs,[t[7]||(t[7]=s("span",{class:"stat-label"},"Failed",-1)),s("span",is,v(l.enrollmentSummary.failed),1)])])])):F("",!0),l.enrolledTeachers.length>0?(u(),d("div",cs,[s("h4",ds,"Successfully Enrolled ("+v(l.enrolledTeachers.length)+")",1),s("div",us,[(u(!0),d(M,null,T(l.enrolledTeachers,(r,h)=>(u(),d("div",{key:h,class:"success-message"}," ✅ "+v(r),1))),128))])])):F("",!0),l.failedEnrollments.length>0?(u(),d("div",ms,[s("h4",fs,"Enrollment Errors ("+v(l.failedEnrollments.length)+")",1),s("div",vs,[(u(!0),d(M,null,T(l.failedEnrollments,(r,h)=>(u(),d("div",{key:h,class:"error-message"},[s("div",hs,[s("strong",null,v(r.instructor_data["First Name"])+" "+v(r.instructor_data["Middle Name"])+" "+v(r.instructor_data["Last Name"]),1),s("span",gs,"(Email: "+v(r.instructor_data.Email)+", Mobile: "+v(r.instructor_data.Mobile)+")",1)]),s("div",ps,"❌ "+v(r.error),1)]))),128))])])):F("",!0)])]),l.fileSelected&&l.previewData.length>0?(u(),d("div",_s,[t[26]||(t[26]=s("h2",{class:"form-title"},"File Preview (First 100 rows)",-1)),s("div",bs,[s("div",ks,[t[10]||(t[10]=s("span",{class:"stat-label"},"Total Rows:",-1)),s("span",ys,v(l.previewData.length),1)]),s("div",Ds,[t[11]||(t[11]=s("span",{class:"stat-label"},"Ready to Enroll:",-1)),s("span",ws,v(l.validRowsCount),1)]),s("div",Es,[t[12]||(t[12]=s("span",{class:"stat-label"},"Class Teachers:",-1)),s("span",Ns,v(l.classTeachersCount),1)]),s("div",Cs,[t[13]||(t[13]=s("span",{class:"stat-label"},"Need Attention:",-1)),s("span",Ss,v(l.invalidRowsCount),1)])]),t[27]||(t[27]=s("div",{class:"instructions"},[s("p",null,[G("💡 "),s("strong",null,"Note:"),G(" Class and Division are optional fields. Only assign them for teachers who are class teachers.")])],-1)),s("div",Fs,[s("div",Bs,[s("div",Rs,[s("table",Ms,[s("thead",null,[s("tr",null,[t[14]||(t[14]=s("th",{class:"actions"},"Actions",-1)),t[15]||(t[15]=s("th",{class:"status-cell"},"Status",-1)),t[16]||(t[16]=s("th",null,[G("Class/Program "),s("span",{class:"optional"},"(Optional)")],-1)),t[17]||(t[17]=s("th",null,[G("Division/Student Group "),s("span",{class:"optional"},"(Optional)")],-1)),(u(!0),d(M,null,T(l.previewHeaders,(r,h)=>(u(),d("th",{key:"letter-"+h},v(l.getExcelColumnLetter(h)),1))),128))]),s("tr",null,[t[19]||(t[19]=s("th",{class:"actions"},null,-1)),t[20]||(t[20]=s("th",{class:"status-cell"},null,-1)),t[21]||(t[21]=s("th",null,"Class/Program",-1)),t[22]||(t[22]=s("th",null,"Division/Student Group",-1)),(u(!0),d(M,null,T(l.previewHeaders,(r,h)=>(u(),d("th",{key:"header-"+h},[q(s("select",{"onUpdate:modelValue":i=>l.mappings[h].type=i,class:"table-select",onChange:i=>l.updateMapping(h,"type",i.target.value)},[t[18]||(t[18]=s("option",{value:null},"Select Field",-1)),(u(!0),d(M,null,T(l.options,(i,D)=>(u(),d("option",{key:D,value:i},v(i),9,As))),128))],40,Ts),[[le,l.mappings[h].type]]),s("span",Vs,v(r),1)]))),128))])]),s("tbody",null,[(u(!0),d(M,null,T(l.previewData,(r,h)=>(u(),d("tr",{key:h,class:ie(l.getRowStatusClass(r))},[s("td",Us,[s("button",{onClick:i=>l.deleteRow(h),class:"trash-icon"},t[23]||(t[23]=[s("span",{class:"icon"},"❎",-1)]),8,Is)]),s("td",Ps,[r._status==="success"?(u(),d("span",Js,"✅")):r._status==="error"?(u(),d("span",Ls,"❌")):l.isRowValid(r)?(u(),d("span",Gs,"🔄")):(u(),d("span",js,"⚠️")),r._error?(u(),d("div",xs,v(r._error),1)):F("",!0)]),s("td",null,[q(s("select",{"onUpdate:modelValue":i=>r.className=i,class:"table-select",onChange:i=>l.onClassChange(h),disabled:l.classesResource.loading},[t[24]||(t[24]=s("option",{value:null},"Not a Class Teacher",-1)),(u(!0),d(M,null,T(l.classes,i=>(u(),d("option",{key:i.name,value:i.name},v(i.name),9,qs))),128))],40,Os),[[le,r.className]])]),s("td",null,[q(s("select",{"onUpdate:modelValue":i=>r.divisionName=i,class:"table-select",disabled:!r.className||l.divisionsResource.loading},[t[25]||(t[25]=s("option",{value:null},"Select Division",-1)),(u(!0),d(M,null,T(r.divisions,i=>(u(),d("option",{key:i.name,value:i.name},v(i.name),9,Qs))),128))],8,Hs),[[le,r.divisionName]]),r.className&&!r.divisionName?(u(),d("div",zs," Select division if this teacher is a class teacher ")):F("",!0)]),(u(!0),d(M,null,T(l.previewHeaders,(i,D)=>(u(),d("td",{key:D},[q(s("input",{"onUpdate:modelValue":C=>r[i]=C,class:"table-input",onInput:C=>l.handleCellEdit(h,i,C.target.value),onBlur:C=>l.markRowAsTouched(h),placeholder:r[i]||"-"},null,40,Ks),[[Je,r[i]]])]))),128))],2))),128))])])])])])])):F("",!0),l.processing?(u(),d("div",Ws,t[28]||(t[28]=[s("div",{class:"loading-modal"},[s("div",{class:"loading-spinner"}),s("h3",{class:"loading-title"},"Enrolling Teachers"),s("p",{class:"loading-description"},"Please wait while we process the teacher data...")],-1)]))):F("",!0),l.showResultModal?(u(),d("div",Xs,[s("div",Ys,[l.resultModalType==="success"?(u(),d("div",Zs,t[29]||(t[29]=[s("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)]))):(u(),d("div",$s,t[30]||(t[30]=[s("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"})],-1)]))),s("h3",et,v(l.resultModalTitle),1),s("p",st,v(l.resultModalDescription),1),s("div",tt,[l.resultModalType==="success"?(u(),d("button",{key:0,class:"success-button",onClick:t[3]||(t[3]=(...r)=>l.closeResultModal&&l.closeResultModal(...r))}," Continue ")):(u(),d("button",{key:1,class:"primary-button",onClick:t[4]||(t[4]=(...r)=>l.closeResultModal&&l.closeResultModal(...r))}," Try Again "))])])])):F("",!0)])])}const it=Ie(qe,[["render",lt]]);export{it as default};
