var ae=Object.defineProperty,de=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var oe=(s,e,r)=>e in s?ae(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,I=(s,e)=>{for(var r in e||(e={}))ce.call(e,r)&&oe(s,r,e[r]);if(se)for(var r of se(e))me.call(e,r)&&oe(s,r,e[r]);return s},G=(s,e)=>de(s,ue(e));var ie=(s,e,r)=>new Promise((i,l)=>{var n=d=>{try{a(r.next(d))}catch(g){l(g)}},o=d=>{try{a(r.throw(d))}catch(g){l(g)}},a=d=>d.done?i(d.value):Promise.resolve(d.value).then(n,o);a((r=r.apply(s,e)).next())});import{_ as M,o as u,a as c,b as t,z as C,C as T,A as B,F as y,l as x,t as m,i as S,B as ge,h as j,r as _,x as V,j as te,n as k,G as U,g as ne,c as ee,d as $,I as pe,q as he,v as ve,e as be,f as fe}from"./index-MGLFZjrf.js";/* empty css             */const ye={props:{values:Object},computed:{email:{get(){return this.values.email},set(s){this.$emit("update-field",{field:"email",value:s})}},googleAppPassword:{get(){return this.values.googleAppPassword},set(s){this.$emit("update-field",{field:"googleAppPassword",value:s})}}},methods:{updateField(s,e){this.$emit("update-field",{field:s,value:e})}}},xe={class:"card"},Ce={class:"field"},Se={class:"field"};function we(s,e,r,i,l,n){return u(),c("div",xe,[t("div",Ce,[e[5]||(e[5]=t("label",null,"Email Address",-1)),C(t("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=o=>n.email=o),placeholder:"Enter your email address",onInput:e[1]||(e[1]=o=>n.updateField("email",o.target.value))},null,544),[[T,n.email]])]),t("div",Se,[e[6]||(e[6]=t("label",null,"Google App Password",-1)),C(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=o=>n.googleAppPassword=o),placeholder:"Enter your Google app password",onInput:e[3]||(e[3]=o=>n.updateField("googleAppPassword",o.target.value))},null,544),[[T,n.googleAppPassword]])]),t("button",{onClick:e[4]||(e[4]=o=>s.$emit("submit-email"))},"Submit Email Account")])}const _e=M(ye,[["render",we],["__scopeId","data-v-a1f91314"]]),Te={props:{values:Object},data(){return{selectedTerm:"",lastValidTermCount:0}},computed:{setAsCurrent:{get(){return this.values.setAsCurrent||!1},set(s){this.$emit("update-field",{field:"setAsCurrent",value:s})}},academicYear:{get(){return this.values.academicYear},set(s){this.$emit("update-field",{field:"academicYear",value:s})}},academicYearStart:{get(){return this.values.academicYearStart},set(s){this.$emit("update-field",{field:"academicYearStart",value:s})}},academicYearEnd:{get(){return this.values.academicYearEnd},set(s){this.$emit("update-field",{field:"academicYearEnd",value:s})}},numberOfTerms:{get(){return this.values.numberOfTerms},set(s){this.$emit("update-field",{field:"numberOfTerms",value:s})}}},methods:{handleNumberOfTermsChange(s){const e=parseInt(s.target.value);!isNaN(e)&&e>0?(this.numberOfTerms=e,this.lastValidTermCount=e,this.adjustTermsToMatchCount()):this.numberOfTerms=this.lastValidTermCount},incrementTerms(){this.numberOfTerms=parseInt(this.numberOfTerms)+1,this.adjustTermsToMatchCount()},decrementTerms(){this.numberOfTerms>1&&(this.numberOfTerms=parseInt(this.numberOfTerms)-1,this.adjustTermsToMatchCount())},adjustTermsToMatchCount(){const s=this.values.terms.length,e=this.numberOfTerms;if(e>s){const r=e-s,i=[...this.values.terms];for(let l=0;l<r;l++){const n=s+l+1,{startDate:o,endDate:a}=this.calculateTermDates(n,e);i.push({name:`Term ${n}`,startDate:o,endDate:a})}this.$emit("update-field-array",{field:"terms",value:i})}else if(e<s){const r=s-e,i=[...this.values.terms];i.splice(-r,r),this.$emit("update-field-array",{field:"terms",value:i})}},calculateTermDates(s,e){if(!this.academicYearStart||!this.academicYearEnd)return{startDate:"",endDate:""};const r=new Date(this.academicYearStart),n=(new Date(this.academicYearEnd)-r)/e,o=new Date(r.getTime()+n*(s-1)),a=new Date(r.getTime()+n*s-1),d=g=>g.toISOString().split("T")[0];return{startDate:d(o),endDate:d(a)}},formatDate(s){if(!s)return"";const e={year:"numeric",month:"short",day:"numeric"};return new Date(s).toLocaleDateString(void 0,e)},updateField(s,e){this.$emit("update-field",{field:s,value:e})},updateTermField(s,e,r){this.$emit("update-field-array",{field:"terms",index:s,subField:e,value:r})},addTerm(){const s={name:"",startDate:"",endDate:""};this.$emit("update-field-array",{field:"terms",value:[...this.values.terms,s]}),this.numberOfTerms=this.values.terms.length},removeTerm(s){const e=[...this.values.terms];e.splice(s,1),this.$emit("update-field-array",{field:"terms",value:e}),this.numberOfTerms=e.length},handleTermsInput(s){const e=parseInt(s.target.value);!isNaN(e)&&e>0?(this.numberOfTerms=e,this.lastValidTermCount=e,this.$emit("auto-create-terms")):this.numberOfTerms=this.lastValidTermCount},incrementTerms(){this.numberOfTerms=parseInt(this.numberOfTerms)+1,this.$emit("auto-create-terms")},decrementTerms(){this.numberOfTerms>1&&(this.numberOfTerms=parseInt(this.numberOfTerms)-1,this.$emit("auto-create-terms"))}},mounted(){this.lastValidTermCount=this.numberOfTerms||1}},ke={class:"academic-year-form"},De={class:"form-grid"},Ae={class:"form-row"},je={class:"form-group full-width required"},Pe={class:"form-row date-range-row"},Me={class:"form-group required"},Fe={class:"form-group required"},Ee={class:"form-row"},Ne={class:"form-group full-width required"},Oe={class:"number-input-group"},Ie={class:"number-input-buttons"},Le=["disabled"],Ge={key:0,class:"form-row"},Ue={class:"form-group full-width"},Ve=["value"],Be={class:"form-row"},Ye={class:"form-group full-width"},qe={class:"checkbox-label"},Re={class:"terms-list"},We={class:"term-header"},He={class:"section-title"},$e=["onClick"],Ke={class:"term-body"},Qe={class:"form-group required"},ze=["onUpdate:modelValue","placeholder","onInput"],Je={class:"form-row term-dates-row"},Ze={class:"form-group required"},Xe=["onUpdate:modelValue","onInput"],et={class:"form-group required"},tt=["onUpdate:modelValue","onInput"],st={class:"form-actions"};function ot(s,e,r,i,l,n){return u(),c("div",ke,[e[26]||(e[26]=t("div",{class:"form-header"},[t("h3",{class:"form-title"},"Academic Year Setup"),t("p",{class:"form-subtitle"}," Provide details about the academic year, its duration, and terms. ")],-1)),t("div",De,[t("div",Ae,[t("div",je,[e[15]||(e[15]=t("label",{class:"form-label"},"Academic Year",-1)),C(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>n.academicYear=o),class:"input",placeholder:"e.g., 2023-2024",onInput:e[1]||(e[1]=o=>n.updateField("academicYear",o.target.value))},null,544),[[T,n.academicYear]])])]),t("div",Pe,[t("div",Me,[e[16]||(e[16]=t("label",{class:"form-label"},"Start Date",-1)),C(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=o=>n.academicYearStart=o),class:"input",onInput:e[3]||(e[3]=o=>n.updateField("academicYearStart",o.target.value))},null,544),[[T,n.academicYearStart]])]),t("div",Fe,[e[17]||(e[17]=t("label",{class:"form-label"},"End Date",-1)),C(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=o=>n.academicYearEnd=o),class:"input",onInput:e[5]||(e[5]=o=>n.updateField("academicYearEnd",o.target.value))},null,544),[[T,n.academicYearEnd]])])]),t("div",Ee,[t("div",Ne,[e[18]||(e[18]=t("label",{class:"form-label"},"Number of Terms",-1)),t("div",Oe,[C(t("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=o=>n.numberOfTerms=o),class:"input number-input",placeholder:"e.g., 3",min:"1",onInput:e[7]||(e[7]=(...o)=>n.handleNumberOfTermsChange&&n.handleNumberOfTermsChange(...o))},null,544),[[T,n.numberOfTerms,void 0,{number:!0}]]),t("div",Ie,[t("button",{class:"number-input-btn minus-btn",onClick:e[8]||(e[8]=(...o)=>n.decrementTerms&&n.decrementTerms(...o)),disabled:n.numberOfTerms<=1,type:"button"}," âˆ’ ",8,Le),t("button",{class:"number-input-btn plus-btn",onClick:e[9]||(e[9]=(...o)=>n.incrementTerms&&n.incrementTerms(...o)),type:"button"}," + ")])])])]),n.setAsCurrent?(u(),c("div",Ge,[t("div",Ue,[e[20]||(e[20]=t("label",{class:"form-label"},"Current Academic Term",-1)),C(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.selectedTerm=o),class:"picker",onChange:e[11]||(e[11]=o=>n.updateField("selectedTerm",o.target.value))},[e[19]||(e[19]=t("option",{value:""},"-- Select a Term --",-1)),(u(!0),c(y,null,x(r.values.terms,(o,a)=>(u(),c("option",{key:a,value:o.name},m(o.name)+" ("+m(n.formatDate(o.startDate))+" - "+m(n.formatDate(o.endDate))+") ",9,Ve))),128))],544),[[B,l.selectedTerm]])])])):S("",!0),t("div",Be,[t("div",Ye,[t("label",qe,[C(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=o=>n.setAsCurrent=o),onChange:e[13]||(e[13]=o=>n.updateField("setAsCurrent",o.target.checked))},null,544),[[ge,n.setAsCurrent]]),e[21]||(e[21]=j(" Set as Current Academic Year "))])])])]),t("div",Re,[(u(!0),c(y,null,x(r.values.terms,(o,a)=>(u(),c("div",{key:a,class:"term-card form-card"},[t("div",We,[t("h4",He,"Term "+m(a+1),1),t("button",{class:"trash-icon",onClick:d=>n.removeTerm(a),title:"Remove term",type:"button"}," âœ• ",8,$e)]),t("div",Ke,[t("div",Qe,[e[22]||(e[22]=t("label",{class:"form-label"},"Term Name",-1)),C(t("input",{type:"text","onUpdate:modelValue":d=>o.name=d,class:"input",placeholder:`e.g., Spring ${a+1}`,onInput:d=>n.updateTermField(a,"name",d.target.value)},null,40,ze),[[T,o.name]])]),t("div",Je,[t("div",Ze,[e[23]||(e[23]=t("label",{class:"form-label"},"Start Date",-1)),C(t("input",{type:"date","onUpdate:modelValue":d=>o.startDate=d,class:"input",onInput:d=>n.updateTermField(a,"startDate",d.target.value)},null,40,Xe),[[T,o.startDate]])]),t("div",et,[e[24]||(e[24]=t("label",{class:"form-label"},"End Date",-1)),C(t("input",{type:"date","onUpdate:modelValue":d=>o.endDate=d,class:"input",onInput:d=>n.updateTermField(a,"endDate",d.target.value)},null,40,tt),[[T,o.endDate]])])])])]))),128))]),t("div",st,[t("button",{class:"primary-button",onClick:e[14]||(e[14]=(...o)=>n.addTerm&&n.addTerm(...o)),type:"button"},e[25]||(e[25]=[t("span",{class:"button-content"},[t("span",{class:"icon"},"+"),j(" Add Term ")],-1)]))])])}const it=M(Te,[["render",ot],["__scopeId","data-v-c14763d6"]]),nt={props:{values:Object,previousDataList:Array},emits:["update-field","use-previous-data"],setup(s,{emit:e}){const r=_(null),i=_(s.values.dontCreateClasses||!1),l=_(!1),n=_(""),o=V({url:"school.al_ummah.api3.get_previous_data",params:{values:{}},onSuccess:g=>{console.log("Previous data loaded successfully")},onError:g=>{console.error("Error fetching previous data:",g)}}),a=()=>{if(!r.value){console.warn("No data selected");return}e("use-previous-data",r.value),n.value=r.value.academicYear,l.value=!0,setTimeout(()=>{l.value=!1},5e3)},d=()=>{e("update-field",{field:"dontCreateClasses",value:i.value})};return te(()=>{(!s.previousDataList||s.previousDataList.length===0)&&o.reload()}),{selectedPreviousData:r,dontCreateClasses:i,showSuccessMessage:l,usedPreviousYear:n,previousDataResource:o,handleUsePreviousData:a,updateDontCreateClasses:d}}},rt={class:"card"},lt={key:0,class:"loading"},at={key:1},dt={key:0,class:"success-message"},ut={class:"field"},ct=["value"],mt=["disabled"];function gt(s,e,r,i,l,n){return u(),c("div",rt,[e[3]||(e[3]=t("h3",{class:"section-title"},"Use Previous Data",-1)),i.previousDataResource.loading?(u(),c("div",lt,"Loading previous data...")):(u(),c("div",at,[i.showSuccessMessage?(u(),c("div",dt," âœ“ Previous data from "+m(i.usedPreviousYear)+" has been successfully loaded ",1)):S("",!0),t("div",ut,[C(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.selectedPreviousData=o)},[e[2]||(e[2]=t("option",{value:null},"Select a year",-1)),(u(!0),c(y,null,x(r.previousDataList,(o,a)=>(u(),c("option",{key:a,value:o},m(o.academicYear),9,ct))),128))],512),[[B,i.selectedPreviousData]])]),t("button",{onClick:e[1]||(e[1]=(...o)=>i.handleUsePreviousData&&i.handleUsePreviousData(...o)),disabled:!i.selectedPreviousData}," Use Previous Data ",8,mt)]))])}const pt=M(nt,[["render",gt],["__scopeId","data-v-b5328e59"]]),ht=[{id:1,name:"Pre-K"},{id:2,name:"Kindergarten"},{id:3,name:"1st Grade"},{id:4,name:"2nd Grade"},{id:5,name:"3rd Grade"},{id:6,name:"4th Grade"},{id:7,name:"5th Grade"},{id:8,name:"6th Grade"},{id:9,name:"7th Grade"},{id:10,name:"8th Grade"},{id:11,name:"9th Grade"},{id:12,name:"10th Grade"},{id:13,name:"11th Grade"},{id:14,name:"12th Grade"},{id:15,name:"Other"}],vt={school:["Nursery","Jr KG","Sr KG","1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th"],college:["FY Bachelors","SY Bachelors","TY Bachelors","FY Diploma","SY Diploma","FY BTech","SY BTech","TY BTech","Final Year BTech","FY Masters","SY Masters","PhD Year 1","PhD Year 2","PhD Year 3","PhD Year 4","PhD Year 5"]},bt={props:{values:Object},data(){return{selectedInstitution:"",editablePrograms:[],availablePrograms:ht}},watch:{"values.classes":{immediate:!0,handler(s){s&&s.length>0&&(this.editablePrograms=[...s])}}},computed:{selectedPrograms(){return this.values.classes||[]}},methods:{isSelected(s){return this.selectedPrograms.some(e=>e.id===s.id)},toggleProgram(s){let e;this.isSelected(s)?e=this.selectedPrograms.filter(r=>r.id!==s.id):e=[...this.selectedPrograms,{id:s.id,className:s.name,subjects:[],divisions:[]}],this.updatePrograms(e)},handleEditProgram(s,e){const r=this.editablePrograms.map(i=>i.id===s?G(I({},i),{className:e}):i);this.updatePrograms(r)},handleDeleteProgram(s){const e=this.editablePrograms.filter(r=>r.id!==s);this.updatePrograms(e)},handleAddProgram(){const s={id:Math.random().toString(),className:"",subjects:[],divisions:[]},e=[...this.editablePrograms,s];this.updatePrograms(e)},handleInstitutionChange(){const s=(vt[this.selectedInstitution]||[]).map(e=>({id:Math.random().toString(),className:e,subjects:[],divisions:[]}));this.updatePrograms(s)},updatePrograms(s){this.editablePrograms=s,this.$emit("update-field-array",{field:"classes",value:s})}}},ft={class:"program-selector-container"},yt={class:"institution-selector"},xt={key:0,class:"programs-list"},Ct=["onUpdate:modelValue","onInput"],St=["onClick"],wt={key:1,class:"quick-select"},_t={class:"program-grid"},Tt=["onClick"];function kt(s,e,r,i,l,n){return u(),c("div",ft,[t("div",yt,[e[4]||(e[4]=t("label",{class:"form-label"},"Select Institution Type",-1)),C(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.selectedInstitution=o),class:"form-select",onChange:e[1]||(e[1]=(...o)=>n.handleInstitutionChange&&n.handleInstitutionChange(...o))},e[3]||(e[3]=[t("option",{value:""},"Select Institution",-1),t("option",{value:"school"},"School",-1),t("option",{value:"college"},"College",-1)]),544),[[B,l.selectedInstitution]])]),l.editablePrograms.length>0?(u(),c("div",xt,[e[6]||(e[6]=t("h3",{class:"section-title"},"Classes List",-1)),(u(!0),c(y,null,x(l.editablePrograms,o=>(u(),c("div",{key:o.id,class:"program-item"},[C(t("input",{type:"text","onUpdate:modelValue":a=>o.className=a,class:"program-input",onInput:a=>n.handleEditProgram(o.id,a.target.value)},null,40,Ct),[[T,o.className]]),t("button",{class:"delete-btn",onClick:a=>n.handleDeleteProgram(o.id),title:"Remove class"},e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,St)]))),128))])):S("",!0),l.selectedInstitution===""?(u(),c("div",wt,[e[7]||(e[7]=t("h3",{class:"section-title"},"Quick Select Programs",-1)),t("div",_t,[(u(!0),c(y,null,x(l.availablePrograms,o=>(u(),c("div",{key:o.id,class:k(["program-card",{selected:n.isSelected(o)}]),onClick:a=>n.toggleProgram(o)},m(o.name),11,Tt))),128))])])):S("",!0),t("button",{class:"add-btn",onClick:e[2]||(e[2]=(...o)=>n.handleAddProgram&&n.handleAddProgram(...o))},e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),j(" Add Class ")]))])}const Dt=M(bt,[["render",kt],["__scopeId","data-v-c9292bd6"]]),At={props:{values:Object},data(){return{institutionType:"school",selectedCollegeDivision:"",newCommonSubject:"",newCommonDivision:"",commonSubjectsList:[],commonDivisionsList:[],classesWithText:[],commonSubjects:["Math","Social Studies","Science","English","History","Geography","Physics","Chemistry","Biology","Computer","Civics","Hindi","Marathi","Arabic","Play"],commonDivisions:["A","B","C","D","E","F"],collegeDivisions:{"Computer Science":["Data Structures","Algorithms","Operating Systems","Computer Networks","Database Management Systems","Object-Oriented Programming","Software Engineering","Web Development","Theory of Computation","Artificial Intelligence","Machine Learning","Cyber Security","Cloud Computing"],"Computer Applications":["C Programming","Data Structures","Database Management","Web Programming","Computer Architecture","Operating Systems","Java Programming","Python Programming","Software Engineering","Computer Networks","Mobile App Development"],"Information Technology":["Web Technology","Network Security","Database Systems","Cloud Services","IT Project Management","Data Analytics","Software Testing","System Administration","E-Commerce Systems"],Electronics:["Basic Electronics","Digital Electronics","Microprocessors","Embedded Systems","Circuit Theory","VLSI Design","Communication Systems","Sensors and Instrumentation"],"Mechanical Engineering":["Engineering Mechanics","Thermodynamics","Fluid Mechanics","Strength of Materials","Manufacturing Processes","Machine Design","Heat Transfer","CAD/CAM"],"Civil Engineering":["Engineering Drawing","Surveying","Structural Engineering","Concrete Technology","Soil Mechanics","Transportation Engineering","Construction Management","Environmental Engineering"],"Electrical Engineering":["Electrical Circuits","Power Systems","Control Systems","Electrical Machines","Power Electronics","Renewable Energy","High Voltage Engineering"],"Business Administration":["Principles of Management","Marketing Management","Financial Management","Business Law","Organizational Behaviour","Human Resource Management","Accounting","Entrepreneurship","Business Communication"],Commerce:["Accountancy","Business Economics","Cost Accounting","Auditing","Taxation","Business Law","Statistics","Financial Accounting"],"Accounting and Finance":["Financial Accounting","Cost Accounting","Taxation","Statistics for Finance","Corporate Finance","Banking and Insurance Fundamentals"],"Banking and Insurance":["Banking Operations","Financial Markets","Insurance Fundamentals","Risk Management","Commercial Banking","Customer Relationship Management"],Physics:["Mechanics","Electricity and Magnetism","Optics","Quantum Physics","Thermodynamics","Nuclear Physics","Basic Electronics"],Chemistry:["Organic Chemistry","Inorganic Chemistry","Physical Chemistry","Analytical Techniques","Environmental Chemistry"],Mathematics:["Calculus","Algebra","Differential Equations","Probability and Statistics","Real Analysis","Linear Algebra","Discrete Mathematics"],Biotechnology:["Cell Biology","Genetics","Microbiology","Biochemistry","Molecular Biology","Immunology","Genetic Engineering"],Microbiology:["General Microbiology","Environmental Microbiology","Food Microbiology","Medical Microbiology","Industrial Microbiology"],Psychology:["Introduction to Psychology","Cognitive Psychology","Developmental Psychology","Abnormal Psychology","Social Psychology","Research Methods"],Economics:["Microeconomics","Macroeconomics","Indian Economy","Econometrics","Public Finance","International Economics"],"English Literature":["Poetry","Drama","Novels","Literary Theory","Indian Writing in English","Linguistics","Modern Literature"]},collegeDivisionsList:["Computer Science","Computer Applications","Information Technology","Electronics","Mechanical Engineering","Civil Engineering","Electrical Engineering","Business Administration","Commerce","Accounting & Finance","Banking & Insurance","Physics","Chemistry","Mathematics","Biotechnology","Microbiology","Psychology","Economics","English Literature"]}},computed:{collegeCommonSubjects(){return this.selectedCollegeDivision&&this.collegeDivisions[this.selectedCollegeDivision]?this.collegeDivisions[this.selectedCollegeDivision]:[]}},created(){this.values.commonSubjects&&(this.commonSubjectsList=[...this.values.commonSubjects]),this.values.commonDivisions&&(this.commonDivisionsList=[...this.values.commonDivisions]),this.values.institutionType&&(this.institutionType=this.values.institutionType)},watch:{"values.classes":{immediate:!0,deep:!0,handler(s){this.classesWithText=s.map(e=>G(I({},e),{subjectsText:"",divisionsText:"",specificSubjects:e.subjects?e.subjects.filter(r=>!this.commonSubjectsList.includes(r)):[],specificDivisions:e.divisions?e.divisions.filter(r=>{const i=r.divisionName.split("-").slice(1).join("-");return!this.commonDivisionsList.includes(i)}):[],excludedCommonSubjects:e.excludedCommonSubjects||[],excludedCommonDivisions:e.excludedCommonDivisions||[]}))}},commonSubjectsList:{handler(s){this.$emit("update-field",{field:"commonSubjects",value:s}),this.updateAllClassesWithCommonData()},deep:!0},commonDivisionsList:{handler(s){this.$emit("update-field",{field:"commonDivisions",value:s}),this.updateAllClassesWithCommonData()},deep:!0},institutionType:{handler(s){this.$emit("update-field",{field:"institutionType",value:s}),s==="school"&&(this.selectedCollegeDivision="")}}},methods:{setInstitutionType(s){this.institutionType=s},getCollegeSubjects(s){return this.collegeDivisions[s]||[]},getDivisionOptions(){return this.institutionType==="college"?this.collegeDivisionsList:this.commonDivisions},addCommonSubject(){this.newCommonSubject.trim()&&!this.commonSubjectsList.includes(this.newCommonSubject.trim())&&(this.commonSubjectsList.push(this.newCommonSubject.trim()),this.newCommonSubject="")},removeCommonSubject(s){this.commonSubjectsList.splice(s,1)},isCommonSubjectSelected(s){return this.commonSubjectsList.includes(s)},toggleCommonSubject(s){this.isCommonSubjectSelected(s)?this.removeCommonSubject(this.commonSubjectsList.indexOf(s)):(this.newCommonSubject=s,this.addCommonSubject())},addCommonDivision(){this.newCommonDivision.trim()&&!this.commonDivisionsList.includes(this.newCommonDivision.trim())&&(this.commonDivisionsList.push(this.newCommonDivision.trim()),this.newCommonDivision="")},removeCommonDivision(s){this.commonDivisionsList.splice(s,1)},isCommonDivisionSelected(s){return this.commonDivisionsList.includes(s)},toggleCommonDivision(s){this.isCommonDivisionSelected(s)?this.removeCommonDivision(this.commonDivisionsList.indexOf(s)):(this.newCommonDivision=s,this.addCommonDivision())},addSpecificSubject(s){if(this.classesWithText[s].subjectsText.trim()){const e=[...this.classesWithText];e[s].specificSubjects=[...e[s].specificSubjects,e[s].subjectsText.trim()],e[s].subjectsText="",this.emitUpdatedClasses(e)}},removeSpecificSubject(s,e){const r=[...this.classesWithText];r[s].specificSubjects.splice(e,1),this.emitUpdatedClasses(r)},addSpecificDivision(s){if(this.classesWithText[s].divisionsText.trim()){const e=[...this.classesWithText],r=e[s].className||"Class";e[s].specificDivisions=[...e[s].specificDivisions,{divisionName:`${r}-${e[s].divisionsText.trim()}`}],e[s].divisionsText="",this.emitUpdatedClasses(e)}},removeSpecificDivision(s,e){const r=[...this.classesWithText];r[s].specificDivisions.splice(e,1),this.emitUpdatedClasses(r)},updateClassName(s,e){const r=[...this.classesWithText],i=r[s].className;r[s].className=e,r[s].specificDivisions&&(r[s].specificDivisions=r[s].specificDivisions.map(l=>{const n=l.divisionName.replace(`${i}-`,"");return{divisionName:`${e}-${n}`}})),this.emitUpdatedClasses(r)},updateAllClassesWithCommonData(){const s=this.classesWithText.map(e=>G(I({},e),{specificSubjects:e.specificSubjects||[],specificDivisions:e.specificDivisions||[],excludedCommonSubjects:e.excludedCommonSubjects||[],excludedCommonDivisions:e.excludedCommonDivisions||[]}));this.emitUpdatedClasses(s)},isCommonSubjectExcluded(s,e){var i;return((i=this.classesWithText[s].excludedCommonSubjects)==null?void 0:i.includes(e))||!1},toggleExcludeCommonSubject(s,e){const r=[...this.classesWithText];r[s].excludedCommonSubjects||(r[s].excludedCommonSubjects=[]);const i=r[s].excludedCommonSubjects.indexOf(e);i>=0?r[s].excludedCommonSubjects.splice(i,1):r[s].excludedCommonSubjects.push(e),this.emitUpdatedClasses(r)},isCommonDivisionExcluded(s,e){var i;return((i=this.classesWithText[s].excludedCommonDivisions)==null?void 0:i.includes(e))||!1},toggleExcludeCommonDivision(s,e){const r=[...this.classesWithText];r[s].excludedCommonDivisions||(r[s].excludedCommonDivisions=[]);const i=r[s].excludedCommonDivisions.indexOf(e);i>=0?r[s].excludedCommonDivisions.splice(i,1):r[s].excludedCommonDivisions.push(e),this.emitUpdatedClasses(r)},emitUpdatedClasses(s){this.$emit("update-field-array",{field:"classes",value:s.map(e=>({className:e.className,subjects:[...this.commonSubjectsList.filter(r=>{var i;return!((i=e.excludedCommonSubjects)!=null&&i.includes(r))}),...e.specificSubjects||[]],divisions:[...this.commonDivisionsList.filter(r=>{var i;return!((i=e.excludedCommonDivisions)!=null&&i.includes(r))}).map(r=>({divisionName:`${e.className}-${r}`})),...e.specificDivisions||[]],excludedCommonSubjects:e.excludedCommonSubjects||[],excludedCommonDivisions:e.excludedCommonDivisions||[],specificSubjects:e.specificSubjects||[],specificDivisions:e.specificDivisions||[]}))})}}},jt={class:"bg-white shadow rounded-lg p-6 space-y-6"},Pt={class:"mb-6"},Mt={class:"flex space-x-4"},Ft={key:0,class:"mb-6"},Et=["value"],Nt={key:0,class:"quick-select mt-3"},Ot={class:"text-sm font-medium text-gray-700 mb-2"},It={class:"subject-grid grid grid-cols-3 gap-2"},Lt=["onClick"],Gt={class:"block text-sm font-medium text-gray-700 mb-1"},Ut={class:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md min-h-[42px]"},Vt=["onClick"],Bt=["placeholder"],Yt={key:0,class:"quick-select mt-3"},qt={class:"subject-grid grid grid-cols-3 gap-2"},Rt=["onClick"],Wt={class:"block text-sm font-medium text-gray-700 mb-1"},Ht={class:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md min-h-[42px]"},$t=["onClick"],Kt=["placeholder"],Qt={class:"quick-select mt-3"},zt={class:"text-sm font-medium text-gray-700 mb-2"},Jt={class:"division-grid grid grid-cols-6 gap-2"},Zt=["onClick"],Xt={class:"text-lg font-semibold text-gray-800 border-b pb-2"},es={class:"overflow-x-auto"},ts={class:"min-w-full text-sm text-left text-gray-700"},ss={class:"bg-gray-100"},os={class:"px-4 py-2 font-medium"},is={class:"px-4 py-2 font-medium"},ns={class:"px-4 py-2 font-medium"},rs={class:"px-4 py-2"},ls={class:"px-4 py-2"},as=["onUpdate:modelValue","onInput","placeholder"],ds={class:"px-4 py-2 w-[300px]"},us={class:"flex flex-wrap gap-1 mb-1 min-h-[40px]"},cs=["onClick"],ms=["onClick"],gs={class:"flex gap-2"},ps=["onUpdate:modelValue","onKeydown","placeholder"],hs=["onClick"],vs={class:"px-4 py-2"},bs={class:"flex flex-wrap gap-1 mb-1 min-h-[40px]"},fs=["onClick"],ys=["onClick"],xs={class:"flex gap-2"},Cs=["onUpdate:modelValue","onKeydown","placeholder"],Ss=["onClick"];function ws(s,e,r,i,l,n){return u(),c("div",jt,[t("div",Pt,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Institution Type",-1)),t("div",Mt,[t("button",{onClick:e[0]||(e[0]=o=>n.setInstitutionType("school")),class:k(["px-4 py-2 rounded-md transition-colors",l.institutionType==="school"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," ðŸ« School ",2),t("button",{onClick:e[1]||(e[1]=o=>n.setInstitutionType("college")),class:k(["px-4 py-2 rounded-md transition-colors",l.institutionType==="college"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," ðŸŽ“ College ",2)])]),l.institutionType==="college"?(u(),c("div",Ft,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"College Division",-1)),C(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.selectedCollegeDivision=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[10]||(e[10]=t("option",{value:""},"Select a division...",-1)),(u(!0),c(y,null,x(l.collegeDivisionsList,o=>(u(),c("option",{key:o,value:o},m(o),9,Et))),128))],512),[[B,l.selectedCollegeDivision]]),l.selectedCollegeDivision?(u(),c("div",Nt,[t("h3",Ot,"Quick Select "+m(l.selectedCollegeDivision)+" Subjects",1),t("div",It,[(u(!0),c(y,null,x(n.getCollegeSubjects(l.selectedCollegeDivision),o=>(u(),c("div",{key:o,class:k(["subject-card px-3 py-2 border rounded-md text-center cursor-pointer text-sm",{"bg-purple-100 border-purple-300":n.isCommonSubjectSelected(o),"bg-gray-50 hover:bg-gray-100":!n.isCommonSubjectSelected(o)}]),onClick:a=>n.toggleCommonSubject(o)},m(o),11,Lt))),128))])])):S("",!0)])):S("",!0),t("div",null,[t("label",Gt,m(l.institutionType==="college"?"Common Courses for All Programs":"Common Subjects for All Classes"),1),t("div",Ut,[(u(!0),c(y,null,x(l.commonSubjectsList,(o,a)=>(u(),c("span",{key:a,class:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm"},[j(m(o)+" ",1),t("button",{onClick:d=>n.removeCommonSubject(a),class:"ml-1.5 text-blue-500 hover:text-blue-700"}," Ã— ",8,Vt)]))),128)),C(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>l.newCommonSubject=o),onKeydown:e[4]||(e[4]=U((...o)=>n.addCommonSubject&&n.addCommonSubject(...o),["enter"])),onBlur:e[5]||(e[5]=(...o)=>n.addCommonSubject&&n.addCommonSubject(...o)),placeholder:l.institutionType==="college"?"Add courses...":"Add subjects...",class:"flex-1 min-w-[100px] px-2 py-1 border-0 focus:ring-0 focus:outline-none"},null,40,Bt),[[T,l.newCommonSubject]])]),l.institutionType==="school"?(u(),c("div",Yt,[e[12]||(e[12]=t("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Quick Select Subjects",-1)),t("div",qt,[(u(!0),c(y,null,x(l.commonSubjects,o=>(u(),c("div",{key:o,class:k(["subject-card px-3 py-2 border rounded-md text-center cursor-pointer text-sm",{"bg-blue-100 border-blue-300":n.isCommonSubjectSelected(o),"bg-gray-50 hover:bg-gray-100":!n.isCommonSubjectSelected(o)}]),onClick:a=>n.toggleCommonSubject(o)},m(o),11,Rt))),128))])])):S("",!0)]),t("div",null,[t("label",Wt,m(l.institutionType==="college"?"Common Programs for All Classes":"Common Divisions for All Classes"),1),t("div",Ht,[(u(!0),c(y,null,x(l.commonDivisionsList,(o,a)=>(u(),c("span",{key:a,class:"inline-flex items-center px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm"},[j(m(o)+" ",1),t("button",{onClick:d=>n.removeCommonDivision(a),class:"ml-1.5 text-green-500 hover:text-green-700"}," Ã— ",8,$t)]))),128)),C(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=o=>l.newCommonDivision=o),onKeydown:e[7]||(e[7]=U((...o)=>n.addCommonDivision&&n.addCommonDivision(...o),["enter"])),onBlur:e[8]||(e[8]=(...o)=>n.addCommonDivision&&n.addCommonDivision(...o)),placeholder:l.institutionType==="college"?"Add programs...":"Add divisions...",class:"flex-1 min-w-[100px] px-2 py-1 border-0 focus:ring-0 focus:outline-none"},null,40,Kt),[[T,l.newCommonDivision]])]),t("div",Qt,[t("h3",zt,m(l.institutionType==="college"?"Quick Select Programs":"Quick Select Divisions"),1),t("div",Jt,[(u(!0),c(y,null,x(n.getDivisionOptions(),o=>(u(),c("div",{key:o,class:k(["division-card px-3 py-2 border rounded-md text-center cursor-pointer text-sm",{"bg-green-100 border-green-300":n.isCommonDivisionSelected(o),"bg-gray-50 hover:bg-gray-100":!n.isCommonDivisionSelected(o)}]),onClick:a=>n.toggleCommonDivision(o)},m(o),11,Zt))),128))])])]),t("h3",Xt,m(l.institutionType==="college"?"Programs Overview":"Classes Overview"),1),t("div",es,[t("table",ts,[t("thead",ss,[t("tr",null,[e[13]||(e[13]=t("th",{class:"px-4 py-2 font-medium"},"#",-1)),t("th",os,m(l.institutionType==="college"?"Program Name":"Class Name"),1),t("th",is,m(l.institutionType==="college"?"Courses":"Subjects"),1),t("th",ns,m(l.institutionType==="college"?"Student Groups":"Divisions"),1)])]),t("tbody",null,[(u(!0),c(y,null,x(l.classesWithText,(o,a)=>(u(),c("tr",{key:a,class:"border-t hover:bg-gray-50"},[t("td",rs,m(a+1),1),t("td",ls,[C(t("input",{type:"text","onUpdate:modelValue":d=>o.className=d,onInput:d=>n.updateClassName(a,d.target.value),class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:l.institutionType==="college"?"Program name...":"Class name..."},null,40,as),[[T,o.className]])]),t("td",ds,[t("div",us,[(u(!0),c(y,null,x(l.commonSubjectsList,(d,g)=>(u(),c("span",{key:"common-"+g,class:k(["inline-flex items-center px-2 py-1 rounded-full text-xs",n.isCommonSubjectExcluded(a,d)?"bg-red-100 text-red-600":"bg-blue-50 text-blue-600"])},[j(m(d)+" ",1),t("button",{onClick:ne(b=>n.toggleExcludeCommonSubject(a,d),["stop"]),class:"ml-1 text-blue-500 hover:text-blue-700 text-xs"},m(n.isCommonSubjectExcluded(a,d)?"+":"Ã—"),9,cs)],2))),128)),(u(!0),c(y,null,x(o.specificSubjects,(d,g)=>(u(),c("span",{key:"specific-"+g,class:"inline-flex items-center px-2 py-1 rounded-full bg-blue-100 text-blue-800 text-xs"},[j(m(d)+" ",1),t("button",{onClick:b=>n.removeSpecificSubject(a,g),class:"ml-1 text-blue-500 hover:text-blue-700 text-xs"}," Ã— ",8,ms)]))),128))]),t("div",gs,[C(t("input",{type:"text","onUpdate:modelValue":d=>o.subjectsText=d,onKeydown:U(d=>n.addSpecificSubject(a),["enter"]),placeholder:l.institutionType==="college"?"Add program-specific course...":"Add class-specific subject...",class:"flex-1 px-2 py-1 border border-gray-300 rounded text-xs"},null,40,ps),[[T,o.subjectsText]]),t("button",{onClick:d=>n.addSpecificSubject(a),class:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs"}," Add ",8,hs)])]),t("td",vs,[t("div",bs,[(u(!0),c(y,null,x(l.commonDivisionsList,(d,g)=>(u(),c("span",{key:"common-"+g,class:k(["inline-flex items-center px-2 py-1 rounded-full text-xs",n.isCommonDivisionExcluded(a,d)?"bg-red-100 text-red-600 border border-red-300":"bg-green-50 text-green-600"])},[j(m(d)+" ",1),t("button",{onClick:ne(b=>n.toggleExcludeCommonDivision(a,d),["stop"]),class:"ml-1 text-green-500 hover:text-green-700 text-xs"},m(n.isCommonDivisionExcluded(a,d)?"+":"Ã—"),9,fs)],2))),128)),(u(!0),c(y,null,x(o.specificDivisions,(d,g)=>(u(),c("span",{key:"specific-"+g,class:"inline-flex items-center px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs"},[j(m(d.divisionName.split("-").slice(1).join("-"))+" ",1),t("button",{onClick:b=>n.removeSpecificDivision(a,g),class:"ml-1 text-green-500 hover:text-green-700 text-xs"}," Ã— ",8,ys)]))),128))]),t("div",xs,[C(t("input",{type:"text","onUpdate:modelValue":d=>o.divisionsText=d,onKeydown:U(d=>n.addSpecificDivision(a),["enter"]),placeholder:l.institutionType==="college"?"Add program-specific group...":"Add class-specific division...",class:"flex-1 px-2 py-1 border border-gray-300 rounded text-xs"},null,40,Cs),[[T,o.divisionsText]]),t("button",{onClick:d=>n.addSpecificDivision(a),class:"px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-xs"}," Add ",8,Ss)])])]))),128))])])])])}const _s=M(At,[["render",ws],["__scopeId","data-v-352bca2c"]]),Ts={name:"GradingSystem",emits:["update-field","grading-completed"],props:{values:{type:Object,required:!0}},setup(s,{emit:e}){var E,p,h,w;const r=_(((E=s.values.gradingSystem)==null?void 0:E.selectedOption)||""),i=_(((p=s.values.gradingSystem)==null?void 0:p.scaleName)||""),l=_(((h=s.values.gradingSystem)==null?void 0:h.previousScaleName)||""),n=_(((w=s.values.gradingSystem)==null?void 0:w.gradeData)||[{grade_code:"",threshold:"",description:""}]),o=_([]),a=_(!1),d=_(!1);let g=null;const b=V({url:"school.al_ummah.api3.fetch_grading_scales",onSuccess:v=>{v.success&&(o.value=v.grading_scales||[]),a.value=!1},onError:v=>{console.error("Error fetching grading scales:",v),a.value=!1}}),F=_([{value:"school",label:"School (K-12)",grades:[{grade_code:"A+",threshold:95,description:"Outstanding"},{grade_code:"A",threshold:90,description:"Excellent"},{grade_code:"B+",threshold:85,description:"Very Good"},{grade_code:"B",threshold:80,description:"Good"},{grade_code:"C+",threshold:75,description:"Above Average"},{grade_code:"C",threshold:70,description:"Average"},{grade_code:"D",threshold:60,description:"Below Average"},{grade_code:"F",threshold:0,description:"Fail"}]},{value:"college",label:"College/University",grades:[{grade_code:"A",threshold:90,description:"Excellent"},{grade_code:"B",threshold:80,description:"Good"},{grade_code:"C",threshold:70,description:"Satisfactory"},{grade_code:"D",threshold:60,description:"Pass"},{grade_code:"F",threshold:0,description:"Fail"}]}]),A=ee(()=>n.value.length>0&&n.value.every(v=>{var f;return((f=v.grade_code)==null?void 0:f.trim())&&X(v.threshold)})),K=ee(()=>!i.value||!A.value),Y=ee(()=>{var v;return r.value==="previous"?!!l.value:r.value==="manual"?((v=i.value)==null?void 0:v.trim())&&A.value:!0});function q(){a.value=!0,b.fetch()}function Q(v){r.value=v,P()}function z(v){n.value=JSON.parse(JSON.stringify(v.grades)),i.value||(i.value=`${v.label} Grading Scale`),P()}function J(){n.value.push({grade_code:"",threshold:"",description:""}),P()}function Z(v){n.value.length>1&&(n.value.splice(v,1),P())}function X(v){const f=parseFloat(v);return!isNaN(f)&&f>=0&&f<=100&&v!==""}function R(){clearTimeout(g),g=setTimeout(P,300)}function P(){clearTimeout(g);const v=r.value==="manual"?n.value.map(f=>({grade_code:(f.grade_code||"").trim(),threshold:parseFloat(f.threshold)||0,description:(f.description||"").trim()})).filter(f=>f.grade_code&&!isNaN(f.threshold)):null;e("update-field",{field:"gradingSystem",value:{selectedOption:r.value,scaleName:i.value,previousScaleName:l.value,gradeData:v}})}function W(){d.value=!0,!(!Y.value&&r.value!=="")&&(P(),e("grading-completed"))}function H(){r.value="",i.value="",l.value="",n.value=[{grade_code:"",threshold:"",description:""}],d.value=!1,e("update-field",{field:"gradingSystem",value:{selectedOption:"",scaleName:"",previousScaleName:"",gradeData:null}}),e("grading-completed")}return te(()=>{q(),P()}),{selectedOption:r,scaleName:i,previousScaleName:l,manualGrades:n,gradingScales:o,loadingScales:a,instituteTypes:F,showValidation:d,hasValidManualGrades:A,hasManualValidationErrors:K,isFormValid:Y,selectOption:Q,applyTemplate:z,addGrade:J,removeGrade:Z,submitGrading:W,skipGrading:H,debouncedUpdate:R}}},ks={class:"grading-system-container"},Ds={class:"mb-8"},As={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},js={class:"flex items-start space-x-4"},Ps={class:"flex-1"},Ms=["disabled"],Fs=["value"],Es={key:0,class:"mt-2 text-sm text-gray-500"},Ns={key:1,class:"mt-2 text-sm text-gray-500"},Os={key:0,class:"space-y-6"},Is={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ls=["onClick"],Gs={class:"flex items-center space-x-3"},Us={class:"font-medium text-gray-900"},Vs={class:"text-xs text-gray-500 mt-1"},Bs={class:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden"},Ys={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},qs={class:"flex items-center justify-between"},Rs={class:"overflow-x-auto"},Ws={class:"w-full"},Hs={class:"bg-white divide-y divide-gray-200"},$s={class:"px-6 py-4 whitespace-nowrap"},Ks=["onUpdate:modelValue"],Qs={class:"px-6 py-4 whitespace-nowrap"},zs={class:"flex items-center space-x-2"},Js=["onUpdate:modelValue"],Zs={class:"px-6 py-4"},Xs=["onUpdate:modelValue"],eo={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},to=["onClick","disabled"],so={key:0,class:"text-center py-12"},oo={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},io={class:"mt-2 text-sm text-red-600 list-disc list-inside space-y-1"},no={key:0},ro={key:1},lo={class:"mt-8 flex justify-between items-center pt-6 border-t border-gray-200"},ao={class:"flex space-x-3"},uo=["disabled"];function co(s,e,r,i,l,n){return u(),c("div",ks,[e[28]||(e[28]=t("div",{class:"mb-8"},[t("h3",{class:"text-lg font-semibold text-gray-800 mb-2"},"Grading System Setup"),t("p",{class:"text-gray-600"},"Configure your institution's grading system. This step is optional.")],-1)),t("div",Ds,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Select Grading System Option ",-1)),t("div",As,[t("div",{onClick:e[1]||(e[1]=o=>i.selectOption("previous")),class:k(["p-6 border-2 rounded-lg cursor-pointer transition-all duration-200",i.selectedOption==="previous"?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-300 bg-white hover:border-gray-400"])},[t("div",js,[e[14]||(e[14]=t("div",{class:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",Ps,[e[12]||(e[12]=t("h4",{class:"font-semibold text-gray-900 mb-2"},"Use Existing Grading Scale",-1)),e[13]||(e[13]=t("p",{class:"text-sm text-gray-600 mb-3"},"Select from previously created grading scales",-1)),C(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.previousScaleName=o),disabled:i.selectedOption!=="previous",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"bg-gray-100":i.selectedOption!=="previous"}])},[e[11]||(e[11]=t("option",{value:""},"Select a grading scale",-1)),(u(!0),c(y,null,x(i.gradingScales,o=>(u(),c("option",{key:o,value:o},m(o),9,Fs))),128))],10,Ms),[[B,i.previousScaleName]]),i.loadingScales?(u(),c("div",Es," Loading grading scales... ")):i.gradingScales.length===0?(u(),c("div",Ns," No previous grading scales found ")):S("",!0)])])],2),t("div",{onClick:e[2]||(e[2]=o=>i.selectOption("manual")),class:k(["p-6 border-2 rounded-lg cursor-pointer transition-all duration-200",i.selectedOption==="manual"?"border-green-500 bg-green-50 ring-2 ring-green-200":"border-gray-300 bg-white hover:border-gray-400"])},e[15]||(e[15]=[$('<div class="flex items-start space-x-4" data-v-d1923fe5><div class="flex-shrink-0 w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center" data-v-d1923fe5><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d1923fe5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-d1923fe5></path></svg></div><div class="flex-1" data-v-d1923fe5><h4 class="font-semibold text-gray-900 mb-2" data-v-d1923fe5>Create New Grading Scale</h4><p class="text-sm text-gray-600" data-v-d1923fe5>Manually define your grading system</p></div></div>',1)]),2)])]),i.selectedOption==="manual"?(u(),c("div",Os,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[j(" Grading Scale Name "),t("span",{class:"text-red-500"},"*")],-1)),C(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>i.scaleName=o),type:"text",placeholder:"e.g., Standard Grading Scale",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",{"border-red-300":!i.scaleName&&i.showValidation}])},null,2),[[T,i.scaleName]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Quick Templates (Optional) ",-1)),t("div",Is,[(u(!0),c(y,null,x(i.instituteTypes,o=>(u(),c("button",{key:o.value,onClick:a=>i.applyTemplate(o),class:"p-4 border border-gray-300 rounded-lg text-left bg-white hover:border-gray-400 transition-colors"},[t("div",Gs,[e[18]||(e[18]=t("div",{class:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),t("div",null,[t("h4",Us,m(o.label),1),t("p",Vs,m(o.grades.length)+" pre-defined grades",1)])])],8,Ls))),128))])]),t("div",Bs,[t("div",Ys,[t("div",qs,[e[21]||(e[21]=t("h4",{class:"text-lg font-semibold text-gray-800"},"Grading Scale",-1)),t("button",{onClick:e[4]||(e[4]=(...o)=>i.addGrade&&i.addGrade(...o)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 text-sm"},e[20]||(e[20]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",null,"Add Grade",-1)]))])]),t("div",Rs,[t("table",Ws,[e[24]||(e[24]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Grade Code"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Threshold (%)"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",Hs,[(u(!0),c(y,null,x(i.manualGrades,(o,a)=>(u(),c("tr",{key:a,class:"hover:bg-gray-50 transition-colors"},[t("td",$s,[C(t("input",{"onUpdate:modelValue":d=>o.grade_code=d,type:"text",placeholder:"e.g., A, B, C",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:e[5]||(e[5]=(...d)=>i.debouncedUpdate&&i.debouncedUpdate(...d))},null,40,Ks),[[T,o.grade_code]])]),t("td",Qs,[t("div",zs,[C(t("input",{"onUpdate:modelValue":d=>o.threshold=d,type:"number",min:"0",max:"100",step:"0.1",placeholder:"0-100",class:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:e[6]||(e[6]=(...d)=>i.debouncedUpdate&&i.debouncedUpdate(...d))},null,40,Js),[[T,o.threshold]]),e[22]||(e[22]=t("span",{class:"text-gray-500 text-sm"},"%",-1))])]),t("td",Zs,[C(t("input",{"onUpdate:modelValue":d=>o.description=d,type:"text",placeholder:"e.g., Excellent, Good, Average",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:e[7]||(e[7]=(...d)=>i.debouncedUpdate&&i.debouncedUpdate(...d))},null,40,Xs),[[T,o.description]])]),t("td",eo,[t("button",{onClick:d=>i.removeGrade(a),class:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",disabled:i.manualGrades.length<=1},e[23]||(e[23]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,to)])]))),128))])])]),i.manualGrades.length===0?(u(),c("div",so,[e[25]||(e[25]=t("p",{class:"text-gray-500 mb-4"},"No grades added yet.",-1)),t("button",{onClick:e[8]||(e[8]=(...o)=>i.addGrade&&i.addGrade(...o)),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Add First Grade ")])):S("",!0)]),i.showValidation&&i.hasManualValidationErrors?(u(),c("div",oo,[e[26]||(e[26]=t("div",{class:"flex items-center space-x-2 text-red-700"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("span",{class:"font-medium"},"Please fix the following issues:")],-1)),t("ul",io,[i.scaleName?S("",!0):(u(),c("li",no,"Grading scale name is required")),i.hasValidManualGrades?S("",!0):(u(),c("li",ro,"All grades must have a code and valid threshold (0-100)"))])])):S("",!0)])):S("",!0),t("div",lo,[e[27]||(e[27]=t("div",{class:"text-sm text-gray-500"}," This step is optional. ",-1)),t("div",ao,[t("button",{onClick:e[9]||(e[9]=(...o)=>i.skipGrading&&i.skipGrading(...o)),class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Skip Grading "),t("button",{onClick:e[10]||(e[10]=(...o)=>i.submitGrading&&i.submitGrading(...o)),disabled:!i.isFormValid&&i.selectedOption!=="",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed transition-colors"}," Continue ",8,uo)])])])}const mo=M(Ts,[["render",co],["__scopeId","data-v-d1923fe5"]]),go={name:"FeeStructureCreator",props:{values:Object},data(){return{selectedInstitutionType:"",selectedTemplates:{},newCategoryInputs:[],newAmountInputs:[],feeStructures:[],feeFrequencies:[{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"},{value:"Semi-Annually",label:"Semi-Annual"},{value:"Annually",label:"Annual"},{value:"Term-Wise",label:"Term-Wise"}],feeStructureTemplates:{school:[{name:"Annual Fees",frequency:"Annually",categories:[{name:"Admission Fee",amount:1e3},{name:"Development Fee",amount:1500},{name:"Uniform Fee",amount:2500}]},{name:"Monthly Tuition",frequency:"Monthly",categories:[{name:"Tuition Fee",amount:5e3},{name:"Transport Fee",amount:3e3}]},{name:"Quarterly Fees",frequency:"Quarterly",categories:[{name:"Sports Fee",amount:500},{name:"Library Fee",amount:300},{name:"Lab Fee",amount:800},{name:"Computer Fee",amount:600},{name:"Exam Fee",amount:400},{name:"Activity Fee",amount:700}]}],college:[{name:"Annual Fees",frequency:"Annually",categories:[{name:"Admission Fee",amount:5e3},{name:"University Fee",amount:3e3},{name:"Sports Fee",amount:800},{name:"Development Fee",amount:2500},{name:"Identity Card",amount:200},{name:"Study Material",amount:3e3},{name:"Placement Fee",amount:2e3}]},{name:"Semi-Annual Tuition",frequency:"Semi-Annually",categories:[{name:"Tuition Fee",amount:15e3},{name:"Library Fee",amount:1e3},{name:"Lab Fee",amount:2e3},{name:"Computer Fee",amount:1500},{name:"Exam Fee",amount:1e3}]}]}}},computed:{classes(){return this.values.classes||[]}},watch:{classes:{immediate:!0,handler(s){this.feeStructures=s.map(()=>[]),this.newCategoryInputs=new Array(s.length).fill({}),this.newAmountInputs=new Array(s.length).fill({})}},selectedTemplates:{handler(s){this.applyTemplatesToAll()},deep:!0},feeStructures:{handler(s){this.emitFeeStructures()},deep:!0}},methods:{getFrequencySelectClass(s){return{Monthly:"border-blue-200 text-blue-800 bg-blue-50",Quarterly:"border-purple-200 text-purple-800 bg-purple-50","Semi-Annually":"border-orange-200 text-orange-800 bg-orange-50",Annually:"border-green-200 text-green-800 bg-green-50","Term-Wise":"border-red-200 text-red-800 bg-red-50"}[s]||"border-gray-200 text-gray-800 bg-gray-50"},getFrequencyBadgeClass(s){return{Monthly:"bg-blue-100 text-blue-800 border-blue-200",Quarterly:"bg-purple-100 text-purple-800 border-purple-200","Semi-Annually":"bg-orange-100 text-orange-800 border-orange-200",Annually:"bg-green-100 text-green-800 border-green-200","Term-Wise":"bg-red-100 text-red-800 border-red-200"}[s]||"bg-gray-100 text-gray-800 border-gray-200"},selectInstitutionType(s){this.selectedInstitutionType=s,this.selectedTemplates={},this.feeStructures=this.classes.map(()=>[])},toggleTemplate(s){this.selectedTemplates[s]?(delete this.selectedTemplates[s],this.selectedTemplates=I({},this.selectedTemplates)):this.selectedTemplates=G(I({},this.selectedTemplates),{[s]:!0})},applyTemplatesToAll(){const s=Object.keys(this.selectedTemplates);this.feeStructures=this.classes.map((e,r)=>{const l=(this.feeStructures[r]||[]).filter(o=>!o.templateName||s.includes(o.templateName)),n=s.filter(o=>!l.some(a=>a.templateName===o)).map(o=>{const a=this.feeStructureTemplates[this.selectedInstitutionType].find(d=>d.name===o);return{name:a.name,frequency:a.frequency,templateName:a.name,components:a.categories.map(d=>({fees_category:d.name,amount:d.amount,discount:0,total:d.amount}))}});return[...l,...n]})},updateStructureName(s,e,r){this.feeStructures[s][e].name=r},updateStructureFrequency(s,e,r){this.feeStructures[s][e].frequency=r},addNewStructure(s){this.feeStructures[s]||(this.feeStructures[s]=[]);const e=this.feeStructures[s].length+1;this.feeStructures[s].push({name:`Custom Structure ${e}`,frequency:"Monthly",templateName:null,components:[]}),this.newCategoryInputs[s]||(this.newCategoryInputs[s]={},this.newAmountInputs[s]={}),this.newCategoryInputs[s][this.feeStructures[s].length-1]="",this.newAmountInputs[s][this.feeStructures[s].length-1]=0,this.newCategoryInputs=[...this.newCategoryInputs],this.newAmountInputs=[...this.newAmountInputs]},removeStructure(s,e){this.feeStructures[s].splice(e,1),this.newCategoryInputs[s]&&(delete this.newCategoryInputs[s][e],this.newCategoryInputs=[...this.newCategoryInputs]),this.newAmountInputs[s]&&(delete this.newAmountInputs[s][e],this.newAmountInputs=[...this.newAmountInputs])},updateComponentAmount(s,e,r,i){const l=this.feeStructures[s][e].components[r];l&&(l.amount=parseFloat(i)||0,l.total=l.amount)},validateComponentAmount(s){s.amount<=0&&(s.amount=0,s.total=0)},getCategoryInput(s,e){var r;return((r=this.newCategoryInputs[s])==null?void 0:r[e])||""},setCategoryInput(s,e,r){this.newCategoryInputs[s]||(this.newCategoryInputs[s]={}),this.newCategoryInputs[s][e]=r,this.newCategoryInputs=[...this.newCategoryInputs]},getAmountInput(s,e){var r;return((r=this.newAmountInputs[s])==null?void 0:r[e])||0},setAmountInput(s,e,r){this.newAmountInputs[s]||(this.newAmountInputs[s]={}),this.newAmountInputs[s][e]=parseFloat(r)||0,this.newAmountInputs=[...this.newAmountInputs]},addCustomCategory(s,e){var l;const r=(l=this.getCategoryInput(s,e))==null?void 0:l.trim(),i=this.getAmountInput(s,e);if(r&&i>0){const n=this.feeStructures[s][e],o=n.components.findIndex(a=>a.fees_category.toLowerCase()===r.toLowerCase());o>=0?(n.components[o].amount=i,n.components[o].total=i):n.components.push({fees_category:r,amount:i,discount:0,total:i}),this.setCategoryInput(s,e,""),this.setAmountInput(s,e,0)}},removeComponent(s,e,r){this.feeStructures[s][e].components.splice(r,1)},calculateStructureTotal(s,e){return this.feeStructures[s][e].components.reduce((i,l)=>i+l.amount,0)},getClassStructuresCount(s){return this.feeStructures[s]?this.feeStructures[s].length:0},getTotalStructures(){return this.feeStructures.reduce((s,e)=>s+(e?e.length:0),0)},getTotalCategories(){return this.feeStructures.reduce((s,e)=>s+(e?e.reduce((r,i)=>r+i.components.length,0):0),0)},getGrandTotal(){return this.feeStructures.reduce((s,e)=>s+(e?e.reduce((r,i)=>r+i.components.reduce((l,n)=>l+n.amount,0),0):0),0)},emitFeeStructures(){this.$emit("update-field",{field:"feeStructures",value:this.feeStructures})}}},po={class:"bg-white shadow rounded-lg p-6 space-y-6"},ho={class:"institution-type-section"},vo={class:"grid grid-cols-2 gap-4"},bo={key:0,class:"structure-templates-section"},fo={class:"flex items-center justify-between mb-3"},yo={class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},xo={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Co=["onClick"],So={class:"flex items-center justify-between"},wo={class:"flex items-center space-x-3"},_o={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},To={class:"font-medium text-gray-900 text-sm"},ko={class:"text-xs text-gray-500"},Do={class:"text-right"},Ao={key:1,class:"class-structures-section"},jo={class:"space-y-6"},Po={class:"flex items-center justify-between mb-4"},Mo={class:"flex items-center space-x-3"},Fo={class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},Eo={class:"text-blue-600 font-medium text-sm"},No={class:"font-semibold text-gray-900"},Oo={class:"text-xs text-gray-500"},Io=["onClick"],Lo={key:0,class:"space-y-3"},Go={class:"flex items-center justify-between mb-2"},Uo={class:"flex items-center space-x-2"},Vo=["value","onInput"],Bo={class:"relative"},Yo=["value","onChange"],qo=["value"],Ro={class:"flex items-center space-x-1"},Wo={class:"text-xs text-gray-500"},Ho=["onClick"],$o={class:"space-y-2"},Ko={class:"flex items-center space-x-3 flex-1"},Qo={class:"flex-1 min-w-0"},zo={class:"text-sm font-medium text-gray-800 block truncate"},Jo={class:"flex items-center space-x-2"},Zo={class:"flex items-center space-x-1"},Xo=["value","onInput","onBlur"],ei=["onClick"],ti={class:"flex space-x-2 mt-2"},si=["value","onInput","onKeydown"],oi={class:"relative"},ii=["value","onInput"],ni=["onClick","disabled"],ri={key:1,class:"text-center py-4 text-gray-500 text-sm"},li={key:2,class:"summary-section"},ai={class:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-100"},di={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},ui={class:"text-center"},ci={class:"text-2xl font-bold text-blue-600"},mi={class:"font-semibold text-gray-800 capitalize"},gi={class:"text-center"},pi={class:"text-2xl font-bold text-green-600"},hi={class:"font-semibold text-gray-800"},vi={class:"text-center"},bi={class:"text-2xl font-bold text-purple-600"},fi={class:"font-semibold text-gray-800"},yi={class:"text-center"},xi={class:"text-2xl font-bold text-orange-600"},Ci={class:"font-semibold text-gray-800"},Si={class:"mt-4 pt-4 border-t border-blue-200"},wi={class:"text-center"},_i={class:"text-lg font-bold text-gray-800"},Ti={key:3,class:"text-center py-8"};function ki(s,e,r,i,l,n){return u(),c("div",po,[e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-gray-800 border-b pb-3"},"Create Fee Structures",-1)),t("div",ho,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Select Institution Type",-1)),t("div",vo,[t("div",{class:k(["institution-card p-4 border-2 rounded-lg cursor-pointer transition-all duration-200",l.selectedInstitutionType==="school"?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-blue-300 bg-white"]),onClick:e[0]||(e[0]=o=>n.selectInstitutionType("school"))},e[2]||(e[2]=[$('<div class="text-center" data-v-62fb6488><div class="w-10 h-10 mx-auto mb-2 bg-blue-100 rounded-full flex items-center justify-center" data-v-62fb6488><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-62fb6488><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z" data-v-62fb6488></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l9 5m-9-5v8" data-v-62fb6488></path></svg></div><h4 class="font-medium text-gray-900 text-sm" data-v-62fb6488>School</h4><p class="text-xs text-gray-500 mt-1" data-v-62fb6488>Primary &amp; Secondary</p></div>',1)]),2),t("div",{class:k(["institution-card p-4 border-2 rounded-lg cursor-pointer transition-all duration-200",l.selectedInstitutionType==="college"?"border-green-500 bg-green-50 shadow-sm":"border-gray-200 hover:border-green-300 bg-white"]),onClick:e[1]||(e[1]=o=>n.selectInstitutionType("college"))},e[3]||(e[3]=[$('<div class="text-center" data-v-62fb6488><div class="w-10 h-10 mx-auto mb-2 bg-green-100 rounded-full flex items-center justify-center" data-v-62fb6488><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-62fb6488><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-62fb6488></path></svg></div><h4 class="font-medium text-gray-900 text-sm" data-v-62fb6488>College</h4><p class="text-xs text-gray-500 mt-1" data-v-62fb6488>Higher Education</p></div>',1)]),2)])]),l.selectedInstitutionType?(u(),c("div",bo,[t("div",fo,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Fee Structure Templates",-1)),t("span",yo,m(Object.keys(l.selectedTemplates).length)+" selected ",1)]),t("div",xo,[(u(!0),c(y,null,x(l.feeStructureTemplates[l.selectedInstitutionType],o=>(u(),c("div",{key:o.name,class:k(["template-card p-3 border rounded-lg transition-all duration-200 cursor-pointer",l.selectedTemplates[o.name]?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-blue-300 bg-white"]),onClick:a=>n.toggleTemplate(o.name)},[t("div",So,[t("div",wo,[t("div",{class:k(["w-4 h-4 rounded border flex items-center justify-center transition-colors",l.selectedTemplates[o.name]?"bg-blue-500 border-blue-500":"bg-white border-gray-300"])},[l.selectedTemplates[o.name]?(u(),c("svg",_o,e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):S("",!0)],2),t("div",null,[t("h4",To,m(o.name),1),t("p",ko,m(o.frequency)+" â€¢ "+m(o.categories.length)+" categories",1)])]),t("div",Do,[t("span",{class:k(["text-xs font-medium px-2 py-1 rounded-full",n.getFrequencyBadgeClass(o.frequency)])},m(o.frequency),3)])])],10,Co))),128))])])):S("",!0),l.selectedInstitutionType&&n.classes.length>0?(u(),c("div",Ao,[e[14]||(e[14]=t("h4",{class:"text-md font-semibold text-gray-800 mb-4"},"Class-wise Fee Structures",-1)),t("div",jo,[(u(!0),c(y,null,x(n.classes,(o,a)=>(u(),c("div",{key:a,class:"class-fee-card p-4 border border-gray-200 rounded-lg bg-white shadow-sm"},[t("div",Po,[t("div",Mo,[t("div",Fo,[t("span",Eo,m(a+1),1)]),t("div",null,[t("h5",No,m(o.className),1),t("p",Oo,m(n.getClassStructuresCount(a))+" structures",1)])]),t("button",{onClick:d=>n.addNewStructure(a),class:"px-3 py-1 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm font-medium transition-colors flex items-center space-x-1"},e[7]||(e[7]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",null,"Add Structure",-1)]),8,Io)]),l.feeStructures[a]&&l.feeStructures[a].length>0?(u(),c("div",Lo,[(u(!0),c(y,null,x(l.feeStructures[a],(d,g)=>(u(),c("div",{key:g,class:"structure-card p-3 border border-gray-100 rounded-lg bg-gray-50"},[t("div",Go,[t("div",Uo,[t("input",{value:d.name,onInput:b=>n.updateStructureName(a,g,b.target.value),class:"font-medium text-gray-800 text-sm bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none px-1 py-0.5"},null,40,Vo),t("div",Bo,[t("select",{value:d.frequency,onChange:b=>n.updateStructureFrequency(a,g,b.target.value),class:k(["text-xs font-medium pr-8 pl-3 py-1 rounded-full border bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors",n.getFrequencySelectClass(d.frequency)])},[(u(!0),c(y,null,x(l.feeFrequencies,b=>(u(),c("option",{key:b.value,value:b.value,class:"text-gray-800"},m(b.label),9,qo))),128))],42,Yo),e[8]||(e[8]=t("div",{class:"custom-select-arrow"},[t("svg",{class:"w-3 h-3 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),t("div",Ro,[t("span",Wo,"Total: â‚¹"+m(n.calculateStructureTotal(a,g).toLocaleString()),1),l.feeStructures[a].length>1?(u(),c("button",{key:0,onClick:b=>n.removeStructure(a,g),class:"text-red-400 hover:text-red-600 transition-colors p-1",title:"Remove structure"},e[9]||(e[9]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ho)):S("",!0)])]),t("div",$o,[(u(!0),c(y,null,x(d.components,(b,F)=>(u(),c("div",{key:F,class:"component-item flex items-center justify-between p-2 bg-white rounded border border-gray-200"},[t("div",Ko,[e[10]||(e[10]=t("div",{class:"w-2 h-2 bg-blue-500 rounded-full"},null,-1)),t("div",Qo,[t("span",zo,m(b.fees_category),1)])]),t("div",Jo,[t("div",Zo,[e[11]||(e[11]=t("span",{class:"text-gray-500 text-xs"},"â‚¹",-1)),t("input",{type:"number",value:b.amount,onInput:A=>n.updateComponentAmount(a,g,F,A.target.value),onBlur:A=>n.validateComponentAmount(b),class:"w-20 px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,Xo)]),t("button",{onClick:A=>n.removeComponent(a,g,F),class:"text-red-400 hover:text-red-600 transition-colors p-1",title:"Remove category"},e[12]||(e[12]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ei)])]))),128))]),t("div",ti,[t("input",{value:n.getCategoryInput(a,g),onInput:b=>n.setCategoryInput(a,g,b.target.value),onKeydown:U(b=>n.addCustomCategory(a,g),["enter"]),placeholder:"Custom category name...",class:"flex-1 px-2 py-1 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,si),t("div",oi,[e[13]||(e[13]=t("span",{class:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs"},"â‚¹",-1)),t("input",{value:n.getAmountInput(a,g),onInput:b=>n.setAmountInput(a,g,b.target.value),type:"number",placeholder:"Amount",class:"w-16 pl-6 pr-2 py-1 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,ii)]),t("button",{onClick:b=>n.addCustomCategory(a,g),disabled:!n.getCategoryInput(a,g)||!n.getAmountInput(a,g),class:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-xs font-medium transition-colors"}," Add ",8,ni)])]))),128))])):(u(),c("div",ri,' No fee structures added. Click "Add Structure" to create one. '))]))),128))])])):S("",!0),l.selectedInstitutionType&&n.classes.length>0?(u(),c("div",li,[e[20]||(e[20]=t("h4",{class:"text-md font-semibold text-gray-800 mb-3"},"Summary",-1)),t("div",ai,[t("div",di,[t("div",ui,[t("div",ci,m(l.selectedInstitutionType==="school"?"ðŸ«":"ðŸŽ“"),1),e[15]||(e[15]=t("div",{class:"text-gray-600 mt-1"},"Institution",-1)),t("div",mi,m(l.selectedInstitutionType),1)]),t("div",gi,[t("div",pi,m(n.classes.length),1),e[16]||(e[16]=t("div",{class:"text-gray-600 mt-1"},"Total Classes",-1)),t("div",hi,m(n.classes.length),1)]),t("div",vi,[t("div",bi,m(n.getTotalStructures()),1),e[17]||(e[17]=t("div",{class:"text-gray-600 mt-1"},"Total Structures",-1)),t("div",fi,m(n.getTotalStructures()),1)]),t("div",yi,[t("div",xi,m(n.getTotalCategories()),1),e[18]||(e[18]=t("div",{class:"text-gray-600 mt-1"},"Total Categories",-1)),t("div",Ci,m(n.getTotalCategories()),1)])]),t("div",Si,[t("div",wi,[t("div",_i,"â‚¹"+m(n.getGrandTotal().toLocaleString()),1),e[19]||(e[19]=t("div",{class:"text-gray-600 text-sm"},"Grand Total Across All Classes",-1))])])])])):S("",!0),l.selectedInstitutionType&&n.classes.length===0?(u(),c("div",Ti,e[21]||(e[21]=[$('<div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center" data-v-62fb6488><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-62fb6488><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-62fb6488></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2" data-v-62fb6488>No Classes Found</h4><p class="text-gray-500 text-sm" data-v-62fb6488>Please go back and set up classes first to create fee structures.</p>',3)]))):S("",!0)])}const Di=M(go,[["render",ki],["__scopeId","data-v-62fb6488"]]),Ai={name:"MultiStepForm",components:{EmailAccountSetup:_e,AcademicYearTerms:it,UsePreviousData:pt,ProgramSelection:Dt,SubjectsDivisions:_s,GradingSystem:mo,FeeStructureCreator:Di},setup(){const s=_(0),e=_([]),r=_(!1),i=_(!1),l=_(!1),n=_(""),o=_([]),a=_(!1),d=pe({email:"",googleAppPassword:"",academicYear:"",academicYearStart:"",academicYearEnd:"",numberOfTerms:"",terms:[],selectedTerm:"",classes:[],subjects:[],divisions:[],commonSubjects:[],commonDivisions:[],dontCreateClasses:!1,feeStructures:[],setAsCurrent:!1,gradingSystem:{selectedOption:"",scaleName:"",previousScaleName:"",gradeData:null},gradingCompleted:!1}),g=_([{title:"Email Account Setup (Optional)",component:"EmailAccountSetup"},{title:"Academic Year & Terms",component:"AcademicYearTerms"},{title:"Grading System (Optional)",component:"GradingSystem"},{title:"Use Previous Data",component:"UsePreviousData"},{title:"Select Institution Type & Classes",component:"ProgramSelection"},{title:"Create Fee Structures",component:"FeeStructureCreator"},{title:"Subjects and Divisions",component:"SubjectsDivisions"}]),b=V({url:"school.al_ummah.api3.get_previous_data",params:{values:{}},onSuccess:p=>{e.value=Array.isArray(p)?p.map(h=>G(I({},h),{academicYear:h.json_data?JSON.parse(h.json_data).academicYear:""})):[]},onError:p=>{console.error("Error fetching previous data:",p),e.value=[]}}),F=V({url:"school.al_ummah.api3.create_email_account",params:{email_id:"",password:""},onSuccess:()=>{alert("Email account setup successfully!")},onError:p=>{console.error("Error setting up email account:",p),alert("Error setting up email account.")}}),A=V({url:"school.al_ummah.api3.quick_setup",params:{values:{}},onSuccess:()=>{l.value=!0,s.value++,r.value=!1,i.value=!0},onError:p=>{var h;l.value=!1,n.value=((h=p.messages)==null?void 0:h[0])||"An error occurred while submitting the form.",console.error("Submission error:",p),r.value=!1,i.value=!0}});function K(){d.gradingCompleted=!0,R()}function Y({classNames:p}){const h=[...d.classes],w=h.reduce((f,D)=>Math.max(f,D.classIndex||0),0),v=p.map((f,D)=>({className:f,subjects:[],divisions:[{divisionName:""}],classIndex:w+D+1}));d.classes=[...h,...v]}function q(){b.reload()}function Q({field:p,value:h,parent:w=null}){w&&d[w]?d[w][p]=h:d[p]=h}function z({field:p,index:h,subField:w,value:v}){h!==void 0&&w?d[p][h][w]=v:h!==void 0?d[p][h]=v:d[p]=v}function J(){return ie(this,null,function*(){const{email:p,googleAppPassword:h}=d;if(!p||!h){alert("Please provide both email and Google app password.");return}F.update({params:{email_id:p,password:h}}),F.submit()})}function Z(){const p=parseInt(d.numberOfTerms,10),h=new Date(d.academicYearStart),w=new Date(d.academicYearEnd);if(!p||p<=0){alert("Please enter a valid number of terms.");return}if(isNaN(h.getTime())){alert("Please enter valid 'From' date.");return}if(isNaN(w.getTime())){alert("Please enter valid 'To' date.");return}if(h>=w){alert("'From' date must be before 'To' date.");return}const v=Math.ceil((w-h)/(1e3*60*60*24)),f=Math.floor(v/p),D=[];let N=new Date(h);for(let L=0;L<p;L++){const O=new Date(N);O.setDate(N.getDate()+f-1),L===p-1&&O.setTime(w.getTime()),D.push({name:`Term ${L+1}`,startDate:N.toISOString().split("T")[0],endDate:O.toISOString().split("T")[0]}),N=new Date(O),N.setDate(N.getDate()+1)}d.terms=D}function X(p){if(!(p!=null&&p.json_data)){console.error("Invalid or missing previous data");return}try{const h=JSON.parse(p.json_data);d.classes=h.classes||[],d.subjects=h.subjects||[]}catch(h){console.error("Error parsing previous data:",h),alert("Failed to load previous data. Please try another selection.")}}function R(){s.value<g.value.length-1?(s.value++,a.value=!1):W()}function P(){s.value>0&&(s.value--,a.value=!1)}function W(){r.value=!0,i.value=!1,l.value=!1,n.value="",a.value=!1;const h=H(d,["selectedTerm","commonSubjects","commonDivisions","divisions","institutionName","logo","dontCreateClasses","subjects","terms","email","googleAppPassword","classes","gradingSystem","gradingCompleted","setAsCurrent"]);if(h.length>0){o.value=h,a.value=!0,r.value=!1,window.scrollTo({top:0,behavior:"smooth"});return}A.update({params:{values:I({},d)}}),A.submit()}function H(p,h){const w=[];return Object.entries(p).forEach(([v,f])=>{if(!h.includes(v)){if(Array.isArray(f))if(f.length===0){const D=E(v);w.push(`${D} list is empty`)}else f.forEach((D,N)=>{typeof D=="object"&&D!==null&&Object.entries(D).forEach(([L,O])=>{if(!O||typeof O=="string"&&O.trim()===""){const re=E(L),le=E(v);w.push(`${le} ${N+1}: ${re} is required`)}})});else if(!f||typeof f=="string"&&f.trim()===""){const D=E(v);w.push(`${D} is required`)}}}),w}function E(p){return p.replace(/([A-Z])/g," $1").replace(/^./,h=>h.toUpperCase()).replace(/([A-Z])/g," $1").trim()}return te(()=>{q()}),{currentStep:s,previousDataList:e,isSubmitting:r,showResultMessage:i,submitSuccess:l,errorMessage:n,missingFields:o,showMissingFields:a,formValues:d,steps:g,quickSetupResource:A,autoCreateClasses:Y,fetchPreviousData:q,updateField:Q,updateFieldArray:z,submitEmailAccount:J,autoCreateTerms:Z,usePreviousData:X,handleGradingCompleted:K,nextStep:R,prevStep:P,submitForm:W,checkMissingFields:H,formatFieldName:E}}},ji={class:"p-4 max-w-4xl mx-auto"},Pi={key:0},Mi={class:"text-2xl font-semibold mb-6"},Fi={key:0,class:"missing-fields-alert"},Ei={class:"alert-header"},Ni={class:"alert-content"},Oi={class:"missing-fields-list"},Ii={class:"flex justify-between gap-4"},Li=["disabled"],Gi={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ui={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Vi={class:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full text-center"},Bi={key:0,class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100"},Yi={key:1,class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},qi={class:"mt-3 text-lg font-medium text-gray-900"},Ri={class:"mt-2 text-sm text-gray-500"},Wi={class:"mt-5"},Hi={key:3,class:"text-center mt-10"};function $i(s,e,r,i,l,n){return u(),c("div",ji,[i.currentStep<i.steps.length?(u(),c("div",Pi,[t("h2",Mi,m(i.steps[i.currentStep].title),1),i.missingFields.length>0&&i.showMissingFields?(u(),c("div",Fi,[t("div",Ei,[e[5]||(e[5]=t("div",{class:"alert-icon"},[t("svg",{class:"icon",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})])],-1)),e[6]||(e[6]=t("h3",{class:"alert-title"},"Required Information Missing",-1)),t("button",{onClick:e[0]||(e[0]=o=>i.showMissingFields=!1),class:"close-button"},e[4]||(e[4]=[t("svg",{class:"close-icon",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1)]))]),t("div",Ni,[e[8]||(e[8]=t("p",{class:"alert-description"},"Please fill in the following required fields before proceeding:",-1)),t("ul",Oi,[(u(!0),c(y,null,x(i.missingFields,(o,a)=>(u(),c("li",{key:a,class:"missing-field-item"},[e[7]||(e[7]=t("span",{class:"field-bullet"},"â€¢",-1)),j(" "+m(o),1)]))),128))])])])):S("",!0),(u(),he(ve(i.steps[i.currentStep].component),{values:i.formValues,previousDataList:i.previousDataList,onUpdateField:i.updateField,onUpdateFieldArray:i.updateFieldArray,onSubmitEmail:i.submitEmailAccount,onAutoCreateTerms:i.autoCreateTerms,onAutoCreateClasses:i.autoCreateClasses,onUsePreviousData:i.usePreviousData,onGradingCompleted:i.handleGradingCompleted,class:"mb-6"},null,40,["values","previousDataList","onUpdateField","onUpdateFieldArray","onSubmitEmail","onAutoCreateTerms","onAutoCreateClasses","onUsePreviousData","onGradingCompleted"])),t("div",Ii,[i.currentStep>0?(u(),c("button",{key:0,onClick:e[1]||(e[1]=(...o)=>i.prevStep&&i.prevStep(...o)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300"}," Back ")):S("",!0),t("button",{onClick:e[2]||(e[2]=(...o)=>i.nextStep&&i.nextStep(...o)),class:"ml-auto px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:i.isSubmitting||i.quickSetupResource.loading},m(i.currentStep===i.steps.length-1?i.isSubmitting?"Submitting...":"Submit":"Next"),9,Li)])])):S("",!0),i.isSubmitting?(u(),c("div",Gi,e[9]||(e[9]=[t("div",{class:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full text-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),t("h3",{class:"text-lg font-medium text-gray-900"},"Submitting your data..."),t("p",{class:"mt-2 text-sm text-gray-500"},"Please wait while we process your information.")],-1)]))):S("",!0),i.showResultMessage?(u(),c("div",Ui,[t("div",Vi,[i.submitSuccess?(u(),c("div",Bi,e[10]||(e[10]=[t("svg",{class:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):(u(),c("div",Yi,e[11]||(e[11]=[t("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))),t("h3",qi,m(i.submitSuccess?"Form Submitted Successfully!":"Submission Failed"),1),t("p",Ri,m(i.submitSuccess?"Your data has been successfully processed.":i.errorMessage||"An error occurred while submitting the form."),1),t("div",Wi,[t("button",{onClick:e[3]||(e[3]=o=>i.showResultMessage=!1),class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," OK ")])])])):S("",!0),i.currentStep>=i.steps.length&&!i.isSubmitting&&!i.showResultMessage?(u(),c("div",Hi,e[12]||(e[12]=[t("h2",{class:"text-2xl font-semibold text-green-600"},"Form Submitted Successfully!",-1)]))):S("",!0)])}const Ki=M(Ai,[["render",$i],["__scopeId","data-v-0398977c"]]),Qi={components:{MultiStepForm:Ki}},zi={class:"app-container"};function Ji(s,e,r,i,l,n){const o=fe("MultiStepForm");return u(),c("div",zi,[be(o)])}const tn=M(Qi,[["render",Ji]]);export{tn as default};
