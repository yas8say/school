import{_ as j,q as E,r as v,j as k,k as L,c as n,b as a,l as c,t as u,f as i,v as d,g as C,F as V,h as S,i as I,n as P,o as t}from"./index-AyqD_6TW.js";/* empty css             */const _={setup(){const o=E({firstName:"",middleName:"",lastName:"",gender:"",mobile:"",email:"",dob:"",doj:"",panNumber:"",bankName:"",accountNumber:"",ifscCode:"",designation:"",address:"",className:null,divisionName:null,attendanceDeviceId:""}),e=v([]),g=v([]),s=v(!1),N=v(null),m=E({}),l=v(!1),b=v(!1),f=v(""),D=v(""),y=k({url:"school.al_ummah.api3.get_classes",params:{values:{}},onSuccess:r=>{e.value=Array.isArray(r)?r:[],console.log("Classes loaded:",e.value)},onError:r=>{console.error("Error fetching classes:",r),e.value=[]}}),h=k({url:"school.al_ummah.api3.get_divisions1",params:{values:{classId:o.className}},onSuccess:r=>{g.value=Array.isArray(r)?r:[],console.log("Divisions loaded:",g.value)},onError:r=>{console.error("Error fetching divisions:",r),g.value=[]}}),p=k({url:"school.al_ummah.api3.enroll_single_instructor",params:{teacher:{"First Name":o.firstName,"Middle Name":o.middleName,"Last Name":o.lastName,Gender:o.gender,Mobile:o.mobile,Email:o.email,"Date of Birth":o.dob,"Date of Joining":o.doj,"PAN Number":o.panNumber,"Bank Name":o.bankName,"Bank A/C No.":o.accountNumber,"IFSC Code":o.ifscCode,Designation:o.designation,"Current Address":o.address,Class:o.className||"",Division:o.divisionName||"","Attendance Device ID (Biometric/RF tag ID)":o.attendanceDeviceId}},onSuccess:r=>{s.value=!1,b.value=!0,r&&r.message?D.value=r.message:D.value=`Teacher ${o.firstName} ${o.lastName} has been successfully enrolled${o.designation?` as ${o.designation}`:""}.`,l.value=!0},onError:r=>{s.value=!1,b.value=!1,r.messages&&r.messages.length>0?f.value=r.messages[0]:r.message?f.value=r.message:f.value="An unexpected error occurred while enrolling the teacher. Please try again.",l.value=!0}});L(()=>{y.reload()});function F(){o.divisionName=null,m.divisionName="",o.className?(h.update({params:{values:{classId:o.className}}}),h.reload()):g.value=[]}function R(){Object.assign(m,{});let r=!0;return o.firstName.trim()||(m.firstName="First name is required",r=!1),o.lastName.trim()||(m.lastName="Last name is required",r=!1),o.gender||(m.gender="Gender is required",r=!1),o.dob||(m.dob="Date of birth is required",r=!1),o.email.trim()?q(o.email)||(m.email="Please enter a valid email",r=!1):(m.email="Email is required",r=!1),o.mobile.trim()?w(o.mobile)||(m.mobile="Please enter a valid mobile number",r=!1):(m.mobile="Mobile number is required",r=!1),r}function q(r){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)}function w(r){return/^[0-9]{10,15}$/.test(r)}function B(){R()&&U()}function U(){s.value=!0,p.update({params:{teacher:{"First Name":o.firstName,"Middle Name":o.middleName,"Last Name":o.lastName,Gender:o.gender,Mobile:o.mobile,Email:o.email,"Date of Birth":o.dob,"Date of Joining":o.doj,"PAN Number":o.panNumber,"Bank Name":o.bankName,"Bank A/C No.":o.accountNumber,"IFSC Code":o.ifscCode,Designation:o.designation,"Current Address":o.address,Class:o.className||"",Division:o.divisionName||"","Attendance Device ID (Biometric/RF tag ID)":o.attendanceDeviceId}}}),p.submit()}function A(){Object.assign(o,{firstName:"",middleName:"",lastName:"",gender:"",mobile:"",email:"",dob:"",doj:"",panNumber:"",bankName:"",accountNumber:"",ifscCode:"",designation:"",address:"",className:null,divisionName:null,attendanceDeviceId:""}),g.value=[],Object.assign(m,{}),x()}function T(){A(),l.value=!1,b.value=!1}function x(r,M="info"){N.value=null}return{teacherData:o,classes:e,divisions:g,isLoading:s,message:N,errors:m,classesResource:y,divisionsResource:h,enrollTeacherResource:p,showResultMessage:l,submitSuccess:b,errorMessage:f,successMessage:D,onClassChange:F,validateAndSubmit:B,resetForm:A,resetAndClose:T}}},G={class:"enrollment-container"},H={key:0,class:"loading-overlay"},O={key:1,class:"modal-overlay"},J={class:"result-modal"},z={key:0,class:"success-icon"},Z={key:1,class:"error-icon"},K={class:"result-title"},Q={class:"result-description"},W={class:"modal-actions"},X={class:"form-card"},Y={class:"form-section"},$={class:"form-grid"},ee={class:"form-group required"},se={key:0,class:"error-message"},ae={class:"form-group"},le={class:"form-group required"},oe={key:0,class:"error-message"},re={class:"form-group required"},ne={key:0,class:"error-message"},te={class:"form-group required"},ie={key:0,class:"error-message"},de={class:"form-section"},me={class:"form-grid"},ue={class:"form-group required"},ce={key:0,class:"error-message"},ve={class:"form-group required"},ge={key:0,class:"error-message"},be={class:"form-group"},fe={class:"form-section"},Ne={class:"form-grid"},De={class:"form-group"},he=["disabled"],pe=["value"],ke={key:0,class:"error-message"},Ce={class:"form-group"},ye=["disabled"],Ae=["value"],Me={key:0,class:"error-message"},Ee={class:"form-group"},Ve={class:"form-group"},Se={class:"form-group"},Ie={class:"form-section"},Fe={class:"form-grid"},Re={class:"form-group"},qe={class:"form-group"},we={class:"form-group"},Be={class:"form-group"},Ue={class:"form-actions"},Te=["disabled"],xe={key:0,class:"button-content"},je={key:1,class:"button-content"},Le=["disabled"];function Pe(o,e,g,s,N,m){return t(),n("div",G,[s.isLoading||s.enrollTeacherResource.loading?(t(),n("div",H,e[23]||(e[23]=[a("div",{class:"loading-modal"},[a("div",{class:"loading-spinner"}),a("h3",{class:"loading-title"},"Enrolling Teacher..."),a("p",{class:"loading-description"},"Please wait while we process the teacher information.")],-1)]))):c("",!0),s.showResultMessage?(t(),n("div",O,[a("div",J,[s.submitSuccess?(t(),n("div",z,e[24]||(e[24]=[a("svg",{class:"icon",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):(t(),n("div",Z,e[25]||(e[25]=[a("svg",{class:"icon",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))),a("h3",K,u(s.submitSuccess?"Teacher Enrolled Successfully!":"Enrollment Failed"),1),a("p",Q,u(s.submitSuccess?s.successMessage:s.errorMessage),1),a("div",W,[s.submitSuccess?(t(),n("button",{key:0,onClick:e[0]||(e[0]=(...l)=>s.resetAndClose&&s.resetAndClose(...l)),class:"success-button"}," Add Another Teacher ")):(t(),n("button",{key:1,onClick:e[1]||(e[1]=l=>s.showResultMessage=!1),class:"primary-button"}," Try Again ")),s.submitSuccess?(t(),n("button",{key:2,onClick:e[2]||(e[2]=l=>s.showResultMessage=!1),class:"secondary-button"}," Close ")):c("",!0)])])])):c("",!0),e[53]||(e[53]=a("div",{class:"header"},[a("h1",{class:"title"},"Teacher Enrollment"),a("p",{class:"subtitle"},"Add new teacher to the system")],-1)),a("div",X,[e[52]||(e[52]=a("h2",{class:"form-title"},"Teacher Information",-1)),a("div",Y,[e[32]||(e[32]=a("h3",{class:"section-title"},"Personal Details",-1)),a("div",$,[a("div",ee,[e[26]||(e[26]=a("label",null,"First Name",-1)),i(a("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.teacherData.firstName=l),class:"input",placeholder:"Enter first name",required:""},null,512),[[d,s.teacherData.firstName]]),s.errors.firstName?(t(),n("span",se,u(s.errors.firstName),1)):c("",!0)]),a("div",ae,[e[27]||(e[27]=a("label",null,"Middle Name",-1)),i(a("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.teacherData.middleName=l),class:"input",placeholder:"Enter middle name"},null,512),[[d,s.teacherData.middleName]])]),a("div",le,[e[28]||(e[28]=a("label",null,"Last Name",-1)),i(a("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.teacherData.lastName=l),class:"input",placeholder:"Enter last name",required:""},null,512),[[d,s.teacherData.lastName]]),s.errors.lastName?(t(),n("span",oe,u(s.errors.lastName),1)):c("",!0)]),a("div",re,[e[30]||(e[30]=a("label",null,"Gender",-1)),i(a("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.teacherData.gender=l),class:"picker",required:""},e[29]||(e[29]=[a("option",{value:""},"Select Gender",-1),a("option",{value:"Male"},"Male",-1),a("option",{value:"Female"},"Female",-1),a("option",{value:"Other"},"Other",-1)]),512),[[C,s.teacherData.gender]]),s.errors.gender?(t(),n("span",ne,u(s.errors.gender),1)):c("",!0)]),a("div",te,[e[31]||(e[31]=a("label",null,"Date of Birth",-1)),i(a("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>s.teacherData.dob=l),type:"date",class:"input",required:""},null,512),[[d,s.teacherData.dob]]),s.errors.dob?(t(),n("span",ie,u(s.errors.dob),1)):c("",!0)])])]),a("div",de,[e[36]||(e[36]=a("h3",{class:"section-title"},"Contact Information",-1)),a("div",me,[a("div",ue,[e[33]||(e[33]=a("label",null,"Email",-1)),i(a("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>s.teacherData.email=l),type:"email",class:"input",placeholder:"Enter email",required:""},null,512),[[d,s.teacherData.email]]),s.errors.email?(t(),n("span",ce,u(s.errors.email),1)):c("",!0)]),a("div",ve,[e[34]||(e[34]=a("label",null,"Mobile",-1)),i(a("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>s.teacherData.mobile=l),class:"input",placeholder:"Enter mobile number",required:""},null,512),[[d,s.teacherData.mobile]]),s.errors.mobile?(t(),n("span",ge,u(s.errors.mobile),1)):c("",!0)]),a("div",be,[e[35]||(e[35]=a("label",null,"Address",-1)),i(a("textarea",{"onUpdate:modelValue":e[10]||(e[10]=l=>s.teacherData.address=l),class:"input textarea",placeholder:"Enter address"},null,512),[[d,s.teacherData.address]])])])]),a("div",fe,[e[44]||(e[44]=a("h3",{class:"section-title"},"School Information",-1)),a("div",Ne,[a("div",De,[e[38]||(e[38]=a("label",null,"Class / Program",-1)),i(a("select",{"onUpdate:modelValue":e[11]||(e[11]=l=>s.teacherData.className=l),class:"picker",onChange:e[12]||(e[12]=(...l)=>s.onClassChange&&s.onClassChange(...l)),disabled:s.classesResource.loading},[e[37]||(e[37]=a("option",{value:null},"Select Class / Program",-1)),(t(!0),n(V,null,S(s.classes,l=>(t(),n("option",{key:l.name,value:l.name},u(l.name),9,pe))),128))],40,he),[[C,s.teacherData.className]]),s.errors.className?(t(),n("span",ke,u(s.errors.className),1)):c("",!0)]),a("div",Ce,[e[40]||(e[40]=a("label",null,"Division / Student Group",-1)),i(a("select",{"onUpdate:modelValue":e[13]||(e[13]=l=>s.teacherData.divisionName=l),class:"picker",disabled:!s.teacherData.className||s.divisionsResource.loading},[e[39]||(e[39]=a("option",{value:null},"Select Division / Student Group",-1)),(t(!0),n(V,null,S(s.divisions,l=>(t(),n("option",{key:l.name,value:l.name},u(l.name),9,Ae))),128))],8,ye),[[C,s.teacherData.divisionName]]),s.errors.divisionName?(t(),n("span",Me,u(s.errors.divisionName),1)):c("",!0)]),a("div",Ee,[e[41]||(e[41]=a("label",null,"Designation",-1)),i(a("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>s.teacherData.designation=l),class:"input",placeholder:"Enter designation"},null,512),[[d,s.teacherData.designation]])]),a("div",Ve,[e[42]||(e[42]=a("label",null,"Date of Joining",-1)),i(a("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>s.teacherData.doj=l),type:"date",class:"input"},null,512),[[d,s.teacherData.doj]])]),a("div",Se,[e[43]||(e[43]=a("label",null,"Attendance Device ID (Biometric/RF tag ID)",-1)),i(a("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>s.teacherData.attendanceDeviceId=l),class:"input",placeholder:"Enter attendance device ID"},null,512),[[d,s.teacherData.attendanceDeviceId]])])])]),a("div",Ie,[e[49]||(e[49]=a("h3",{class:"section-title"},"Bank Details (Optional)",-1)),a("div",Fe,[a("div",Re,[e[45]||(e[45]=a("label",null,"Bank Name",-1)),i(a("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>s.teacherData.bankName=l),class:"input",placeholder:"Enter bank name"},null,512),[[d,s.teacherData.bankName]])]),a("div",qe,[e[46]||(e[46]=a("label",null,"Account Number",-1)),i(a("input",{"onUpdate:modelValue":e[18]||(e[18]=l=>s.teacherData.accountNumber=l),class:"input",placeholder:"Enter account number"},null,512),[[d,s.teacherData.accountNumber]])]),a("div",we,[e[47]||(e[47]=a("label",null,"IFSC Code",-1)),i(a("input",{"onUpdate:modelValue":e[19]||(e[19]=l=>s.teacherData.ifscCode=l),class:"input",placeholder:"Enter IFSC code"},null,512),[[d,s.teacherData.ifscCode]])]),a("div",Be,[e[48]||(e[48]=a("label",null,"PAN Number",-1)),i(a("input",{"onUpdate:modelValue":e[20]||(e[20]=l=>s.teacherData.panNumber=l),class:"input",placeholder:"Enter PAN number"},null,512),[[d,s.teacherData.panNumber]])])])]),a("div",Ue,[a("button",{class:"enroll-button",onClick:e[21]||(e[21]=(...l)=>s.validateAndSubmit&&s.validateAndSubmit(...l)),disabled:s.isLoading||s.enrollTeacherResource.loading||s.showResultMessage},[s.isLoading||s.enrollTeacherResource.loading?(t(),n("span",xe,e[50]||(e[50]=[a("span",{class:"spinner"},null,-1),I(" Processing... ")]))):(t(),n("span",je,e[51]||(e[51]=[a("svg",{class:"icon",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})],-1),I(" Enroll Teacher ")])))],8,Te),a("button",{class:"reset-button",onClick:e[22]||(e[22]=(...l)=>s.resetForm&&s.resetForm(...l)),disabled:s.isLoading||s.enrollTeacherResource.loading||s.showResultMessage}," Reset Form ",8,Le)]),s.message&&!s.showResultMessage?(t(),n("div",{key:0,class:P(["message",s.message.type])},u(s.message.text),3)):c("",!0)])])}const He=j(_,[["render",Pe]]);export{He as default};
