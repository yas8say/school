var ce=Object.defineProperty,me=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var ie=(s,e,r)=>e in s?ce(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,O=(s,e)=>{for(var r in e||(e={}))pe.call(e,r)&&ie(s,r,e[r]);if(oe)for(var r of oe(e))he.call(e,r)&&ie(s,r,e[r]);return s},L=(s,e)=>me(s,ge(e));var ne=(s,e,r)=>new Promise((n,u)=>{var i=a=>{try{l(r.next(a))}catch(h){u(h)}},o=a=>{try{l(r.throw(a))}catch(h){u(h)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,o);l((r=r.apply(s,e)).next())});import{_ as Y,o as d,a as c,b as t,z as x,C as k,A as te,F as S,l as C,t as m,i as f,B as ae,h as D,r as T,y as W,j as se,n as w,G as I,g as re,c as U,x as V,d as le,I as ve,q as fe,v as be,e as ye,f as xe}from"./index-DaBUP9Lm.js";/* empty css             */const Se={props:{values:Object},computed:{email:{get(){return this.values.email},set(s){this.$emit("update-field",{field:"email",value:s})}},googleAppPassword:{get(){return this.values.googleAppPassword},set(s){this.$emit("update-field",{field:"googleAppPassword",value:s})}}},methods:{updateField(s,e){this.$emit("update-field",{field:s,value:e})}}},Ce={class:"card"},_e={class:"field"},Te={class:"field"};function we(s,e,r,n,u,i){return d(),c("div",Ce,[t("div",_e,[e[5]||(e[5]=t("label",null,"Email Address",-1)),x(t("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=o=>i.email=o),placeholder:"Enter your email address",onInput:e[1]||(e[1]=o=>i.updateField("email",o.target.value))},null,544),[[k,i.email]])]),t("div",Te,[e[6]||(e[6]=t("label",null,"Google App Password",-1)),x(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=o=>i.googleAppPassword=o),placeholder:"Enter your Google app password",onInput:e[3]||(e[3]=o=>i.updateField("googleAppPassword",o.target.value))},null,544),[[k,i.googleAppPassword]])]),t("button",{onClick:e[4]||(e[4]=o=>s.$emit("submit-email"))},"Submit Email Account")])}const ke=Y(Se,[["render",we],["__scopeId","data-v-a1f91314"]]),De={props:{values:Object},data(){return{selectedTerm:"",lastValidTermCount:0}},computed:{setAsCurrent:{get(){return this.values.setAsCurrent||!1},set(s){this.$emit("update-field",{field:"setAsCurrent",value:s})}},academicYear:{get(){return this.values.academicYear},set(s){this.$emit("update-field",{field:"academicYear",value:s})}},academicYearStart:{get(){return this.values.academicYearStart},set(s){this.$emit("update-field",{field:"academicYearStart",value:s})}},academicYearEnd:{get(){return this.values.academicYearEnd},set(s){this.$emit("update-field",{field:"academicYearEnd",value:s})}},numberOfTerms:{get(){return this.values.numberOfTerms},set(s){this.$emit("update-field",{field:"numberOfTerms",value:s})}}},methods:{handleNumberOfTermsChange(s){const e=parseInt(s.target.value);!isNaN(e)&&e>0?(this.numberOfTerms=e,this.lastValidTermCount=e,this.adjustTermsToMatchCount()):this.numberOfTerms=this.lastValidTermCount},incrementTerms(){this.numberOfTerms=parseInt(this.numberOfTerms)+1,this.adjustTermsToMatchCount()},decrementTerms(){this.numberOfTerms>1&&(this.numberOfTerms=parseInt(this.numberOfTerms)-1,this.adjustTermsToMatchCount())},adjustTermsToMatchCount(){const s=this.values.terms.length,e=this.numberOfTerms;if(e>s){const r=e-s,n=[...this.values.terms];for(let u=0;u<r;u++){const i=s+u+1,{startDate:o,endDate:l}=this.calculateTermDates(i,e);n.push({name:`Term ${i}`,startDate:o,endDate:l})}this.$emit("update-field-array",{field:"terms",value:n})}else if(e<s){const r=s-e,n=[...this.values.terms];n.splice(-r,r),this.$emit("update-field-array",{field:"terms",value:n})}},calculateTermDates(s,e){if(!this.academicYearStart||!this.academicYearEnd)return{startDate:"",endDate:""};const r=new Date(this.academicYearStart),i=(new Date(this.academicYearEnd)-r)/e,o=new Date(r.getTime()+i*(s-1)),l=new Date(r.getTime()+i*s-1),a=h=>h.toISOString().split("T")[0];return{startDate:a(o),endDate:a(l)}},formatDate(s){if(!s)return"";const e={year:"numeric",month:"short",day:"numeric"};return new Date(s).toLocaleDateString(void 0,e)},updateField(s,e){this.$emit("update-field",{field:s,value:e})},updateTermField(s,e,r){this.$emit("update-field-array",{field:"terms",index:s,subField:e,value:r})},addTerm(){const s={name:"",startDate:"",endDate:""};this.$emit("update-field-array",{field:"terms",value:[...this.values.terms,s]}),this.numberOfTerms=this.values.terms.length},removeTerm(s){const e=[...this.values.terms];e.splice(s,1),this.$emit("update-field-array",{field:"terms",value:e}),this.numberOfTerms=e.length},handleTermsInput(s){const e=parseInt(s.target.value);!isNaN(e)&&e>0?(this.numberOfTerms=e,this.lastValidTermCount=e,this.$emit("auto-create-terms")):this.numberOfTerms=this.lastValidTermCount},incrementTerms(){this.numberOfTerms=parseInt(this.numberOfTerms)+1,this.$emit("auto-create-terms")},decrementTerms(){this.numberOfTerms>1&&(this.numberOfTerms=parseInt(this.numberOfTerms)-1,this.$emit("auto-create-terms"))}},mounted(){this.lastValidTermCount=this.numberOfTerms||1}},Ae={class:"academic-year-form"},je={class:"form-grid"},Ne={class:"form-row"},Me={class:"form-group full-width required"},Fe={class:"form-row date-range-row"},Be={class:"form-group required"},Pe={class:"form-group required"},Oe={class:"form-row"},Ye={class:"form-group full-width required"},Ee={class:"number-input-group"},Ge={class:"number-input-buttons"},Le=["disabled"],Ue={key:0,class:"form-row"},Ie={class:"form-group full-width"},Ve=["value"],We={class:"form-row"},qe={class:"form-group full-width"},Re={class:"checkbox-label"},$e={class:"terms-list"},He={class:"term-header"},ze={class:"section-title"},Ke=["onClick"],Qe={class:"term-body"},Je={class:"form-group required"},Ze=["onUpdate:modelValue","placeholder","onInput"],Xe={class:"form-row term-dates-row"},et={class:"form-group required"},tt=["onUpdate:modelValue","onInput"],st={class:"form-group required"},ot=["onUpdate:modelValue","onInput"],it={class:"form-actions"};function nt(s,e,r,n,u,i){return d(),c("div",Ae,[e[26]||(e[26]=t("div",{class:"form-header"},[t("p",{class:"form-subtitle"}," Provide details about the academic year, its duration, and terms. ")],-1)),t("div",je,[t("div",Ne,[t("div",Me,[e[15]||(e[15]=t("label",{class:"form-label"},"Academic Year",-1)),x(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>i.academicYear=o),class:"input",placeholder:"e.g., 2023-2024",onInput:e[1]||(e[1]=o=>i.updateField("academicYear",o.target.value))},null,544),[[k,i.academicYear]])])]),t("div",Fe,[t("div",Be,[e[16]||(e[16]=t("label",{class:"form-label"},"Start Date",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=o=>i.academicYearStart=o),class:"input",onInput:e[3]||(e[3]=o=>i.updateField("academicYearStart",o.target.value))},null,544),[[k,i.academicYearStart]])]),t("div",Pe,[e[17]||(e[17]=t("label",{class:"form-label"},"End Date",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=o=>i.academicYearEnd=o),class:"input",onInput:e[5]||(e[5]=o=>i.updateField("academicYearEnd",o.target.value))},null,544),[[k,i.academicYearEnd]])])]),t("div",Oe,[t("div",Ye,[e[18]||(e[18]=t("label",{class:"form-label"},"Number of Terms",-1)),t("div",Ee,[x(t("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=o=>i.numberOfTerms=o),class:"input number-input",placeholder:"e.g., 3",min:"1",onInput:e[7]||(e[7]=(...o)=>i.handleNumberOfTermsChange&&i.handleNumberOfTermsChange(...o))},null,544),[[k,i.numberOfTerms,void 0,{number:!0}]]),t("div",Ge,[t("button",{class:"number-input-btn minus-btn",onClick:e[8]||(e[8]=(...o)=>i.decrementTerms&&i.decrementTerms(...o)),disabled:i.numberOfTerms<=1,type:"button"}," âˆ’ ",8,Le),t("button",{class:"number-input-btn plus-btn",onClick:e[9]||(e[9]=(...o)=>i.incrementTerms&&i.incrementTerms(...o)),type:"button"}," + ")])])])]),i.setAsCurrent?(d(),c("div",Ue,[t("div",Ie,[e[20]||(e[20]=t("label",{class:"form-label"},"Current Academic Term",-1)),x(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>u.selectedTerm=o),class:"picker",onChange:e[11]||(e[11]=o=>i.updateField("selectedTerm",o.target.value))},[e[19]||(e[19]=t("option",{value:""},"-- Select a Term --",-1)),(d(!0),c(S,null,C(r.values.terms,(o,l)=>(d(),c("option",{key:l,value:o.name},m(o.name)+" ("+m(i.formatDate(o.startDate))+" - "+m(i.formatDate(o.endDate))+") ",9,Ve))),128))],544),[[te,u.selectedTerm]])])])):f("",!0),t("div",We,[t("div",qe,[t("label",Re,[x(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=o=>i.setAsCurrent=o),onChange:e[13]||(e[13]=o=>i.updateField("setAsCurrent",o.target.checked))},null,544),[[ae,i.setAsCurrent]]),e[21]||(e[21]=D(" Set as Current Academic Year "))])])])]),t("div",$e,[(d(!0),c(S,null,C(r.values.terms,(o,l)=>(d(),c("div",{key:l,class:"term-card form-card"},[t("div",He,[t("h4",ze,"Term "+m(l+1),1),t("button",{class:"trash-icon",onClick:a=>i.removeTerm(l),title:"Remove term",type:"button"}," âœ• ",8,Ke)]),t("div",Qe,[t("div",Je,[e[22]||(e[22]=t("label",{class:"form-label"},"Term Name",-1)),x(t("input",{type:"text","onUpdate:modelValue":a=>o.name=a,class:"input",placeholder:`e.g., Spring ${l+1}`,onInput:a=>i.updateTermField(l,"name",a.target.value)},null,40,Ze),[[k,o.name]])]),t("div",Xe,[t("div",et,[e[23]||(e[23]=t("label",{class:"form-label"},"Start Date",-1)),x(t("input",{type:"date","onUpdate:modelValue":a=>o.startDate=a,class:"input",onInput:a=>i.updateTermField(l,"startDate",a.target.value)},null,40,tt),[[k,o.startDate]])]),t("div",st,[e[24]||(e[24]=t("label",{class:"form-label"},"End Date",-1)),x(t("input",{type:"date","onUpdate:modelValue":a=>o.endDate=a,class:"input",onInput:a=>i.updateTermField(l,"endDate",a.target.value)},null,40,ot),[[k,o.endDate]])])])])]))),128))]),t("div",it,[t("button",{class:"primary-button",onClick:e[14]||(e[14]=(...o)=>i.addTerm&&i.addTerm(...o)),type:"button"},e[25]||(e[25]=[t("span",{class:"button-content"},[t("span",{class:"icon"},"+"),D(" Add Term ")],-1)]))])])}const rt=Y(De,[["render",nt],["__scopeId","data-v-49e5e63d"]]),at={props:{values:Object,previousDataList:Array},emits:["update-field","use-previous-data"],setup(s,{emit:e}){const r=T(null),n=T(s.values.dontCreateClasses||!1),u=T(!1),i=T(""),o=W({url:"school.al_ummah.api3.get_previous_data",params:{values:{}},onSuccess:h=>{console.log("Previous data loaded successfully")},onError:h=>{console.error("Error fetching previous data:",h)}}),l=()=>{if(!r.value){console.warn("No data selected");return}e("use-previous-data",r.value),i.value=r.value.academicYear,u.value=!0,setTimeout(()=>{u.value=!1},5e3)},a=()=>{e("update-field",{field:"dontCreateClasses",value:n.value})};return se(()=>{(!s.previousDataList||s.previousDataList.length===0)&&o.reload()}),{selectedPreviousData:r,dontCreateClasses:n,showSuccessMessage:u,usedPreviousYear:i,previousDataResource:o,handleUsePreviousData:l,updateDontCreateClasses:a}}},lt={class:"card"},ut={key:0,class:"loading"},dt={key:1},ct={key:0,class:"success-message"},mt={class:"field"},gt=["value"],pt=["disabled"];function ht(s,e,r,n,u,i){return d(),c("div",lt,[n.previousDataResource.loading?(d(),c("div",ut,"Loading previous data...")):(d(),c("div",dt,[n.showSuccessMessage?(d(),c("div",ct," âœ“ Previous data from "+m(n.usedPreviousYear)+" has been successfully loaded ",1)):f("",!0),t("div",mt,[x(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.selectedPreviousData=o)},[e[2]||(e[2]=t("option",{value:null},"Select a year",-1)),(d(!0),c(S,null,C(r.previousDataList,(o,l)=>(d(),c("option",{key:l,value:o},m(o.academicYear),9,gt))),128))],512),[[te,n.selectedPreviousData]])]),t("button",{onClick:e[1]||(e[1]=(...o)=>n.handleUsePreviousData&&n.handleUsePreviousData(...o)),disabled:!n.selectedPreviousData}," Use Previous Data ",8,pt)]))])}const vt=Y(at,[["render",ht],["__scopeId","data-v-6de0caab"]]),z={school:["Nursery","Jr KG","Sr KG","1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th"],college:["FY BSc-CS","SY BSc-CS","TY BSc-CS","Final Year BSc-CS","FY BCA","SY BCA","TY BCA","Final Year BCA","FY BSc-IT","SY BSc-IT","TY BSc-IT","Final Year BSc-IT","FY BBA","SY BBA","TY BBA","Final Year BBA","FY BCom","SY BCom","TY BCom","Final Year BCom","FY MSc-CS","SY MSc-CS","FY MBA","SY MBA","FY MCom","SY MCom"]},ft={"FY BSc-CS":["Programming in C","Discrete Mathematics","Computer Architecture","Operating Systems Basics","Digital Electronics"],"SY BSc-CS":["Data Structures","DBMS","Computer Networks","Web Technologies","Java Programming"],"TY BSc-CS":["Software Engineering","Computer Graphics","Information Security","Distributed Systems","Elective â€“ AI / ML / IoT"],"Final Year BSc-CS":["Cloud Computing","Advanced Algorithms","Data Warehousing & Mining","Project Work","Seminar"],"FY BCA":["Fundamentals of IT","Mathematics","C Programming","Business Communication","PC Software"],"SY BCA":["Data Structures","DBMS","Operating Systems","OOP with C++","Networking"],"TY BCA":["Web Development","Software Engineering","Java Programming","Computer Security","Mini Project"],"Final Year BCA":["Cloud Computing","Mobile App Development","Advanced Web Tech","Major Project","Internship"],"FY BSc-IT":["Basic Electronics","C Programming","Mathematics","IT Fundamentals","Web Design"],"SY BSc-IT":["OOP Java","DBMS","Networks","OS Concepts","Statistics"],"TY BSc-IT":["Software Engineering","Internet of Things","Cloud Computing","Cyber Security","Mini Project"],"Final Year BSc-IT":["Big Data","Advanced Security","Mobile Computing","Project Work","Seminar"],"FY BBA":["Business Management","Microeconomics","Business Mathematics","Marketing Principles","Communication Skills"],"SY BBA":["Human Resource Management","Finance Management","Organizational Behavior","Business Law","Operations Management"],"TY BBA":["International Business","Entrepreneurship","Research Methodology","Strategic Management","Taxation"],"Final Year BBA":["Project Work","Advanced HRM / Marketing / Finance","Business Ethics","Corporate Governance","Internship"],"FY BCom":["Financial Accounting","Business Economics","Mathematics & Statistics","Commerce","Business Communication"],"SY BCom":["Corporate Accounting","Cost Accounting","Business Law","Banking & Finance","Marketing"],"TY BCom":["Auditing","Taxation","Financial Management","E-Commerce","Business Environment"],"Final Year BCom":["Advanced Accounting","Corporate Finance","Research Project","GST & Auditing","Entrepreneurship"],"FY MSc-CS":["Advanced Algorithms","Advanced DBMS","Machine Learning Basics","Data Science with Python","Research Methodology"],"SY MSc-CS":["Deep Learning","Distributed Computing","Big Data Analytics","Cyber Security","Thesis"],"FY MBA":["Principles of Management","Managerial Economics","Accounting for Managers","Marketing Management","Organizational Behavior"],"SY MBA":["Financial Management","Business Analytics","Operations Research","Strategic Management","Major Project / Internship"],"FY MCom":["Managerial Accounting","Advanced Economics","Corporate Finance","Taxation Laws","Research Methods"],"SY MCom":["Advanced Auditing","International Finance","Business Analytics","Corporate Governance","Thesis / Project"]},bt={props:{values:Object},data(){return{isUpdatingClasses:!1,commonSubjectsList:[],commonDivisionsList:[],newCommonSubject:"",newCommonDivision:"",classesWithText:[],collegeProgramsSubjects:ft,programRefs:{},inputRefs:{},quickSelectDivisions:["A","B","C","D","E","F","G","H"],commonSubjects:["Math","Social Studies","Science","English","History","Geography","Physics","Chemistry","Biology","Computer","Civics","Hindi","Marathi","Arabic","Play"]}},computed:{institutionType:{get(){return this.values.selectedInstitution||"school"},set(s){this.updateField("selectedInstitution",s)}},allSingleGroup(){return this.classesWithText.length>0&&this.classesWithText.every(s=>s.isSingleGroup)},mappedProgramNames(){return Object.keys(this.collegeProgramsSubjects)}},watch:{"values.selectedInstitution":{immediate:!0,handler(s){s||this.updateField("selectedInstitution","school")}},"values.commonDivisions":{immediate:!0,handler(s){this.isUpdatingClasses||s&&s.length>0&&(this.commonDivisionsList=[...s],this.values.classes&&this.values.classes.length>0&&this.initializeClassesWithText(this.values.classes))}},"values.commonSubjects":{immediate:!0,handler(s){this.isUpdatingClasses||s&&s.length>0&&(this.commonSubjectsList=[...s],this.values.classes&&this.values.classes.length>0&&this.initializeClassesWithText(this.values.classes))}},"values.classes":{immediate:!0,deep:!0,handler(s){this.isUpdatingClasses||this.initializeClassesWithText(s)}},commonSubjectsList:{handler(s){this.$emit("update-field",{field:"commonSubjects",value:s}),this.updateAllClassesWithCommonData()},deep:!0},commonDivisionsList:{handler(s){this.$emit("update-field",{field:"commonDivisions",value:s}),this.updateAllClassesWithCommonData()},deep:!0}},created(){this.values.selectedInstitution||this.updateField("selectedInstitution","school"),this.values.commonSubjects&&this.values.commonSubjects.length>0?this.commonSubjectsList=[...this.values.commonSubjects]:this.commonSubjectsList=[],this.values.commonDivisions&&this.values.commonDivisions.length>0?this.commonDivisionsList=[...this.values.commonDivisions]:this.commonDivisionsList=[],this.values.classes&&this.values.classes.length>0&&this.initializeClassesWithText(this.values.classes)},mounted(){this.classesWithText.length===0&&!this.hasPreviousData()&&this.autoPopulatePrograms()},methods:{generateUniqueId(){return Math.random().toString(36).substr(2,9)+Date.now().toString(36)},updateField(s,e){this.$emit("update-field",{field:s,value:e})},classesMatchInstitutionType(){if(!this.classesWithText||this.classesWithText.length===0)return!1;const s=this.classesWithText.map(n=>n.className),e=z[this.institutionType]||[];return s.some(n=>e.includes(n))},forceRefreshDisplay(){this.values.classes&&this.values.classes.length>0&&this.initializeClassesWithText(this.values.classes)},hasPreviousData(){return this.classesWithText.length===0?!this.values.classes||this.values.classes.length===0?!1:this.values.classes.some(e=>this.institutionType==="school"?z.school.includes(e.className):this.institutionType==="college"?z.college.includes(e.className):!1):!1},setInstitutionType(s){this.institutionType=s,this.classesWithText=[],this.$emit("update-field-array",{field:"classes",value:[]}),this.$nextTick(()=>{this.autoPopulatePrograms(),setTimeout(()=>{this.forceRefreshDisplay()},200)})},addCommonSubject(){this.newCommonSubject.trim()&&!this.commonSubjectsList.includes(this.newCommonSubject.trim())&&(this.commonSubjectsList.push(this.newCommonSubject.trim()),this.newCommonSubject="")},removeCommonSubject(s){this.commonSubjectsList.splice(s,1)},isCommonSubjectSelected(s){return this.commonSubjectsList.includes(s)},toggleCommonSubject(s){this.isCommonSubjectSelected(s)?this.removeCommonSubject(this.commonSubjectsList.indexOf(s)):(this.newCommonSubject=s,this.addCommonSubject())},addCommonDivision(){this.newCommonDivision.trim()&&!this.commonDivisionsList.includes(this.newCommonDivision.trim())&&(this.commonDivisionsList.push(this.newCommonDivision.trim()),this.newCommonDivision="")},removeCommonDivision(s){this.commonDivisionsList.splice(s,1)},isCommonDivisionSelected(s){return this.commonDivisionsList.includes(s)},toggleCommonDivision(s){this.isCommonDivisionSelected(s)?this.removeCommonDivision(this.commonDivisionsList.indexOf(s)):(this.newCommonDivision=s,this.addCommonDivision())},hasMappedSubjects(s){return this.mappedProgramNames.includes(s)},getMappedSubjects(s){return this.collegeProgramsSubjects[s]||[]},initializeClassesWithText(s){if(!s||s.length===0){this.classesWithText=[];return}this.classesWithText=s.map((e,r)=>{let n=[];return e.divisions&&e.divisions.length>0&&(n=e.divisions.filter(i=>{var h;let o="";typeof i=="object"&&i.divisionName?o=i.divisionName.split("-").slice(1).join("-"):typeof i=="string"&&(o=i.includes("-")?i.split("-").slice(1).join("-"):i);const l=this.commonDivisionsList.includes(o),a=(h=e.excludedCommonDivisions)==null?void 0:h.includes(o);return!(l&&!a)}).map(i=>typeof i=="object"&&i.divisionName?{divisionName:i.divisionName}:typeof i=="string"?{divisionName:i.includes("-")?i:`${e.className}-${i}`}:{divisionName:String(i)})),L(O({},e),{uniqueId:e.uniqueId||this.generateUniqueId(),subjectsText:"",divisionsText:"",specificSubjects:e.subjects?e.subjects.filter(i=>!this.commonSubjectsList.includes(i)):[],specificDivisions:n,isSingleGroup:e.isSingleGroup||!1,excludedCommonSubjects:e.excludedCommonSubjects||[],excludedCommonDivisions:e.excludedCommonDivisions||[]})})},getDivisionDisplayName(s,e){var n;if(console.log("ðŸ” getDivisionDisplayName called with:",s,`for class ${e}`),this.institutionType==="college"){if(typeof s=="object"&&s.divisionName){const u=s.divisionName.split("-");if(console.log("   ðŸ“¦ College object division parts:",u),u.length>1&&this.commonDivisionsList.includes(u[u.length-1])){const o=u[u.length-1];return console.log(`   âœ… Common division, returning: ${o}`),o}if(u.length>1&&((n=this.classesWithText[e])==null?void 0:n.className)&&s.divisionName.startsWith(this.classesWithText[e].className+"-")){const o=u[u.length-1];return console.log(`   âœ… Common division with prefix, returning: ${o}`),o}else return console.log(`   âœ… Custom division, returning: ${s.divisionName}`),s.divisionName}if(typeof s=="string"){const u=s.split("-");if(console.log("   ðŸ“¦ College string division parts:",u),u.length>1&&this.commonDivisionsList.includes(u[u.length-1])){const i=u[u.length-1];return console.log(`   âœ… Common string division, returning: ${i}`),i}return console.log(`   âœ… Custom string division, returning: ${s}`),s}}else{if(typeof s=="object"&&s.divisionName){const u=s.divisionName.split("-").slice(1).join("-");return console.log(`   ðŸ« School object division, returning: ${u}`),u||s.divisionName}if(typeof s=="string"){if(s.includes("-")){const u=s.split("-").slice(1).join("-");return console.log(`   ðŸ« School string division with dash, returning: ${u}`),u}return console.log(`   ðŸ« School string division without dash, returning: ${s}`),s}}const r=String(s);return console.log(`   â“ Fallback division, returning: ${r}`),r},addNewProgram(){const s={uniqueId:this.generateUniqueId(),className:"",subjects:[],divisions:[],specificSubjects:[],specificDivisions:[],isSingleGroup:!1,excludedCommonSubjects:[],excludedCommonDivisions:[]},e=[...this.classesWithText,s];this.emitUpdatedClasses(e),this.$nextTick(()=>{const r=this.inputRefs[s.uniqueId],n=this.programRefs[s.uniqueId];r&&r.focus(),n&&n.scrollIntoView({behavior:"smooth",block:"center"})})},removeProgram(s){const e=this.classesWithText.filter((r,n)=>n!==s);this.emitUpdatedClasses(e)},autoPopulatePrograms(){const s=z[this.institutionType]||[];if(s.length===0)return;const e=s.map(r=>({uniqueId:this.generateUniqueId(),className:r,subjects:[],divisions:[],specificSubjects:[],specificDivisions:[],isSingleGroup:!1,excludedCommonSubjects:[],excludedCommonDivisions:[]}));this.classesWithText=e,this.emitUpdatedClasses(e,!0)},toggleAllSingleGroup(){const s=!this.allSingleGroup,e=this.classesWithText.map(r=>L(O({},r),{isSingleGroup:s}));this.emitUpdatedClasses(e)},handleSingleGroupChange(s){const e=[...this.classesWithText];e[s].isSingleGroup&&(e[s].specificDivisions=[],e[s].excludedCommonDivisions=[],e[s].divisionsText=""),this.emitUpdatedClasses(e)},addSpecificSubject(s){if(this.classesWithText[s].subjectsText.trim()){const e=[...this.classesWithText],r=this.classesWithText[s].subjectsText.trim();e[s].specificSubjects.includes(r)||e[s].specificSubjects.push(r),e[s].subjectsText="",this.emitUpdatedClasses(e)}},addProgramSubject(s,e){const r=[...this.classesWithText];r[s].specificSubjects.includes(e)||(r[s].specificSubjects.push(e),this.emitUpdatedClasses(r))},addAllMappedSubjects(s,e){const r=[...this.classesWithText];this.getMappedSubjects(e).forEach(u=>{r[s].specificSubjects.includes(u)||r[s].specificSubjects.push(u)}),this.emitUpdatedClasses(r)},removeSpecificSubject(s,e){const r=[...this.classesWithText];r[s].specificSubjects.splice(e,1),this.emitUpdatedClasses(r)},addSpecificDivision(s){if(this.classesWithText[s].divisionsText.trim()&&!this.classesWithText[s].isSingleGroup){const e=[...this.classesWithText],r=this.classesWithText[s].divisionsText.trim(),n=e[s].className||"Class",u=this.institutionType==="college"?r:`${n}-${r}`,i=e[s].specificDivisions.some(l=>this.getDivisionDisplayName(l,s)===r),o=this.commonDivisionsList.includes(r);!i&&!o&&e[s].specificDivisions.push({divisionName:u}),e[s].divisionsText="",this.emitUpdatedClasses(e)}},removeSpecificDivision(s,e){const r=[...this.classesWithText];r[s].specificDivisions.splice(e,1),this.emitUpdatedClasses(r)},updateClassName(s,e){const r=[...this.classesWithText],n=r[s].className;r[s].className=e,r[s].specificDivisions&&this.institutionType==="school"&&(r[s].specificDivisions=r[s].specificDivisions.map(u=>{if(typeof u=="object"&&u.divisionName&&u.divisionName.includes("-")){const i=u.divisionName.replace(`${n}-`,"");return{divisionName:`${e}-${i}`}}return u})),this.emitUpdatedClasses(r)},updateAllClassesWithCommonData(){const s=this.classesWithText.map(e=>L(O({},e),{specificSubjects:e.specificSubjects||[],specificDivisions:e.specificDivisions||[],excludedCommonSubjects:e.excludedCommonSubjects||[],excludedCommonDivisions:e.excludedCommonDivisions||[]}));this.emitUpdatedClasses(s)},isCommonSubjectExcluded(s,e){var n;return((n=this.classesWithText[s].excludedCommonSubjects)==null?void 0:n.includes(e))||!1},toggleExcludeCommonSubject(s,e){const r=[...this.classesWithText];r[s].excludedCommonSubjects||(r[s].excludedCommonSubjects=[]);const n=r[s].excludedCommonSubjects.indexOf(e);n>=0?r[s].excludedCommonSubjects.splice(n,1):r[s].excludedCommonSubjects.push(e),this.emitUpdatedClasses(r)},isCommonDivisionExcluded(s,e){var n;return((n=this.classesWithText[s].excludedCommonDivisions)==null?void 0:n.includes(e))||!1},toggleExcludeCommonDivision(s,e){const r=[...this.classesWithText];r[s].excludedCommonDivisions||(r[s].excludedCommonDivisions=[]);const n=r[s].excludedCommonDivisions.indexOf(e);n>=0?r[s].excludedCommonDivisions.splice(n,1):r[s].excludedCommonDivisions.push(e),this.emitUpdatedClasses(r)},emitUpdatedClasses(s,e=!1){if(this.isUpdatingClasses&&!e)return;this.isUpdatingClasses=!0;const r=s.map(n=>{if(n.isSingleGroup&&this.institutionType==="college")return{uniqueId:n.uniqueId,className:n.className,subjects:n.specificSubjects||[],divisions:[n.className],isSingleGroup:n.isSingleGroup,excludedCommonSubjects:[],excludedCommonDivisions:[],specificSubjects:n.specificSubjects||[],specificDivisions:[]};{const u=this.commonDivisionsList.filter(l=>{var a;return!((a=n.excludedCommonDivisions)!=null&&a.includes(l))}).map(l=>this.institutionType==="college"?{divisionName:`${n.className}-${l}`}:{divisionName:`${n.className}-${l}`}),i=(n.specificDivisions||[]).map(l=>typeof l=="string"?{divisionName:l}:l),o=[...u,...i];return{uniqueId:n.uniqueId,className:n.className,subjects:[...this.commonSubjectsList.filter(l=>{var a;return!((a=n.excludedCommonSubjects)!=null&&a.includes(l))}),...n.specificSubjects||[]],divisions:o,isSingleGroup:n.isSingleGroup,excludedCommonSubjects:n.excludedCommonSubjects||[],excludedCommonDivisions:n.excludedCommonDivisions||[],specificSubjects:n.specificSubjects||[],specificDivisions:n.specificDivisions||[]}}});this.$emit("update-field-array",{field:"classes",value:r}),this.classesWithText=s,setTimeout(()=>{this.isUpdatingClasses=!1},100)}}},yt={class:"bg-white shadow rounded-lg p-6 space-y-6"},xt={class:"mb-6"},St={class:"flex space-x-4"},Ct={key:0},_t={class:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md min-h-[42px]"},Tt=["onClick"],wt={class:"quick-select mt-3"},kt={class:"subject-grid grid grid-cols-3 gap-2"},Dt=["onClick"],At={class:"block text-sm font-medium text-gray-700 mb-1"},jt={class:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md min-h-[42px]"},Nt=["onClick"],Mt=["placeholder"],Ft={class:"quick-select mt-3"},Bt={class:"text-sm font-medium text-gray-700 mb-2"},Pt={class:"division-grid grid grid-cols-6 gap-2"},Ot=["onClick"],Yt={class:"flex justify-between items-center mb-4"},Et={class:"text-lg font-semibold text-gray-800"},Gt={key:1,class:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200"},Lt={class:"flex items-center gap-3 text-sm font-medium text-gray-700 cursor-pointer"},Ut={class:"relative"},It=["checked"],Vt={key:0,class:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Wt={class:"overflow-x-auto"},qt={class:"min-w-full text-sm text-left text-gray-700"},Rt={class:"bg-gray-100"},$t={class:"px-4 py-2 font-medium"},Ht={class:"px-4 py-2 font-medium"},zt={class:"px-4 py-2 font-medium"},Kt={class:"px-4 py-2"},Qt={class:"px-4 py-2"},Jt=["onUpdate:modelValue","onInput","placeholder"],Zt={class:"px-4 py-2 w-[300px]"},Xt={class:"flex flex-wrap gap-1 mb-1 min-h-[40px]"},es=["onClick"],ts=["onClick"],ss={class:"flex gap-2"},os=["onUpdate:modelValue","onKeydown","placeholder"],is=["onClick"],ns={key:0,class:"mt-2"},rs={class:"flex flex-wrap gap-1"},as=["onClick","disabled"],ls=["onClick"],us={class:"px-4 py-2"},ds={key:0,class:"mb-2"},cs={class:"flex items-center gap-2 text-xs text-gray-700 cursor-pointer"},ms={class:"relative"},gs=["onUpdate:modelValue","onChange"],ps={key:0,class:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},hs={class:"flex flex-wrap gap-1 mb-1 min-h-[40px]"},vs={key:0,class:"inline-flex items-center px-2 py-1 rounded-full bg-gray-200 text-gray-700 text-xs border border-gray-300 cursor-not-allowed"},fs=["onClick"],bs=["onClick"],ys={key:1,class:"flex gap-2"},xs=["onUpdate:modelValue","onKeydown","placeholder"],Ss=["onClick"],Cs={key:2,class:"mt-1"},_s={class:"px-4 py-2"},Ts=["onClick"],ws={key:2,class:"text-center py-8 text-gray-500"};function ks(s,e,r,n,u,i){return d(),c("div",yt,[t("div",xt,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Institution Type",-1)),t("div",St,[t("button",{onClick:e[0]||(e[0]=o=>i.setInstitutionType("school")),class:w(["px-4 py-2 rounded-md transition-colors",i.institutionType==="school"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," ðŸ« School ",2),t("button",{onClick:e[1]||(e[1]=o=>i.setInstitutionType("college")),class:w(["px-4 py-2 rounded-md transition-colors",i.institutionType==="college"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," ðŸŽ“ College ",2)])]),i.institutionType==="school"?(d(),c("div",Ct,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Common Subjects for All Classes ",-1)),t("div",_t,[(d(!0),c(S,null,C(u.commonSubjectsList,(o,l)=>(d(),c("span",{key:l,class:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm"},[D(m(o)+" ",1),t("button",{onClick:a=>i.removeCommonSubject(l),class:"ml-1.5 text-blue-500 hover:text-blue-700"}," Ã— ",8,Tt)]))),128)),x(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>u.newCommonSubject=o),onKeydown:e[3]||(e[3]=I((...o)=>i.addCommonSubject&&i.addCommonSubject(...o),["enter"])),onBlur:e[4]||(e[4]=(...o)=>i.addCommonSubject&&i.addCommonSubject(...o)),placeholder:"Add subjects...",class:"flex-1 min-w-[100px] px-2 py-1 border-0 focus:ring-0 focus:outline-none"},null,544),[[k,u.newCommonSubject]])]),t("div",wt,[e[12]||(e[12]=t("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Quick Select Subjects",-1)),t("div",kt,[(d(!0),c(S,null,C(u.commonSubjects,o=>(d(),c("div",{key:o,class:w(["subject-card px-3 py-2 border rounded-md text-center cursor-pointer text-sm",{"bg-blue-100 border-blue-300":i.isCommonSubjectSelected(o),"bg-gray-50 hover:bg-gray-100":!i.isCommonSubjectSelected(o)}]),onClick:l=>i.toggleCommonSubject(o)},m(o),11,Dt))),128))])])])):f("",!0),t("div",null,[t("label",At,m(i.institutionType==="college"?"Common Student Groups for All Programs":"Common Divisions for All Classes"),1),t("div",jt,[(d(!0),c(S,null,C(u.commonDivisionsList,(o,l)=>(d(),c("span",{key:l,class:"inline-flex items-center px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm"},[D(m(o)+" ",1),t("button",{onClick:a=>i.removeCommonDivision(l),class:"ml-1.5 text-green-500 hover:text-green-700"}," Ã— ",8,Nt)]))),128)),x(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=o=>u.newCommonDivision=o),onKeydown:e[6]||(e[6]=I((...o)=>i.addCommonDivision&&i.addCommonDivision(...o),["enter"])),onBlur:e[7]||(e[7]=(...o)=>i.addCommonDivision&&i.addCommonDivision(...o)),placeholder:i.institutionType==="college"?"Add common groups...":"Add common divisions...",class:"flex-1 min-w-[100px] px-2 py-1 border-0 focus:ring-0 focus:outline-none"},null,40,Mt),[[k,u.newCommonDivision]])]),t("div",Ft,[t("h3",Bt,m(i.institutionType==="college"?"Quick Select Common Groups":"Quick Select Common Divisions"),1),t("div",Pt,[(d(!0),c(S,null,C(u.quickSelectDivisions,o=>(d(),c("div",{key:o,class:w(["division-card px-3 py-2 border rounded-md text-center cursor-pointer text-sm",{"bg-green-100 border-green-300":i.isCommonDivisionSelected(o),"bg-gray-50 hover:bg-gray-100":!i.isCommonDivisionSelected(o)}]),onClick:l=>i.toggleCommonDivision(o)},m(o),11,Ot))),128))])])]),t("div",Yt,[t("h3",Et,m(i.institutionType==="college"?"Programs Overview":"Classes Overview"),1),t("button",{onClick:e[8]||(e[8]=(...o)=>i.addNewProgram&&i.addNewProgram(...o)),class:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors flex items-center gap-2"},[e[14]||(e[14]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),D(" Add "+m(i.institutionType==="college"?"Program":"Class"),1)])]),i.institutionType==="college"?(d(),c("div",Gt,[t("label",Lt,[t("div",Ut,[t("input",{type:"checkbox",checked:i.allSingleGroup,onChange:e[9]||(e[9]=(...o)=>i.toggleAllSingleGroup&&i.toggleAllSingleGroup(...o)),class:"sr-only"},null,40,It),t("div",{class:w(["w-5 h-5 border-2 border-blue-500 rounded transition-all duration-200 flex items-center justify-center",i.allSingleGroup?"bg-blue-500 border-blue-500":"bg-white border-gray-300"])},[i.allSingleGroup?(d(),c("svg",Vt,e[15]||(e[15]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):f("",!0)],2)]),e[16]||(e[16]=t("span",{class:"text-blue-800"},"Select All - Single Student Group (Uses Program Name)",-1))])])):f("",!0),t("div",Wt,[t("table",qt,[t("thead",Rt,[t("tr",null,[e[17]||(e[17]=t("th",{class:"px-4 py-2 font-medium"},"#",-1)),t("th",$t,m(i.institutionType==="college"?"Program Name":"Class Name"),1),t("th",Ht,m(i.institutionType==="college"?"Courses":"Subjects"),1),t("th",zt,m(i.institutionType==="college"?"Student Groups":"Divisions"),1),e[18]||(e[18]=t("th",{class:"px-4 py-2 font-medium"},"Actions",-1))])]),t("tbody",null,[(d(!0),c(S,null,C(u.classesWithText,(o,l)=>(d(),c("tr",{key:o.uniqueId,ref_for:!0,ref:a=>{u.programRefs[o.uniqueId]=a},class:"border-t hover:bg-gray-50"},[t("td",Kt,m(l+1),1),t("td",Qt,[x(t("input",{type:"text","onUpdate:modelValue":a=>o.className=a,onInput:a=>i.updateClassName(l,a.target.value),ref_for:!0,ref:a=>{u.inputRefs[o.uniqueId]=a},class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:i.institutionType==="college"?"Program name...":"Class name..."},null,40,Jt),[[k,o.className]])]),t("td",Zt,[t("div",Xt,[i.institutionType==="school"?(d(!0),c(S,{key:0},C(u.commonSubjectsList,(a,h)=>(d(),c("span",{key:"common-"+h,class:w(["inline-flex items-center px-2 py-1 rounded-full text-xs",i.isCommonSubjectExcluded(l,a)?"bg-red-100 text-red-600":"bg-blue-50 text-blue-600"])},[D(m(a)+" ",1),t("button",{onClick:re(y=>i.toggleExcludeCommonSubject(l,a),["stop"]),class:"ml-1 text-blue-500 hover:text-blue-700 text-xs"},m(i.isCommonSubjectExcluded(l,a)?"+":"Ã—"),9,es)],2))),128)):f("",!0),(d(!0),c(S,null,C(o.specificSubjects,(a,h)=>(d(),c("span",{key:"specific-"+h,class:"inline-flex items-center px-2 py-1 rounded-full bg-blue-100 text-blue-800 text-xs"},[D(m(a)+" ",1),t("button",{onClick:y=>i.removeSpecificSubject(l,h),class:"ml-1 text-blue-500 hover:text-blue-700 text-xs"}," Ã— ",8,ts)]))),128))]),t("div",ss,[x(t("input",{type:"text","onUpdate:modelValue":a=>o.subjectsText=a,onKeydown:I(a=>i.addSpecificSubject(l),["enter"]),placeholder:i.institutionType==="college"?"Add course...":"Add subject...",class:"flex-1 px-2 py-1 border border-gray-300 rounded text-xs"},null,40,os),[[k,o.subjectsText]]),t("button",{onClick:a=>i.addSpecificSubject(l),class:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs"}," Add ",8,is)]),i.institutionType==="college"&&i.hasMappedSubjects(o.className)?(d(),c("div",ns,[t("div",rs,[(d(!0),c(S,null,C(i.getMappedSubjects(o.className),a=>(d(),c("button",{key:a,onClick:h=>i.addProgramSubject(l,a),disabled:o.specificSubjects.includes(a),class:w(["px-2 py-1 text-xs rounded border transition-colors",o.specificSubjects.includes(a)?"bg-blue-500 text-white border-blue-500 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200 border-gray-300"])},m(o.specificSubjects.includes(a)?"âœ“ ":"+ ")+m(a),11,as))),128))]),i.hasMappedSubjects(o.className)&&i.getMappedSubjects(o.className).some(a=>!o.specificSubjects.includes(a))?(d(),c("button",{key:0,onClick:a=>i.addAllMappedSubjects(l,o.className),class:"mt-1 px-2 py-1 text-xs bg-green-500 text-white rounded hover:bg-green-600 transition-colors"}," Add All Subjects for "+m(o.className),9,ls)):f("",!0)])):f("",!0)]),t("td",us,[i.institutionType==="college"?(d(),c("div",ds,[t("label",cs,[t("div",ms,[x(t("input",{type:"checkbox","onUpdate:modelValue":a=>o.isSingleGroup=a,onChange:a=>i.handleSingleGroupChange(l),class:"sr-only"},null,40,gs),[[ae,o.isSingleGroup]]),t("div",{class:w(["w-4 h-4 border-2 border-blue-500 rounded transition-all duration-200 flex items-center justify-center",o.isSingleGroup?"bg-blue-500 border-blue-500":"bg-white border-gray-300"])},[o.isSingleGroup?(d(),c("svg",ps,e[19]||(e[19]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):f("",!0)],2)]),e[20]||(e[20]=D(" Single Student Group "))])])):f("",!0),t("div",hs,[o.isSingleGroup&&i.institutionType==="college"?(d(),c("span",vs,[D(m(o.className)+" ",1),e[21]||(e[21]=t("span",{class:"ml-1 text-gray-500 text-xs"},"(Auto)",-1))])):f("",!0),o.isSingleGroup?f("",!0):(d(!0),c(S,{key:1},C(u.commonDivisionsList,(a,h)=>(d(),c("span",{key:"common-"+h,class:w(["inline-flex items-center px-2 py-1 rounded-full text-xs",i.isCommonDivisionExcluded(l,a)?"bg-red-100 text-red-600 border border-red-300":"bg-green-50 text-green-600"])},[D(m(a)+" ",1),t("button",{onClick:re(y=>i.toggleExcludeCommonDivision(l,a),["stop"]),class:"ml-1 text-green-500 hover:text-green-700 text-xs"},m(i.isCommonDivisionExcluded(l,a)?"+":"Ã—"),9,fs)],2))),128)),o.isSingleGroup?f("",!0):(d(!0),c(S,{key:2},C(o.specificDivisions,(a,h)=>(d(),c("span",{key:"specific-"+h,class:"inline-flex items-center px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs"},[D(m(i.getDivisionDisplayName(a,l))+" ",1),t("button",{onClick:y=>i.removeSpecificDivision(l,h),class:"ml-1 text-green-500 hover:text-green-700 text-xs"}," Ã— ",8,bs)]))),128))]),o.isSingleGroup?f("",!0):(d(),c("div",ys,[x(t("input",{type:"text","onUpdate:modelValue":a=>o.divisionsText=a,onKeydown:I(a=>i.addSpecificDivision(l),["enter"]),placeholder:i.institutionType==="college"?"Add custom group...":"Add custom division...",class:"flex-1 px-2 py-1 border border-gray-300 rounded text-xs"},null,40,xs),[[k,o.divisionsText]]),t("button",{onClick:a=>i.addSpecificDivision(l),class:"px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-xs"}," Add ",8,Ss)])),o.isSingleGroup&&i.institutionType==="college"?(d(),c("div",Cs,e[22]||(e[22]=[t("p",{class:"text-xs text-gray-500 italic"}," Student group is automatically set to program name and cannot be modified. ",-1)]))):f("",!0)]),t("td",_s,[t("button",{onClick:a=>i.removeProgram(l),class:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors",title:"Remove Program"},e[23]||(e[23]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ts)])]))),128))])])]),u.classesWithText.length===0?(d(),c("div",ws,[t("p",null,"No "+m(i.institutionType==="college"?"programs":"classes")+" added yet.",1),t("button",{onClick:e[10]||(e[10]=(...o)=>i.addNewProgram&&i.addNewProgram(...o)),class:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors"}," Add Your First "+m(i.institutionType==="college"?"Program":"Class"),1)])):f("",!0)])}const Ds=Y(bt,[["render",ks],["__scopeId","data-v-49e44015"]]),As={name:"GradingSystem",emits:["update-field","grading-completed"],props:{values:{type:Object,required:!0}},setup(s,{emit:e}){var p,_,A,j;const r=T(((p=s.values.gradingSystem)==null?void 0:p.selectedOption)||""),n=T(((_=s.values.gradingSystem)==null?void 0:_.scaleName)||""),u=T(((A=s.values.gradingSystem)==null?void 0:A.previousScaleName)||""),i=T(((j=s.values.gradingSystem)==null?void 0:j.gradeData)||[{grade_code:"",threshold:"",description:""}]),o=T([]),l=T(!1),a=T(!1);let h=null;const y=U(()=>s.values.selectedInstitution||"school"),B=W({url:"school.al_ummah.api3.fetch_grading_scales",onSuccess:v=>{v.success&&(o.value=v.grading_scales||[]),l.value=!1},onError:v=>{console.error("Error fetching grading scales:",v),l.value=!1}}),N=T([{value:"school",label:"School",description:"Comprehensive grading system suitable for K-12 schools",grades:[{grade_code:"A+",threshold:95,description:"Outstanding"},{grade_code:"A",threshold:90,description:"Excellent"},{grade_code:"B+",threshold:85,description:"Very Good"},{grade_code:"B",threshold:80,description:"Good"},{grade_code:"C+",threshold:75,description:"Above Average"},{grade_code:"C",threshold:70,description:"Average"},{grade_code:"D",threshold:60,description:"Below Average"},{grade_code:"F",threshold:0,description:"Fail"}]},{value:"college",label:"College/University",description:"Standard grading system for higher education",grades:[{grade_code:"A",threshold:90,description:"Excellent"},{grade_code:"B",threshold:80,description:"Good"},{grade_code:"C",threshold:70,description:"Satisfactory"},{grade_code:"D",threshold:60,description:"Pass"},{grade_code:"F",threshold:0,description:"Fail"}]}]),K=U(()=>N.value),Q=v=>v.value===y.value,E=U(()=>i.value.length>0&&i.value.every(v=>{var b;return((b=v.grade_code)==null?void 0:b.trim())&&$(v.threshold)})),J=U(()=>!n.value||!E.value),q=U(()=>{var v;return r.value==="previous"?!!u.value:r.value==="manual"?((v=n.value)==null?void 0:v.trim())&&E.value:!0});function Z(){l.value=!0,B.fetch()}function X(v){if(r.value=v,v==="manual"&&i.value.length===1&&!i.value[0].grade_code){const b=N.value.find(F=>F.value===y.value);b&&G(b)}M()}function G(v){i.value=JSON.parse(JSON.stringify(v.grades)),n.value||(n.value=`${v.label} Grading Scale`),M()}function R(){i.value.push({grade_code:"",threshold:"",description:""}),M()}function ee(v){i.value.length>1&&(i.value.splice(v,1),M())}function $(v){const b=parseFloat(v);return!isNaN(b)&&b>=0&&b<=100&&v!==""}function H(){clearTimeout(h),h=setTimeout(M,300)}function M(){clearTimeout(h);const v=r.value==="manual"?i.value.map(b=>({grade_code:(b.grade_code||"").trim(),threshold:parseFloat(b.threshold)||0,description:(b.description||"").trim()})).filter(b=>b.grade_code&&!isNaN(b.threshold)):null;e("update-field",{field:"gradingSystem",value:{selectedOption:r.value,scaleName:n.value,previousScaleName:u.value,gradeData:v}})}function g(){r.value!==""&&(a.value=!0,!q.value)||(M(),e("grading-completed"))}return V(y,v=>{if(r.value==="manual"&&i.value.length===1&&!i.value[0].grade_code){const b=N.value.find(F=>F.value===v);b&&G(b)}}),se(()=>{if(Z(),r.value==="manual"&&i.value.length===1&&!i.value[0].grade_code){const v=N.value.find(b=>b.value===y.value);v&&G(v)}M()}),{selectedOption:r,scaleName:n,previousScaleName:u,manualGrades:i,gradingScales:o,loadingScales:l,instituteTypes:N,filteredInstituteTypes:K,showValidation:a,hasValidManualGrades:E,hasManualValidationErrors:J,isFormValid:q,isRecommendedTemplate:Q,selectOption:X,applyTemplate:G,addGrade:R,removeGrade:ee,handleSubmit:g,debouncedUpdate:H}}},js={class:"grading-system-container"},Ns={class:"mb-8"},Ms={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fs={class:"flex items-start space-x-4"},Bs={class:"flex-1"},Ps=["disabled"],Os=["value"],Ys={key:0,class:"mt-2 text-sm text-gray-500"},Es={key:1,class:"mt-2 text-sm text-gray-500"},Gs={key:0,class:"space-y-6"},Ls={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Us=["onClick"],Is={class:"flex items-center space-x-3"},Vs={class:"font-medium text-gray-900"},Ws={class:"text-xs text-gray-500 mt-1"},qs={key:0,class:"mt-1"},Rs={class:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden"},$s={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},Hs={class:"flex items-center justify-between"},zs={class:"overflow-x-auto"},Ks={class:"w-full"},Qs={class:"bg-white divide-y divide-gray-200"},Js={class:"px-6 py-4 whitespace-nowrap"},Zs=["onUpdate:modelValue"],Xs={class:"px-6 py-4 whitespace-nowrap"},eo={class:"flex items-center space-x-2"},to=["onUpdate:modelValue"],so={class:"px-6 py-4"},oo=["onUpdate:modelValue"],io={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},no=["onClick","disabled"],ro={key:0,class:"text-center py-12"},ao={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},lo={class:"mt-2 text-sm text-red-600 list-disc list-inside space-y-1"},uo={key:0},co={key:1};function mo(s,e,r,n,u,i){return d(),c("div",js,[e[26]||(e[26]=t("div",{class:"mb-8"},[t("p",{class:"text-gray-600"},"Configure your institution's grading system. This step is optional.")],-1)),t("div",Ns,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Select Grading System Option ",-1)),t("div",Ms,[t("div",{onClick:e[1]||(e[1]=o=>n.selectOption("previous")),class:w(["p-6 border-2 rounded-lg cursor-pointer transition-all duration-200",n.selectedOption==="previous"?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-300 bg-white hover:border-gray-400"])},[t("div",Fs,[e[12]||(e[12]=t("div",{class:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",Bs,[e[10]||(e[10]=t("h4",{class:"font-semibold text-gray-900 mb-2"},"Use Existing Grading Scale",-1)),e[11]||(e[11]=t("p",{class:"text-sm text-gray-600 mb-3"},"Select from previously created grading scales",-1)),x(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.previousScaleName=o),disabled:n.selectedOption!=="previous",class:w(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"bg-gray-100":n.selectedOption!=="previous"}])},[e[9]||(e[9]=t("option",{value:""},"Select a grading scale",-1)),(d(!0),c(S,null,C(n.gradingScales,o=>(d(),c("option",{key:o,value:o},m(o),9,Os))),128))],10,Ps),[[te,n.previousScaleName]]),n.loadingScales?(d(),c("div",Ys," Loading grading scales... ")):n.gradingScales.length===0?(d(),c("div",Es," No previous grading scales found ")):f("",!0)])])],2),t("div",{onClick:e[2]||(e[2]=o=>n.selectOption("manual")),class:w(["p-6 border-2 rounded-lg cursor-pointer transition-all duration-200",n.selectedOption==="manual"?"border-green-500 bg-green-50 ring-2 ring-green-200":"border-gray-300 bg-white hover:border-gray-400"])},e[13]||(e[13]=[le('<div class="flex items-start space-x-4" data-v-38ae2052><div class="flex-shrink-0 w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center" data-v-38ae2052><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-38ae2052><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-38ae2052></path></svg></div><div class="flex-1" data-v-38ae2052><h4 class="font-semibold text-gray-900 mb-2" data-v-38ae2052>Create New Grading Scale</h4><p class="text-sm text-gray-600" data-v-38ae2052>Manually define your grading system</p></div></div>',1)]),2)])]),n.selectedOption==="manual"?(d(),c("div",Gs,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[D(" Grading Scale Name "),t("span",{class:"text-red-500"},"*")],-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.scaleName=o),type:"text",placeholder:"e.g., Standard Grading Scale",class:w(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",{"border-red-300":!n.scaleName&&n.showValidation}])},null,2),[[k,n.scaleName]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Quick Templates (Optional) ",-1)),t("div",Ls,[(d(!0),c(S,null,C(n.filteredInstituteTypes,o=>(d(),c("button",{key:o.value,onClick:l=>n.applyTemplate(o),class:w(["p-4 border border-gray-300 rounded-lg text-left bg-white hover:border-gray-400 transition-colors",{"border-blue-500 bg-blue-50":n.isRecommendedTemplate(o)}])},[t("div",Is,[e[17]||(e[17]=t("div",{class:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),t("div",null,[t("h4",Vs,m(o.label),1),t("p",Ws,m(o.grades.length)+" pre-defined grades",1),n.isRecommendedTemplate(o)?(d(),c("div",qs,e[16]||(e[16]=[t("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800"},[t("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),D(" Recommended for your institution ")],-1)]))):f("",!0)])])],10,Us))),128))])]),t("div",Rs,[t("div",$s,[t("div",Hs,[e[20]||(e[20]=t("h4",{class:"text-lg font-semibold text-gray-800"},"Grading Scale",-1)),t("button",{onClick:e[4]||(e[4]=(...o)=>n.addGrade&&n.addGrade(...o)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 text-sm"},e[19]||(e[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",null,"Add Grade",-1)]))])]),t("div",zs,[t("table",Ks,[e[23]||(e[23]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Grade Code"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Threshold (%)"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",Qs,[(d(!0),c(S,null,C(n.manualGrades,(o,l)=>(d(),c("tr",{key:l,class:"hover:bg-gray-50 transition-colors"},[t("td",Js,[x(t("input",{"onUpdate:modelValue":a=>o.grade_code=a,type:"text",placeholder:"e.g., A, B, C",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:e[5]||(e[5]=(...a)=>n.debouncedUpdate&&n.debouncedUpdate(...a))},null,40,Zs),[[k,o.grade_code]])]),t("td",Xs,[t("div",eo,[x(t("input",{"onUpdate:modelValue":a=>o.threshold=a,type:"number",min:"0",max:"100",step:"0.1",placeholder:"0-100",class:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:e[6]||(e[6]=(...a)=>n.debouncedUpdate&&n.debouncedUpdate(...a))},null,40,to),[[k,o.threshold]]),e[21]||(e[21]=t("span",{class:"text-gray-500 text-sm"},"%",-1))])]),t("td",so,[x(t("input",{"onUpdate:modelValue":a=>o.description=a,type:"text",placeholder:"e.g., Excellent, Good, Average",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:e[7]||(e[7]=(...a)=>n.debouncedUpdate&&n.debouncedUpdate(...a))},null,40,oo),[[k,o.description]])]),t("td",io,[t("button",{onClick:a=>n.removeGrade(l),class:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",disabled:n.manualGrades.length<=1},e[22]||(e[22]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,no)])]))),128))])])]),n.manualGrades.length===0?(d(),c("div",ro,[e[24]||(e[24]=t("p",{class:"text-gray-500 mb-4"},"No grades added yet.",-1)),t("button",{onClick:e[8]||(e[8]=(...o)=>n.addGrade&&n.addGrade(...o)),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Add First Grade ")])):f("",!0)]),n.showValidation&&n.hasManualValidationErrors?(d(),c("div",ao,[e[25]||(e[25]=t("div",{class:"flex items-center space-x-2 text-red-700"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("span",{class:"font-medium"},"Please fix the following issues:")],-1)),t("ul",lo,[n.scaleName?f("",!0):(d(),c("li",uo,"Grading scale name is required")),n.hasValidManualGrades?f("",!0):(d(),c("li",co,"All grades must have a code and valid threshold (0-100)"))])])):f("",!0)])):f("",!0)])}const go=Y(As,[["render",mo],["__scopeId","data-v-38ae2052"]]),po={name:"FeeStructureCreator",props:{values:Object},data(){return{selectedTemplates:{},newCategoryInputs:[],newAmountInputs:[],feeStructures:[],feeFrequencies:[{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"},{value:"Semi-Annually",label:"Semi-Annual"},{value:"Annually",label:"Annual"},{value:"Term-Wise",label:"Term-Wise"}],feeStructureTemplates:{school:[{name:"Annual Fees",frequency:"Annually",categories:[{name:"Admission Fee",amount:1e3},{name:"Development Fee",amount:1500},{name:"Uniform Fee",amount:2500}]},{name:"Monthly Tuition",frequency:"Monthly",categories:[{name:"Tuition Fee",amount:5e3},{name:"Transport Fee",amount:3e3}]},{name:"Quarterly Fees",frequency:"Quarterly",categories:[{name:"Sports Fee",amount:500},{name:"Library Fee",amount:300},{name:"Lab Fee",amount:800},{name:"Computer Fee",amount:600},{name:"Exam Fee",amount:400},{name:"Activity Fee",amount:700}]}],college:[{name:"Annual Fees",frequency:"Annually",categories:[{name:"Admission Fee",amount:5e3},{name:"University Fee",amount:3e3},{name:"Sports Fee",amount:800},{name:"Development Fee",amount:2500},{name:"Identity Card",amount:200},{name:"Study Material",amount:3e3},{name:"Placement Fee",amount:2e3}]},{name:"Semi-Annual Tuition",frequency:"Semi-Annually",categories:[{name:"Tuition Fee",amount:15e3},{name:"Library Fee",amount:1e3},{name:"Lab Fee",amount:2e3},{name:"Computer Fee",amount:1500},{name:"Exam Fee",amount:1e3}]}]}}},computed:{classes(){return this.values.classes||[]},institutionType(){return this.values.selectedInstitution||"school"}},watch:{classes:{immediate:!0,handler(s){this.feeStructures=s.map(()=>[]),this.newCategoryInputs=new Array(s.length).fill({}),this.newAmountInputs=new Array(s.length).fill({})}},selectedTemplates:{handler(s){this.applyTemplatesToAll()},deep:!0},feeStructures:{handler(s){this.emitFeeStructures()},deep:!0}},methods:{getFrequencySelectClass(s){return{Monthly:"border-blue-200 text-blue-800 bg-blue-50",Quarterly:"border-purple-200 text-purple-800 bg-purple-50","Semi-Annually":"border-orange-200 text-orange-800 bg-orange-50",Annually:"border-green-200 text-green-800 bg-green-50","Term-Wise":"border-red-200 text-red-800 bg-red-50"}[s]||"border-gray-200 text-gray-800 bg-gray-50"},getFrequencyBadgeClass(s){return{Monthly:"bg-blue-100 text-blue-800 border-blue-200",Quarterly:"bg-purple-100 text-purple-800 border-purple-200","Semi-Annually":"bg-orange-100 text-orange-800 border-orange-200",Annually:"bg-green-100 text-green-800 border-green-200","Term-Wise":"bg-red-100 text-red-800 border-red-200"}[s]||"bg-gray-100 text-gray-800 border-gray-200"},toggleTemplate(s){this.selectedTemplates[s]?(delete this.selectedTemplates[s],this.selectedTemplates=O({},this.selectedTemplates)):this.selectedTemplates=L(O({},this.selectedTemplates),{[s]:!0})},applyTemplatesToAll(){const s=Object.keys(this.selectedTemplates);this.feeStructures=this.classes.map((e,r)=>{const u=(this.feeStructures[r]||[]).filter(o=>!o.templateName||s.includes(o.templateName)),i=s.filter(o=>!u.some(l=>l.templateName===o)).map(o=>{const l=this.feeStructureTemplates[this.institutionType].find(a=>a.name===o);return{name:l.name,frequency:l.frequency,templateName:l.name,components:l.categories.map(a=>({fees_category:a.name,amount:a.amount,discount:0,total:a.amount}))}});return[...u,...i]})},updateStructureName(s,e,r){this.feeStructures[s][e].name=r},updateStructureFrequency(s,e,r){this.feeStructures[s][e].frequency=r},addNewStructure(s){this.feeStructures[s]||(this.feeStructures[s]=[]);const e=this.feeStructures[s].length+1;this.feeStructures[s].push({name:`Custom Structure ${e}`,frequency:"Monthly",templateName:null,components:[]}),this.newCategoryInputs[s]||(this.newCategoryInputs[s]={},this.newAmountInputs[s]={}),this.newCategoryInputs[s][this.feeStructures[s].length-1]="",this.newAmountInputs[s][this.feeStructures[s].length-1]=0,this.newCategoryInputs=[...this.newCategoryInputs],this.newAmountInputs=[...this.newAmountInputs]},removeStructure(s,e){this.feeStructures[s].splice(e,1),this.newCategoryInputs[s]&&(delete this.newCategoryInputs[s][e],this.newCategoryInputs=[...this.newCategoryInputs]),this.newAmountInputs[s]&&(delete this.newAmountInputs[s][e],this.newAmountInputs=[...this.newAmountInputs])},updateComponentAmount(s,e,r,n){const u=this.feeStructures[s][e].components[r];u&&(u.amount=parseFloat(n)||0,u.total=u.amount)},validateComponentAmount(s){s.amount<=0&&(s.amount=0,s.total=0)},getCategoryInput(s,e){var r;return((r=this.newCategoryInputs[s])==null?void 0:r[e])||""},setCategoryInput(s,e,r){this.newCategoryInputs[s]||(this.newCategoryInputs[s]={}),this.newCategoryInputs[s][e]=r,this.newCategoryInputs=[...this.newCategoryInputs]},getAmountInput(s,e){var r;return((r=this.newAmountInputs[s])==null?void 0:r[e])||0},setAmountInput(s,e,r){this.newAmountInputs[s]||(this.newAmountInputs[s]={}),this.newAmountInputs[s][e]=parseFloat(r)||0,this.newAmountInputs=[...this.newAmountInputs]},addCustomCategory(s,e){var u;const r=(u=this.getCategoryInput(s,e))==null?void 0:u.trim(),n=this.getAmountInput(s,e);if(r&&n>0){const i=this.feeStructures[s][e],o=i.components.findIndex(l=>l.fees_category.toLowerCase()===r.toLowerCase());o>=0?(i.components[o].amount=n,i.components[o].total=n):i.components.push({fees_category:r,amount:n,discount:0,total:n}),this.setCategoryInput(s,e,""),this.setAmountInput(s,e,0)}},removeComponent(s,e,r){this.feeStructures[s][e].components.splice(r,1)},calculateStructureTotal(s,e){return this.feeStructures[s][e].components.reduce((n,u)=>n+u.amount,0)},getClassStructuresCount(s){return this.feeStructures[s]?this.feeStructures[s].length:0},getTotalStructures(){return this.feeStructures.reduce((s,e)=>s+(e?e.length:0),0)},getTotalCategories(){return this.feeStructures.reduce((s,e)=>s+(e?e.reduce((r,n)=>r+n.components.length,0):0),0)},getGrandTotal(){return this.feeStructures.reduce((s,e)=>s+(e?e.reduce((r,n)=>r+n.components.reduce((u,i)=>u+i.amount,0),0):0),0)},emitFeeStructures(){this.$emit("update-field",{field:"feeStructures",value:this.feeStructures})}}},ho={class:"bg-white shadow rounded-lg p-6 space-y-6"},vo={class:"structure-templates-section"},fo={class:"flex items-center justify-between mb-3"},bo={class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},yo={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},xo=["onClick"],So={class:"flex items-center justify-between"},Co={class:"flex items-center space-x-3"},_o={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},To={class:"font-medium text-gray-900 text-sm"},wo={class:"text-xs text-gray-500"},ko={class:"text-right"},Do={key:0,class:"class-structures-section"},Ao={class:"space-y-6"},jo={class:"flex items-center justify-between mb-4"},No={class:"flex items-center space-x-3"},Mo={class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},Fo={class:"text-blue-600 font-medium text-sm"},Bo={class:"font-semibold text-gray-900"},Po={class:"text-xs text-gray-500"},Oo=["onClick"],Yo={key:0,class:"space-y-3"},Eo={class:"flex items-center justify-between mb-2"},Go={class:"flex items-center space-x-2"},Lo=["value","onInput"],Uo={class:"relative"},Io=["value","onChange"],Vo=["value"],Wo={class:"flex items-center space-x-1"},qo={class:"text-xs text-gray-500"},Ro=["onClick"],$o={class:"space-y-2"},Ho={class:"flex items-center space-x-3 flex-1"},zo={class:"flex-1 min-w-0"},Ko={class:"text-sm font-medium text-gray-800 block truncate"},Qo={class:"flex items-center space-x-2"},Jo={class:"flex items-center space-x-1"},Zo=["value","onInput","onBlur"],Xo=["onClick"],ei={class:"flex space-x-2 mt-2"},ti=["value","onInput","onKeydown"],si={class:"relative"},oi=["value","onInput"],ii=["onClick","disabled"],ni={key:1,class:"text-center py-4 text-gray-500 text-sm"},ri={key:1,class:"summary-section"},ai={class:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-100"},li={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},ui={class:"text-center"},di={class:"text-2xl font-bold text-blue-600"},ci={class:"font-semibold text-gray-800 capitalize"},mi={class:"text-center"},gi={class:"text-2xl font-bold text-green-600"},pi={class:"font-semibold text-gray-800"},hi={class:"text-center"},vi={class:"text-2xl font-bold text-purple-600"},fi={class:"font-semibold text-gray-800"},bi={class:"text-center"},yi={class:"text-2xl font-bold text-orange-600"},xi={class:"font-semibold text-gray-800"},Si={class:"mt-4 pt-4 border-t border-blue-200"},Ci={class:"text-center"},_i={class:"text-lg font-bold text-gray-800"},Ti={key:2,class:"text-center py-8"};function wi(s,e,r,n,u,i){return d(),c("div",ho,[t("div",vo,[t("div",fo,[e[0]||(e[0]=t("label",{class:"block text-sm font-medium text-gray-700"},"Fee Structure Templates",-1)),t("span",bo,m(Object.keys(u.selectedTemplates).length)+" selected ",1)]),t("div",yo,[(d(!0),c(S,null,C(u.feeStructureTemplates[i.institutionType],o=>(d(),c("div",{key:o.name,class:w(["template-card p-3 border rounded-lg transition-all duration-200 cursor-pointer",u.selectedTemplates[o.name]?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-blue-300 bg-white"]),onClick:l=>i.toggleTemplate(o.name)},[t("div",So,[t("div",Co,[t("div",{class:w(["w-4 h-4 rounded border flex items-center justify-center transition-colors",u.selectedTemplates[o.name]?"bg-blue-500 border-blue-500":"bg-white border-gray-300"])},[u.selectedTemplates[o.name]?(d(),c("svg",_o,e[1]||(e[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):f("",!0)],2),t("div",null,[t("h4",To,m(o.name),1),t("p",wo,m(o.frequency)+" â€¢ "+m(o.categories.length)+" categories",1)])]),t("div",ko,[t("span",{class:w(["text-xs font-medium px-2 py-1 rounded-full",i.getFrequencyBadgeClass(o.frequency)])},m(o.frequency),3)])])],10,xo))),128))])]),i.classes.length>0?(d(),c("div",Do,[e[9]||(e[9]=t("h4",{class:"text-md font-semibold text-gray-800 mb-4"},"Class-wise Fee Structures",-1)),t("div",Ao,[(d(!0),c(S,null,C(i.classes,(o,l)=>(d(),c("div",{key:l,class:"class-fee-card p-4 border border-gray-200 rounded-lg bg-white shadow-sm"},[t("div",jo,[t("div",No,[t("div",Mo,[t("span",Fo,m(l+1),1)]),t("div",null,[t("h5",Bo,m(o.className),1),t("p",Po,m(i.getClassStructuresCount(l))+" structures",1)])]),t("button",{onClick:a=>i.addNewStructure(l),class:"px-3 py-1 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm font-medium transition-colors flex items-center space-x-1"},e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",null,"Add Structure",-1)]),8,Oo)]),u.feeStructures[l]&&u.feeStructures[l].length>0?(d(),c("div",Yo,[(d(!0),c(S,null,C(u.feeStructures[l],(a,h)=>(d(),c("div",{key:h,class:"structure-card p-3 border border-gray-100 rounded-lg bg-gray-50"},[t("div",Eo,[t("div",Go,[t("input",{value:a.name,onInput:y=>i.updateStructureName(l,h,y.target.value),class:"font-medium text-gray-800 text-sm bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none px-1 py-0.5"},null,40,Lo),t("div",Uo,[t("select",{value:a.frequency,onChange:y=>i.updateStructureFrequency(l,h,y.target.value),class:w(["text-xs font-medium pr-8 pl-3 py-1 rounded-full border bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors",i.getFrequencySelectClass(a.frequency)])},[(d(!0),c(S,null,C(u.feeFrequencies,y=>(d(),c("option",{key:y.value,value:y.value,class:"text-gray-800"},m(y.label),9,Vo))),128))],42,Io),e[3]||(e[3]=t("div",{class:"custom-select-arrow"},[t("svg",{class:"w-3 h-3 text-current",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),t("div",Wo,[t("span",qo,"Total: â‚¹"+m(i.calculateStructureTotal(l,h).toLocaleString()),1),u.feeStructures[l].length>1?(d(),c("button",{key:0,onClick:y=>i.removeStructure(l,h),class:"text-red-400 hover:text-red-600 transition-colors p-1",title:"Remove structure"},e[4]||(e[4]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ro)):f("",!0)])]),t("div",$o,[(d(!0),c(S,null,C(a.components,(y,B)=>(d(),c("div",{key:B,class:"component-item flex items-center justify-between p-2 bg-white rounded border border-gray-200"},[t("div",Ho,[e[5]||(e[5]=t("div",{class:"w-2 h-2 bg-blue-500 rounded-full"},null,-1)),t("div",zo,[t("span",Ko,m(y.fees_category),1)])]),t("div",Qo,[t("div",Jo,[e[6]||(e[6]=t("span",{class:"text-gray-500 text-xs"},"â‚¹",-1)),t("input",{type:"number",value:y.amount,onInput:N=>i.updateComponentAmount(l,h,B,N.target.value),onBlur:N=>i.validateComponentAmount(y),class:"w-20 px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,Zo)]),t("button",{onClick:N=>i.removeComponent(l,h,B),class:"text-red-400 hover:text-red-600 transition-colors p-1",title:"Remove category"},e[7]||(e[7]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Xo)])]))),128))]),t("div",ei,[t("input",{value:i.getCategoryInput(l,h),onInput:y=>i.setCategoryInput(l,h,y.target.value),onKeydown:I(y=>i.addCustomCategory(l,h),["enter"]),placeholder:"Custom category name...",class:"flex-1 px-2 py-1 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,ti),t("div",si,[e[8]||(e[8]=t("span",{class:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs"},"â‚¹",-1)),t("input",{value:i.getAmountInput(l,h),onInput:y=>i.setAmountInput(l,h,y.target.value),type:"number",placeholder:"Amount",class:"w-16 pl-6 pr-2 py-1 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,oi)]),t("button",{onClick:y=>i.addCustomCategory(l,h),disabled:!i.getCategoryInput(l,h)||!i.getAmountInput(l,h),class:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-xs font-medium transition-colors"}," Add ",8,ii)])]))),128))])):(d(),c("div",ni,' No fee structures added. Click "Add Structure" to create one. '))]))),128))])])):f("",!0),i.classes.length>0?(d(),c("div",ri,[e[15]||(e[15]=t("h4",{class:"text-md font-semibold text-gray-800 mb-3"},"Summary",-1)),t("div",ai,[t("div",li,[t("div",ui,[t("div",di,m(i.institutionType==="school"?"ðŸ«":"ðŸŽ“"),1),e[10]||(e[10]=t("div",{class:"text-gray-600 mt-1"},"Institution",-1)),t("div",ci,m(i.institutionType),1)]),t("div",mi,[t("div",gi,m(i.classes.length),1),e[11]||(e[11]=t("div",{class:"text-gray-600 mt-1"},"Total Classes",-1)),t("div",pi,m(i.classes.length),1)]),t("div",hi,[t("div",vi,m(i.getTotalStructures()),1),e[12]||(e[12]=t("div",{class:"text-gray-600 mt-1"},"Total Structures",-1)),t("div",fi,m(i.getTotalStructures()),1)]),t("div",bi,[t("div",yi,m(i.getTotalCategories()),1),e[13]||(e[13]=t("div",{class:"text-gray-600 mt-1"},"Total Categories",-1)),t("div",xi,m(i.getTotalCategories()),1)])]),t("div",Si,[t("div",Ci,[t("div",_i,"â‚¹"+m(i.getGrandTotal().toLocaleString()),1),e[14]||(e[14]=t("div",{class:"text-gray-600 text-sm"},"Grand Total Across All Classes",-1))])])])])):f("",!0),i.classes.length===0?(d(),c("div",Ti,e[16]||(e[16]=[le('<div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center" data-v-3a12609c><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3a12609c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-3a12609c></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2" data-v-3a12609c>No Classes Found</h4><p class="text-gray-500 text-sm" data-v-3a12609c>Please go back and set up classes first to create fee structures.</p>',3)]))):f("",!0)])}const ki=Y(po,[["render",wi],["__scopeId","data-v-3a12609c"]]),Di={name:"MultiStepForm",components:{EmailAccountSetup:ke,AcademicYearTerms:rt,UsePreviousData:vt,SubjectsDivisions:Ds,GradingSystem:go,FeeStructureCreator:ki},setup(){const s=T(0),e=T([]),r=T(!1),n=T(!1),u=T(!1),i=T(""),o=T([]),l=T(!1),a=ve({email:"",googleAppPassword:"",academicYear:"",academicYearStart:"",academicYearEnd:"",numberOfTerms:"",terms:[],selectedTerm:"",selectedInstitution:"",classes:[],subjects:[],divisions:[],commonSubjects:[],commonDivisions:[],dontCreateClasses:!1,feeStructures:[],setAsCurrent:!1,gradingSystem:{selectedOption:"",scaleName:"",previousScaleName:"",gradeData:null},gradingCompleted:!1}),h=T([{title:"Email Account Setup (Optional)",component:"EmailAccountSetup"},{title:"Academic Year & Terms",component:"AcademicYearTerms"},{title:"Use Previous Data",component:"UsePreviousData"},{title:"Subjects and Divisions",component:"SubjectsDivisions"},{title:"Grading System",component:"GradingSystem"},{title:"Create Fee Structures",component:"FeeStructureCreator"}]),y=W({url:"school.al_ummah.api3.get_previous_data",params:{values:{}},onSuccess:g=>{e.value=Array.isArray(g)?g.map(p=>L(O({},p),{academicYear:p.json_data?JSON.parse(p.json_data).academicYear:""})):[]},onError:g=>{console.error("Error fetching previous data:",g),e.value=[]}}),B=W({url:"school.al_ummah.api3.create_email_account",params:{email_id:"",password:""},onSuccess:()=>{alert("Email account setup successfully!")},onError:g=>{console.error("Error setting up email account:",g),alert("Error setting up email account.")}}),N=W({url:"school.al_ummah.api3.quick_setup",params:{values:{}},onSuccess:()=>{u.value=!0,s.value++,r.value=!1,n.value=!0},onError:g=>{var p;u.value=!1,i.value=((p=g.messages)==null?void 0:p[0])||"An error occurred while submitting the form.",console.error("Submission error:",g),r.value=!1,n.value=!0}});function K(){a.gradingCompleted=!0,R()}function Q({classNames:g}){const p=[...a.classes],_=p.reduce((j,v)=>Math.max(j,v.classIndex||0),0),A=g.map((j,v)=>({className:j,subjects:[],divisions:[{divisionName:""}],classIndex:_+v+1}));a.classes=[...p,...A]}function E(){y.reload()}function J({field:g,value:p,parent:_=null}){_&&a[_]?a[_][g]=p:a[g]=p}function q({field:g,index:p,subField:_,value:A}){p!==void 0&&_?a[g][p][_]=A:p!==void 0?a[g][p]=A:a[g]=A}function Z(){return ne(this,null,function*(){const{email:g,googleAppPassword:p}=a;if(!g||!p){alert("Please provide both email and Google app password.");return}B.update({params:{email_id:g,password:p}}),B.submit()})}function X(){const g=parseInt(a.numberOfTerms,10),p=new Date(a.academicYearStart),_=new Date(a.academicYearEnd);if(!g||g<=0){alert("Please enter a valid number of terms.");return}if(isNaN(p.getTime())){alert("Please enter valid 'From' date.");return}if(isNaN(_.getTime())){alert("Please enter valid 'To' date.");return}if(p>=_){alert("'From' date must be before 'To' date.");return}const A=Math.ceil((_-p)/(1e3*60*60*24)),j=Math.floor(A/g),v=[];let b=new Date(p);for(let F=0;F<g;F++){const P=new Date(b);P.setDate(b.getDate()+j-1),F===g-1&&P.setTime(_.getTime()),v.push({name:`Term ${F+1}`,startDate:b.toISOString().split("T")[0],endDate:P.toISOString().split("T")[0]}),b=new Date(P),b.setDate(b.getDate()+1)}a.terms=v}function G(g){if(console.log("ðŸ“¥ USE_PREVIOUS_DATA: Selected data received",g),!(g!=null&&g.json_data)){console.error("âŒ Invalid or missing previous data");return}try{const p=JSON.parse(g.json_data);console.log("ðŸ“Š Parsed previous data:",{classes:p.classes,commonSubjects:p.commonSubjects,commonDivisions:p.commonDivisions,divisions:p.divisions}),a.classes=p.classes||[],a.commonSubjects=p.commonSubjects||[],a.commonDivisions=p.commonDivisions||[],a.subjects=p.subjects||[],a.divisions=p.divisions||[],console.log("âœ… Updated formValues:",{classes:a.classes,commonSubjects:a.commonSubjects,commonDivisions:a.commonDivisions})}catch(p){console.error("âŒ Error parsing previous data:",p),alert("Failed to load previous data. Please try another selection.")}}function R(){s.value<h.value.length-1?(s.value++,l.value=!1):$()}function ee(){s.value>0&&(s.value--,l.value=!1)}function $(){r.value=!0,n.value=!1,u.value=!1,i.value="",l.value=!1;const p=H(a,["selectedTerm","commonSubjects","commonDivisions","divisions","institutionName","logo","dontCreateClasses","subjects","terms","email","googleAppPassword","classes","gradingSystem","gradingCompleted","setAsCurrent"]);if(p.length>0){o.value=p,l.value=!0,r.value=!1,window.scrollTo({top:0,behavior:"smooth"});return}N.update({params:{values:O({},a)}}),N.submit()}function H(g,p){const _=[];return Object.entries(g).forEach(([A,j])=>{if(!p.includes(A)){if(Array.isArray(j))if(j.length===0){const v=M(A);_.push(`${v} list is empty`)}else j.forEach((v,b)=>{typeof v=="object"&&v!==null&&Object.entries(v).forEach(([F,P])=>{if(!P||typeof P=="string"&&P.trim()===""){const ue=M(F),de=M(A);_.push(`${de} ${b+1}: ${ue} is required`)}})});else if(!j||typeof j=="string"&&j.trim()===""){const v=M(A);_.push(`${v} is required`)}}}),_}function M(g){return g.replace(/([A-Z])/g," $1").replace(/^./,p=>p.toUpperCase()).replace(/([A-Z])/g," $1").trim()}return se(()=>{E()}),V(()=>a.commonDivisions,g=>{console.log("ðŸ  MAIN COMPONENT: commonDivisions updated:",g)},{deep:!0}),V(()=>a.commonSubjects,g=>{console.log("ðŸ  MAIN COMPONENT: commonSubjects updated:",g)},{deep:!0}),V(()=>a.classes,g=>{var p;console.log("ðŸ  MAIN COMPONENT: classes updated - count:",g==null?void 0:g.length),g&&g.length>0&&console.log("ðŸ  MAIN COMPONENT: First class divisions:",(p=g[0])==null?void 0:p.divisions)},{deep:!0}),V(a,g=>{var p;console.log("ðŸ  MAIN COMPONENT: formValues updated:",{commonSubjects:g.commonSubjects,commonDivisions:g.commonDivisions,classesCount:(p=g.classes)==null?void 0:p.length})},{deep:!0,immediate:!0}),{currentStep:s,previousDataList:e,isSubmitting:r,showResultMessage:n,submitSuccess:u,errorMessage:i,missingFields:o,showMissingFields:l,formValues:a,steps:h,quickSetupResource:N,autoCreateClasses:Q,fetchPreviousData:E,updateField:J,updateFieldArray:q,submitEmailAccount:Z,autoCreateTerms:X,usePreviousData:G,handleGradingCompleted:K,nextStep:R,prevStep:ee,submitForm:$,checkMissingFields:H,formatFieldName:M}}},Ai={class:"enrollment-container"},ji={class:"floating-navigation"},Ni={key:1,class:"back-button-placeholder"},Mi=["disabled"],Fi={key:0,class:"scroll-view-content"},Bi={class:"header"},Pi={class:"title"},Oi={key:0,class:"missing-fields-alert form-card"},Yi={class:"alert-header"},Ei={class:"alert-content"},Gi={class:"missing-fields-list"},Li={class:"form-card"},Ui={key:1,class:"loading-overlay"},Ii={key:2,class:"modal-overlay"},Vi={class:"result-modal"},Wi={key:0,class:"success-icon"},qi={key:1,class:"error-icon"},Ri={class:"result-title"},$i={class:"result-description"},Hi={class:"modal-actions"},zi={key:3,class:"form-card"};function Ki(s,e,r,n,u,i){return d(),c("div",Ai,[t("div",ji,[n.currentStep>0?(d(),c("button",{key:0,onClick:e[0]||(e[0]=(...o)=>n.prevStep&&n.prevStep(...o)),class:"nav-button back-button"},e[4]||(e[4]=[t("svg",{class:"button-icon",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"})],-1),D(" Back ")]))):(d(),c("div",Ni)),t("button",{onClick:e[1]||(e[1]=(...o)=>n.nextStep&&n.nextStep(...o)),class:"nav-button next-button",disabled:n.isSubmitting||n.quickSetupResource.loading},[D(m(n.currentStep===n.steps.length-1?n.isSubmitting?"Submitting...":"Submit":"Next")+" ",1),e[5]||(e[5]=t("svg",{class:"button-icon",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"})],-1))],8,Mi)]),n.currentStep<n.steps.length?(d(),c("div",Fi,[t("div",Bi,[t("h2",Pi,m(n.steps[n.currentStep].title),1)]),n.missingFields.length>0&&n.showMissingFields?(d(),c("div",Oi,[t("div",Yi,[e[7]||(e[7]=t("div",{class:"alert-icon"},[t("svg",{class:"icon",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})])],-1)),e[8]||(e[8]=t("h3",{class:"alert-title"},"Required Information Missing",-1)),t("button",{onClick:e[2]||(e[2]=o=>n.showMissingFields=!1),class:"close-button"},e[6]||(e[6]=[t("svg",{class:"close-icon",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1)]))]),t("div",Ei,[e[10]||(e[10]=t("p",{class:"alert-description"},"Please fill in the following required fields before proceeding:",-1)),t("ul",Gi,[(d(!0),c(S,null,C(n.missingFields,(o,l)=>(d(),c("li",{key:l,class:"missing-field-item"},[e[9]||(e[9]=t("span",{class:"field-bullet"},"â€¢",-1)),D(" "+m(o),1)]))),128))])])])):f("",!0),t("div",Li,[(d(),fe(be(n.steps[n.currentStep].component),{values:n.formValues,previousDataList:n.previousDataList,onUpdateField:n.updateField,onUpdateFieldArray:n.updateFieldArray,onSubmitEmail:n.submitEmailAccount,onAutoCreateTerms:n.autoCreateTerms,onAutoCreateClasses:n.autoCreateClasses,onUsePreviousData:n.usePreviousData,onGradingCompleted:n.handleGradingCompleted},null,40,["values","previousDataList","onUpdateField","onUpdateFieldArray","onSubmitEmail","onAutoCreateTerms","onAutoCreateClasses","onUsePreviousData","onGradingCompleted"]))])])):f("",!0),n.isSubmitting?(d(),c("div",Ui,e[11]||(e[11]=[t("div",{class:"loading-modal"},[t("div",{class:"loading-spinner"}),t("h3",{class:"loading-title"},"Submitting your data..."),t("p",{class:"loading-description"},"Please wait while we process your information.")],-1)]))):f("",!0),n.showResultMessage?(d(),c("div",Ii,[t("div",Vi,[n.submitSuccess?(d(),c("div",Wi,e[12]||(e[12]=[t("svg",{class:"icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):(d(),c("div",qi,e[13]||(e[13]=[t("svg",{class:"icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))),t("h3",Ri,m(n.submitSuccess?"Form Submitted Successfully!":"Submission Failed"),1),t("p",$i,m(n.submitSuccess?"Your data has been successfully processed.":n.errorMessage||"An error occurred while submitting the form."),1),t("div",Hi,[t("button",{onClick:e[3]||(e[3]=o=>n.showResultMessage=!1),class:"success-button"}," OK ")])])])):f("",!0),n.currentStep>=n.steps.length&&!n.isSubmitting&&!n.showResultMessage?(d(),c("div",zi,e[14]||(e[14]=[t("div",{class:"header"},[t("h2",{class:"title"},"Form Submitted Successfully!"),t("p",{class:"subtitle"},"Your data has been successfully processed.")],-1)]))):f("",!0)])}const Qi=Y(Di,[["render",Ki],["__scopeId","data-v-2c3fc87b"]]),Ji={components:{MultiStepForm:Qi}},Zi={class:"app-container"};function Xi(s,e,r,n,u,i){const o=xe("MultiStepForm");return d(),c("div",Zi,[ye(o)])}const on=Y(Ji,[["render",Xi]]);export{on as default};
