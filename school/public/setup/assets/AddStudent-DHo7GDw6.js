var W=Object.defineProperty;var x=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var P=(n,a,f)=>a in n?W(n,a,{enumerable:!0,configurable:!0,writable:!0,value:f}):n[a]=f,q=(n,a)=>{for(var f in a||(a={}))j.call(a,f)&&P(n,f,a[f]);if(x)for(var f of x(a))I.call(a,f)&&P(n,f,a[f]);return n};import{_ as T,q as F,r as b,y as z,j as D,k as Z,c as o,b as r,f as d,g as G,F as y,h as k,t as m,l as v,v as c,z as J,i as B,n as K,o as i}from"./index-YpdTZEFl.js";/* empty css             */const Q={setup(){const n=F({academicYear:null,className:null,divisionName:null,student_data:{"First Name":"","Middle Name":"","Last Name":"","Student Date of Birth":"","GR Number":"","Email Address":"","Phone Number":"","Guardian Name":"","Guardian Number":"",Relation:"","Guardian Date of Birth":"","Guardian Email":"","Guardian Occupation":"","Guardian Designation":"","Guardian Work Address":"","Guardian Education":""}}),a=b([]),f=z(()=>a.value.map((t,l)=>({original:t,display:l===0?`${t} - Current Year`:t}))),e=b([]),g=b([]),N=b(!1),s=b(null),u=F({}),S=D({url:"school.al_ummah.api3.get_academic_years",params:{values:{}},onSuccess:t=>{a.value=Array.isArray(t)?t:[],a.value.length>0&&(n.academicYear=a.value[0]),a.value.length||p("No academic years available","error")},onError:t=>{var l;console.error("Error fetching academic years:",t),a.value=[],p(`Error fetching academic years: ${((l=t.messages)==null?void 0:l[0])||"Unknown error"}`,"error")}}),h=D({url:"school.al_ummah.api3.get_classes",params:{values:{}},onSuccess:t=>{e.value=Array.isArray(t)?t:[],console.log("Classes loaded:",e.value),e.value.length||p("No classes available","error")},onError:t=>{var l;console.error("Error fetching classes:",t),e.value=[],p(`Error fetching classes: ${((l=t.messages)==null?void 0:l[0])||"Unknown error"}`,"error")}}),_=D({url:"school.al_ummah.api3.get_divisions2",params:{values:{classId:n.className,academicYear:n.academicYear}},onSuccess:t=>{g.value=Array.isArray(t)?t:[],console.log("Divisions loaded:",g.value)},onError:t=>{var l;console.error("Error fetching divisions:",t),g.value=[],p(`Error fetching divisions: ${((l=t.messages)==null?void 0:l[0])||"Unknown error"}`,"error")}}),E=D({url:"school.al_ummah.api3.enroll_single_student",params:{academicYear:n.academicYear,className:n.className,divisionName:n.divisionName,student_data:n.student_data},onSuccess:t=>{N.value=!1,p("âœ… Student enrolled successfully!","success")},onError:t=>{var l;N.value=!1,p(((l=t.messages)==null?void 0:l[0])||"Unexpected error occurred","error")}});Z(()=>{S.reload(),h.reload()});function M(){n.className=null,n.divisionName=null,g.value=[],u.className="",u.divisionName="",V()}function V(){n.divisionName=null,u.divisionName="",n.className&&n.academicYear?(_.update({params:{values:{classId:n.className,academicYear:n.academicYear}}}),_.reload()):g.value=[]}function O(){Object.assign(u,{});let t=!0;n.academicYear||(u.academicYear="Please select an academic year",t=!1),n.className||(u.className="Please select a class",t=!1),n.divisionName||(u.divisionName="Please select a division",t=!1),n.student_data["First Name"].trim()||(u.firstName="First name is required",t=!1),n.student_data["Last Name"].trim()||(u.lastName="Last name is required",t=!1),n.student_data["GR Number"].trim()||(u.grNumber="GR number is required",t=!1);const l=n.student_data["Email Address"].trim();l&&!Y(l)&&(u.email="Please enter a valid email",t=!1);const R=n.student_data["Phone Number"].trim();R&&!A(R)&&(u.phone="Please enter a valid phone number (10-15 digits)",t=!1);const U=n.student_data["Guardian Number"].trim();U&&!A(U)&&(u.guardianNumber="Please enter a valid guardian phone number (10-15 digits)",t=!1);const C=n.student_data["Guardian Email"].trim();return C?Y(C)||(u.guardianEmail="Please enter a valid guardian email",t=!1):(u.guardianEmail="Guardian email is required",t=!1),t}function Y(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0}function A(t){return t?/^[0-9]{10,15}$/.test(t):!0}function w(){O()&&L()}function L(){N.value=!0,E.update({params:{academicYear:n.academicYear,className:n.className,divisionName:n.divisionName,student_data:q({},n.student_data)}}),E.submit()}function H(){Object.assign(n,{academicYear:a.value.length>0?a.value[0]:null,className:null,divisionName:null,student_data:{"First Name":"","Middle Name":"","Last Name":"","Student Date of Birth":"","GR Number":"","Email Address":"","Phone Number":"","Guardian Name":"","Guardian Number":"",Relation:"","Guardian Date of Birth":"","Guardian Email":"","Guardian Occupation":"","Guardian Designation":"","Guardian Work Address":"","Guardian Education":""}}),g.value=[],Object.assign(u,{}),s.value=null}function p(t,l="info"){s.value={text:t,type:l},l!=="error"&&setTimeout(()=>s.value=null,5e3)}return{formData:n,academicYears:a,displayYears:f,classes:e,divisions:g,isSubmitting:N,message:s,errors:u,academicYearsResource:S,classesResource:h,divisionsResource:_,enrollStudentResource:E,onYearChange:M,onClassChange:V,validateAndSubmit:w,resetForm:H}}},X={class:"enrollment-form"},$={class:"form-card"},aa={class:"form-grid"},ea={class:"form-group required"},ra=["disabled"],sa=["value"],ta={key:0,class:"error-message"},na={class:"form-group required"},oa=["disabled"],ia=["value"],la={key:0,class:"error-message"},da={key:0,class:"form-group required"},ua=["disabled"],ma=["value"],ca={key:0,class:"error-message"},fa={class:"form-section"},va={class:"form-grid"},ga={class:"form-group required"},pa={key:0,class:"error-message"},Na={class:"form-group"},ba={class:"form-group required"},Da={key:0,class:"error-message"},Ga={class:"form-group"},_a={key:0,class:"error-message"},Ea={class:"form-group required"},ya={key:0,class:"error-message"},ka={class:"form-group required"},Sa={key:0,class:"error-message"},ha={class:"form-group"},Va={key:0,class:"error-message"},Ya={class:"form-section"},Aa={class:"form-grid"},Ra={class:"form-group"},Ua={class:"form-group"},Ca={key:0,class:"error-message"},xa={class:"form-group"},Pa={class:"form-group"},qa={class:"form-group required"},Fa={key:0,class:"error-message"},Ba={class:"form-group"},Ma={class:"form-group"},Oa={class:"form-group"},wa={class:"form-group"},La={class:"form-actions"},Ha=["disabled"],Wa={key:0,class:"button-content"},ja={key:1,class:"button-content"},Ia=["disabled"];function Ta(n,a,f,e,g,N){return i(),o("div",X,[a[51]||(a[51]=r("div",{class:"header"},[r("h1",{class:"title"},"Student Enrollment"),r("p",{class:"subtitle"},"Add new student to the system")],-1)),r("div",$,[a[50]||(a[50]=r("h2",{class:"form-title"},"Student Information",-1)),r("div",aa,[r("div",ea,[a[24]||(a[24]=r("label",null,"Academic Year",-1)),d(r("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>e.formData.academicYear=s),class:"picker",onChange:a[1]||(a[1]=(...s)=>e.onYearChange&&e.onYearChange(...s)),disabled:e.academicYearsResource.loading},[a[23]||(a[23]=r("option",{value:null},"Select Academic Year",-1)),(i(!0),o(y,null,k(e.displayYears,s=>(i(),o("option",{key:s,value:s.original},m(s.display),9,sa))),128))],40,ra),[[G,e.formData.academicYear]]),e.errors.academicYear?(i(),o("span",ta,m(e.errors.academicYear),1)):v("",!0)]),r("div",na,[a[26]||(a[26]=r("label",null,"Class / Program",-1)),d(r("select",{"onUpdate:modelValue":a[2]||(a[2]=s=>e.formData.className=s),class:"picker",onChange:a[3]||(a[3]=(...s)=>e.onClassChange&&e.onClassChange(...s)),disabled:!e.formData.academicYear||e.classesResource.loading},[a[25]||(a[25]=r("option",{value:null},"Select Class / Program",-1)),(i(!0),o(y,null,k(e.classes,s=>(i(),o("option",{key:s.name,value:s.name},m(s.name),9,ia))),128))],40,oa),[[G,e.formData.className]]),e.errors.className?(i(),o("span",la,m(e.errors.className),1)):v("",!0)]),e.divisions.length>0?(i(),o("div",da,[a[28]||(a[28]=r("label",null,"Division / Student Group",-1)),d(r("select",{"onUpdate:modelValue":a[4]||(a[4]=s=>e.formData.divisionName=s),class:"picker",disabled:!e.formData.className||e.divisionsResource.loading},[a[27]||(a[27]=r("option",{value:null},"Select Division / Student Group",-1)),(i(!0),o(y,null,k(e.divisions,s=>(i(),o("option",{key:s.name,value:s.name},m(s.name),9,ma))),128))],8,ua),[[G,e.formData.divisionName]]),e.errors.divisionName?(i(),o("span",ca,m(e.errors.divisionName),1)):v("",!0)])):v("",!0)]),r("div",fa,[a[36]||(a[36]=r("h3",{class:"section-title"},"Personal Details",-1)),r("div",va,[r("div",ga,[a[29]||(a[29]=r("label",null,"First Name",-1)),d(r("input",{"onUpdate:modelValue":a[5]||(a[5]=s=>e.formData.student_data["First Name"]=s),type:"text",class:"input",placeholder:"Enter first name",required:""},null,512),[[c,e.formData.student_data["First Name"]]]),e.errors.firstName?(i(),o("span",pa,m(e.errors.firstName),1)):v("",!0)]),r("div",Na,[a[30]||(a[30]=r("label",null,"Middle Name",-1)),d(r("input",{"onUpdate:modelValue":a[6]||(a[6]=s=>e.formData.student_data["Middle Name"]=s),type:"text",class:"input",placeholder:"Enter middle name"},null,512),[[c,e.formData.student_data["Middle Name"]]])]),r("div",ba,[a[31]||(a[31]=r("label",null,"Last Name",-1)),d(r("input",{"onUpdate:modelValue":a[7]||(a[7]=s=>e.formData.student_data["Last Name"]=s),type:"text",class:"input",placeholder:"Enter last name",required:""},null,512),[[c,e.formData.student_data["Last Name"]]]),e.errors.lastName?(i(),o("span",Da,m(e.errors.lastName),1)):v("",!0)]),r("div",Ga,[a[32]||(a[32]=r("label",null,"Student Date of Birth",-1)),d(r("input",{"onUpdate:modelValue":a[8]||(a[8]=s=>e.formData.student_data["Student Date of Birth"]=s),type:"date",class:"input",required:""},null,512),[[c,e.formData.student_data["Student Date of Birth"]]]),e.errors.studentDob?(i(),o("span",_a,m(e.errors.studentDob),1)):v("",!0)]),r("div",Ea,[a[33]||(a[33]=r("label",null,"GR Number",-1)),d(r("input",{"onUpdate:modelValue":a[9]||(a[9]=s=>e.formData.student_data["GR Number"]=s),type:"text",class:"input",placeholder:"Enter GR number",required:""},null,512),[[c,e.formData.student_data["GR Number"]]]),e.errors.grNumber?(i(),o("span",ya,m(e.errors.grNumber),1)):v("",!0)]),r("div",ka,[a[34]||(a[34]=r("label",null,"Email Address",-1)),d(r("input",{"onUpdate:modelValue":a[10]||(a[10]=s=>e.formData.student_data["Email Address"]=s),type:"email",class:"input",placeholder:"Enter email address"},null,512),[[c,e.formData.student_data["Email Address"]]]),e.errors.email?(i(),o("span",Sa,m(e.errors.email),1)):v("",!0)]),r("div",ha,[a[35]||(a[35]=r("label",null,"Phone Number",-1)),d(r("input",{"onUpdate:modelValue":a[11]||(a[11]=s=>e.formData.student_data["Phone Number"]=s),type:"tel",class:"input",placeholder:"Enter phone number"},null,512),[[c,e.formData.student_data["Phone Number"]]]),e.errors.phone?(i(),o("span",Va,m(e.errors.phone),1)):v("",!0)])])]),r("div",Ya,[a[47]||(a[47]=r("h3",{class:"section-title"},"Guardian Information",-1)),r("div",Aa,[r("div",Ra,[a[37]||(a[37]=r("label",null,"Guardian Name",-1)),d(r("input",{"onUpdate:modelValue":a[12]||(a[12]=s=>e.formData.student_data["Guardian Name"]=s),type:"text",class:"input",placeholder:"Enter guardian name"},null,512),[[c,e.formData.student_data["Guardian Name"]]])]),r("div",Ua,[a[38]||(a[38]=r("label",null,"Guardian Number",-1)),d(r("input",{"onUpdate:modelValue":a[13]||(a[13]=s=>e.formData.student_data["Guardian Number"]=s),type:"tel",class:"input",placeholder:"Enter guardian phone number"},null,512),[[c,e.formData.student_data["Guardian Number"]]]),e.errors.guardianNumber?(i(),o("span",Ca,m(e.errors.guardianNumber),1)):v("",!0)]),r("div",xa,[a[40]||(a[40]=r("label",null,"Relation",-1)),d(r("select",{"onUpdate:modelValue":a[14]||(a[14]=s=>e.formData.student_data.Relation=s),class:"picker"},a[39]||(a[39]=[J('<option value="">Select Relation</option><option value="Father">Father</option><option value="Mother">Mother</option><option value="Brother">Brother</option><option value="Sister">Sister</option><option value="Grandfather">Grandfather</option><option value="Grandmother">Grandmother</option><option value="Uncle">Uncle</option><option value="Aunt">Aunt</option><option value="Guardian">Guardian</option><option value="Other">Other</option>',11)]),512),[[G,e.formData.student_data.Relation]])]),r("div",Pa,[a[41]||(a[41]=r("label",null,"Guardian Date of Birth",-1)),d(r("input",{"onUpdate:modelValue":a[15]||(a[15]=s=>e.formData.student_data["Guardian Date of Birth"]=s),type:"date",class:"input"},null,512),[[c,e.formData.student_data["Guardian Date of Birth"]]])]),r("div",qa,[a[42]||(a[42]=r("label",null,"Guardian Email",-1)),d(r("input",{"onUpdate:modelValue":a[16]||(a[16]=s=>e.formData.student_data["Guardian Email"]=s),type:"email",class:"input",placeholder:"Enter guardian email"},null,512),[[c,e.formData.student_data["Guardian Email"]]]),e.errors.guardianEmail?(i(),o("span",Fa,m(e.errors.guardianEmail),1)):v("",!0)]),r("div",Ba,[a[43]||(a[43]=r("label",null,"Guardian Occupation",-1)),d(r("input",{"onUpdate:modelValue":a[17]||(a[17]=s=>e.formData.student_data["Guardian Occupation"]=s),type:"text",class:"input",placeholder:"Enter guardian occupation"},null,512),[[c,e.formData.student_data["Guardian Occupation"]]])]),r("div",Ma,[a[44]||(a[44]=r("label",null,"Guardian Designation",-1)),d(r("input",{"onUpdate:modelValue":a[18]||(a[18]=s=>e.formData.student_data["Guardian Designation"]=s),type:"text",class:"input",placeholder:"Enter guardian designation"},null,512),[[c,e.formData.student_data["Guardian Designation"]]])]),r("div",Oa,[a[45]||(a[45]=r("label",null,"Guardian Education",-1)),d(r("input",{"onUpdate:modelValue":a[19]||(a[19]=s=>e.formData.student_data["Guardian Education"]=s),type:"text",class:"input",placeholder:"Enter guardian education"},null,512),[[c,e.formData.student_data["Guardian Education"]]])]),r("div",wa,[a[46]||(a[46]=r("label",null,"Guardian Work Address",-1)),d(r("textarea",{"onUpdate:modelValue":a[20]||(a[20]=s=>e.formData.student_data["Guardian Work Address"]=s),class:"input textarea",placeholder:"Enter guardian work address",rows:"3"},null,512),[[c,e.formData.student_data["Guardian Work Address"]]])])])]),r("div",La,[r("button",{class:"enroll-button",onClick:a[21]||(a[21]=(...s)=>e.validateAndSubmit&&e.validateAndSubmit(...s)),disabled:e.isSubmitting||e.enrollStudentResource.loading},[e.isSubmitting||e.enrollStudentResource.loading?(i(),o("span",Wa,a[48]||(a[48]=[r("span",{class:"spinner"},null,-1),B(" Processing... ")]))):(i(),o("span",ja,a[49]||(a[49]=[r("svg",{class:"icon",viewBox:"0 0 24 24"},[r("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})],-1),B(" Enroll Student ")])))],8,Ha),r("button",{class:"reset-button",onClick:a[22]||(a[22]=(...s)=>e.resetForm&&e.resetForm(...s)),disabled:e.isSubmitting||e.enrollStudentResource.loading}," Reset Form ",8,Ia)]),e.message?(i(),o("div",{key:0,class:K(["message",e.message.type])},m(e.message.text),3)):v("",!0)])])}const Ka=T(Q,[["render",Ta]]);export{Ka as default};
