var ae=Object.defineProperty,de=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var oe=(s,e,r)=>e in s?ae(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,O=(s,e)=>{for(var r in e||(e={}))ce.call(e,r)&&oe(s,r,e[r]);if(se)for(var r of se(e))me.call(e,r)&&oe(s,r,e[r]);return s},N=(s,e)=>de(s,ue(e));var ie=(s,e,r)=>new Promise((i,l)=>{var n=a=>{try{d(r.next(a))}catch(h){l(h)}},o=a=>{try{d(r.throw(a))}catch(h){l(h)}},d=a=>a.done?i(a.value):Promise.resolve(a.value).then(n,o);d((r=r.apply(s,e)).next())});import{_ as P,o as u,a as c,b as t,y as v,D as S,z as V,F as x,l as C,t as m,i as y,H as ge,h as A,r as w,x as L,j as te,n as T,E as U,g as ne,c as ee,d as $,I as pe,q as be,v as he,e as ve,f as fe}from"./index-DPZu7dOE.js";/* empty css             */const ye={props:{values:Object},computed:{email:{get(){return this.values.email},set(s){this.$emit("update-field",{field:"email",value:s})}},googleAppPassword:{get(){return this.values.googleAppPassword},set(s){this.$emit("update-field",{field:"googleAppPassword",value:s})}}},methods:{updateField(s,e){this.$emit("update-field",{field:s,value:e})}}},xe={class:"card"},Ce={class:"field"},Se={class:"field"};function _e(s,e,r,i,l,n){return u(),c("div",xe,[t("div",Ce,[e[5]||(e[5]=t("label",null,"Email Address",-1)),v(t("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=o=>n.email=o),placeholder:"Enter your email address",onInput:e[1]||(e[1]=o=>n.updateField("email",o.target.value))},null,544),[[S,n.email]])]),t("div",Se,[e[6]||(e[6]=t("label",null,"Google App Password",-1)),v(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=o=>n.googleAppPassword=o),placeholder:"Enter your Google app password",onInput:e[3]||(e[3]=o=>n.updateField("googleAppPassword",o.target.value))},null,544),[[S,n.googleAppPassword]])]),t("button",{onClick:e[4]||(e[4]=o=>s.$emit("submit-email"))},"Submit Email Account")])}const we=P(ye,[["render",_e],["__scopeId","data-v-a1f91314"]]),Te={props:{values:Object},data(){return{selectedTerm:"",lastValidTermCount:0}},computed:{setAsCurrent:{get(){return this.values.setAsCurrent||!1},set(s){this.$emit("update-field",{field:"setAsCurrent",value:s})}},academicYear:{get(){return this.values.academicYear},set(s){this.$emit("update-field",{field:"academicYear",value:s})}},academicYearStart:{get(){return this.values.academicYearStart},set(s){this.$emit("update-field",{field:"academicYearStart",value:s})}},academicYearEnd:{get(){return this.values.academicYearEnd},set(s){this.$emit("update-field",{field:"academicYearEnd",value:s})}},numberOfTerms:{get(){return this.values.numberOfTerms},set(s){this.$emit("update-field",{field:"numberOfTerms",value:s})}}},methods:{handleNumberOfTermsChange(s){const e=parseInt(s.target.value);!isNaN(e)&&e>0?(this.numberOfTerms=e,this.lastValidTermCount=e,this.adjustTermsToMatchCount()):this.numberOfTerms=this.lastValidTermCount},incrementTerms(){this.numberOfTerms=parseInt(this.numberOfTerms)+1,this.adjustTermsToMatchCount()},decrementTerms(){this.numberOfTerms>1&&(this.numberOfTerms=parseInt(this.numberOfTerms)-1,this.adjustTermsToMatchCount())},adjustTermsToMatchCount(){const s=this.values.terms.length,e=this.numberOfTerms;if(e>s){const r=e-s,i=[...this.values.terms];for(let l=0;l<r;l++){const n=s+l+1,{startDate:o,endDate:d}=this.calculateTermDates(n,e);i.push({name:`Term ${n}`,startDate:o,endDate:d})}this.$emit("update-field-array",{field:"terms",value:i})}else if(e<s){const r=s-e,i=[...this.values.terms];i.splice(-r,r),this.$emit("update-field-array",{field:"terms",value:i})}},calculateTermDates(s,e){if(!this.academicYearStart||!this.academicYearEnd)return{startDate:"",endDate:""};const r=new Date(this.academicYearStart),n=(new Date(this.academicYearEnd)-r)/e,o=new Date(r.getTime()+n*(s-1)),d=new Date(r.getTime()+n*s-1),a=h=>h.toISOString().split("T")[0];return{startDate:a(o),endDate:a(d)}},formatDate(s){if(!s)return"";const e={year:"numeric",month:"short",day:"numeric"};return new Date(s).toLocaleDateString(void 0,e)},updateField(s,e){this.$emit("update-field",{field:s,value:e})},updateTermField(s,e,r){this.$emit("update-field-array",{field:"terms",index:s,subField:e,value:r})},addTerm(){const s={name:"",startDate:"",endDate:""};this.$emit("update-field-array",{field:"terms",value:[...this.values.terms,s]}),this.numberOfTerms=this.values.terms.length},removeTerm(s){const e=[...this.values.terms];e.splice(s,1),this.$emit("update-field-array",{field:"terms",value:e}),this.numberOfTerms=e.length},handleTermsInput(s){const e=parseInt(s.target.value);!isNaN(e)&&e>0?(this.numberOfTerms=e,this.lastValidTermCount=e,this.$emit("auto-create-terms")):this.numberOfTerms=this.lastValidTermCount},incrementTerms(){this.numberOfTerms=parseInt(this.numberOfTerms)+1,this.$emit("auto-create-terms")},decrementTerms(){this.numberOfTerms>1&&(this.numberOfTerms=parseInt(this.numberOfTerms)-1,this.$emit("auto-create-terms"))}},mounted(){this.lastValidTermCount=this.numberOfTerms||1}},ke={class:"academic-year-form"},De={class:"form-grid"},Ae={class:"form-row"},je={class:"form-group full-width required"},Pe={class:"form-row date-range-row"},Me={class:"form-group required"},Ee={class:"form-group required"},Fe={class:"form-row"},Ge={class:"form-group full-width required"},Ie={class:"number-input-group"},Oe={class:"number-input-buttons"},Ne=["disabled"],Ue={key:0,class:"form-row"},Le={class:"form-group full-width"},Ve=["value"],Be={class:"form-row"},Ye={class:"form-group full-width"},Re={class:"checkbox-label"},qe={class:"terms-list"},We={class:"term-header"},He={class:"section-title"},$e=["onClick"],Ke={class:"term-body"},ze={class:"form-group required"},Qe=["onUpdate:modelValue","placeholder","onInput"],Je={class:"form-row term-dates-row"},Ze={class:"form-group required"},Xe=["onUpdate:modelValue","onInput"],et={class:"form-group required"},tt=["onUpdate:modelValue","onInput"],st={class:"form-actions"};function ot(s,e,r,i,l,n){return u(),c("div",ke,[e[26]||(e[26]=t("div",{class:"form-header"},[t("h3",{class:"form-title"},"Academic Year Setup"),t("p",{class:"form-subtitle"}," Provide details about the academic year, its duration, and terms. ")],-1)),t("div",De,[t("div",Ae,[t("div",je,[e[15]||(e[15]=t("label",{class:"form-label"},"Academic Year",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>n.academicYear=o),class:"input",placeholder:"e.g., 2023-2024",onInput:e[1]||(e[1]=o=>n.updateField("academicYear",o.target.value))},null,544),[[S,n.academicYear]])])]),t("div",Pe,[t("div",Me,[e[16]||(e[16]=t("label",{class:"form-label"},"Start Date",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=o=>n.academicYearStart=o),class:"input",onInput:e[3]||(e[3]=o=>n.updateField("academicYearStart",o.target.value))},null,544),[[S,n.academicYearStart]])]),t("div",Ee,[e[17]||(e[17]=t("label",{class:"form-label"},"End Date",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=o=>n.academicYearEnd=o),class:"input",onInput:e[5]||(e[5]=o=>n.updateField("academicYearEnd",o.target.value))},null,544),[[S,n.academicYearEnd]])])]),t("div",Fe,[t("div",Ge,[e[18]||(e[18]=t("label",{class:"form-label"},"Number of Terms",-1)),t("div",Ie,[v(t("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=o=>n.numberOfTerms=o),class:"input number-input",placeholder:"e.g., 3",min:"1",onInput:e[7]||(e[7]=(...o)=>n.handleNumberOfTermsChange&&n.handleNumberOfTermsChange(...o))},null,544),[[S,n.numberOfTerms,void 0,{number:!0}]]),t("div",Oe,[t("button",{class:"number-input-btn minus-btn",onClick:e[8]||(e[8]=(...o)=>n.decrementTerms&&n.decrementTerms(...o)),disabled:n.numberOfTerms<=1,type:"button"}," âˆ’ ",8,Ne),t("button",{class:"number-input-btn plus-btn",onClick:e[9]||(e[9]=(...o)=>n.incrementTerms&&n.incrementTerms(...o)),type:"button"}," + ")])])])]),n.setAsCurrent?(u(),c("div",Ue,[t("div",Le,[e[20]||(e[20]=t("label",{class:"form-label"},"Current Academic Term",-1)),v(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.selectedTerm=o),class:"picker",onChange:e[11]||(e[11]=o=>n.updateField("selectedTerm",o.target.value))},[e[19]||(e[19]=t("option",{value:""},"-- Select a Term --",-1)),(u(!0),c(x,null,C(r.values.terms,(o,d)=>(u(),c("option",{key:d,value:o.name},m(o.name)+" ("+m(n.formatDate(o.startDate))+" - "+m(n.formatDate(o.endDate))+") ",9,Ve))),128))],544),[[V,l.selectedTerm]])])])):y("",!0),t("div",Be,[t("div",Ye,[t("label",Re,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=o=>n.setAsCurrent=o),onChange:e[13]||(e[13]=o=>n.updateField("setAsCurrent",o.target.checked))},null,544),[[ge,n.setAsCurrent]]),e[21]||(e[21]=A(" Set as Current Academic Year "))])])])]),t("div",qe,[(u(!0),c(x,null,C(r.values.terms,(o,d)=>(u(),c("div",{key:d,class:"term-card form-card"},[t("div",We,[t("h4",He,"Term "+m(d+1),1),t("button",{class:"trash-icon",onClick:a=>n.removeTerm(d),title:"Remove term",type:"button"}," âœ• ",8,$e)]),t("div",Ke,[t("div",ze,[e[22]||(e[22]=t("label",{class:"form-label"},"Term Name",-1)),v(t("input",{type:"text","onUpdate:modelValue":a=>o.name=a,class:"input",placeholder:`e.g., Spring ${d+1}`,onInput:a=>n.updateTermField(d,"name",a.target.value)},null,40,Qe),[[S,o.name]])]),t("div",Je,[t("div",Ze,[e[23]||(e[23]=t("label",{class:"form-label"},"Start Date",-1)),v(t("input",{type:"date","onUpdate:modelValue":a=>o.startDate=a,class:"input",onInput:a=>n.updateTermField(d,"startDate",a.target.value)},null,40,Xe),[[S,o.startDate]])]),t("div",et,[e[24]||(e[24]=t("label",{class:"form-label"},"End Date",-1)),v(t("input",{type:"date","onUpdate:modelValue":a=>o.endDate=a,class:"input",onInput:a=>n.updateTermField(d,"endDate",a.target.value)},null,40,tt),[[S,o.endDate]])])])])]))),128))]),t("div",st,[t("button",{class:"primary-button",onClick:e[14]||(e[14]=(...o)=>n.addTerm&&n.addTerm(...o)),type:"button"},e[25]||(e[25]=[t("span",{class:"button-content"},[t("span",{class:"icon"},"+"),A(" Add Term ")],-1)]))])])}const it=P(Te,[["render",ot],["__scopeId","data-v-c14763d6"]]),nt={props:{values:Object,previousDataList:Array},emits:["update-field","use-previous-data"],setup(s,{emit:e}){const r=w(null),i=w(s.values.dontCreateClasses||!1),l=w(!1),n=w(""),o=L({url:"school.al_ummah.api3.get_previous_data",params:{values:{}},onSuccess:h=>{console.log("Previous data loaded successfully")},onError:h=>{console.error("Error fetching previous data:",h)}}),d=()=>{if(!r.value){console.warn("No data selected");return}e("use-previous-data",r.value),n.value=r.value.academicYear,l.value=!0,setTimeout(()=>{l.value=!1},5e3)},a=()=>{e("update-field",{field:"dontCreateClasses",value:i.value})};return te(()=>{(!s.previousDataList||s.previousDataList.length===0)&&o.reload()}),{selectedPreviousData:r,dontCreateClasses:i,showSuccessMessage:l,usedPreviousYear:n,previousDataResource:o,handleUsePreviousData:d,updateDontCreateClasses:a}}},rt={class:"card"},lt={key:0,class:"loading"},at={key:1},dt={key:0,class:"success-message"},ut={class:"field"},ct=["value"],mt=["disabled"];function gt(s,e,r,i,l,n){return u(),c("div",rt,[e[3]||(e[3]=t("h3",{class:"section-title"},"Use Previous Data",-1)),i.previousDataResource.loading?(u(),c("div",lt,"Loading previous data...")):(u(),c("div",at,[i.showSuccessMessage?(u(),c("div",dt," âœ“ Previous data from "+m(i.usedPreviousYear)+" has been successfully loaded ",1)):y("",!0),t("div",ut,[v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.selectedPreviousData=o)},[e[2]||(e[2]=t("option",{value:null},"Select a year",-1)),(u(!0),c(x,null,C(r.previousDataList,(o,d)=>(u(),c("option",{key:d,value:o},m(o.academicYear),9,ct))),128))],512),[[V,i.selectedPreviousData]])]),t("button",{onClick:e[1]||(e[1]=(...o)=>i.handleUsePreviousData&&i.handleUsePreviousData(...o)),disabled:!i.selectedPreviousData}," Use Previous Data ",8,mt)]))])}const pt=P(nt,[["render",gt],["__scopeId","data-v-b5328e59"]]),bt=[{id:1,name:"Pre-K"},{id:2,name:"Kindergarten"},{id:3,name:"1st Grade"},{id:4,name:"2nd Grade"},{id:5,name:"3rd Grade"},{id:6,name:"4th Grade"},{id:7,name:"5th Grade"},{id:8,name:"6th Grade"},{id:9,name:"7th Grade"},{id:10,name:"8th Grade"},{id:11,name:"9th Grade"},{id:12,name:"10th Grade"},{id:13,name:"11th Grade"},{id:14,name:"12th Grade"},{id:15,name:"Other"}],ht={school:["Nursery","Jr KG","Sr KG","1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th"],college:["FY Bachelors","SY Bachelors","TY Bachelors","FY Diploma","SY Diploma","FY BTech","SY BTech","TY BTech","Final Year BTech","FY Masters","SY Masters","PhD Year 1","PhD Year 2","PhD Year 3","PhD Year 4","PhD Year 5"]},vt={props:{values:Object},data(){return{selectedInstitution:"",editablePrograms:[],availablePrograms:bt}},watch:{"values.classes":{immediate:!0,handler(s){s&&s.length>0&&(this.editablePrograms=[...s])}}},computed:{selectedPrograms(){return this.values.classes||[]}},methods:{isSelected(s){return this.selectedPrograms.some(e=>e.id===s.id)},toggleProgram(s){let e;this.isSelected(s)?e=this.selectedPrograms.filter(r=>r.id!==s.id):e=[...this.selectedPrograms,{id:s.id,className:s.name,subjects:[],divisions:[]}],this.updatePrograms(e)},handleEditProgram(s,e){const r=this.editablePrograms.map(i=>i.id===s?N(O({},i),{className:e}):i);this.updatePrograms(r)},handleDeleteProgram(s){const e=this.editablePrograms.filter(r=>r.id!==s);this.updatePrograms(e)},handleAddProgram(){const s={id:Math.random().toString(),className:"",subjects:[],divisions:[]},e=[...this.editablePrograms,s];this.updatePrograms(e)},handleInstitutionChange(){const s=(ht[this.selectedInstitution]||[]).map(e=>({id:Math.random().toString(),className:e,subjects:[],divisions:[]}));this.updatePrograms(s)},updatePrograms(s){this.editablePrograms=s,this.$emit("update-field-array",{field:"classes",value:s})}}},ft={class:"program-selector-container"},yt={class:"institution-selector"},xt={key:0,class:"programs-list"},Ct=["onUpdate:modelValue","onInput"],St=["onClick"],_t={key:1,class:"quick-select"},wt={class:"program-grid"},Tt=["onClick"];function kt(s,e,r,i,l,n){return u(),c("div",ft,[t("div",yt,[e[4]||(e[4]=t("label",{class:"form-label"},"Select Institution Type",-1)),v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.selectedInstitution=o),class:"form-select",onChange:e[1]||(e[1]=(...o)=>n.handleInstitutionChange&&n.handleInstitutionChange(...o))},e[3]||(e[3]=[t("option",{value:""},"Select Institution",-1),t("option",{value:"school"},"School",-1),t("option",{value:"college"},"College",-1)]),544),[[V,l.selectedInstitution]])]),l.editablePrograms.length>0?(u(),c("div",xt,[e[6]||(e[6]=t("h3",{class:"section-title"},"Classes List",-1)),(u(!0),c(x,null,C(l.editablePrograms,o=>(u(),c("div",{key:o.id,class:"program-item"},[v(t("input",{type:"text","onUpdate:modelValue":d=>o.className=d,class:"program-input",onInput:d=>n.handleEditProgram(o.id,d.target.value)},null,40,Ct),[[S,o.className]]),t("button",{class:"delete-btn",onClick:d=>n.handleDeleteProgram(o.id),title:"Remove class"},e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,St)]))),128))])):y("",!0),l.selectedInstitution===""?(u(),c("div",_t,[e[7]||(e[7]=t("h3",{class:"section-title"},"Quick Select Programs",-1)),t("div",wt,[(u(!0),c(x,null,C(l.availablePrograms,o=>(u(),c("div",{key:o.id,class:T(["program-card",{selected:n.isSelected(o)}]),onClick:d=>n.toggleProgram(o)},m(o.name),11,Tt))),128))])])):y("",!0),t("button",{class:"add-btn",onClick:e[2]||(e[2]=(...o)=>n.handleAddProgram&&n.handleAddProgram(...o))},e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),A(" Add Class ")]))])}const Dt=P(vt,[["render",kt],["__scopeId","data-v-c9292bd6"]]),At={props:{values:Object},data(){return{institutionType:"school",selectedCollegeDivision:"",newCommonSubject:"",newCommonDivision:"",commonSubjectsList:[],commonDivisionsList:[],classesWithText:[],commonSubjects:["Math","Social Studies","Science","English","History","Geography","Physics","Chemistry","Biology","Computer","Civics","Hindi","Marathi","Arabic","Play"],commonDivisions:["A","B","C","D","E","F"],collegeDivisions:{"Computer Science":["Data Structures","Algorithms","Operating Systems","Computer Networks","Database Management Systems","Object-Oriented Programming","Software Engineering","Web Development","Theory of Computation","Artificial Intelligence","Machine Learning","Cyber Security","Cloud Computing"],"Computer Applications":["C Programming","Data Structures","Database Management","Web Programming","Computer Architecture","Operating Systems","Java Programming","Python Programming","Software Engineering","Computer Networks","Mobile App Development"],"Information Technology":["Web Technology","Network Security","Database Systems","Cloud Services","IT Project Management","Data Analytics","Software Testing","System Administration","E-Commerce Systems"],Electronics:["Basic Electronics","Digital Electronics","Microprocessors","Embedded Systems","Circuit Theory","VLSI Design","Communication Systems","Sensors and Instrumentation"],"Mechanical Engineering":["Engineering Mechanics","Thermodynamics","Fluid Mechanics","Strength of Materials","Manufacturing Processes","Machine Design","Heat Transfer","CAD/CAM"],"Civil Engineering":["Engineering Drawing","Surveying","Structural Engineering","Concrete Technology","Soil Mechanics","Transportation Engineering","Construction Management","Environmental Engineering"],"Electrical Engineering":["Electrical Circuits","Power Systems","Control Systems","Electrical Machines","Power Electronics","Renewable Energy","High Voltage Engineering"],"Business Administration":["Principles of Management","Marketing Management","Financial Management","Business Law","Organizational Behaviour","Human Resource Management","Accounting","Entrepreneurship","Business Communication"],Commerce:["Accountancy","Business Economics","Cost Accounting","Auditing","Taxation","Business Law","Statistics","Financial Accounting"],"Accounting and Finance":["Financial Accounting","Cost Accounting","Taxation","Statistics for Finance","Corporate Finance","Banking and Insurance Fundamentals"],"Banking and Insurance":["Banking Operations","Financial Markets","Insurance Fundamentals","Risk Management","Commercial Banking","Customer Relationship Management"],Physics:["Mechanics","Electricity and Magnetism","Optics","Quantum Physics","Thermodynamics","Nuclear Physics","Basic Electronics"],Chemistry:["Organic Chemistry","Inorganic Chemistry","Physical Chemistry","Analytical Techniques","Environmental Chemistry"],Mathematics:["Calculus","Algebra","Differential Equations","Probability and Statistics","Real Analysis","Linear Algebra","Discrete Mathematics"],Biotechnology:["Cell Biology","Genetics","Microbiology","Biochemistry","Molecular Biology","Immunology","Genetic Engineering"],Microbiology:["General Microbiology","Environmental Microbiology","Food Microbiology","Medical Microbiology","Industrial Microbiology"],Psychology:["Introduction to Psychology","Cognitive Psychology","Developmental Psychology","Abnormal Psychology","Social Psychology","Research Methods"],Economics:["Microeconomics","Macroeconomics","Indian Economy","Econometrics","Public Finance","International Economics"],"English Literature":["Poetry","Drama","Novels","Literary Theory","Indian Writing in English","Linguistics","Modern Literature"]},collegeDivisionsList:["Computer Science","Computer Applications","Information Technology","Electronics","Mechanical Engineering","Civil Engineering","Electrical Engineering","Business Administration","Commerce","Accounting & Finance","Banking & Insurance","Physics","Chemistry","Mathematics","Biotechnology","Microbiology","Psychology","Economics","English Literature"]}},computed:{collegeCommonSubjects(){return this.selectedCollegeDivision&&this.collegeDivisions[this.selectedCollegeDivision]?this.collegeDivisions[this.selectedCollegeDivision]:[]}},created(){this.values.commonSubjects&&(this.commonSubjectsList=[...this.values.commonSubjects]),this.values.commonDivisions&&(this.commonDivisionsList=[...this.values.commonDivisions]),this.values.institutionType&&(this.institutionType=this.values.institutionType)},watch:{"values.classes":{immediate:!0,deep:!0,handler(s){this.classesWithText=s.map(e=>N(O({},e),{subjectsText:"",divisionsText:"",specificSubjects:e.subjects?e.subjects.filter(r=>!this.commonSubjectsList.includes(r)):[],specificDivisions:e.divisions?e.divisions.filter(r=>{const i=r.divisionName.split("-").slice(1).join("-");return!this.commonDivisionsList.includes(i)}):[],excludedCommonSubjects:e.excludedCommonSubjects||[],excludedCommonDivisions:e.excludedCommonDivisions||[]}))}},commonSubjectsList:{handler(s){this.$emit("update-field",{field:"commonSubjects",value:s}),this.updateAllClassesWithCommonData()},deep:!0},commonDivisionsList:{handler(s){this.$emit("update-field",{field:"commonDivisions",value:s}),this.updateAllClassesWithCommonData()},deep:!0},institutionType:{handler(s){this.$emit("update-field",{field:"institutionType",value:s}),s==="school"&&(this.selectedCollegeDivision="")}}},methods:{setInstitutionType(s){this.institutionType=s},getCollegeSubjects(s){return this.collegeDivisions[s]||[]},getDivisionOptions(){return this.institutionType==="college"?this.collegeDivisionsList:this.commonDivisions},addCommonSubject(){this.newCommonSubject.trim()&&!this.commonSubjectsList.includes(this.newCommonSubject.trim())&&(this.commonSubjectsList.push(this.newCommonSubject.trim()),this.newCommonSubject="")},removeCommonSubject(s){this.commonSubjectsList.splice(s,1)},isCommonSubjectSelected(s){return this.commonSubjectsList.includes(s)},toggleCommonSubject(s){this.isCommonSubjectSelected(s)?this.removeCommonSubject(this.commonSubjectsList.indexOf(s)):(this.newCommonSubject=s,this.addCommonSubject())},addCommonDivision(){this.newCommonDivision.trim()&&!this.commonDivisionsList.includes(this.newCommonDivision.trim())&&(this.commonDivisionsList.push(this.newCommonDivision.trim()),this.newCommonDivision="")},removeCommonDivision(s){this.commonDivisionsList.splice(s,1)},isCommonDivisionSelected(s){return this.commonDivisionsList.includes(s)},toggleCommonDivision(s){this.isCommonDivisionSelected(s)?this.removeCommonDivision(this.commonDivisionsList.indexOf(s)):(this.newCommonDivision=s,this.addCommonDivision())},addSpecificSubject(s){if(this.classesWithText[s].subjectsText.trim()){const e=[...this.classesWithText];e[s].specificSubjects=[...e[s].specificSubjects,e[s].subjectsText.trim()],e[s].subjectsText="",this.emitUpdatedClasses(e)}},removeSpecificSubject(s,e){const r=[...this.classesWithText];r[s].specificSubjects.splice(e,1),this.emitUpdatedClasses(r)},addSpecificDivision(s){if(this.classesWithText[s].divisionsText.trim()){const e=[...this.classesWithText],r=e[s].className||"Class";e[s].specificDivisions=[...e[s].specificDivisions,{divisionName:`${r}-${e[s].divisionsText.trim()}`}],e[s].divisionsText="",this.emitUpdatedClasses(e)}},removeSpecificDivision(s,e){const r=[...this.classesWithText];r[s].specificDivisions.splice(e,1),this.emitUpdatedClasses(r)},updateClassName(s,e){const r=[...this.classesWithText],i=r[s].className;r[s].className=e,r[s].specificDivisions&&(r[s].specificDivisions=r[s].specificDivisions.map(l=>{const n=l.divisionName.replace(`${i}-`,"");return{divisionName:`${e}-${n}`}})),this.emitUpdatedClasses(r)},updateAllClassesWithCommonData(){const s=this.classesWithText.map(e=>N(O({},e),{specificSubjects:e.specificSubjects||[],specificDivisions:e.specificDivisions||[],excludedCommonSubjects:e.excludedCommonSubjects||[],excludedCommonDivisions:e.excludedCommonDivisions||[]}));this.emitUpdatedClasses(s)},isCommonSubjectExcluded(s,e){var i;return((i=this.classesWithText[s].excludedCommonSubjects)==null?void 0:i.includes(e))||!1},toggleExcludeCommonSubject(s,e){const r=[...this.classesWithText];r[s].excludedCommonSubjects||(r[s].excludedCommonSubjects=[]);const i=r[s].excludedCommonSubjects.indexOf(e);i>=0?r[s].excludedCommonSubjects.splice(i,1):r[s].excludedCommonSubjects.push(e),this.emitUpdatedClasses(r)},isCommonDivisionExcluded(s,e){var i;return((i=this.classesWithText[s].excludedCommonDivisions)==null?void 0:i.includes(e))||!1},toggleExcludeCommonDivision(s,e){const r=[...this.classesWithText];r[s].excludedCommonDivisions||(r[s].excludedCommonDivisions=[]);const i=r[s].excludedCommonDivisions.indexOf(e);i>=0?r[s].excludedCommonDivisions.splice(i,1):r[s].excludedCommonDivisions.push(e),this.emitUpdatedClasses(r)},emitUpdatedClasses(s){this.$emit("update-field-array",{field:"classes",value:s.map(e=>({className:e.className,subjects:[...this.commonSubjectsList.filter(r=>{var i;return!((i=e.excludedCommonSubjects)!=null&&i.includes(r))}),...e.specificSubjects||[]],divisions:[...this.commonDivisionsList.filter(r=>{var i;return!((i=e.excludedCommonDivisions)!=null&&i.includes(r))}).map(r=>({divisionName:`${e.className}-${r}`})),...e.specificDivisions||[]],excludedCommonSubjects:e.excludedCommonSubjects||[],excludedCommonDivisions:e.excludedCommonDivisions||[],specificSubjects:e.specificSubjects||[],specificDivisions:e.specificDivisions||[]}))})}}},jt={class:"bg-white shadow rounded-lg p-6 space-y-6"},Pt={class:"mb-6"},Mt={class:"flex space-x-4"},Et={key:0,class:"mb-6"},Ft=["value"],Gt={key:0,class:"quick-select mt-3"},It={class:"text-sm font-medium text-gray-700 mb-2"},Ot={class:"subject-grid grid grid-cols-3 gap-2"},Nt=["onClick"],Ut={class:"block text-sm font-medium text-gray-700 mb-1"},Lt={class:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md min-h-[42px]"},Vt=["onClick"],Bt=["placeholder"],Yt={key:0,class:"quick-select mt-3"},Rt={class:"subject-grid grid grid-cols-3 gap-2"},qt=["onClick"],Wt={class:"block text-sm font-medium text-gray-700 mb-1"},Ht={class:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md min-h-[42px]"},$t=["onClick"],Kt=["placeholder"],zt={class:"quick-select mt-3"},Qt={class:"text-sm font-medium text-gray-700 mb-2"},Jt={class:"division-grid grid grid-cols-6 gap-2"},Zt=["onClick"],Xt={class:"text-lg font-semibold text-gray-800 border-b pb-2"},es={class:"overflow-x-auto"},ts={class:"min-w-full text-sm text-left text-gray-700"},ss={class:"bg-gray-100"},os={class:"px-4 py-2 font-medium"},is={class:"px-4 py-2 font-medium"},ns={class:"px-4 py-2 font-medium"},rs={class:"px-4 py-2"},ls={class:"px-4 py-2"},as=["onUpdate:modelValue","onInput","placeholder"],ds={class:"px-4 py-2 w-[300px]"},us={class:"flex flex-wrap gap-1 mb-1 min-h-[40px]"},cs=["onClick"],ms=["onClick"],gs={class:"flex gap-2"},ps=["onUpdate:modelValue","onKeydown","placeholder"],bs=["onClick"],hs={class:"px-4 py-2"},vs={class:"flex flex-wrap gap-1 mb-1 min-h-[40px]"},fs=["onClick"],ys=["onClick"],xs={class:"flex gap-2"},Cs=["onUpdate:modelValue","onKeydown","placeholder"],Ss=["onClick"];function _s(s,e,r,i,l,n){return u(),c("div",jt,[t("div",Pt,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Institution Type",-1)),t("div",Mt,[t("button",{onClick:e[0]||(e[0]=o=>n.setInstitutionType("school")),class:T(["px-4 py-2 rounded-md transition-colors",l.institutionType==="school"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," ðŸ« School ",2),t("button",{onClick:e[1]||(e[1]=o=>n.setInstitutionType("college")),class:T(["px-4 py-2 rounded-md transition-colors",l.institutionType==="college"?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," ðŸŽ“ College ",2)])]),l.institutionType==="college"?(u(),c("div",Et,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"College Division",-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.selectedCollegeDivision=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[10]||(e[10]=t("option",{value:""},"Select a division...",-1)),(u(!0),c(x,null,C(l.collegeDivisionsList,o=>(u(),c("option",{key:o,value:o},m(o),9,Ft))),128))],512),[[V,l.selectedCollegeDivision]]),l.selectedCollegeDivision?(u(),c("div",Gt,[t("h3",It,"Quick Select "+m(l.selectedCollegeDivision)+" Subjects",1),t("div",Ot,[(u(!0),c(x,null,C(n.getCollegeSubjects(l.selectedCollegeDivision),o=>(u(),c("div",{key:o,class:T(["subject-card px-3 py-2 border rounded-md text-center cursor-pointer text-sm",{"bg-purple-100 border-purple-300":n.isCommonSubjectSelected(o),"bg-gray-50 hover:bg-gray-100":!n.isCommonSubjectSelected(o)}]),onClick:d=>n.toggleCommonSubject(o)},m(o),11,Nt))),128))])])):y("",!0)])):y("",!0),t("div",null,[t("label",Ut,m(l.institutionType==="college"?"Common Courses for All Programs":"Common Subjects for All Classes"),1),t("div",Lt,[(u(!0),c(x,null,C(l.commonSubjectsList,(o,d)=>(u(),c("span",{key:d,class:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm"},[A(m(o)+" ",1),t("button",{onClick:a=>n.removeCommonSubject(d),class:"ml-1.5 text-blue-500 hover:text-blue-700"}," Ã— ",8,Vt)]))),128)),v(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>l.newCommonSubject=o),onKeydown:e[4]||(e[4]=U((...o)=>n.addCommonSubject&&n.addCommonSubject(...o),["enter"])),onBlur:e[5]||(e[5]=(...o)=>n.addCommonSubject&&n.addCommonSubject(...o)),placeholder:l.institutionType==="college"?"Add courses...":"Add subjects...",class:"flex-1 min-w-[100px] px-2 py-1 border-0 focus:ring-0 focus:outline-none"},null,40,Bt),[[S,l.newCommonSubject]])]),l.institutionType==="school"?(u(),c("div",Yt,[e[12]||(e[12]=t("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Quick Select Subjects",-1)),t("div",Rt,[(u(!0),c(x,null,C(l.commonSubjects,o=>(u(),c("div",{key:o,class:T(["subject-card px-3 py-2 border rounded-md text-center cursor-pointer text-sm",{"bg-blue-100 border-blue-300":n.isCommonSubjectSelected(o),"bg-gray-50 hover:bg-gray-100":!n.isCommonSubjectSelected(o)}]),onClick:d=>n.toggleCommonSubject(o)},m(o),11,qt))),128))])])):y("",!0)]),t("div",null,[t("label",Wt,m(l.institutionType==="college"?"Common Programs for All Classes":"Common Divisions for All Classes"),1),t("div",Ht,[(u(!0),c(x,null,C(l.commonDivisionsList,(o,d)=>(u(),c("span",{key:d,class:"inline-flex items-center px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm"},[A(m(o)+" ",1),t("button",{onClick:a=>n.removeCommonDivision(d),class:"ml-1.5 text-green-500 hover:text-green-700"}," Ã— ",8,$t)]))),128)),v(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=o=>l.newCommonDivision=o),onKeydown:e[7]||(e[7]=U((...o)=>n.addCommonDivision&&n.addCommonDivision(...o),["enter"])),onBlur:e[8]||(e[8]=(...o)=>n.addCommonDivision&&n.addCommonDivision(...o)),placeholder:l.institutionType==="college"?"Add programs...":"Add divisions...",class:"flex-1 min-w-[100px] px-2 py-1 border-0 focus:ring-0 focus:outline-none"},null,40,Kt),[[S,l.newCommonDivision]])]),t("div",zt,[t("h3",Qt,m(l.institutionType==="college"?"Quick Select Programs":"Quick Select Divisions"),1),t("div",Jt,[(u(!0),c(x,null,C(n.getDivisionOptions(),o=>(u(),c("div",{key:o,class:T(["division-card px-3 py-2 border rounded-md text-center cursor-pointer text-sm",{"bg-green-100 border-green-300":n.isCommonDivisionSelected(o),"bg-gray-50 hover:bg-gray-100":!n.isCommonDivisionSelected(o)}]),onClick:d=>n.toggleCommonDivision(o)},m(o),11,Zt))),128))])])]),t("h3",Xt,m(l.institutionType==="college"?"Programs Overview":"Classes Overview"),1),t("div",es,[t("table",ts,[t("thead",ss,[t("tr",null,[e[13]||(e[13]=t("th",{class:"px-4 py-2 font-medium"},"#",-1)),t("th",os,m(l.institutionType==="college"?"Program Name":"Class Name"),1),t("th",is,m(l.institutionType==="college"?"Courses":"Subjects"),1),t("th",ns,m(l.institutionType==="college"?"Student Groups":"Divisions"),1)])]),t("tbody",null,[(u(!0),c(x,null,C(l.classesWithText,(o,d)=>(u(),c("tr",{key:d,class:"border-t hover:bg-gray-50"},[t("td",rs,m(d+1),1),t("td",ls,[v(t("input",{type:"text","onUpdate:modelValue":a=>o.className=a,onInput:a=>n.updateClassName(d,a.target.value),class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:l.institutionType==="college"?"Program name...":"Class name..."},null,40,as),[[S,o.className]])]),t("td",ds,[t("div",us,[(u(!0),c(x,null,C(l.commonSubjectsList,(a,h)=>(u(),c("span",{key:"common-"+h,class:T(["inline-flex items-center px-2 py-1 rounded-full text-xs",n.isCommonSubjectExcluded(d,a)?"bg-red-100 text-red-600":"bg-blue-50 text-blue-600"])},[A(m(a)+" ",1),t("button",{onClick:ne(D=>n.toggleExcludeCommonSubject(d,a),["stop"]),class:"ml-1 text-blue-500 hover:text-blue-700 text-xs"},m(n.isCommonSubjectExcluded(d,a)?"+":"Ã—"),9,cs)],2))),128)),(u(!0),c(x,null,C(o.specificSubjects,(a,h)=>(u(),c("span",{key:"specific-"+h,class:"inline-flex items-center px-2 py-1 rounded-full bg-blue-100 text-blue-800 text-xs"},[A(m(a)+" ",1),t("button",{onClick:D=>n.removeSpecificSubject(d,h),class:"ml-1 text-blue-500 hover:text-blue-700 text-xs"}," Ã— ",8,ms)]))),128))]),t("div",gs,[v(t("input",{type:"text","onUpdate:modelValue":a=>o.subjectsText=a,onKeydown:U(a=>n.addSpecificSubject(d),["enter"]),placeholder:l.institutionType==="college"?"Add program-specific course...":"Add class-specific subject...",class:"flex-1 px-2 py-1 border border-gray-300 rounded text-xs"},null,40,ps),[[S,o.subjectsText]]),t("button",{onClick:a=>n.addSpecificSubject(d),class:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs"}," Add ",8,bs)])]),t("td",hs,[t("div",vs,[(u(!0),c(x,null,C(l.commonDivisionsList,(a,h)=>(u(),c("span",{key:"common-"+h,class:T(["inline-flex items-center px-2 py-1 rounded-full text-xs",n.isCommonDivisionExcluded(d,a)?"bg-red-100 text-red-600 border border-red-300":"bg-green-50 text-green-600"])},[A(m(a)+" ",1),t("button",{onClick:ne(D=>n.toggleExcludeCommonDivision(d,a),["stop"]),class:"ml-1 text-green-500 hover:text-green-700 text-xs"},m(n.isCommonDivisionExcluded(d,a)?"+":"Ã—"),9,fs)],2))),128)),(u(!0),c(x,null,C(o.specificDivisions,(a,h)=>(u(),c("span",{key:"specific-"+h,class:"inline-flex items-center px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs"},[A(m(a.divisionName.split("-").slice(1).join("-"))+" ",1),t("button",{onClick:D=>n.removeSpecificDivision(d,h),class:"ml-1 text-green-500 hover:text-green-700 text-xs"}," Ã— ",8,ys)]))),128))]),t("div",xs,[v(t("input",{type:"text","onUpdate:modelValue":a=>o.divisionsText=a,onKeydown:U(a=>n.addSpecificDivision(d),["enter"]),placeholder:l.institutionType==="college"?"Add program-specific group...":"Add class-specific division...",class:"flex-1 px-2 py-1 border border-gray-300 rounded text-xs"},null,40,Cs),[[S,o.divisionsText]]),t("button",{onClick:a=>n.addSpecificDivision(d),class:"px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-xs"}," Add ",8,Ss)])])]))),128))])])])])}const ws=P(At,[["render",_s],["__scopeId","data-v-352bca2c"]]),Ts={name:"GradingSystem",emits:["update-field","grading-completed"],props:{values:{type:Object,required:!0}},setup(s,{emit:e}){var M,g,p,_;const r=w(((M=s.values.gradingSystem)==null?void 0:M.selectedOption)||""),i=w(((g=s.values.gradingSystem)==null?void 0:g.scaleName)||""),l=w(((p=s.values.gradingSystem)==null?void 0:p.previousScaleName)||""),n=w(((_=s.values.gradingSystem)==null?void 0:_.gradeData)||[{grade_code:"",threshold:"",description:""}]),o=w([]),d=w(!1),a=w(!1);let h=null;const D=L({url:"school.al_ummah.api3.fetch_grading_scales",onSuccess:b=>{b.success&&(o.value=b.grading_scales||[]),d.value=!1},onError:b=>{console.error("Error fetching grading scales:",b),d.value=!1}}),B=w([{value:"school",label:"School (K-12)",grades:[{grade_code:"A+",threshold:95,description:"Outstanding"},{grade_code:"A",threshold:90,description:"Excellent"},{grade_code:"B+",threshold:85,description:"Very Good"},{grade_code:"B",threshold:80,description:"Good"},{grade_code:"C+",threshold:75,description:"Above Average"},{grade_code:"C",threshold:70,description:"Average"},{grade_code:"D",threshold:60,description:"Below Average"},{grade_code:"F",threshold:0,description:"Fail"}]},{value:"college",label:"College/University",grades:[{grade_code:"A",threshold:90,description:"Excellent"},{grade_code:"B",threshold:80,description:"Good"},{grade_code:"C",threshold:70,description:"Satisfactory"},{grade_code:"D",threshold:60,description:"Pass"},{grade_code:"F",threshold:0,description:"Fail"}]}]),G=ee(()=>n.value.length>0&&n.value.every(b=>{var f;return((f=b.grade_code)==null?void 0:f.trim())&&X(b.threshold)})),K=ee(()=>!i.value||!G.value),Y=ee(()=>{var b;return r.value==="previous"?!!l.value:r.value==="manual"?((b=i.value)==null?void 0:b.trim())&&G.value:!0});function R(){d.value=!0,D.fetch()}function z(b){r.value=b,j()}function Q(b){n.value=JSON.parse(JSON.stringify(b.grades)),i.value||(i.value=`${b.label} Grading Scale`),j()}function J(){n.value.push({grade_code:"",threshold:"",description:""}),j()}function Z(b){n.value.length>1&&(n.value.splice(b,1),j())}function X(b){const f=parseFloat(b);return!isNaN(f)&&f>=0&&f<=100&&b!==""}function q(){clearTimeout(h),h=setTimeout(j,300)}function j(){clearTimeout(h);const b=r.value==="manual"?n.value.map(f=>({grade_code:(f.grade_code||"").trim(),threshold:parseFloat(f.threshold)||0,description:(f.description||"").trim()})).filter(f=>f.grade_code&&!isNaN(f.threshold)):null;e("update-field",{field:"gradingSystem",value:{selectedOption:r.value,scaleName:i.value,previousScaleName:l.value,gradeData:b}})}function W(){a.value=!0,!(!Y.value&&r.value!=="")&&(j(),e("grading-completed"))}function H(){r.value="",i.value="",l.value="",n.value=[{grade_code:"",threshold:"",description:""}],a.value=!1,e("update-field",{field:"gradingSystem",value:{selectedOption:"",scaleName:"",previousScaleName:"",gradeData:null}}),e("grading-completed")}return te(()=>{R(),j()}),{selectedOption:r,scaleName:i,previousScaleName:l,manualGrades:n,gradingScales:o,loadingScales:d,instituteTypes:B,showValidation:a,hasValidManualGrades:G,hasManualValidationErrors:K,isFormValid:Y,selectOption:z,applyTemplate:Q,addGrade:J,removeGrade:Z,submitGrading:W,skipGrading:H,debouncedUpdate:q}}},ks={class:"grading-system-container"},Ds={class:"mb-8"},As={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},js={class:"flex items-start space-x-4"},Ps={class:"flex-1"},Ms=["disabled"],Es=["value"],Fs={key:0,class:"mt-2 text-sm text-gray-500"},Gs={key:1,class:"mt-2 text-sm text-gray-500"},Is={key:0,class:"space-y-6"},Os={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ns=["onClick"],Us={class:"flex items-center space-x-3"},Ls={class:"font-medium text-gray-900"},Vs={class:"text-xs text-gray-500 mt-1"},Bs={class:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden"},Ys={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},Rs={class:"flex items-center justify-between"},qs={class:"overflow-x-auto"},Ws={class:"w-full"},Hs={class:"bg-white divide-y divide-gray-200"},$s={class:"px-6 py-4 whitespace-nowrap"},Ks=["onUpdate:modelValue"],zs={class:"px-6 py-4 whitespace-nowrap"},Qs={class:"flex items-center space-x-2"},Js=["onUpdate:modelValue"],Zs={class:"px-6 py-4"},Xs=["onUpdate:modelValue"],eo={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},to=["onClick","disabled"],so={key:0,class:"text-center py-12"},oo={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},io={class:"mt-2 text-sm text-red-600 list-disc list-inside space-y-1"},no={key:0},ro={key:1},lo={class:"mt-8 flex justify-between items-center pt-6 border-t border-gray-200"},ao={class:"flex space-x-3"},uo=["disabled"];function co(s,e,r,i,l,n){return u(),c("div",ks,[e[28]||(e[28]=t("div",{class:"mb-8"},[t("h3",{class:"text-lg font-semibold text-gray-800 mb-2"},"Grading System Setup"),t("p",{class:"text-gray-600"},"Configure your institution's grading system. This step is optional.")],-1)),t("div",Ds,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Select Grading System Option ",-1)),t("div",As,[t("div",{onClick:e[1]||(e[1]=o=>i.selectOption("previous")),class:T(["p-6 border-2 rounded-lg cursor-pointer transition-all duration-200",i.selectedOption==="previous"?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-300 bg-white hover:border-gray-400"])},[t("div",js,[e[14]||(e[14]=t("div",{class:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",Ps,[e[12]||(e[12]=t("h4",{class:"font-semibold text-gray-900 mb-2"},"Use Existing Grading Scale",-1)),e[13]||(e[13]=t("p",{class:"text-sm text-gray-600 mb-3"},"Select from previously created grading scales",-1)),v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.previousScaleName=o),disabled:i.selectedOption!=="previous",class:T(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"bg-gray-100":i.selectedOption!=="previous"}])},[e[11]||(e[11]=t("option",{value:""},"Select a grading scale",-1)),(u(!0),c(x,null,C(i.gradingScales,o=>(u(),c("option",{key:o,value:o},m(o),9,Es))),128))],10,Ms),[[V,i.previousScaleName]]),i.loadingScales?(u(),c("div",Fs," Loading grading scales... ")):i.gradingScales.length===0?(u(),c("div",Gs," No previous grading scales found ")):y("",!0)])])],2),t("div",{onClick:e[2]||(e[2]=o=>i.selectOption("manual")),class:T(["p-6 border-2 rounded-lg cursor-pointer transition-all duration-200",i.selectedOption==="manual"?"border-green-500 bg-green-50 ring-2 ring-green-200":"border-gray-300 bg-white hover:border-gray-400"])},e[15]||(e[15]=[$('<div class="flex items-start space-x-4" data-v-d1923fe5><div class="flex-shrink-0 w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center" data-v-d1923fe5><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d1923fe5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-d1923fe5></path></svg></div><div class="flex-1" data-v-d1923fe5><h4 class="font-semibold text-gray-900 mb-2" data-v-d1923fe5>Create New Grading Scale</h4><p class="text-sm text-gray-600" data-v-d1923fe5>Manually define your grading system</p></div></div>',1)]),2)])]),i.selectedOption==="manual"?(u(),c("div",Is,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[A(" Grading Scale Name "),t("span",{class:"text-red-500"},"*")],-1)),v(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>i.scaleName=o),type:"text",placeholder:"e.g., Standard Grading Scale",class:T(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",{"border-red-300":!i.scaleName&&i.showValidation}])},null,2),[[S,i.scaleName]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Quick Templates (Optional) ",-1)),t("div",Os,[(u(!0),c(x,null,C(i.instituteTypes,o=>(u(),c("button",{key:o.value,onClick:d=>i.applyTemplate(o),class:"p-4 border border-gray-300 rounded-lg text-left bg-white hover:border-gray-400 transition-colors"},[t("div",Us,[e[18]||(e[18]=t("div",{class:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),t("div",null,[t("h4",Ls,m(o.label),1),t("p",Vs,m(o.grades.length)+" pre-defined grades",1)])])],8,Ns))),128))])]),t("div",Bs,[t("div",Ys,[t("div",Rs,[e[21]||(e[21]=t("h4",{class:"text-lg font-semibold text-gray-800"},"Grading Scale",-1)),t("button",{onClick:e[4]||(e[4]=(...o)=>i.addGrade&&i.addGrade(...o)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 text-sm"},e[20]||(e[20]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",null,"Add Grade",-1)]))])]),t("div",qs,[t("table",Ws,[e[24]||(e[24]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Grade Code"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Threshold (%)"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",Hs,[(u(!0),c(x,null,C(i.manualGrades,(o,d)=>(u(),c("tr",{key:d,class:"hover:bg-gray-50 transition-colors"},[t("td",$s,[v(t("input",{"onUpdate:modelValue":a=>o.grade_code=a,type:"text",placeholder:"e.g., A, B, C",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:e[5]||(e[5]=(...a)=>i.debouncedUpdate&&i.debouncedUpdate(...a))},null,40,Ks),[[S,o.grade_code]])]),t("td",zs,[t("div",Qs,[v(t("input",{"onUpdate:modelValue":a=>o.threshold=a,type:"number",min:"0",max:"100",step:"0.1",placeholder:"0-100",class:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:e[6]||(e[6]=(...a)=>i.debouncedUpdate&&i.debouncedUpdate(...a))},null,40,Js),[[S,o.threshold]]),e[22]||(e[22]=t("span",{class:"text-gray-500 text-sm"},"%",-1))])]),t("td",Zs,[v(t("input",{"onUpdate:modelValue":a=>o.description=a,type:"text",placeholder:"e.g., Excellent, Good, Average",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:e[7]||(e[7]=(...a)=>i.debouncedUpdate&&i.debouncedUpdate(...a))},null,40,Xs),[[S,o.description]])]),t("td",eo,[t("button",{onClick:a=>i.removeGrade(d),class:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",disabled:i.manualGrades.length<=1},e[23]||(e[23]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,to)])]))),128))])])]),i.manualGrades.length===0?(u(),c("div",so,[e[25]||(e[25]=t("p",{class:"text-gray-500 mb-4"},"No grades added yet.",-1)),t("button",{onClick:e[8]||(e[8]=(...o)=>i.addGrade&&i.addGrade(...o)),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Add First Grade ")])):y("",!0)]),i.showValidation&&i.hasManualValidationErrors?(u(),c("div",oo,[e[26]||(e[26]=t("div",{class:"flex items-center space-x-2 text-red-700"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("span",{class:"font-medium"},"Please fix the following issues:")],-1)),t("ul",io,[i.scaleName?y("",!0):(u(),c("li",no,"Grading scale name is required")),i.hasValidManualGrades?y("",!0):(u(),c("li",ro,"All grades must have a code and valid threshold (0-100)"))])])):y("",!0)])):y("",!0),t("div",lo,[e[27]||(e[27]=t("div",{class:"text-sm text-gray-500"}," This step is optional. ",-1)),t("div",ao,[t("button",{onClick:e[9]||(e[9]=(...o)=>i.skipGrading&&i.skipGrading(...o)),class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Skip Grading "),t("button",{onClick:e[10]||(e[10]=(...o)=>i.submitGrading&&i.submitGrading(...o)),disabled:!i.isFormValid&&i.selectedOption!=="",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed transition-colors"}," Continue ",8,uo)])])])}const mo=P(Ts,[["render",co],["__scopeId","data-v-d1923fe5"]]),go={name:"FeeStructureCreator",props:{values:Object},data(){return{selectedInstitutionType:"",selectedGlobalCategories:[],newCategoryInputs:[],newAmountInputs:[],feeStructures:[],feeCategories:{school:[{name:"Tuition Fee",suggestedAmount:5e3,editableAmount:5e3},{name:"Admission Fee",suggestedAmount:1e3,editableAmount:1e3},{name:"Annual Charges",suggestedAmount:2e3,editableAmount:2e3},{name:"Sports Fee",suggestedAmount:500,editableAmount:500},{name:"Library Fee",suggestedAmount:300,editableAmount:300},{name:"Lab Fee",suggestedAmount:800,editableAmount:800},{name:"Computer Fee",suggestedAmount:600,editableAmount:600},{name:"Transport Fee",suggestedAmount:3e3,editableAmount:3e3},{name:"Exam Fee",suggestedAmount:400,editableAmount:400},{name:"Development Fee",suggestedAmount:1500,editableAmount:1500},{name:"Activity Fee",suggestedAmount:700,editableAmount:700},{name:"Uniform Fee",suggestedAmount:2500,editableAmount:2500}],college:[{name:"Tuition Fee",suggestedAmount:15e3,editableAmount:15e3},{name:"Admission Fee",suggestedAmount:5e3,editableAmount:5e3},{name:"University Fee",suggestedAmount:3e3,editableAmount:3e3},{name:"Library Fee",suggestedAmount:1e3,editableAmount:1e3},{name:"Lab Fee",suggestedAmount:2e3,editableAmount:2e3},{name:"Computer Fee",suggestedAmount:1500,editableAmount:1500},{name:"Sports Fee",suggestedAmount:800,editableAmount:800},{name:"Exam Fee",suggestedAmount:1e3,editableAmount:1e3},{name:"Development Fee",suggestedAmount:2500,editableAmount:2500},{name:"Identity Card",suggestedAmount:200,editableAmount:200},{name:"Study Material",suggestedAmount:3e3,editableAmount:3e3},{name:"Placement Fee",suggestedAmount:2e3,editableAmount:2e3}]}}},computed:{classes(){return this.values.classes||[]}},watch:{classes:{immediate:!0,handler(s){this.feeStructures=s.map(()=>({components:[]})),this.newCategoryInputs=new Array(s.length).fill(""),this.newAmountInputs=new Array(s.length).fill(0)}},selectedGlobalCategories:{handler(s){this.applyGlobalCategoriesToAll()},deep:!0},feeStructures:{handler(s){this.emitFeeStructures()},deep:!0}},methods:{getCategoryCardClass(s){return this.selectedGlobalCategories.includes(s)?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-blue-300 bg-white hover:shadow-sm"},selectInstitutionType(s){this.selectedInstitutionType=s,this.selectedGlobalCategories=[],this.feeStructures=this.classes.map(()=>({components:[]}))},toggleGlobalCategory(s){const e=this.selectedGlobalCategories.indexOf(s);e>=0?this.selectedGlobalCategories.splice(e,1):this.selectedGlobalCategories.push(s)},updateGlobalCategoryAmount(s,e){const r=this.feeCategories[this.selectedInstitutionType].find(i=>i.name===s);r&&(r.editableAmount=parseFloat(e)||0,this.applyGlobalCategoriesToAll())},validateAmount(s){s.editableAmount<=0&&(s.editableAmount=s.suggestedAmount),this.applyGlobalCategoriesToAll()},updateComponentAmount(s,e,r){const i=this.feeStructures[s].components[e];i&&(i.amount=parseFloat(r)||0,i.total=i.amount)},validateComponentAmount(s){s.amount<=0&&(s.amount=0,s.total=0)},applyGlobalCategoriesToAll(){this.feeStructures=this.feeStructures.map(s=>{const e=s.components.filter(i=>!this.feeCategories[this.selectedInstitutionType].some(l=>l.name===i.fees_category));return{components:[...this.selectedGlobalCategories.map(i=>{const l=this.feeCategories[this.selectedInstitutionType].find(n=>n.name===i);return{fees_category:i,amount:l.editableAmount,discount:0,total:l.editableAmount}}),...e]}})},addCustomCategory(s){var i;const e=(i=this.newCategoryInputs[s])==null?void 0:i.trim(),r=parseFloat(this.newAmountInputs[s])||0;if(e&&r>0){const l=this.feeStructures[s].components.findIndex(n=>n.fees_category.toLowerCase()===e.toLowerCase());l>=0?(this.feeStructures[s].components[l].amount=r,this.feeStructures[s].components[l].total=r):this.feeStructures[s].components.push({fees_category:e,amount:r,discount:0,total:r}),this.newCategoryInputs[s]="",this.newAmountInputs[s]=0}},removeComponent(s,e){const r=this.feeStructures[s].components[e];if(this.feeCategories[this.selectedInstitutionType].some(l=>l.name===r.fees_category)){const l=this.selectedGlobalCategories.indexOf(r.fees_category);l>=0&&this.selectedGlobalCategories.splice(l,1)}else this.feeStructures[s].components.splice(e,1)},calculateClassTotal(s){return this.feeStructures[s].components.reduce((e,r)=>e+r.amount,0)},getTotalCategories(){return this.feeStructures.reduce((s,e)=>s+e.components.length,0)},getGrandTotal(){return this.feeStructures.reduce((s,e)=>s+e.components.reduce((r,i)=>r+i.amount,0),0)},emitFeeStructures(){this.$emit("update-field",{field:"feeStructures",value:this.feeStructures})}}},po={class:"bg-white shadow rounded-lg p-6 space-y-6"},bo={class:"institution-type-section"},ho={class:"grid grid-cols-2 gap-4"},vo={key:0,class:"global-categories-section"},fo={class:"flex items-center justify-between mb-3"},yo={class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},xo={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},Co={class:"flex items-center justify-between mb-1"},So={class:"flex items-center space-x-2 flex-1 min-w-0"},_o=["onClick"],wo={key:0,class:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},To={class:"font-medium text-gray-900 text-xs leading-tight truncate flex-1"},ko={class:"flex items-center space-x-1"},Do=["onUpdate:modelValue","onInput","onBlur","disabled"],Ao={key:1,class:"class-structures-section"},jo={class:"space-y-4"},Po={class:"flex items-center justify-between mb-3"},Mo={class:"flex items-center space-x-3"},Eo={class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},Fo={class:"text-blue-600 font-medium text-sm"},Go={class:"font-semibold text-gray-900"},Io={class:"text-xs text-gray-500"},Oo={class:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full"},No={key:0,class:"space-y-2 mb-3"},Uo={class:"flex items-center space-x-3 flex-1"},Lo={class:"flex-1 min-w-0"},Vo={class:"text-sm font-medium text-gray-800 block truncate"},Bo={class:"flex items-center space-x-1 mt-1"},Yo=["onUpdate:modelValue","onInput","onBlur"],Ro=["onClick"],qo={class:"flex space-x-2"},Wo=["onUpdate:modelValue","onKeydown"],Ho={class:"relative"},$o=["onUpdate:modelValue"],Ko=["onClick","disabled"],zo={key:2,class:"summary-section"},Qo={class:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-100"},Jo={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},Zo={class:"text-center"},Xo={class:"text-2xl font-bold text-blue-600"},ei={class:"font-semibold text-gray-800 capitalize"},ti={class:"text-center"},si={class:"text-2xl font-bold text-green-600"},oi={class:"font-semibold text-gray-800"},ii={class:"text-center"},ni={class:"text-2xl font-bold text-purple-600"},ri={class:"font-semibold text-gray-800"},li={class:"text-center"},ai={class:"text-2xl font-bold text-orange-600"},di={class:"font-semibold text-gray-800"},ui={class:"mt-4 pt-4 border-t border-blue-200"},ci={class:"text-center"},mi={class:"text-lg font-bold text-gray-800"},gi={key:3,class:"text-center py-8"};function pi(s,e,r,i,l,n){return u(),c("div",po,[e[20]||(e[20]=t("h3",{class:"text-lg font-semibold text-gray-800 border-b pb-3"},"Create Fee Structures",-1)),t("div",bo,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Select Institution Type",-1)),t("div",ho,[t("div",{class:T(["institution-card p-4 border-2 rounded-lg cursor-pointer transition-all duration-200",l.selectedInstitutionType==="school"?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-blue-300 bg-white"]),onClick:e[0]||(e[0]=o=>n.selectInstitutionType("school"))},e[2]||(e[2]=[$('<div class="text-center" data-v-1be8d1ba><div class="w-10 h-10 mx-auto mb-2 bg-blue-100 rounded-full flex items-center justify-center" data-v-1be8d1ba><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1be8d1ba><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z" data-v-1be8d1ba></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l9 5m-9-5v8" data-v-1be8d1ba></path></svg></div><h4 class="font-medium text-gray-900 text-sm" data-v-1be8d1ba>School</h4><p class="text-xs text-gray-500 mt-1" data-v-1be8d1ba>Primary &amp; Secondary</p></div>',1)]),2),t("div",{class:T(["institution-card p-4 border-2 rounded-lg cursor-pointer transition-all duration-200",l.selectedInstitutionType==="college"?"border-green-500 bg-green-50 shadow-sm":"border-gray-200 hover:border-green-300 bg-white"]),onClick:e[1]||(e[1]=o=>n.selectInstitutionType("college"))},e[3]||(e[3]=[$('<div class="text-center" data-v-1be8d1ba><div class="w-10 h-10 mx-auto mb-2 bg-green-100 rounded-full flex items-center justify-center" data-v-1be8d1ba><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1be8d1ba><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-1be8d1ba></path></svg></div><h4 class="font-medium text-gray-900 text-sm" data-v-1be8d1ba>College</h4><p class="text-xs text-gray-500 mt-1" data-v-1be8d1ba>Higher Education</p></div>',1)]),2)])]),l.selectedInstitutionType?(u(),c("div",vo,[t("div",fo,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Common Fee Categories",-1)),t("span",yo,m(l.selectedGlobalCategories.length)+" selected ",1)]),t("div",xo,[(u(!0),c(x,null,C(l.feeCategories[l.selectedInstitutionType],o=>(u(),c("div",{key:o.name,class:T(["category-card p-2 border rounded-lg transition-all duration-200 h-20 flex flex-col",n.getCategoryCardClass(o.name)])},[t("div",Co,[t("div",So,[t("div",{class:T(["w-4 h-4 rounded border flex items-center justify-center cursor-pointer transition-colors",l.selectedGlobalCategories.includes(o.name)?"bg-blue-500 border-blue-500":"bg-white border-gray-300"]),onClick:d=>n.toggleGlobalCategory(o.name)},[l.selectedGlobalCategories.includes(o.name)?(u(),c("svg",wo,e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)]))):y("",!0)],10,_o),t("h4",To,m(o.name),1)])]),t("div",ko,[e[7]||(e[7]=t("span",{class:"text-gray-500 text-xs flex-shrink-0"},"â‚¹",-1)),v(t("input",{type:"number","onUpdate:modelValue":d=>o.editableAmount=d,onInput:d=>n.updateGlobalCategoryAmount(o.name,d.target.value),onBlur:d=>n.validateAmount(o),disabled:!l.selectedGlobalCategories.includes(o.name),class:T(["w-full px-1 py-0.5 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:text-gray-500",l.selectedGlobalCategories.includes(o.name)?"bg-white text-gray-900":"bg-gray-50 text-gray-400"])},null,42,Do),[[S,o.editableAmount]])])],2))),128))])])):y("",!0),l.selectedInstitutionType&&n.classes.length>0?(u(),c("div",Ao,[e[12]||(e[12]=t("h4",{class:"text-md font-semibold text-gray-800 mb-4"},"Class-wise Fee Structures",-1)),t("div",jo,[(u(!0),c(x,null,C(n.classes,(o,d)=>(u(),c("div",{key:d,class:"class-fee-card p-4 border border-gray-200 rounded-lg bg-white shadow-sm"},[t("div",Po,[t("div",Mo,[t("div",Eo,[t("span",Fo,m(d+1),1)]),t("div",null,[t("h5",Go,m(o.className),1),t("p",Io,"Total: â‚¹"+m(n.calculateClassTotal(d).toLocaleString()),1)])]),t("span",Oo,m(l.feeStructures[d].components.length)+" categories ",1)]),l.feeStructures[d].components.length>0?(u(),c("div",No,[(u(!0),c(x,null,C(l.feeStructures[d].components,(a,h)=>(u(),c("div",{key:h,class:"component-item flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100"},[t("div",Uo,[e[9]||(e[9]=t("div",{class:"w-2 h-2 bg-blue-500 rounded-full"},null,-1)),t("div",Lo,[t("span",Vo,m(a.fees_category),1),t("div",Bo,[e[8]||(e[8]=t("span",{class:"text-gray-500 text-xs"},"â‚¹",-1)),v(t("input",{type:"number","onUpdate:modelValue":D=>a.amount=D,onInput:D=>n.updateComponentAmount(d,h,D.target.value),onBlur:D=>n.validateComponentAmount(a),class:"w-20 px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,Yo),[[S,a.amount]])])])]),t("button",{onClick:D=>n.removeComponent(d,h),class:"text-red-400 hover:text-red-600 transition-colors p-1",title:"Remove category"},e[10]||(e[10]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ro)]))),128))])):y("",!0),t("div",qo,[v(t("input",{"onUpdate:modelValue":a=>l.newCategoryInputs[d]=a,onKeydown:U(a=>n.addCustomCategory(d),["enter"]),placeholder:"Custom category name...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,40,Wo),[[S,l.newCategoryInputs[d]]]),t("div",Ho,[e[11]||(e[11]=t("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm"},"â‚¹",-1)),v(t("input",{"onUpdate:modelValue":a=>l.newAmountInputs[d]=a,type:"number",placeholder:"Amount",class:"w-24 pl-8 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,$o),[[S,l.newAmountInputs[d]]])]),t("button",{onClick:a=>n.addCustomCategory(d),disabled:!l.newCategoryInputs[d]||!l.newAmountInputs[d],class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-sm font-medium transition-colors"}," Add ",8,Ko)])]))),128))])])):y("",!0),l.selectedInstitutionType&&n.classes.length>0?(u(),c("div",zo,[e[18]||(e[18]=t("h4",{class:"text-md font-semibold text-gray-800 mb-3"},"Summary",-1)),t("div",Qo,[t("div",Jo,[t("div",Zo,[t("div",Xo,m(l.selectedInstitutionType==="school"?"ðŸ«":"ðŸŽ“"),1),e[13]||(e[13]=t("div",{class:"text-gray-600 mt-1"},"Institution",-1)),t("div",ei,m(l.selectedInstitutionType),1)]),t("div",ti,[t("div",si,m(n.classes.length),1),e[14]||(e[14]=t("div",{class:"text-gray-600 mt-1"},"Total Classes",-1)),t("div",oi,m(n.classes.length),1)]),t("div",ii,[t("div",ni,m(l.selectedGlobalCategories.length),1),e[15]||(e[15]=t("div",{class:"text-gray-600 mt-1"},"Global Categories",-1)),t("div",ri,m(l.selectedGlobalCategories.length),1)]),t("div",li,[t("div",ai,m(n.getTotalCategories()),1),e[16]||(e[16]=t("div",{class:"text-gray-600 mt-1"},"Total Categories",-1)),t("div",di,m(n.getTotalCategories()),1)])]),t("div",ui,[t("div",ci,[t("div",mi,"â‚¹"+m(n.getGrandTotal().toLocaleString()),1),e[17]||(e[17]=t("div",{class:"text-gray-600 text-sm"},"Grand Total Across All Classes",-1))])])])])):y("",!0),l.selectedInstitutionType&&n.classes.length===0?(u(),c("div",gi,e[19]||(e[19]=[$('<div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center" data-v-1be8d1ba><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1be8d1ba><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-1be8d1ba></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2" data-v-1be8d1ba>No Classes Found</h4><p class="text-gray-500 text-sm" data-v-1be8d1ba>Please go back and set up classes first to create fee structures.</p>',3)]))):y("",!0)])}const bi=P(go,[["render",pi],["__scopeId","data-v-1be8d1ba"]]),hi={name:"MultiStepForm",components:{EmailAccountSetup:we,AcademicYearTerms:it,UsePreviousData:pt,ProgramSelection:Dt,SubjectsDivisions:ws,GradingSystem:mo,FeeStructureCreator:bi},setup(){const s=w(0),e=w([]),r=w(!1),i=w(!1),l=w(!1),n=w(""),o=w([]),d=w(!1),a=pe({email:"",googleAppPassword:"",academicYear:"",academicYearStart:"",academicYearEnd:"",numberOfTerms:"",terms:[],selectedTerm:"",classes:[],subjects:[],divisions:[],commonSubjects:[],commonDivisions:[],dontCreateClasses:!1,feeStructures:[],setAsCurrent:!1,gradingSystem:{selectedOption:"",scaleName:"",previousScaleName:"",gradeData:null},gradingCompleted:!1}),h=w([{title:"Email Account Setup (Optional)",component:"EmailAccountSetup"},{title:"Academic Year & Terms",component:"AcademicYearTerms"},{title:"Grading System (Optional)",component:"GradingSystem"},{title:"Use Previous Data",component:"UsePreviousData"},{title:"Select Institution Type & Classes",component:"ProgramSelection"},{title:"Create Fee Structures",component:"FeeStructureCreator"},{title:"Subjects and Divisions",component:"SubjectsDivisions"}]),D=L({url:"school.al_ummah.api3.get_previous_data",params:{values:{}},onSuccess:g=>{e.value=Array.isArray(g)?g.map(p=>N(O({},p),{academicYear:p.json_data?JSON.parse(p.json_data).academicYear:""})):[]},onError:g=>{console.error("Error fetching previous data:",g),e.value=[]}}),B=L({url:"school.al_ummah.api3.create_email_account",params:{email_id:"",password:""},onSuccess:()=>{alert("Email account setup successfully!")},onError:g=>{console.error("Error setting up email account:",g),alert("Error setting up email account.")}}),G=L({url:"school.al_ummah.api3.quick_setup",params:{values:{}},onSuccess:()=>{l.value=!0,s.value++,r.value=!1,i.value=!0},onError:g=>{var p;l.value=!1,n.value=((p=g.messages)==null?void 0:p[0])||"An error occurred while submitting the form.",console.error("Submission error:",g),r.value=!1,i.value=!0}});function K(){a.gradingCompleted=!0,q()}function Y({classNames:g}){const p=[...a.classes],_=p.reduce((f,k)=>Math.max(f,k.classIndex||0),0),b=g.map((f,k)=>({className:f,subjects:[],divisions:[{divisionName:""}],classIndex:_+k+1}));a.classes=[...p,...b]}function R(){D.reload()}function z({field:g,value:p,parent:_=null}){_&&a[_]?a[_][g]=p:a[g]=p}function Q({field:g,index:p,subField:_,value:b}){p!==void 0&&_?a[g][p][_]=b:p!==void 0?a[g][p]=b:a[g]=b}function J(){return ie(this,null,function*(){const{email:g,googleAppPassword:p}=a;if(!g||!p){alert("Please provide both email and Google app password.");return}B.update({params:{email_id:g,password:p}}),B.submit()})}function Z(){const g=parseInt(a.numberOfTerms,10),p=new Date(a.academicYearStart),_=new Date(a.academicYearEnd);if(!g||g<=0){alert("Please enter a valid number of terms.");return}if(isNaN(p.getTime())){alert("Please enter valid 'From' date.");return}if(isNaN(_.getTime())){alert("Please enter valid 'To' date.");return}if(p>=_){alert("'From' date must be before 'To' date.");return}const b=Math.ceil((_-p)/(1e3*60*60*24)),f=Math.floor(b/g),k=[];let E=new Date(p);for(let I=0;I<g;I++){const F=new Date(E);F.setDate(E.getDate()+f-1),I===g-1&&F.setTime(_.getTime()),k.push({name:`Term ${I+1}`,startDate:E.toISOString().split("T")[0],endDate:F.toISOString().split("T")[0]}),E=new Date(F),E.setDate(E.getDate()+1)}a.terms=k}function X(g){if(!(g!=null&&g.json_data)){console.error("Invalid or missing previous data");return}try{const p=JSON.parse(g.json_data);a.classes=p.classes||[],a.subjects=p.subjects||[]}catch(p){console.error("Error parsing previous data:",p),alert("Failed to load previous data. Please try another selection.")}}function q(){s.value<h.value.length-1?(s.value++,d.value=!1):W()}function j(){s.value>0&&(s.value--,d.value=!1)}function W(){r.value=!0,i.value=!1,l.value=!1,n.value="",d.value=!1;const p=H(a,["selectedTerm","commonSubjects","commonDivisions","divisions","institutionName","logo","dontCreateClasses","subjects","terms","email","googleAppPassword","classes","gradingSystem","gradingCompleted","setAsCurrent"]);if(p.length>0){o.value=p,d.value=!0,r.value=!1,window.scrollTo({top:0,behavior:"smooth"});return}G.update({params:{values:O({},a)}}),G.submit()}function H(g,p){const _=[];return Object.entries(g).forEach(([b,f])=>{if(!p.includes(b)){if(Array.isArray(f))if(f.length===0){const k=M(b);_.push(`${k} list is empty`)}else f.forEach((k,E)=>{typeof k=="object"&&k!==null&&Object.entries(k).forEach(([I,F])=>{if(!F||typeof F=="string"&&F.trim()===""){const re=M(I),le=M(b);_.push(`${le} ${E+1}: ${re} is required`)}})});else if(!f||typeof f=="string"&&f.trim()===""){const k=M(b);_.push(`${k} is required`)}}}),_}function M(g){return g.replace(/([A-Z])/g," $1").replace(/^./,p=>p.toUpperCase()).replace(/([A-Z])/g," $1").trim()}return te(()=>{R()}),{currentStep:s,previousDataList:e,isSubmitting:r,showResultMessage:i,submitSuccess:l,errorMessage:n,missingFields:o,showMissingFields:d,formValues:a,steps:h,quickSetupResource:G,autoCreateClasses:Y,fetchPreviousData:R,updateField:z,updateFieldArray:Q,submitEmailAccount:J,autoCreateTerms:Z,usePreviousData:X,handleGradingCompleted:K,nextStep:q,prevStep:j,submitForm:W,checkMissingFields:H,formatFieldName:M}}},vi={class:"p-4 max-w-4xl mx-auto"},fi={key:0},yi={class:"text-2xl font-semibold mb-6"},xi={key:0,class:"missing-fields-alert"},Ci={class:"alert-header"},Si={class:"alert-content"},_i={class:"missing-fields-list"},wi={class:"flex justify-between gap-4"},Ti=["disabled"],ki={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Di={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ai={class:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full text-center"},ji={key:0,class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100"},Pi={key:1,class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},Mi={class:"mt-3 text-lg font-medium text-gray-900"},Ei={class:"mt-2 text-sm text-gray-500"},Fi={class:"mt-5"},Gi={key:3,class:"text-center mt-10"};function Ii(s,e,r,i,l,n){return u(),c("div",vi,[i.currentStep<i.steps.length?(u(),c("div",fi,[t("h2",yi,m(i.steps[i.currentStep].title),1),i.missingFields.length>0&&i.showMissingFields?(u(),c("div",xi,[t("div",Ci,[e[5]||(e[5]=t("div",{class:"alert-icon"},[t("svg",{class:"icon",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})])],-1)),e[6]||(e[6]=t("h3",{class:"alert-title"},"Required Information Missing",-1)),t("button",{onClick:e[0]||(e[0]=o=>i.showMissingFields=!1),class:"close-button"},e[4]||(e[4]=[t("svg",{class:"close-icon",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1)]))]),t("div",Si,[e[8]||(e[8]=t("p",{class:"alert-description"},"Please fill in the following required fields before proceeding:",-1)),t("ul",_i,[(u(!0),c(x,null,C(i.missingFields,(o,d)=>(u(),c("li",{key:d,class:"missing-field-item"},[e[7]||(e[7]=t("span",{class:"field-bullet"},"â€¢",-1)),A(" "+m(o),1)]))),128))])])])):y("",!0),(u(),be(he(i.steps[i.currentStep].component),{values:i.formValues,previousDataList:i.previousDataList,onUpdateField:i.updateField,onUpdateFieldArray:i.updateFieldArray,onSubmitEmail:i.submitEmailAccount,onAutoCreateTerms:i.autoCreateTerms,onAutoCreateClasses:i.autoCreateClasses,onUsePreviousData:i.usePreviousData,onGradingCompleted:i.handleGradingCompleted,class:"mb-6"},null,40,["values","previousDataList","onUpdateField","onUpdateFieldArray","onSubmitEmail","onAutoCreateTerms","onAutoCreateClasses","onUsePreviousData","onGradingCompleted"])),t("div",wi,[i.currentStep>0?(u(),c("button",{key:0,onClick:e[1]||(e[1]=(...o)=>i.prevStep&&i.prevStep(...o)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300"}," Back ")):y("",!0),t("button",{onClick:e[2]||(e[2]=(...o)=>i.nextStep&&i.nextStep(...o)),class:"ml-auto px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:i.isSubmitting||i.quickSetupResource.loading},m(i.currentStep===i.steps.length-1?i.isSubmitting?"Submitting...":"Submit":"Next"),9,Ti)])])):y("",!0),i.isSubmitting?(u(),c("div",ki,e[9]||(e[9]=[t("div",{class:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full text-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),t("h3",{class:"text-lg font-medium text-gray-900"},"Submitting your data..."),t("p",{class:"mt-2 text-sm text-gray-500"},"Please wait while we process your information.")],-1)]))):y("",!0),i.showResultMessage?(u(),c("div",Di,[t("div",Ai,[i.submitSuccess?(u(),c("div",ji,e[10]||(e[10]=[t("svg",{class:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]))):(u(),c("div",Pi,e[11]||(e[11]=[t("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))),t("h3",Mi,m(i.submitSuccess?"Form Submitted Successfully!":"Submission Failed"),1),t("p",Ei,m(i.submitSuccess?"Your data has been successfully processed.":i.errorMessage||"An error occurred while submitting the form."),1),t("div",Fi,[t("button",{onClick:e[3]||(e[3]=o=>i.showResultMessage=!1),class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," OK ")])])])):y("",!0),i.currentStep>=i.steps.length&&!i.isSubmitting&&!i.showResultMessage?(u(),c("div",Gi,e[12]||(e[12]=[t("h2",{class:"text-2xl font-semibold text-green-600"},"Form Submitted Successfully!",-1)]))):y("",!0)])}const Oi=P(hi,[["render",Ii],["__scopeId","data-v-0398977c"]]),Ni={components:{MultiStepForm:Oi}},Ui={class:"app-container"};function Li(s,e,r,i,l,n){const o=fe("MultiStepForm");return u(),c("div",Ui,[ve(o)])}const Ri=P(Ni,[["render",Li]]);export{Ri as default};
